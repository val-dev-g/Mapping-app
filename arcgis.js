// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.14/esri/copyright.txt for details.
//>>built
(function(c,a){var m,e=function(){return"undefined"!==typeof u&&"function"!==typeof u?u:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this}(),l=function(){},h=function(b){for(var d in b)return 0;return 1},g={}.toString,d=function(b){return"[object Function]"==g.call(b)},n=function(b){return"[object String]"==g.call(b)},b=function(b){return"[object Array]"==g.call(b)},p=function(b,d){if(b)for(var f=0;f<b.length;)d(b[f++])},k=function(b,d){for(var f in d)b[f]=d[f];return b},q=function(b,
    d){return k(Error(b),{src:"dojoLoader",info:d})},f=1,r=function(){return"_"+f++},t=function(b,d,f){return Y(b,d,f,0,t)},u=e,w=u.document,v=w&&w.createElement("DiV"),x=t.has=function(b){return d(z[b])?z[b]=z[b](u,w,v):z[b]},z=x.cache=a.hasCache;d(c)&&(c=c(e));x.add=function(b,d,f,a){(void 0===z[b]||a)&&(z[b]=d);return f&&x(b)};x.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);x("host-webworker")&&(k(a.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,
    "dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),a.loaderPatch={injectUrl:function(b,d){try{importScripts(b),d()}catch(Da){console.info("failed to load resource ("+b+")"),console.error(Da)}}});for(var A in c.has)x.add(A,c.has[A],0,1);t.async=1;var y=x("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");t.eval=function(b,d){return y(b+"\r\n//# sourceURL\x3d"+d)};var B={},D=t.signal=function(d,f){d=B[d];p(d&&d.slice(0),function(d){d.apply(null,
    b(f)?f:[f])})};A=t.on=function(b,d){var f=B[b]||(B[b]=[]);f.push(d);return{remove:function(){for(var b=0;b<f.length;b++)if(f[b]===d){f.splice(b,1);break}}}};var E=[],C={},F=[],I={},G=t.map={},J=[],H={},N="",L={},M={},e={},O=0;if(!x("foreign-loader"))var T=function(b,d){d=!1!==d;var f,a,c,k;for(f in M)a=M[f],(c=f.match(/^url\:(.+)/))?L["url:"+ra(c[1],b)]=a:"*now"==f?k=a:"*noref"!=f&&(c=ea(f,b,!0),L[c.mid]=L["url:"+c.url]=a);k&&k(ba(b));d&&(M={})};var ia=function(b){return b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,
    function(b){return"\\"+b})},la=function(b,d){d.splice(0,d.length);for(var f in b)d.push([f,b[f],new RegExp("^"+ia(f)+"(/|$)"),f.length]);d.sort(function(b,d){return d[3]-b[3]});return d},sa=function(b,d){p(b,function(b){d.push([n(b[0])?new RegExp("^"+ia(b[0])+"$"):b[0],b[1]])})},ca=function(b){var d=b.name;d||(d=b,b={name:d});b=k({main:"main"},b);b.location=b.location?b.location:d;b.packageMap&&(G[d]=b.packageMap);b.main.indexOf("./")||(b.main=b.main.substring(2));I[d]=b},U=[],aa=function(b,d,f){for(var a in b){"waitSeconds"==
    a&&(t.waitms=1E3*(b[a]||0));"cacheBust"==a&&(N=b[a]?n(b[a])?b[a]:(new Date).getTime()+"":"");if("baseUrl"==a||"combo"==a)t[a]=b[a];b[a]!==z&&(t.rawConfig[a]=b[a],"has"!=a&&x.add("config-"+a,b[a],0,d))}t.baseUrl||(t.baseUrl="./");/\/$/.test(t.baseUrl)||(t.baseUrl+="/");for(a in b.has)x.add(a,b.has[a],0,d);p(b.packages,ca);for(var c in b.packagePaths)p(b.packagePaths[c],function(b){var d=c+"/"+b;n(b)&&(b={name:b});b.location=d;ca(b)});la(k(G,b.map),J);p(J,function(b){b[1]=la(b[1],[]);"*"==b[0]&&(J.star=
    b)});la(k(C,b.paths),F);sa(b.aliases,E);if(!x("foreign-loader")){if(d)U.push({config:b.config});else for(a in b.config)d=ka(a,f),d.config=k(d.config||{},b.config[a]);b.cache&&(T(),M=b.cache,T(0,!!b.cache["*noref"]))}D("config",[b,t.rawConfig])};if(x("dojo-cdn")){var ma=w.getElementsByTagName("script");m=0;for(var P,V,X,ja;m<ma.length;)if(P=ma[m++],(X=P.getAttribute("src"))&&(ja=X.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(V=ja[3]||"",a.baseUrl=a.baseUrl||V,O=P),X=P.getAttribute("data-dojo-config")||
    P.getAttribute("djConfig"))e=t.eval("({ "+X+" })","data-dojo-config"),O=P}t.rawConfig={};aa(a,1);x("dojo-cdn")&&((I.dojo.location=V)&&(V+="/"),I.dijit.location=V+"../dijit/",I.dojox.location=V+"../dojox/");aa(c,1);aa(e,1);if(!x("foreign-loader"))var da=function(b){wa(function(){p(b.deps,Ea)})},Y=function(d,f,a,c,p){var e;if(n(d)){if((e=ka(d,c,!0))&&e.executed)return e.result;throw q("undefinedModule",d);}b(d)||(aa(d,0,c),d=f,f=a);if(b(d))if(d.length){a="require*"+r();for(var g,u=[],h=0;h<d.length;)g=
    d[h++],u.push(ka(g,c));e=k(K("",a,0,""),{injected:2,deps:u,def:f||l,require:c?c.require:t,gc:1});H[e.mid]=e;da(e);var v=ta&&!0;wa(function(){xa(e,v)});e.executed||Q.push(e);ya()}else f&&f();return p},ba=function(b){if(!b)return t;var d=b.require;d||(d=function(f,a,c){return Y(f,a,c,b,d)},b.require=k(d,t),d.module=b,d.toUrl=function(d){return ra(d,b)},d.toAbsMid=function(d){return qa(d,b)});return d},Q=[],S=[],W={},fa=function(b){b.injected=1;W[b.mid]=1;b.url&&(W[b.url]=b.pack||1);Ka()},Z=function(b){b.injected=
    2;delete W[b.mid];b.url&&delete W[b.url];h(W)&&La()},oa=t.idle=function(){return!S.length&&h(W)&&!Q.length&&!ta};var ga=function(b,d){if(d)for(var f=0;f<d.length;f++)if(d[f][2].test(b))return d[f];return 0},ha=function(b){var d=[],f,a;for(b=b.replace(/\\/g,"/").split("/");b.length;)f=b.shift(),".."==f&&d.length&&".."!=a?(d.pop(),a=d[d.length-1]):"."!=f&&d.push(a=f);return d.join("/")},K=function(b,d,f,a){return{pid:b,mid:d,pack:f,url:a,executed:0,def:0}},R=function(b,f,a,c,k,n,e,r,g,u){var h,t,v,
    l;l=/^\./.test(b);if(/(^\/)|(\:)|(\.js$)/.test(b)||l&&!f)return K(0,b,0,b);b=ha(l?f.mid+"/../"+b:b);if(/^\./.test(b))throw q("irrationalPath",b);u||l||!n.star||(v=ga(b,n.star[1]));!v&&f&&(v=(v=ga(f.mid,n))&&ga(b,v[1]));v&&(b=v[1]+b.substring(v[3]));f=(ja=b.match(/^([^\/]+)(\/(.+))?$/))?ja[1]:"";(h=a[f])?b=f+"/"+(t=ja[3]||h.main):f="";var w=0;p(r,function(f){var a=b.match(f[0]);a&&0<a.length&&(w=d(f[1])?b.replace(f[0],f[1]):f[1])});if(w)return R(w,0,a,c,k,n,e,r,g);if(a=c[b])return g?K(a.pid,a.mid,
    a.pack,a.url):c[b];c=(v=ga(b,e))?v[1]+b.substring(v[3]):f?("/"===h.location.slice(-1)?h.location.slice(0,-1):h.location)+"/"+t:b;/(^\/)|(\:)/.test(c)||(c=k+c);return K(f,b,h,ha(c+".js"))},ea=function(b,d,f){return R(b,d,I,H,t.baseUrl,J,F,E,void 0,f)};if(!x("foreign-loader"))var na=function(b,d,f){return b.normalize?b.normalize(d,function(b){return qa(b,f)}):qa(d,f)},pa=0,ka=function(b,d,f){var a,c;(a=b.match(/^(.+?)\!(.*)$/))?(c=ka(a[1],d,f),5!==c.executed||c.load||za(c),c.load?(a=na(c,a[2],d),b=
    c.mid+"!"+(c.dynamic?++pa+"!":"")+a):(a=a[2],b=c.mid+"!"+ ++pa+"!waitingForPlugin"),b={plugin:c,mid:b,req:ba(d),prid:a}):b=ea(b,d);return H[b.mid]||!f&&(H[b.mid]=b)};var qa=t.toAbsMid=function(b,d){return ea(b,d).mid},ra=t.toUrl=function(b,d){d=ea(b+"/x",d);var f=d.url;return Fa(0===d.pid?b:f.substring(0,f.length-5))};if(!x("foreign-loader")){var Ga={injected:2,executed:5,def:3,result:3};V=function(b){return H[b]=k({mid:b},Ga)};var Ma=V("require"),Na=V("exports"),Oa=V("module"),ua={},Aa=0,za=function(b){var d=
    b.result;b.dynamic=d.dynamic;b.normalize=d.normalize;b.load=d.load;return b},Pa=function(b){var d={};p(b.loadQ,function(f){var a=na(b,f.prid,f.req.module),c=b.dynamic?f.mid.replace(/waitingForPlugin$/,a):b.mid+"!"+a,a=k(k({},f),{mid:c,prid:a,injected:0});H[c]&&H[c].injected||Ha(H[c]=a);d[f.mid]=H[c];Z(f);delete H[f.mid]});b.loadQ=0;var f=function(b){for(var f=b.deps||[],a=0;a<f.length;a++)(b=d[f[a].mid])&&(f[a]=b)},a;for(a in H)f(H[a]);p(Q,f)},Ba=function(b){t.trace("loader-finish-exec",[b.mid]);
    b.executed=5;b.defOrder=Aa++;b.loadQ&&(za(b),Pa(b));for(m=0;m<Q.length;)Q[m]===b?Q.splice(m,1):m++;/^require\*/.test(b.mid)&&delete H[b.mid]},Qa=[],xa=function(b,f){if(4===b.executed)return t.trace("loader-circular-dependency",[Qa.concat(b.mid).join("-\x3e")]),!b.def||f?ua:b.cjs&&b.cjs.exports;if(!b.executed){if(!b.def)return ua;var a=b.mid,c=b.deps||[],k,p=[],q=0;for(b.executed=4;k=c[q++];){k=k===Ma?ba(b):k===Na?b.cjs.exports:k===Oa?b.cjs:xa(k,f);if(k===ua)return b.executed=0,t.trace("loader-exec-module",
    ["abort",a]),ua;p.push(k)}t.trace("loader-run-factory",[b.mid]);f=b.def;p=d(f)?f.apply(null,p):f;b.result=void 0===p&&b.cjs?b.cjs.exports:p;Ba(b)}return b.result},ta=0,wa=function(b){try{ta++,b()}catch(Ja){throw Ja;}finally{ta--}oa()&&D("idle",[])},ya=function(){ta||wa(function(){for(var b,d,f=0;f<Q.length;)b=Aa,d=Q[f],xa(d),b!=Aa?f=0:f++})}}var Fa="function"==typeof c.fixupUrl?c.fixupUrl:function(b){b+="";return b+(N?(/\?/.test(b)?"\x26":"?")+N:"")};void 0===x("dojo-loader-eval-hint-url")&&x.add("dojo-loader-eval-hint-url",
    1);var Ha=function(b){var d=b.plugin;5!==d.executed||d.load||za(d);var f=function(d){b.result=d;Z(b);Ba(b);ya()};d.load?d.load(b.prid,b.req,f):d.loadQ?d.loadQ.push(b):(d.loadQ=[b],Q.unshift(d),Ea(d))},va=0,Ra=function(b,d){x("config-stripStrict")&&(b=b.replace(/(["'])use strict\1/g,""));b===va?va.call(null):t.eval(b,x("dojo-loader-eval-hint-url")?d.url:d.mid)},Ea=function(b){var d=b.mid,f=b.url;if(!(b.executed||b.injected||W[d]||b.url&&(b.pack&&W[b.url]===b.pack||1==W[b.url])))if(fa(b),b.plugin)Ha(b);
    else{var a=function(){Sa(b);if(2!==b.injected){if(x("dojo-enforceDefine")){D("error",q("noDefine",b));return}Z(b);k(b,Ga);t.trace("loader-define-nonmodule",[b.url])}ya()};(va=L[d]||L["url:"+b.url])?(t.trace("loader-inject",["cache",b.mid,f]),Ra(va,b),a()):(t.trace("loader-inject",["script",b.mid,f]),t.injectUrl(Fa(f),a,b))}},Ia=function(b,f,a){t.trace("loader-define-module",[b.mid,f]);if(2===b.injected)return D("error",q("multipleDefine",b)),b;k(b,{deps:f,def:a,cjs:{id:b.mid,uri:b.url,exports:b.result=
    {},setExports:function(d){b.cjs.exports=d},config:function(){return b.config}}});for(var c=0;f[c];c++)f[c]=ka(f[c],b);Z(b);d(a)||f.length||(b.result=a,Ba(b));return b},Sa=function(b,d){for(var f=[],a,c;S.length;)c=S.shift(),d&&(c[0]=d.shift()),a=c[0]&&ka(c[0])||b,f.push([a,c[1],c[2]]);T(b);p(f,function(b){da(Ia.apply(null,b))})},La=l,Ka=l;x("dom");if(x("dom")){var Ca=function(b,d,f,a){b.addEventListener(d,a,!1);return function(){b.removeEventListener(d,a,!1)}},Ta=Ca(window,"load","onload",function(){t.pageLoaded=
    1;try{"complete"!=w.readyState&&(w.readyState="complete")}catch(Ua){}Ta()}),ma=w.getElementsByTagName("script");for(m=0;!O;)/^dojo/.test((P=ma[m++])&&P.type)||(O=P);t.injectUrl=function(b,d,f){f=f.node=w.createElement("script");var a=Ca(f,"load","onreadystatechange",function(b){b=b||window.event;var f=b.target||b.srcElement;if("load"===b.type||/complete|loaded/.test(f.readyState))a(),c(),d&&d()}),c=Ca(f,"error","onerror",function(d){a();c();D("error",q("scriptError: "+b,[b,d]))});f.type="text/javascript";
    f.charset="utf-8";f.src=b;O.parentNode.insertBefore(f,O);return f}}t.log=l;t.trace=l;x("foreign-loader")?P=l:(P=function(b,f,a){var c=arguments.length,k=["require","exports","module"],p=[0,b,f];1==c?p=[0,d(b)?k:[],b]:2==c&&n(b)?p=[b,d(f)?k:[],f]:3==c&&(p=[b,f,a]);t.trace("loader-define",p.slice(0,2));(c=p[0]&&ka(p[0]))&&!W[c.mid]?da(Ia(c,p[1],p[2])):S.push(p)},P.amd={vendor:"dojotoolkit.org"});k(k(t,a.loaderPatch),c.loaderPatch);A("error",function(b){try{if(console.error(b),b instanceof Error){for(var d in b)console.log(d+
    ":",b[d]);console.log(".")}}catch(Da){}});k(t,{uid:r,cache:L,packs:I});u.define||(u.define=P,u.require=t,x("foreign-loader")||(p(U,function(b){aa(b)}),P=e.deps||c.deps||a.deps,c=e.callback||c.callback||a.callback,t.boot=P||c?[P||[],c]:0))})(function(c){return c.dojoConfig||c.djConfig||c.require||{}},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,function(){return"esri"}]],async:1,baseUrl:"https://js.arcgis.com/4.14/dojo",
    hasCache:{"config-deferredInstrumentation":0,"config-selectorEngine":"lite","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"esri-built":1,"esri-console-log-version":1,"host-browser":1},map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",
    name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",main:"moment",name:"moment"},{location:"../@dojo",name:"@dojo"},{location:"../cldrjs",main:"dist/cldr",name:"cldrjs"},{location:"../globalize",main:"dist/globalize",name:"globalize"},{location:"../intersection-observer",main:"intersection-observer",name:"intersection-observer"},{location:"../maquette-css-transitions",main:"dist/maquette-css-transitions.umd",
    name:"maquette-css-transitions"},{location:"../maquette-jsx",main:"dist/maquette-jsx.umd",name:"maquette-jsx"},{location:"../tslib",main:"tslib",name:"tslib"},{location:"../whatwg-fetch",main:"dist/fetch.umd",name:"whatwg-fetch"}]});
    require({cache:{"dojo/domReady":function(){define(["./global","./has"],function(c,a){function m(b){n.push(b);d&&e()}function e(){if(!b){for(b=!0;n.length;)try{n.shift()(l)}catch(f){console.error(f,"in domReady callback",f.stack)}b=!1;m._onQEmpty()}}var l=document,h={loaded:1,complete:1},g="string"!=typeof l.readyState,d=!!h[l.readyState],n=[],b;m.load=function(b,d,a){m(a)};m._Q=n;m._onQEmpty=function(){};g&&(l.readyState="loading");if(!d){var p=[],k=function(b){b=b||c.event;d||"readystatechange"==
    b.type&&!h[l.readyState]||(g&&(l.readyState="complete"),d=1,e())};a=function(b,d){b.addEventListener(d,k,!1);n.push(function(){b.removeEventListener(d,k,!1)})};a(l,"DOMContentLoaded");a(c,"load");"onreadystatechange"in l?a(l,"readystatechange"):g||p.push(function(){return h[l.readyState]});if(p.length){var q=function(){if(!d){for(var b=p.length;b--;)if(p[b]()){k("poller");return}setTimeout(q,30)}};q()}}return m})},"dojo/global":function(){define(function(){return"undefined"!==typeof global&&"function"!==
    typeof global?global:"undefined"!==typeof window?window:"undefined"!==typeof self?self:this})},"dojo/has":function(){define(["./global","require","module"],function(c,a,m){var e=a.has||function(){};if(!e("dojo-has-api")){var l=(a="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document)&&document,h=l&&l.createElement("DiV"),g=m.config&&m.config()||{},e=function(d){return"function"==typeof g[d]?g[d]=g[d](c,l,h):g[d]};
    e.cache=g;e.add=function(d,a,b,c){("undefined"==typeof g[d]||c)&&(g[d]=a);return b&&e(d)};e.add("host-browser",a);e.add("dom",a)}e("host-browser")&&(e.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),e.add("touch-events","ontouchstart"in document),e.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:"PointerEvent"in window),e.add("device-width",screen.availWidth||innerWidth),m=document.createElement("form"),
    e.add("dom-attributes-specified-flag",0<m.attributes.length&&40>m.attributes.length));e.clearElement=function(d){d.innerHTML="";return d};e.normalize=function(d,a){var b=d.match(/[\?:]|[^:\?]*/g),c=0,k=function(d){var f=b[c++];if(":"==f)return 0;if("?"==b[c++]){if(!d&&e(f))return k();k(!0);return k(d)}return f||0};return(d=k())&&a(d)};e.load=function(d,a,b){d?a([d],b):b()};return e})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme");define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),
    function(c){return c})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./has!host-browser?./domReady","./_base/lang"],function(c,a,m,e,l){var h=0,g=[],d=0;a=function(){h=1;c._postLoad=c.config.afterOnLoad=!0;n()};var n=function(){if(!d){for(d=1;h&&(!e||0==e._Q.length)&&(m.idle?m.idle():1)&&g.length;){var b=g.shift();try{b()}catch(q){if(q.info=q.message,m.signal)m.signal("error",q);else throw q;}}d=0}};m.on&&m.on("idle",n);e&&(e._onQEmpty=n);var b=c.ready=c.addOnLoad=function(b,
    d,f){var a=l._toArray(arguments);"number"!=typeof b?(f=d,d=b,b=1E3):a.shift();f=f?l.hitch.apply(c,a):function(){d()};f.priority=b;for(a=0;a<g.length&&b>=g[a].priority;a++);g.splice(a,0,f);n()},p=c.config.addOnLoad;if(p)b[l.isArray(p)?"apply":"call"](c,p);e?e(a):a();return b})},"dojo/_base/kernel":function(){define(["../global","../has","./config","require","module"],function(c,a,m,e,l){var h,g={},d={},n={config:m,global:c,dijit:g,dojox:d},g={dojo:["dojo",n],dijit:["dijit",g],dojox:["dojox",d]};l=
    e.map&&e.map[l.id.match(/[^\/]+/)[0]];for(h in l)g[h]?g[h][0]=l[h]:g[h]=[l[h],{}];for(h in g)l=g[h],l[1]._scopeName=l[0],m.noGlobals||(c[l[0]]=l[1]);n.scopeMap=g;n.baseUrl=n.config.baseUrl=e.baseUrl;n.isAsync=e.async;n.locale=m.locale;c="$Rev: d6e8ff38 $".match(/[0-9a-f]{7,}/);n.version={major:1,minor:14,patch:2,flag:"",revision:c?c[0]:NaN,toString:function(){var b=n.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};a("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(n);
    n.exit=function(){};a("host-webworker");"undefined"!=typeof console||(console={});c="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var b;for(a=0;b=c[a++];)console[b]?console[b]=Function.prototype.bind.call(console[b],console):function(){var d=b+"";console[d]="log"in console?function(){var b=Array.prototype.slice.call(arguments);b.unshift(d+":");console.log(b.join(" "))}:function(){};console[d]._fake=!0}();n.deprecated=n.experimental=
    function(){};n._hasResource={};return n})},"dojo/_base/config":function(){define(["../global","../has","require"],function(c,a,m){c={};m=m.rawConfig;for(var e in m)c[e]=m[e];!c.locale&&"undefined"!=typeof navigator&&(e=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage)&&(c.locale=e.toLowerCase());return c})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(c,a){var m=function(d,a,b){b||(b=d[0]&&c.scopeMap[d[0]]?
    c.scopeMap[d.shift()][1]:c.global);try{for(var p=0;p<d.length;p++){var k=d[p];if(!(k in b))if(a)b[k]={};else return;b=b[k]}return b}catch(q){}},e=Object.prototype.toString,l=function(d,a,b){return(b||[]).concat(Array.prototype.slice.call(d,a||0))},h=/\{([^\}]+)\}/g,g={_extraNames:[],_mixin:function(d,a,b){var c,k,q={};for(c in a)k=a[c],c in d&&(d[c]===k||c in q&&q[c]===k)||(d[c]=b?b(k):k);return d},mixin:function(d,a){d||(d={});for(var b=1,c=arguments.length;b<c;b++)g._mixin(d,arguments[b]);return d},
    setObject:function(d,a,b){var c=d.split(".");d=c.pop();return(b=m(c,!0,b))&&d?b[d]=a:void 0},getObject:function(d,a,b){return d?m(d.split("."),a,b):b},exists:function(d,a){return void 0!==g.getObject(d,!1,a)},isString:function(d){return"string"==typeof d||d instanceof String},isArray:Array.isArray||function(d){return"[object Array]"==e.call(d)},isFunction:function(d){return"[object Function]"===e.call(d)},isObject:function(d){return void 0!==d&&(null===d||"object"==typeof d||g.isArray(d)||g.isFunction(d))},
    isArrayLike:function(d){return!!d&&!g.isString(d)&&!g.isFunction(d)&&!(d.tagName&&"form"==d.tagName.toLowerCase())&&(g.isArray(d)||isFinite(d.length))},isAlien:function(d){return d&&!g.isFunction(d)&&/\{\s*\[native code\]\s*\}/.test(String(d))},extend:function(d,a){for(var b=1,c=arguments.length;b<c;b++)g._mixin(d.prototype,arguments[b]);return d},_hitchArgs:function(d,a){var b=g._toArray(arguments,2),p=g.isString(a);return function(){var k=g._toArray(arguments),q=p?(d||c.global)[a]:a;return q&&q.apply(d||
    this,b.concat(k))}},hitch:function(d,a){if(2<arguments.length)return g._hitchArgs.apply(c,arguments);a||(a=d,d=null);if(g.isString(a)){d=d||c.global;if(!d[a])throw['lang.hitch: scope["',a,'"] is null (scope\x3d"',d,'")'].join("");return function(){return d[a].apply(d,arguments||[])}}return d?function(){return a.apply(d,arguments||[])}:a},delegate:function(){function d(){}return function(a,b){d.prototype=a;a=new d;d.prototype=null;b&&g._mixin(a,b);return a}}(),_toArray:a("ie")?function(){function d(d,
    b,a){a=a||[];for(b=b||0;b<d.length;b++)a.push(d[b]);return a}return function(a){return(a.item?d:l).apply(this,arguments)}}():l,partial:function(d){return g.hitch.apply(c,[null].concat(g._toArray(arguments)))},clone:function(d){if(!d||"object"!=typeof d||g.isFunction(d))return d;if(d.nodeType&&"cloneNode"in d)return d.cloneNode(!0);if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp)return new RegExp(d);var a,b,c;if(g.isArray(d))for(a=[],b=0,c=d.length;b<c;++b)b in d&&(a[b]=g.clone(d[b]));
    else a=d.constructor?new d.constructor:{};return g._mixin(a,d,g.clone)},trim:String.prototype.trim?function(d){return d.trim()}:function(d){return d.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(d,a,b){return d.replace(b||h,g.isFunction(a)?a:function(b,d){return g.getObject(d,!1,a)})}};g.mixin(c,g);return g})},"dojo/sniff":function(){define(["./has"],function(c){if(c("host-browser")){var a=navigator,m=a.userAgent,a=a.appVersion,e=parseFloat(a);c.add("edge",parseFloat(m.split("Edge/")[1])||
    void 0);c.add("webkit",!c("edge")&&parseFloat(m.split("WebKit/")[1])||void 0);c.add("chrome",!c("edge")&&!0&&parseFloat(m.split("Chrome/")[1])||void 0);c.add("safari",0<=a.indexOf("Safari")&&!c("chrome")&&!c("edge")?parseFloat(a.split("Version/")[1]):void 0);c.add("mac",0<=a.indexOf("Macintosh"));if(m.match(/(iPhone|iPod|iPad)/)){var l=RegExp.$1.replace(/P/,"p"),h=m.match(/OS ([\d_]+)/)?RegExp.$1:"1",h=parseFloat(h.replace(/_/,".").replace(/_/g,""));c.add(l,h);c.add("ios",h)}c.add("trident",parseFloat(a.split("Trident/")[1])||
    void 0);c("webkit")||(0<=m.indexOf("Opera")&&c.add("opera",9.8<=e?parseFloat(m.split("Version/")[1])||e:e),0<=m.indexOf("Gecko")&&!c("trident")&&!c("edge")&&c.add("mozilla",e),c("mozilla")&&c.add("ff",parseFloat(m.split("Firefox/")[1]||m.split("Minefield/")[1])||void 0),document.all&&!c("opera")&&(m=parseFloat(a.split("MSIE ")[1])||void 0,(a=document.documentMode)&&5!=a&&Math.floor(m)!=a&&(m=a),c.add("ie",m)))}return c})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),
    function(c,a,m,e,l,h,g,d){function n(b,k,q,p,n){p=d.hitch(q,p);if(!b||!b.addEventListener&&!b.attachEvent)return e.after(b||c.global,k,p,!0);"string"==typeof k&&"on"==k.substring(0,2)&&(k=k.substring(2));b||(b=c.global);if(!n)switch(k){case "keypress":k=f;break;case "mouseenter":k=h.enter;break;case "mouseleave":k=h.leave}return a(b,k,p,n)}function b(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}g.add("events-keypress-typed",function(){var b={charCode:0};
    try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(u){}return 0==b.charCode&&!g("opera")});var p={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},k=g("mac")?"metaKey":"ctrlKey",q=function(a,f){f=d.mixin({},a,f);b(f);f.preventDefault=function(){a.preventDefault()};f.stopPropagation=function(){a.stopPropagation()};return f},f;f=g("events-keypress-typed")?function(b,
    d){var f=a(b,"keydown",function(b){var a=b.keyCode,f=13!=a&&32!=a&&(27!=a||!g("ie"))&&(48>a||90<a)&&(96>a||111<a)&&(186>a||192<a)&&(219>a||222<a)&&229!=a;if(f||b.ctrlKey){f=f?0:a;if(b.ctrlKey){if(3==a||13==a)return d.call(b.currentTarget,b);f=95<f&&106>f?f-48:!b.shiftKey&&65<=f&&90>=f?f+32:p[f]||f}a=q(b,{type:"keypress",faux:!0,charCode:f});d.call(b.currentTarget,a);if(g("ie"))try{b.keyCode=a.keyCode}catch(y){}}}),c=a(b,"keypress",function(b){var a=b.charCode;b=q(b,{charCode:32<=a?a:0,faux:!0});return d.call(this,
    b)});return{remove:function(){f.remove();c.remove()}}}:g("opera")?function(b,d){return a(b,"keypress",function(b){var a=b.which;3==a&&(a=99);a=32>a&&!b.shiftKey?0:a;b.ctrlKey&&!b.shiftKey&&65<=a&&90>=a&&(a+=32);return d.call(this,q(b,{charCode:a}))})}:function(d,f){return a(d,"keypress",function(d){b(d);return f.call(this,d)})};var r={_keypress:f,connect:function(b,d,a,f,c){var k=arguments,q=[],p=0;q.push("string"==typeof k[0]?null:k[p++],k[p++]);var e=k[p+1];q.push("string"==typeof e||"function"==
    typeof e?k[p++]:null,k[p++]);for(e=k.length;p<e;p++)q.push(k[p]);return n.apply(this,q)},disconnect:function(b){b&&b.remove()},subscribe:function(b,a,f){return m.subscribe(b,d.hitch(a,f))},publish:function(b,d){return m.publish.apply(m,[b].concat(d))},connectPublisher:function(b,d,a){var f=function(){r.publish(b,arguments)};return a?r.connect(d,a,f):r.connect(d,f)},isCopyKey:function(b){return b[k]}};r.unsubscribe=r.disconnect;d.mixin(c,r);return r})},"dojo/on":function(){define(["require","./_base/kernel",
    "./sniff"],function(c,a,m){function e(b,a,c,k,e){if(k=a.match(/(.*):(.*)/))return a=k[2],k=k[1],g.selector(k,a).call(e,b,c);m("touch")&&d.test(a)&&(c=q(c));if(b.addEventListener){var f=a in p,n=f?p[a]:a;b.addEventListener(n,c,f);return{remove:function(){b.removeEventListener(n,c,f)}}}throw Error("Target must be an event emitter");}function l(){this.cancelable=!1;this.defaultPrevented=!0}function h(){this.bubbles=!1}m("dom")&&m("touch");var g=function(b,d,a,c){return"function"!=typeof b.on||"function"==
    typeof d||b.nodeType?g.parse(b,d,a,e,c,this):b.on(d,a)};g.pausable=function(b,d,a,c){var f;b=g(b,d,function(){if(!f)return a.apply(this,arguments)},c);b.pause=function(){f=!0};b.resume=function(){f=!1};return b};g.once=function(b,d,a,c){var f=g(b,d,function(){f.remove();return a.apply(this,arguments)});return f};g.parse=function(b,d,a,c,k,p){var f;if(d.call)return d.call(p,b,a);d instanceof Array?f=d:-1<d.indexOf(",")&&(f=d.split(/\s*,\s*/));if(f){var q=[];d=0;for(var e;e=f[d++];)q.push(g.parse(b,
    e,a,c,k,p));q.remove=function(){for(var b=0;b<q.length;b++)q[b].remove()};return q}return c(b,d,a,k,p)};var d=/^touch/;g.matches=function(b,d,c,k,p){p=p&&"function"==typeof p.matches?p:a.query;k=!1!==k;1!=b.nodeType&&(b=b.parentNode);for(;!p.matches(b,d,c);)if(b==c||!1===k||!(b=b.parentNode)||1!=b.nodeType)return!1;return b};g.selector=function(b,d,a){return function(f,c){function k(d){return g.matches(d,b,f,a,p)}var p="function"==typeof b?{matches:b}:this,q=d.bubble;return q?g(f,q(k),c):g(f,d,function(b){var d=
    k(b.target);if(d)return b.selectorTarget=d,c.call(d,b)})}};var n=[].slice,b=g.emit=function(b,d,a){var f=n.call(arguments,2),c="on"+d;if("parentNode"in b){var k=f[0]={},p;for(p in a)k[p]=a[p];k.preventDefault=l;k.stopPropagation=h;k.target=b;k.type=d;a=k}do b[c]&&b[c].apply(b,f);while(a&&a.bubbles&&(b=b.parentNode));return a&&a.cancelable&&a},p={};g.emit=function(d,a,c){if(d.dispatchEvent&&document.createEvent){var f=(d.ownerDocument||document).createEvent("HTMLEvents");f.initEvent(a,!!c.bubbles,
    !!c.cancelable);for(var k in c)k in f||(f[k]=c[k]);return d.dispatchEvent(f)&&f}return b.apply(g,arguments)};if(m("touch"))var k=window.orientation,q=function(b){return function(d){var a=d.corrected;if(!a){var f=d.type;try{delete d.type}catch(x){}if(d.type){var a={},c;for(c in d)a[c]=d[c];a.preventDefault=function(){d.preventDefault()};a.stopPropagation=function(){d.stopPropagation()}}else a=d,a.type=f;d.corrected=a;if("resize"==f){if(k==window.orientation)return null;k=window.orientation;a.type=
    "orientationchange";return b.call(this,a)}"rotation"in a||(a.rotation=0,a.scale=1);if(window.TouchEvent&&d instanceof TouchEvent){var f=a.changedTouches[0],p;for(p in f)delete a[p],a[p]=f[p]}}return b.call(this,a)}};return g})},"dojo/topic":function(){define(["./Evented"],function(c){var a=new c;return{publish:function(c,e){return a.emit.apply(a,arguments)},subscribe:function(c,e){return a.on.apply(a,arguments)}}})},"dojo/Evented":function(){define(["./aspect","./on"],function(c,a){function m(){}
    var e=c.after;m.prototype={on:function(c,h){return a.parse(this,c,h,function(a,d){return e(a,"on"+d,h,!0)})},emit:function(c,e){var g=[this];g.push.apply(g,arguments);return a.emit.apply(a,g)}};return m})},"dojo/aspect":function(){define([],function(){function c(a,d,c,b){var p=a[d],k="around"==d,q;if(k){var f=c(function(){return p.advice(this,arguments)});q={remove:function(){f&&(f=a=c=null)},advice:function(b,d){return f?f.apply(b,d):p.advice(b,d)}}}else q={remove:function(){if(q.advice){var b=q.previous,
    f=q.next;f||b?(b?b.next=f:a[d]=f,f&&(f.previous=b)):delete a[d];a=c=q.advice=null}},id:a.nextId++,advice:c,receiveArguments:b};if(p&&!k)if("after"==d){for(;p.next&&(p=p.next););p.next=q;q.previous=p}else"before"==d&&(a[d]=q,q.next=p,p.previous=q);else a[d]=q;return q}function a(a){return function(d,e,b,p){var k=d[e],q;k&&k.target==d||(d[e]=q=function(){for(var b=q.nextId,d=arguments,a=q.before;a;)a.advice&&(d=a.advice.apply(this,d)||d),a=a.next;if(q.around)var c=q.around.advice(this,d);for(a=q.after;a&&
    a.id<b;){if(a.advice)if(a.receiveArguments)var k=a.advice.apply(this,d),c=k===m?c:k;else c=a.advice.call(this,c,d);a=a.next}return c},k&&(q.around={advice:function(b,d){return k.apply(b,d)}}),q.target=d,q.nextId=q.nextId||0);d=c(q||k,a,b,p);b=null;return d}}var m,e=a("after"),l=a("before"),h=a("around");return{before:l,around:h,after:e}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(c,a,m,e){if(a._fixEvent){var l=a._fixEvent;a._fixEvent=function(a,
    c){(a=l(a,c))&&e.normalizeEvent(a);return a}}m={fix:function(c,e){return a._fixEvent?a._fixEvent(c,e):c},stop:function(a){a.preventDefault();a.stopPropagation()}};c.fixEvent=m.fix;c.stopEvent=m.stop;return m})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(c,a,m,e){function l(b,d,a,c,f,e){e=e||"px";b=b.style;isNaN(d)||(b.left=d+e);isNaN(a)||(b.top=a+e);0<=c&&(b.width=c+e);0<=f&&(b.height=f+e)}function h(b){return"button"==b.tagName.toLowerCase()||
    "input"==b.tagName.toLowerCase()&&"button"==(b.getAttribute("type")||"").toLowerCase()}function g(b){return"border-box"==d.boxModel||"table"==b.tagName.toLowerCase()||h(b)}var d={boxModel:"content-box"};c("ie")&&(d.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");d.getPadExtents=function(b,d){b=m.byId(b);var a=d||e.getComputedStyle(b),c=e.toPixelValue;d=c(b,a.paddingLeft);var f=c(b,a.paddingTop),p=c(b,a.paddingRight);b=c(b,a.paddingBottom);return{l:d,t:f,r:p,b:b,w:d+p,h:f+b}};
    d.getBorderExtents=function(b,d){b=m.byId(b);var a=e.toPixelValue,c=d||e.getComputedStyle(b);d="none"!=c.borderLeftStyle?a(b,c.borderLeftWidth):0;var f="none"!=c.borderTopStyle?a(b,c.borderTopWidth):0,p="none"!=c.borderRightStyle?a(b,c.borderRightWidth):0;b="none"!=c.borderBottomStyle?a(b,c.borderBottomWidth):0;return{l:d,t:f,r:p,b:b,w:d+p,h:f+b}};d.getPadBorderExtents=function(b,a){b=m.byId(b);var c=a||e.getComputedStyle(b);a=d.getPadExtents(b,c);b=d.getBorderExtents(b,c);return{l:a.l+b.l,t:a.t+
    b.t,r:a.r+b.r,b:a.b+b.b,w:a.w+b.w,h:a.h+b.h}};d.getMarginExtents=function(b,d){b=m.byId(b);var a=d||e.getComputedStyle(b),c=e.toPixelValue;d=c(b,a.marginLeft);var f=c(b,a.marginTop),p=c(b,a.marginRight);b=c(b,a.marginBottom);return{l:d,t:f,r:p,b:b,w:d+p,h:f+b}};d.getMarginBox=function(b,a){b=m.byId(b);a=a||e.getComputedStyle(b);a=d.getMarginExtents(b,a);var k=b.offsetLeft-a.l,p=b.offsetTop-a.t,f=b.parentNode,n=e.toPixelValue;8==c("ie")&&f&&(f=e.getComputedStyle(f),k-="none"!=f.borderLeftStyle?n(b,
    f.borderLeftWidth):0,p-="none"!=f.borderTopStyle?n(b,f.borderTopWidth):0);return{l:k,t:p,w:b.offsetWidth+a.w,h:b.offsetHeight+a.h}};d.getContentBox=function(b,a){b=m.byId(b);var k=a||e.getComputedStyle(b);a=b.clientWidth;var p,f=d.getPadExtents(b,k);p=d.getBorderExtents(b,k);var k=b.offsetLeft+f.l+p.l,n=b.offsetTop+f.t+p.t;a?p=b.clientHeight:(a=b.offsetWidth-p.w,p=b.offsetHeight-p.h);if(8==c("ie")){var g=b.parentNode,h=e.toPixelValue;g&&(g=e.getComputedStyle(g),k-="none"!=g.borderLeftStyle?h(b,g.borderLeftWidth):
    0,n-="none"!=g.borderTopStyle?h(b,g.borderTopWidth):0)}return{l:k,t:n,w:a-f.w,h:p-f.h}};d.setContentSize=function(b,a,c){b=m.byId(b);var k=a.w;a=a.h;g(b)&&(c=d.getPadBorderExtents(b,c),0<=k&&(k+=c.w),0<=a&&(a+=c.h));l(b,NaN,NaN,k,a)};var n={l:0,t:0,w:0,h:0};d.setMarginBox=function(b,a,k){b=m.byId(b);var p=k||e.getComputedStyle(b);k=a.w;var f=a.h,r=g(b)?n:d.getPadBorderExtents(b,p),p=d.getMarginExtents(b,p);if(c("webkit")&&h(b)){var t=b.style;0<=k&&!t.width&&(t.width="4px");0<=f&&!t.height&&(t.height=
    "4px")}0<=k&&(k=Math.max(k-r.w-p.w,0));0<=f&&(f=Math.max(f-r.h-p.h,0));l(b,a.l,a.t,k,f)};d.isBodyLtr=function(b){b=b||a.doc;return"ltr"==(a.body(b).dir||b.documentElement.dir||"ltr").toLowerCase()};d.docScroll=function(b){b=b||a.doc;var c=a.doc.parentWindow||a.doc.defaultView;return"pageXOffset"in c?{x:c.pageXOffset,y:c.pageYOffset}:(c=b.documentElement)&&{x:d.fixIeBiDiScrollLeft(c.scrollLeft||0,b),y:c.scrollTop||0}};d.getIeDocumentElementOffset=function(b){return{x:0,y:0}};d.fixIeBiDiScrollLeft=
    function(b,p){p=p||a.doc;var k=c("ie");if(k&&!d.isBodyLtr(p)){p=p.documentElement;var q=a.global;6==k&&q.frameElement&&p.scrollHeight>p.clientHeight&&(b+=p.clientLeft);return 8>k?b+p.clientWidth-p.scrollWidth:-b}return b};d.position=function(b,p){b=m.byId(b);a.body(b.ownerDocument);var k=b.getBoundingClientRect(),k={x:k.left,y:k.top,w:k.right-k.left,h:k.bottom-k.top};9>c("ie")&&(k.x-=0,k.y-=0);p&&(b=d.docScroll(b.ownerDocument),k.x+=b.x,k.y+=b.y);return k};d.getMarginSize=function(b,a){b=m.byId(b);
    a=d.getMarginExtents(b,a||e.getComputedStyle(b));b=b.getBoundingClientRect();return{w:b.right-b.left+a.w,h:b.bottom-b.top+a.h}};d.normalizeEvent=function(b){"layerX"in b||(b.layerX=b.offsetX,b.layerY=b.offsetY);if(!("pageX"in b)){var a=b.target,a=a&&a.ownerDocument||document,c=a.documentElement;b.pageX=b.clientX+d.fixIeBiDiScrollLeft(c.scrollLeft||0,a);b.pageY=b.clientY+(c.scrollTop||0)}};return d})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(c,a,m){var e={global:c.global,
    doc:c.global.document||null,body:function(a){a=a||c.doc;return a.body||a.getElementsByTagName("body")[0]},setContext:function(a,h){c.global=e.global=a;c.doc=e.doc=h},withGlobal:function(a,h,g,d){var n=c.global;try{return c.global=e.global=a,e.withDoc.call(null,a.document,h,g,d)}finally{c.global=e.global=n}},withDoc:function(a,h,g,d){var n=e.doc,b=m("ie"),p,k,q;try{return c.doc=e.doc=a,c.isQuirks=0,m("ie")&&(q=a.parentWindow)&&q.navigator&&(p=parseFloat(q.navigator.appVersion.split("MSIE ")[1])||void 0,
    (k=a.documentMode)&&5!=k&&Math.floor(p)!=k&&(p=k),c.isIE=m.add("ie",p,!0,!0)),g&&"string"==typeof h&&(h=g[h]),h.apply(g,d||[])}finally{c.doc=e.doc=n,c.isQuirks=0,c.isIE=m.add("ie",b,!0,!0)}}};a.mixin(c,e);return e})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(c,a,m){if(7>=c("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}var e={};c("ie")?e.byId=function(c,e){if("string"!=typeof c)return c;var d=e||a.doc;e=c&&d.getElementById(c);if(!e||
    e.attributes.id.value!=c&&e.id!=c){d=d.all[c];if(!d||d.nodeName)d=[d];for(var n=0;e=d[n++];)if(e.attributes&&e.attributes.id&&e.attributes.id.value==c||e.id==c)return e}else return e}:e.byId=function(c,e){return("string"==typeof c?(e||a.doc).getElementById(c):c)||null};m=m.global.document||null;c.add("dom-contains",!(!m||!m.contains));e.isDescendant=c("dom-contains")?function(a,c){return!(!(c=e.byId(c))||!c.contains(e.byId(a)))}:function(a,c){try{for(a=e.byId(a),c=e.byId(c);a;){if(a==c)return!0;a=
    a.parentNode}}catch(d){}return!1};c.add("css-user-select",function(a,c,d){if(!d)return!1;a=d.style;c=["Khtml","O","Moz","Webkit"];d=c.length;var e="userSelect";do if("undefined"!==typeof a[e])return e;while(d--&&(e=c[d]+"UserSelect"));return!1});var l=c("css-user-select");e.setSelectable=l?function(a,c){e.byId(a).style[l]=c?"":"none"}:function(a,c){a=e.byId(a);var d=a.getElementsByTagName("*"),n=d.length;if(c)for(a.removeAttribute("unselectable");n--;)d[n].removeAttribute("unselectable");else for(a.setAttribute("unselectable",
    "on");n--;)d[n].setAttribute("unselectable","on")};return e})},"dojo/dom-style":function(){define(["./sniff","./dom","./_base/window"],function(c,a,m){function e(b,d,a){d=d.toLowerCase();if("auto"==a){if("height"==d)return b.offsetHeight;if("width"==d)return b.offsetWidth}if("fontweight"==d)switch(a){case 700:return"bold";default:return"normal"}d in p||(p[d]=k.test(d));return p[d]?g(b,a):a}var l,h={};l=c("webkit")?function(b){var d;if(1==b.nodeType){var a=b.ownerDocument.defaultView;d=a.getComputedStyle(b,
    null);!d&&b.style&&(b.style.display="",d=a.getComputedStyle(b,null))}return d||{}}:c("ie")&&9>c("ie")?function(b){return 1==b.nodeType&&b.currentStyle?b.currentStyle:{}}:function(b){if(1===b.nodeType){var d=b.ownerDocument.defaultView;return(d.opener?d:m.global.window).getComputedStyle(b,null)}return{}};h.getComputedStyle=l;var g;g=c("ie")?function(b,d){if(!d)return 0;if("medium"==d)return 4;if(d.slice&&"px"==d.slice(-2))return parseFloat(d);var a=b.style,c=b.runtimeStyle,f=a.left,k=c.left;c.left=
    b.currentStyle.left;try{a.left=d,d=a.pixelLeft}catch(x){d=0}a.left=f;c.left=k;return d}:function(b,d){return parseFloat(d)||0};h.toPixelValue=g;var d=function(b,d){try{return b.filters.item("DXImageTransform.Microsoft.Alpha")}catch(t){return d?{}:null}},n=9>c("ie")||(c("ie"),0)?function(b){try{return d(b).Opacity/100}catch(r){return 1}}:function(b){return l(b).opacity},b=9>c("ie")||(c("ie"),0)?function(a,c){""===c&&(c=1);var f=100*c;1===c?(a.style.zoom="",d(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,
    ""))):(a.style.zoom=1,d(a)?d(a,1).Opacity=f:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+f+")",d(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(a=a.firstChild;a;a=a.nextSibling)"td"==a.tagName.toLowerCase()&&b(a,c);return c}:function(b,d){return b.style.opacity=d},p={left:!0,top:!0},k=/margin|padding|width|height|max|min|offset/,q={cssFloat:1,styleFloat:1,"float":1};h.get=function(b,d){var c=a.byId(b),f=arguments.length;if(2==f&&"opacity"==d)return n(c);d=q[d]?"cssFloat"in
    c.style?"cssFloat":"styleFloat":d;var k=h.getComputedStyle(c);return 1==f?k:e(c,d,k[d]||c.style[d])};h.set=function(d,c,k){var f=a.byId(d),p=arguments.length,e="opacity"==c;c=q[c]?"cssFloat"in f.style?"cssFloat":"styleFloat":c;if(3==p)return e?b(f,k):f.style[c]=k;for(var n in c)h.set(d,n,c[n]);return h.getComputedStyle(f)};return h})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(c,a,m,e,l){function h(c,d){var n=function(b,p){return a(b,c,function(a){if(d)return d(a,
    p);if(!e.isDescendant(a.relatedTarget,b))return p.call(this,a)})};n.bubble=function(b){return h(c,function(d,a){var c=b(d.target),f=d.relatedTarget;if(c&&c!=(f&&1==f.nodeType&&b(f)))return a.call(c,d)})};return n}m={LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,d){return a.button==d},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==a.button}};c.mouseButtons=m;return{_eventHandler:h,enter:h("mouseover"),leave:h("mouseout"),wheel:"mousewheel",
    isLeft:m.isLeft,isMiddle:m.isMiddle,isRight:m.isRight}})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(c,a,m){if(!m("host-browser"))return m;c._name="browser";a.mixin(c,{isBrowser:!0,isFF:m("ff"),isIE:m("ie"),isKhtml:0,isWebKit:m("webkit"),isMozilla:m("mozilla"),isMoz:m("mozilla"),isOpera:m("opera"),isSafari:m("safari"),isChrome:m("chrome"),isMac:m("mac"),isIos:m("ios"),isAndroid:0,isWii:0,isQuirks:0,isAir:0});return m})},"dojo/keys":function(){define(["./_base/kernel",
    "./sniff"],function(c,a){return c.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:a("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,
    NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:a("mac")?a("safari")?91:224:17}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(c,a,m){var e=window,l={addOnWindowUnload:function(h,g){c.windowUnloaded||m(e,"unload",c.windowUnloaded=function(){});m(e,"unload",a.hitch(h,
    g))},addOnUnload:function(c,g){m(e,"beforeunload",a.hitch(c,g))}};c.addOnWindowUnload=l.addOnWindowUnload;c.addOnUnload=l.addOnUnload;return l})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(c,a,m,e,l,h,g,d){c.byId=a.byId;c.isDescendant=a.isDescendant;c.setSelectable=a.setSelectable;c.getAttr=e.get;c.setAttr=e.set;c.hasAttr=e.has;c.removeAttr=e.remove;c.getNodeProp=e.getNodeProp;c.attr=
    function(d,b,a){return 2==arguments.length?e["string"==typeof b?"get":"set"](d,b):e.set(d,b,a)};c.hasClass=h.contains;c.addClass=h.add;c.removeClass=h.remove;c.toggleClass=h.toggle;c.replaceClass=h.replace;c._toDom=c.toDom=g.toDom;c.place=g.place;c.create=g.create;c.empty=function(d){g.empty(d)};c._destroyElement=c.destroy=function(d){g.destroy(d)};c._getPadExtents=c.getPadExtents=d.getPadExtents;c._getBorderExtents=c.getBorderExtents=d.getBorderExtents;c._getPadBorderExtents=c.getPadBorderExtents=
    d.getPadBorderExtents;c._getMarginExtents=c.getMarginExtents=d.getMarginExtents;c._getMarginSize=c.getMarginSize=d.getMarginSize;c._getMarginBox=c.getMarginBox=d.getMarginBox;c.setMarginBox=d.setMarginBox;c._getContentBox=c.getContentBox=d.getContentBox;c.setContentSize=d.setContentSize;c._isBodyLtr=c.isBodyLtr=d.isBodyLtr;c._docScroll=c.docScroll=d.docScroll;c._getIeDocumentElementOffset=c.getIeDocumentElementOffset=d.getIeDocumentElementOffset;c._fixIeBiDiScrollLeft=c.fixIeBiDiScrollLeft=d.fixIeBiDiScrollLeft;
    c.position=d.position;c.marginBox=function(a,b){return b?d.setMarginBox(a,b):d.getMarginBox(a)};c.contentBox=function(a,b){return b?d.setContentSize(a,b):d.getContentBox(a)};c.coords=function(e,b){c.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox().");e=a.byId(e);var p=m.getComputedStyle(e),p=d.getMarginBox(e,p);e=d.position(e,b);p.x=e.x;p.y=e.y;return p};c.getProp=l.get;c.setProp=l.set;c.prop=function(d,b,a){return 2==arguments.length?l["string"==typeof b?"get":"set"](d,b):l.set(d,
    b,a)};c.getStyle=m.get;c.setStyle=m.set;c.getComputedStyle=m.getComputedStyle;c.__toPixelValue=c.toPixelValue=m.toPixelValue;c.style=function(d,b,a){switch(arguments.length){case 1:return m.get(d);case 2:return m["string"==typeof b?"get":"set"](d,b)}return m.set(d,b,a)};return c})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(c,a,m,e,l,h){function g(b,d){b=b.getAttributeNode&&b.getAttributeNode(d);return!!b&&b.specified}var d={innerHTML:1,
    textContent:1,className:1,htmlFor:a("ie"),value:1},n={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};c.has=function(b,a){var c=a.toLowerCase();return d[h.names[c]||a]||g(e.byId(b),n[c]||a)};c.get=function(b,a){b=e.byId(b);var c=a.toLowerCase(),q=h.names[c]||a,f=b[q];if(d[q]&&"undefined"!=typeof f)return f;if("textContent"==q)return h.get(b,q);if("href"!=q&&("boolean"==typeof f||m.isFunction(f)))return f;a=n[c]||a;return g(b,a)?b.getAttribute(a):null};c.set=function(b,a,k){b=
    e.byId(b);if(2==arguments.length){for(var q in a)c.set(b,q,a[q]);return b}q=a.toLowerCase();var f=h.names[q]||a,p=d[f];if("style"==f&&"string"!=typeof k)return l.set(b,k),b;if(p||"boolean"==typeof k||m.isFunction(k))return h.set(b,a,k);b.setAttribute(n[q]||a,k);return b};c.remove=function(b,d){e.byId(b).removeAttribute(n[d.toLowerCase()]||d)};c.getNodeProp=function(b,d){b=e.byId(b);var a=d.toLowerCase(),c=h.names[a]||d;if(c in b&&"href"!=c)return b[c];d=n[a]||d;return g(b,d)?b.getAttribute(d):null}})},
    "dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(c,a,m,e,l,h,g,d){var n={},b=1,p=a._scopeName+"attrid";c.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};c.get=function(b,d){b=l.byId(b);var a=d.toLowerCase();return b[c.names[a]||d]};c.set=function(a,q,f){a=
    l.byId(a);if(2==arguments.length&&"string"!=typeof q){for(var k in q)c.set(a,k,q[k]);return a}k=q.toLowerCase();k=c.names[k]||q;if("style"==k&&"string"!=typeof f)return h.set(a,f),a;if("innerHTML"==k)return m("ie")&&a.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(g.empty(a),a.appendChild(g.toDom(f,a.ownerDocument))):a[k]=f,a;if(e.isFunction(f)){var t=a[p];t||(t=b++,a[p]=t);n[t]||(n[t]={});var u=n[t][k];if(u)d.disconnect(u);else try{delete a[k]}catch(w){}f?
    n[t][k]=d.connect(a,k,f):a[k]=null;return a}a[k]=f;return a}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(c,a,m,e,l,h){function g(b,d){var a=d.parentNode;a&&a.insertBefore(b,d)}function d(b){if("innerHTML"in b)try{b.innerHTML="";return}catch(x){}for(var d;d=b.lastChild;)b.removeChild(d)}var n={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table",
    "thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},b=/<\s*([\w\:]+)/,p={},k=0,q="__"+a._scopeName+"ToDomId",f;for(f in n)n.hasOwnProperty(f)&&(a=n[f],a.pre="option"==f?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+a.join("\x3e\x3c")+"\x3e",a.post="\x3c/"+a.reverse().join("\x3e\x3c/")+"\x3e");var r;8>=m("ie")&&(r=function(b){b.__dojo_html5_tested="yes";var d=t("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",style:{visibility:"hidden"}},b.body);1!==
    d.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(d){b.createElement(d)});u(d)});c.toDom=function(d,a){a=a||e.doc;var c=a[q];c||(a[q]=c=++k+"",p[c]=a.createElement("div"));8>=m("ie")&&!a.__dojo_html5_tested&&a.body&&r(a);d+="";var f=d.match(b),g=f?f[1].toLowerCase():"",c=p[c];if(f&&n[g])for(f=n[g],c.innerHTML=f.pre+d+f.post,d=f.length;d;--d)c=c.firstChild;else c.innerHTML=
    d;if(1==c.childNodes.length)return c.removeChild(c.firstChild);for(d=a.createDocumentFragment();a=c.firstChild;)d.appendChild(a);return d};c.place=function(b,d,a){d=l.byId(d);"string"==typeof b&&(b=/^\s*</.test(b)?c.toDom(b,d.ownerDocument):l.byId(b));if("number"==typeof a){var f=d.childNodes;!f.length||f.length<=a?d.appendChild(b):g(b,f[0>a?0:a])}else switch(a){case "before":g(b,d);break;case "after":a=b;(f=d.parentNode)&&(f.lastChild==d?f.appendChild(a):f.insertBefore(a,d.nextSibling));break;case "replace":d.parentNode.replaceChild(b,
    d);break;case "only":c.empty(d);d.appendChild(b);break;case "first":if(d.firstChild){g(b,d.firstChild);break}default:d.appendChild(b)}return b};var t=c.create=function(b,d,a,f){var k=e.doc;a&&(a=l.byId(a),k=a.ownerDocument);"string"==typeof b&&(b=k.createElement(b));d&&h.set(b,d);a&&c.place(b,a,f);return b};c.empty=function(b){d(l.byId(b))};var u=c.destroy=function(b){if(b=l.byId(b)){var a=b;b=b.parentNode;a.firstChild&&d(a);b&&(m("ie")&&b.canHaveChildren&&"removeNode"in a?a.removeNode(!1):b.removeChild(a))}}})},
    "dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(c,a,m){function e(d){if("string"==typeof d||d instanceof String){if(d&&!h.test(d))return g[0]=d,g;d=d.split(h);d.length&&!d[0]&&d.shift();d.length&&!d[d.length-1]&&d.pop();return d}return d?a.filter(d,function(b){return b}):[]}var l,h=/\s+/,g=[""],d={};return l={contains:function(d,b){return 0<=(" "+m.byId(d).className+" ").indexOf(" "+b+" ")},add:function(d,b){d=m.byId(d);b=e(b);var a=d.className,c,a=a?" "+a+" ":
    " ";c=a.length;for(var q=0,f=b.length,n;q<f;++q)(n=b[q])&&0>a.indexOf(" "+n+" ")&&(a+=n+" ");c<a.length&&(d.className=a.substr(1,a.length-2))},remove:function(d,b){d=m.byId(d);var a;if(void 0!==b){b=e(b);a=" "+d.className+" ";for(var k=0,q=b.length;k<q;++k)a=a.replace(" "+b[k]+" "," ");a=c.trim(a)}else a="";d.className!=a&&(d.className=a)},replace:function(a,b,c){a=m.byId(a);d.className=a.className;l.remove(d,c);l.add(d,b);a.className!==d.className&&(a.className=d.className)},toggle:function(d,b,
    a){d=m.byId(d);if(void 0===a){b=e(b);for(var c=0,q=b.length,f;c<q;++c)f=b[c],l[l.contains(d,f)?"remove":"add"](d,f)}else l[a?"add":"remove"](d,b);return a}}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(c,a,m){function e(b){return g[b]=new Function("item","index","array",b)}function l(b){var d=!b;return function(a,c,f){var k=0,q=a&&a.length||0,p;q&&"string"==typeof a&&(a=a.split(""));"string"==typeof c&&(c=g[c]||e(c));if(f)for(;k<q;++k){if(p=!c.call(f,a[k],k,a),b^
    p)return!p}else for(;k<q;++k)if(p=!c(a[k],k,a),b^p)return!p;return d}}function h(b){var a=1,c=0,e=0;b||(a=c=e=-1);return function(f,k,q,p){if(p&&0<a)return n.lastIndexOf(f,k,q);p=f&&f.length||0;var g=b?p+e:c;q===d?q=b?c:p+e:0>q?(q=p+q,0>q&&(q=c)):q=q>=p?p+e:q;for(p&&"string"==typeof f&&(f=f.split(""));q!=g;q+=a)if(f[q]==k)return q;return-1}}var g={},d,n={every:l(!1),some:l(!0),indexOf:h(!0),lastIndexOf:h(!1),forEach:function(b,d,a){var c=0,f=b&&b.length||0;f&&"string"==typeof b&&(b=b.split(""));"string"==
    typeof d&&(d=g[d]||e(d));if(a)for(;c<f;++c)d.call(a,b[c],c,b);else for(;c<f;++c)d(b[c],c,b)},map:function(b,d,a,c){var f=0,k=b&&b.length||0;c=new (c||Array)(k);k&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=g[d]||e(d));if(a)for(;f<k;++f)c[f]=d.call(a,b[f],f,b);else for(;f<k;++f)c[f]=d(b[f],f,b);return c},filter:function(b,d,a){var c=0,f=b&&b.length||0,k=[],p;f&&"string"==typeof b&&(b=b.split(""));"string"==typeof d&&(d=g[d]||e(d));if(a)for(;c<f;++c)p=b[c],d.call(a,p,c,b)&&k.push(p);
    else for(;c<f;++c)p=b[c],d(p,c,b)&&k.push(p);return k},clearCache:function(){g={}}};m.mixin(c,n);return n})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(c,a,m){a=a.NodeList;var e=a.prototype;e.connect=a._adaptAsForEach(function(){return c.connect.apply(this,arguments)});e.coords=a._adaptAsMap(c.coords);a.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" ");
    m.forEach(a.events,function(a){var c="on"+a;e[c]=function(a,d){return this.connect(c,a,d)}});return c.NodeList=a})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(c,a,m,e,l,h,g,d){function n(b,d){var a=function(a,c){if("string"==typeof c&&(c=m.byId(c),!c))return new d([]);a="string"==typeof a?b(a,c):a?a.end&&a.on?a:[a]:[];return a.end&&a.on?a:new d(a)};a.matches=b.match||function(b,d,c){return 0<
    a.filter([b],d,c).length};a.filter=b.filter||function(b,d,c){return a(d,c).filter(function(d){return-1<l.indexOf(b,d)})};if("function"!=typeof b){var c=b.search;b=function(b,d){return c(d||document,b)}}return a}var b=Array.prototype,p=b.slice,k=b.concat,q=l.forEach,f=function(b,d,a){d=[0].concat(p.call(d,0));a=a||c.global;return function(c){d[0]=c;return b.apply(a,d)}},r=function(b){var d=this instanceof t&&1;"number"==typeof b&&(b=Array(b));var a=b&&"length"in b?b:arguments;if(d||!a.sort){for(var c=
    d?this:[],f=c.length=a.length,k=0;k<f;k++)c[k]=a[k];if(d)return c;a=c}h._mixin(a,u);a._NodeListCtor=function(b){return t(b)};return a},t=r,u=t.prototype=[];t._wrap=u._wrap=function(b,d,a){b=new (a||this._NodeListCtor||t)(b);return d?b._stash(d):b};t._adaptAsMap=function(b,d){return function(){return this.map(f(b,arguments,d))}};t._adaptAsForEach=function(b,d){return function(){this.forEach(f(b,arguments,d));return this}};t._adaptAsFilter=function(b,d){return function(){return this.filter(f(b,arguments,
    d))}};t._adaptWithCondition=function(b,d,a){return function(){var k=arguments,e=f(b,k,a);if(d.call(a||c.global,k))return this.map(e);this.forEach(e);return this}};q(["slice","splice"],function(d){var a=b[d];u[d]=function(){return this._wrap(a.apply(this,arguments),"slice"==d?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(b){var d=l[b];u[b]=function(){return d.apply(c,[this].concat(p.call(arguments,0)))}});h.extend(r,{constructor:t,_NodeListCtor:t,toString:function(){return this.join(",")},
    _stash:function(b){this._parent=b;return this},on:function(b,d){var a=this.map(function(a){return e(a,b,d)});a.remove=function(){for(var b=0;b<a.length;b++)a[b].remove()};return a},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(b){var d=p.call(this,0),a=l.map(arguments,function(b){return p.call(b,0)});return this._wrap(k.apply(d,a),this)},map:function(b,d){return this._wrap(l.map(this,b,d),this)},forEach:function(b,d){q(this,b,d);return this},filter:function(b){var d=
    arguments,a=this,c=0;if("string"==typeof b){a=w._filterResult(this,d[0]);if(1==d.length)return a._stash(this);c=1}return this._wrap(l.filter(a,d[c],d[c+1]),this)},instantiate:function(b,d){var a=h.isFunction(b)?b:h.getObject(b);d=d||{};return this.forEach(function(b){new a(d,b)})},at:function(){var b=new this._NodeListCtor(0);q(arguments,function(d){0>d&&(d=this.length+d);this[d]&&b.push(this[d])},this);return b._stash(this)}});var w=n(d,r);c.query=n(d,function(b){return r(b)});w.load=function(b,
    d,a){g.load(b,d,function(b){a(n(b,r))})};c._filterQueryResult=w._filterResult=function(b,d,a){return new r(w.filter(b,d,a))};c.NodeList=w.NodeList=r;return w})},"dojo/selector/_loader":function(){define(["../has","require"],function(c,a){"undefined"!==typeof document&&document.createElement("div");var m;return{load:function(e,l,h,g){if(g&&g.isBuild)h();else{g=a;e="default"==e?c("config-selectorEngine")||"css3":e;e="css2"==e||"lite"==e?"./lite":"css2.1"==e?"./lite":"css3"==e?"./lite":"acme"==e?"./acme":
    (g=l)&&e;if("?"==e.charAt(e.length-1)){e=e.substring(0,e.length-1);var d=!0}if(d&&(c("dom-compliant-qsa")||m))return h(m);g([e],function(d){"./lite"!=e&&(m=d);h(d)})}}}})},"dojo/selector/lite":function(){define(["../has","../_base/kernel"],function(c,a){var m=document.createElement("div"),e=m.matches||m.webkitMatchesSelector||m.mozMatchesSelector||m.msMatchesSelector||m.oMatchesSelector,l=m.querySelectorAll,h=/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g,g=function(e,b){var p=b?b.ownerDocument||
    b:a.doc||document,k=(l?/^([\w]*)#([\w\-]+$)|^(\.)([\w\-\*]+$)|^(\w+$)/:/^([\w]*)#([\w\-]+)(?:\s+(.*))?$|(?:^|(>|.+\s+))([\w\-\*]+)(\S*$)/).exec(e);b=b||p;if(k){var q=(c("ie"),null!==b.parentNode&&9!==b.nodeType&&b.parentNode===p);if(k[2]&&q){var f=a.byId?a.byId(k[2],p):p.getElementById(k[2]);if(!f||k[1]&&k[1]!=f.tagName.toLowerCase())return[];if(b!=p)for(e=f;e!=b;)if(e=e.parentNode,!e)return[];return k[3]?g(k[3],f):[f]}if(k[3]&&b.getElementsByClassName)return b.getElementsByClassName(k[4]);if(k[5])if(f=
    b.getElementsByTagName(k[5]),k[4]||k[6])e=(k[4]||"")+k[6];else return f}if(l)return 1===b.nodeType&&"object"!==b.nodeName.toLowerCase()?d(b,e,b.querySelectorAll):b.querySelectorAll(e);f||(f=b.getElementsByTagName("*"));k=[];p=0;for(q=f.length;p<q;p++){var n=f[p];1==n.nodeType&&(void 0)(n,e,b)&&k.push(n)}return k},d=function(d,b,a){var c=d,e=d.getAttribute("id"),f=e||"__dojo__",p=d.parentNode,n=/^\s*[+~]/.test(b);if(n&&!p)return[];e?f=f.replace(/'/g,"\\$\x26"):d.setAttribute("id",f);n&&p&&(d=d.parentNode);
    b=b.match(h);for(p=0;p<b.length;p++)b[p]="[id\x3d'"+f+"'] "+b[p];b=b.join(",");try{return a.call(d,b)}finally{e||c.removeAttribute("id")}};g.match=e?function(a,b,c){return c&&9!=c.nodeType?d(c,b,function(b){return e.call(a,b)}):e.call(a,b)}:void 0;return g})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(c,a,m,e,l,h,g,d,n){function b(b){return function(d,a,c){return 2==
    arguments.length?b["string"==typeof a?"get":"set"](d,a):b.set(d,a,c)}}var p=function(b){return 1==b.length&&"string"==typeof b[0]},k=function(b){var d=b.parentNode;d&&d.removeChild(b)},q=a.NodeList,f=q._adaptWithCondition,r=q._adaptAsForEach,t=q._adaptAsMap;e.extend(q,{_normalize:function(b,d){var a=!0===b.parse;if("string"==typeof b.template){var f=b.templateFunc||c.string&&c.string.substitute;b=f?f(b.template,b):b}f=typeof b;"string"==f||"number"==f?(b=h.toDom(b,d&&d.ownerDocument),b=11==b.nodeType?
    e._toArray(b.childNodes):[b]):e.isArrayLike(b)?e.isArray(b)||(b=e._toArray(b)):b=[b];a&&(b._runParse=!0);return b},_cloneNode:function(b){return b.cloneNode(!0)},_place:function(b,d,a,f){if(1==d.nodeType||"only"!=a)for(var k,e=b.length,q=e-1;0<=q;q--){var p=f?this._cloneNode(b[q]):b[q];if(b._runParse&&c.parser&&c.parser.parse)for(k||(k=d.ownerDocument.createElement("div")),k.appendChild(p),c.parser.parse(k),p=k.firstChild;k.firstChild;)k.removeChild(k.firstChild);q==e-1?h.place(p,d,a):d.parentNode.insertBefore(p,
    d);d=p}},position:t(g.position),attr:f(b(d),p),style:f(b(n),p),addClass:r(l.add),removeClass:r(l.remove),toggleClass:r(l.toggle),replaceClass:r(l.replace),empty:r(h.empty),removeAttr:r(d.remove),marginBox:t(g.getMarginBox),place:function(b,d){var c=a(b)[0];return this.forEach(function(b){h.place(b,c,d)})},orphan:function(b){return(b?a._filterResult(this,b):this).forEach(k)},adopt:function(b,d){return a(b).place(this[0],d)._stash(this)},query:function(b){if(!b)return this;var d=new q;this.map(function(c){a(b,
    c).forEach(function(b){void 0!==b&&d.push(b)})});return d._stash(this)},filter:function(b){var d=arguments,c=this,f=0;if("string"==typeof b){c=a._filterResult(this,d[0]);if(1==d.length)return c._stash(this);f=1}return this._wrap(m.filter(c,d[f],d[f+1]),this)},addContent:function(b,d){b=this._normalize(b,this[0]);for(var a=0,c;c=this[a];a++)b.length?this._place(b,c,d,0<a):h.empty(c);return this}});return q})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){c._xhrObj=r._create;var u=c.config;c.objectToQuery=e.objectToQuery;c.queryToObject=e.queryToObject;c.fieldToObject=h.fieldToObject;c.formToObject=h.toObject;c.formToQuery=h.toQuery;c.formToJson=h.toJson;c._blockAsync=!1;var w=c._contentHandlers=c.contentHandlers={text:function(b){return b.responseText},json:function(b){return n.fromJson(b.responseText||null)},"json-comment-filtered":function(b){d.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");
    b=b.responseText;var a=b.indexOf("/*"),c=b.lastIndexOf("*/");if(-1==a||-1==c)throw Error("JSON was not comment filtered");return n.fromJson(b.substring(a+2,c))},javascript:function(b){return c.eval(b.responseText)},xml:function(b){var d=b.responseXML;d&&!d.querySelectorAll&&(d=(new DOMParser).parseFromString(b.responseText,"application/xml"));if(a("ie")&&(!d||!d.documentElement)){var c=function(b){return"MSXML"+b+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];p.some(c,function(a){try{var c=
    new ActiveXObject(a);c.async=!1;c.loadXML(b.responseText);d=c}catch(F){return!1}return!0})}return d},"json-comment-optional":function(b){return b.responseText&&/^[^{\[]*\/\*/.test(b.responseText)?w["json-comment-filtered"](b):w.json(b)}};w.arraybuffer=w.blob=w.document=function(b,d){return b.response};c._ioSetArgs=function(d,a,f,k){var q={args:d,url:d.url},p=null;if(d.form){var p=l.byId(d.form),n=p.getAttributeNode("action");q.url=q.url||(n?n.value:c.doc?c.doc.URL:null);p=h.toObject(p)}n={};p&&b.mixin(n,
    p);d.content&&b.mixin(n,d.content);d.preventCache&&(n["dojo.preventCache"]=(new Date).valueOf());q.query=e.objectToQuery(n);q.handleAs=d.handleAs||"text";var r=new g(function(b){b.canceled=!0;a&&a(b);var d=b.ioArgs.error;d||(d=Error("request cancelled"),d.dojoType="cancel",b.ioArgs.error=d);return d});r.addCallback(f);var t=d.load;t&&b.isFunction(t)&&r.addCallback(function(b){return t.call(d,b,q)});var v=d.error;v&&b.isFunction(v)&&r.addErrback(function(b){return v.call(d,b,q)});var w=d.handle;w&&
    b.isFunction(w)&&r.addBoth(function(b){return w.call(d,b,q)});r.addErrback(function(b){return k(b,r)});u.ioPublish&&c.publish&&!1!==q.args.ioPublish&&(r.addCallbacks(function(b){c.publish("/dojo/io/load",[r,b]);return b},function(b){c.publish("/dojo/io/error",[r,b]);return b}),r.addBoth(function(b){c.publish("/dojo/io/done",[r,b]);return b}));r.ioArgs=q;return r};var v=function(b){b=w[b.ioArgs.handleAs](b.ioArgs.xhr,b.ioArgs);return void 0===b?null:b},x=function(b,d){d.ioArgs.args.failOk||console.error(b);
    return b},z=function(b){0>=A&&(A=0,u.ioPublish&&c.publish&&(!b||b&&!1!==b.ioArgs.args.ioPublish)&&c.publish("/dojo/io/stop"))},A=0;q.after(f,"_onAction",function(){--A});q.after(f,"_onInFlight",z);c._ioCancelAll=f.cancelAll;c._ioNotifyStart=function(b){u.ioPublish&&c.publish&&!1!==b.ioArgs.args.ioPublish&&(A||c.publish("/dojo/io/start"),A+=1,c.publish("/dojo/io/send",[b]))};c._ioWatch=function(d,a,c,k){d.ioArgs.options=d.ioArgs.args;b.mixin(d,{response:d.ioArgs,isValid:function(b){return a(d)},isReady:function(b){return c(d)},
    handleResponse:function(b){return k(d)}});f(d);z(d)};c._ioAddQueryToUrl=function(b){b.query.length&&(b.url+=(-1==b.url.indexOf("?")?"?":"\x26")+b.query,b.query=null)};c.xhr=function(b,d,a){var f,k=c._ioSetArgs(d,function(b){f&&f.cancel()},v,x),e=k.ioArgs;"postData"in d?e.query=d.postData:"putData"in d?e.query=d.putData:"rawBody"in d?e.query=d.rawBody:(2<arguments.length&&!a||-1==="POST|PUT".indexOf(b.toUpperCase()))&&c._ioAddQueryToUrl(e);var q={method:b,handleAs:{arraybuffer:1,blob:1,document:1}[d.handleAs]?
    d.handleAs:"text",responseType:d.responseType,timeout:d.timeout,withCredentials:d.withCredentials,ioArgs:e};"undefined"!==typeof d.headers&&(q.headers=d.headers);"undefined"!==typeof d.contentType&&(q.headers||(q.headers={}),q.headers["Content-Type"]=d.contentType);"undefined"!==typeof e.query&&(q.data=e.query);"undefined"!==typeof d.sync&&(q.sync=d.sync);c._ioNotifyStart(k);try{f=r(e.url,q,!0)}catch(G){return k.cancel(),k}k.ioArgs.xhr=f.response.xhr;f.then(function(){k.resolve(k)}).otherwise(function(b){e.error=
    b;b.response&&(b.status=b.response.status,b.responseText=b.response.text,b.xhr=b.response.xhr);k.reject(b)});return k};c.xhrGet=function(b){return c.xhr("GET",b)};c.rawXhrPost=c.xhrPost=function(b){return c.xhr("POST",b,!0)};c.rawXhrPut=c.xhrPut=function(b){return c.xhr("PUT",b,!0)};c.xhrDelete=function(b){return c.xhr("DELETE",b)};c._isDocumentOk=function(b){return t.checkStatus(b.status)};c._getText=function(b){var d;c.xhrGet({url:b,sync:!0,load:function(b){d=b}});return d};b.mixin(c.xhr,{_xhrObj:c._xhrObj,
    fieldToObject:h.fieldToObject,formToObject:h.toObject,objectToQuery:e.objectToQuery,formToQuery:h.toQuery,formToJson:h.toJson,queryToObject:e.queryToObject,contentHandlers:w,_ioSetArgs:c._ioSetArgs,_ioCancelAll:c._ioCancelAll,_ioNotifyStart:c._ioNotifyStart,_ioWatch:c._ioWatch,_ioAddQueryToUrl:c._ioAddQueryToUrl,_isDocumentOk:c._isDocumentOk,_getText:c._getText,get:c.xhrGet,post:c.xhrPost,put:c.xhrPut,del:c.xhrDelete});return c.xhr})},"dojo/io-query":function(){define(["./_base/lang"],function(c){var a=
    {};return{objectToQuery:function(m){var e=encodeURIComponent,l=[],h;for(h in m){var g=m[h];if(g!=a[h]){var d=e(h)+"\x3d";if(c.isArray(g))for(var n=0,b=g.length;n<b;++n)l.push(d+e(g[n]));else l.push(d+e(g))}}return l.join("\x26")},queryToObject:function(a){var e=decodeURIComponent;a=a.split("\x26");for(var l={},h,g,d=0,n=a.length;d<n;++d)if(g=a[d],g.length){var b=g.indexOf("\x3d");0>b?(h=e(g),g=""):(h=e(g.slice(0,b)),g=e(g.slice(b+1)));"string"==typeof l[h]&&(l[h]=[l[h]]);c.isArray(l[h])?l[h].push(g):
    l[h]=g}return l}}})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(c,a,m,e){var l={fieldToObject:function(c){var e=null;if(c=a.byId(c)){var d=c.name,n=(c.type||"").toLowerCase();if(d&&n&&!c.disabled)if("radio"==n||"checkbox"==n)c.checked&&(e=c.value);else if(c.multiple)for(e=[],c=[c.firstChild];c.length;)for(d=c.pop();d;d=d.nextSibling)if(1==d.nodeType&&"option"==d.tagName.toLowerCase())d.selected&&e.push(d.value);else{d.nextSibling&&c.push(d.nextSibling);
    d.firstChild&&c.push(d.firstChild);break}else e=c.value}return e},toObject:function(e){var g={};e=a.byId(e).elements;for(var d=0,n=e.length;d<n;++d){var b=e[d],p=b.name,k=(b.type||"").toLowerCase();if(p&&k&&0>"file|submit|image|reset|button".indexOf(k)&&!b.disabled){var q=g,f=p,b=l.fieldToObject(b);if(null!==b){var r=q[f];"string"==typeof r?q[f]=[r,b]:c.isArray(r)?r.push(b):q[f]=b}"image"==k&&(g[p+".x"]=g[p+".y"]=g[p].x=g[p].y=0)}}return g},toQuery:function(a){return m.objectToQuery(l.toObject(a))},
    toJson:function(a,c){return e.stringify(l.toObject(a),null,c?4:0)}};return l})},"dojo/json":function(){define(["./has"],function(c){return JSON})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(c,a,m,e,l,h,g){var d=function(){},n=Object.freeze||function(){},b=c.Deferred=function(c){function k(b){if(p)throw Error("This deferred has already been resolved");f=b;p=!0;q()}function q(){for(var b;!b&&x;){var c=
    x;x=x.next;if(b=c.progress==d)p=!1;var k=w?c.error:c.resolved;l("config-useDeferredInstrumentation")&&w&&a.instrumentRejected&&a.instrumentRejected(f,!!k);if(k)try{var e=k(f);e&&"function"===typeof e.then?e.then(h.hitch(c.deferred,"resolve"),h.hitch(c.deferred,"reject"),h.hitch(c.deferred,"progress")):(k=b&&void 0===e,b&&!k&&(w=e instanceof Error),c.deferred[k&&w?"reject":"resolve"](k?f:e))}catch(C){c.deferred.reject(C)}else w?c.deferred.reject(f):c.deferred.resolve(f)}}var f,p,g,u,w,v,x,z=this.promise=
    new m;this.isResolved=z.isResolved=function(){return 0==u};this.isRejected=z.isRejected=function(){return 1==u};this.isFulfilled=z.isFulfilled=function(){return 0<=u};this.isCanceled=z.isCanceled=function(){return g};this.resolve=this.callback=function(b){this.fired=u=0;this.results=[b,null];k(b)};this.reject=this.errback=function(b){w=!0;this.fired=u=1;l("config-useDeferredInstrumentation")&&a.instrumentRejected&&a.instrumentRejected(b,!!x);k(b);this.results=[null,b]};this.progress=function(b){for(var d=
    x;d;){var a=d.progress;a&&a(b);d=d.next}};this.addCallbacks=function(b,a){this.then(b,a,d);return this};z.then=this.then=function(a,c,f){var k=f==d?this:new b(z.cancel);a={resolved:a,error:c,progress:f,deferred:k};x?v=v.next=a:x=v=a;p&&q();return k.promise};var A=this;z.cancel=this.cancel=function(){if(!p){var b=c&&c(A);p||(b instanceof Error||(b=new e(b)),b.log=!1,A.reject(b))}g=!0};n(z)};h.extend(b,{addCallback:function(b){return this.addCallbacks(h.hitch.apply(c,arguments))},addErrback:function(b){return this.addCallbacks(null,
    h.hitch.apply(c,arguments))},addBoth:function(b){var d=h.hitch.apply(c,arguments);return this.addCallbacks(d,d)},fired:-1});b.when=c.when=g;return b})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./has!config-deferredInstrumentation?./promise/instrumentation"],function(c,a,m,e,l){var h=Object.freeze||function(){},g=function(b,a,f,e,n){c("config-deferredInstrumentation")&&2===a&&p.instrumentRejected&&0===b.length&&p.instrumentRejected(f,!1,
    e,n);for(n=0;n<b.length;n++)d(b[n],a,f,e)},d=function(d,a,f,e){var k=d[a],q=d.deferred;if(k)try{var g=k(f);if(0===a)"undefined"!==typeof g&&b(q,a,g);else{if(g&&"function"===typeof g.then){d.cancel=g.cancel;g.then(n(q,1),n(q,2),n(q,0));return}b(q,1,g)}}catch(v){b(q,2,v)}else b(q,a,f);c("config-deferredInstrumentation")&&2===a&&p.instrumentRejected&&p.instrumentRejected(f,!!k,e,q.promise)},n=function(d,a){return function(c){b(d,a,c)}},b=function(b,d,a){if(!b.isCanceled())switch(d){case 0:b.progress(a);
    break;case 1:b.resolve(a);break;case 2:b.reject(a)}},p=function(b){var a=this.promise=new e,f=this,k,n,u,l=!1,v=[];c("config-deferredInstrumentation")&&Error.captureStackTrace&&(Error.captureStackTrace(f,p),Error.captureStackTrace(a,p));this.isResolved=a.isResolved=function(){return 1===k};this.isRejected=a.isRejected=function(){return 2===k};this.isFulfilled=a.isFulfilled=function(){return!!k};this.isCanceled=a.isCanceled=function(){return l};this.progress=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");
    return a}g(v,0,b,null,f);return a};this.resolve=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");return a}g(v,k=1,n=b,null,f);v=null;return a};var x=this.reject=function(b,d){if(k){if(!0===d)throw Error("This deferred has already been fulfilled.");return a}c("config-deferredInstrumentation")&&Error.captureStackTrace&&Error.captureStackTrace(u={},x);g(v,k=2,n=b,u,f);v=null;return a};this.then=a.then=function(b,c,f){var e=[f,b,c];e.cancel=a.cancel;e.deferred=new p(function(b){return e.cancel&&
    e.cancel(b)});k&&!v?d(e,k,n,u):v.push(e);return e.deferred.promise};this.cancel=a.cancel=function(d,a){if(!k){b&&(a=b(d),d="undefined"===typeof a?d:a);l=!0;if(!k)return"undefined"===typeof d&&(d=new m),x(d),d;if(2===k&&n===d)return d}else if(!0===a)throw Error("This deferred has already been fulfilled.");};h(a)};p.prototype.toString=function(){return"[object Deferred]"};l&&l(p);return p})},"dojo/errors/CancelError":function(){define(["./create"],function(c){return c("CancelError",null,null,{dojoType:"cancel",
    log:!1})})},"dojo/errors/create":function(){define(["../_base/lang"],function(c){return function(a,m,e,l){e=e||Error;var h=function(a){if(e===Error){Error.captureStackTrace&&Error.captureStackTrace(this,h);var d=Error.call(this,a),c;for(c in d)d.hasOwnProperty(c)&&(this[c]=d[c]);this.message=a;this.stack=d.stack}else e.apply(this,arguments);m&&m.apply(this,arguments)};h.prototype=c.delegate(e.prototype,l);h.prototype.name=a;return h.prototype.constructor=h}})},"dojo/promise/Promise":function(){define(["../_base/lang"],
    function(c){function a(){throw new TypeError("abstract");}return c.extend(function(){},{then:function(c,e,l){a()},cancel:function(c,e){a()},isResolved:function(){a()},isRejected:function(){a()},isFulfilled:function(){a()},isCanceled:function(){a()},"finally":function(a){return this.then(function(c){var e=a();return e&&"function"===typeof e.then?e.then(function(){return c}):c},function(c){var e=a();if(e&&"function"===typeof e.then)return e.then(function(){throw c;});throw c;})},always:function(a){return this.then(a,
    a)},"catch":function(a){return this.then(null,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(c,a){return function(m,e,l,h){var g=m&&"function"===typeof m.then,d=g&&m instanceof a;if(!g)return 1<arguments.length?e?e(m):m:(new c).resolve(m);d||(g=new c(m.cancel),m.then(g.resolve,g.reject,g.progress),m=g.promise);
    return e||l||h?m.then(e,l,h):m}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(c,a){c.fromJson=function(a){return eval("("+a+")")};c._escapeString=a.stringify;c.toJsonIndentStr="\t";c.toJson=function(m,e){return a.stringify(m,function(a,c){return c&&(a=c.__json__||c.json,"function"==typeof a)?a.call(c):c},e&&c.toJsonIndentStr)};return c})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../has!host-browser?../_base/window: ../has!host-browser?dom-addeventlistener?:../on:".split(" "),
    function(c,a,m,e,l,h){function g(){for(var c=+new Date,k=0,e;k<b.length&&(e=b[k]);k++){var f=e.response,g=f.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(f)?(b.splice(k--,1),d._onAction&&d._onAction()):e.isReady&&e.isReady(f)?(b.splice(k--,1),e.handleResponse(f),d._onAction&&d._onAction()):e.startTime&&e.startTime+(g.timeout||0)<c&&(b.splice(k--,1),e.cancel(new a("Timeout exceeded",f)),d._onAction&&d._onAction())}d._onInFlight&&d._onInFlight(e);b.length||(clearInterval(n),n=null)}function d(d){d.response.options.timeout&&
    (d.startTime=+new Date);d.isFulfilled()||(b.push(d),n||(n=setInterval(g,50)),d.response.options.sync&&g())}var n=null,b=[];d.cancelAll=function(){try{e.forEach(b,function(b){try{b.cancel(new m("All requests canceled."))}catch(k){}})}catch(p){}};l&&h&&l.doc.attachEvent&&h(l.global,"unload",function(){d.cancelAll()});return d})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise ../has".split(" "),
    function(c,a,m,e,l,h,g,d,n){function b(b){return k(b)}function p(b){return void 0!==b.data?b.data:b.text}c.deepCopy=function(b,d){for(var a in d){var f=b[a],k=d[a];f!==k&&(f&&"object"===typeof f&&k&&"object"===typeof k?k instanceof Date?b[a]=new Date(k):c.deepCopy(f,k):b[a]=k)}return b};c.deepCreate=function(b,d){d=d||{};var a=g.delegate(b),f,k;for(f in b)(k=b[f])&&"object"===typeof k&&(a[f]=c.deepCreate(k,d[f]));return c.deepCopy(a,d)};var k=Object.freeze||function(b){return b};c.deferred=function(q,
    f,n,h,u,l){var r=new e(function(b){f&&f(r,q);return b&&(b instanceof a||b instanceof m)?b:new m("Request canceled",q)});r.response=q;r.isValid=n;r.isReady=h;r.handleResponse=u;n=r.then(b).otherwise(function(b){b.response=q;throw b;});c.notify&&n.then(g.hitch(c.notify,"emit","load"),g.hitch(c.notify,"emit","error"));h=n.then(p);u=new d;for(var t in h)h.hasOwnProperty(t)&&(u[t]=h[t]);u.response=n;k(u);l&&r.then(function(b){l.call(r,b)},function(b){l.call(r,q,b)});r.promise=u;r.then=u.then;return r};
    c.addCommonMethods=function(b,d){h.forEach(d||["GET","POST","PUT","DELETE"],function(d){b[("DELETE"===d?"DEL":d).toLowerCase()]=function(a,c){c=g.delegate(c||{});c.method=d;return b(a,c)}})};c.parseArgs=function(b,d,a){var c=d.data,f=d.query;!c||a||"object"!==typeof c||c instanceof ArrayBuffer||c instanceof Blob||(d.data=l.objectToQuery(c));f?("object"===typeof f&&(f=l.objectToQuery(f)),d.preventCache&&(f+=(f?"\x26":"")+"request.preventCache\x3d"+ +new Date)):d.preventCache&&(f="request.preventCache\x3d"+
    +new Date);b&&f&&(b+=(~b.indexOf("?")?"\x26":"?")+f);return{url:b,options:d,getHeader:function(b){return null}}};c.checkStatus=function(b){b=b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],function(c){return c("RequestError",function(a,c){this.response=c})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(c,a){return c("RequestTimeoutError",null,a,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError",
    "./watch","./handlers","./util","../has"],function(c,a,m,e,l){function h(b,d){var a=b.xhr;b.status=b.xhr.status;try{b.text=a.responseText}catch(x){}"xml"===b.options.handleAs&&(b.data=a.responseXML);var f;if(d)this.reject(d);else{try{m(b)}catch(x){f=x}e.checkStatus(a.status)?f?this.reject(f):this.resolve(b):(d=f?new c("Unable to load "+b.url+" status: "+a.status+" and an error in handleAs: transformation of response",b):new c("Unable to load "+b.url+" status: "+a.status,b),this.reject(d))}}function g(b){return this.xhr.getResponseHeader(b)}
    function d(t,u,w){var v=u&&u.data&&u.data instanceof FormData,m=e.parseArgs(t,e.deepCreate(r,u),v);t=m.url;u=m.options;var z=!u.data&&"POST"!==u.method&&"PUT"!==u.method;10>=l("ie")&&(t=t.split("#")[0]);var A,y=e.deferred(m,q,b,p,h,function(){A&&A()}),B=m.xhr=d._create();if(!B)return y.cancel(new c("XHR was not created")),w?y:y.promise;m.getHeader=g;k&&(A=k(B,y,m,u.uploadProgress));var D="undefined"===typeof u.data?null:u.data,E=!u.sync,C=u.method;try{B.open(C,t,E,u.user||f,u.password||f);u.withCredentials&&
    (B.withCredentials=u.withCredentials);u.handleAs in n&&(B.responseType=n[u.handleAs]);var F=u.headers;t=v||z?!1:"application/x-www-form-urlencoded";if(F)for(var I in F)"content-type"===I.toLowerCase()?t=F[I]:F[I]&&B.setRequestHeader(I,F[I]);t&&!1!==t&&B.setRequestHeader("Content-Type",t);F&&"X-Requested-With"in F||B.setRequestHeader("X-Requested-With","XMLHttpRequest");e.notify&&e.notify.emit("send",m,y.promise.cancel);B.send(D)}catch(G){y.reject(G)}a(y);B=null;return w?y:y.promise}l.add("dojo-force-activex-xhr",
    function(){return 0});var n={blob:"blob",document:"document",arraybuffer:"arraybuffer"},b,p,k,q;b=function(b){return!this.isFulfilled()};q=function(b,d){d.xhr.abort()};k=function(b,d,a,f){function k(b){d.handleResponse(a)}function e(b){b=new c("Unable to load "+a.url+" status: "+b.target.status,a);d.handleResponse(a,b)}function p(b,c){a.transferType=b;c.lengthComputable?(a.loaded=c.loaded,a.total=c.total,d.progress(a)):3===a.xhr.readyState&&(a.loaded="loaded"in c?c.loaded:c.position,d.progress(a))}
    function q(b){return p("download",b)}function n(b){return p("upload",b)}b.addEventListener("load",k,!1);b.addEventListener("error",e,!1);b.addEventListener("progress",q,!1);f&&b.upload&&b.upload.addEventListener("progress",n,!1);return function(){b.removeEventListener("load",k,!1);b.removeEventListener("error",e,!1);b.removeEventListener("progress",q,!1);b.upload.removeEventListener("progress",n,!1);b=null}};var f,r={data:null,query:null,sync:!1,method:"GET"};d._create=function(){throw Error("XMLHTTP not available");
    };l("dojo-force-activex-xhr")||(d._create=function(){return new XMLHttpRequest});e.addCommonMethods(d);return d})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../has!dom?../selector/_loader"],function(c,a,m,e){function l(a){var d=h[a.options.handleAs];a.data=d?d(a):a.data||a.text;return a}m=function(a){return a.xhr.response};var h={javascript:function(c){return a.eval(c.text||"")},json:function(a){return c.parse(a.text||null)},xml:void 0,blob:m,
    arraybuffer:m,document:m};l.register=function(a,d){h[a]=d};return l})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(c,a,m,e,l,h,g,d,n){var b=m.mixin,p={},k=p._Line=function(b,d){this.start=b;this.end=d};k.prototype.getValue=function(b){return(this.end-this.start)*b+this.start};var q=p.Animation=function(d){b(this,d);m.isArray(this.curve)&&(this.curve=new k(this.curve[0],this.curve[1]))};q.prototype=new e;
    m.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var b=this._percent,d=this.easing;return d?d(b):b},_fire:function(b,d){d=d||[];if(this[b])if(a.debugAtAllCosts)this[b].apply(this,d);else try{this[b].apply(this,d)}catch(z){console.error("exception in animation handler for:",b),console.error(z)}return this},play:function(b,d){this._delayTimer&&this._clearTimer();if(d)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;
    this._fire("beforeBegin",[this.node]);b=b||this.delay;d=m.hitch(this,"_play",d);if(0<b)return this._delayTimer=setTimeout(d,b),this;d();return this},_play:function(b){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;b=this.curve.getValue(this._getStep());this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[b]));this._fire("onPlay",[b]);
    this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(b,d){this._stopTimer();this._active=this._paused=!0;this._percent=b;d&&this.play();return this},stop:function(b){this._delayTimer&&this._clearTimer();if(!this._timer)return this;this._stopTimer();b&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);
    this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var b=(new Date).valueOf(),b=0===this.duration?1:(b-this._startTime)/this.duration;1<=b&&(b=1);this._percent=b;this.easing&&(b=this.easing(b));this._fire("onAnimate",[this.curve.getValue(b)]);1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,
    !0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var f=0,r=null,t={run:function(){}};m.extend(q,{_startTimer:function(){this._timer||(this._timer=h.after(t,"run",m.hitch(this,"_cycle"),!0),f++);r||(r=setInterval(m.hitch(t,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),
    this._timer=null,f--);0>=f&&(clearInterval(r),r=null,f=0)}});var u=g("ie")?function(b){var d=b.style;d.width.length||"auto"!=n.get(b,"width")||(d.width="auto")}:function(){};p._fade=function(a){a.node=d.byId(a.node);var c=b({properties:{}},a);a=c.properties.opacity={};a.start="start"in c?c.start:function(){return+n.get(c.node,"opacity")||0};a.end=c.end;a=p.animateProperty(c);h.after(a,"beforeBegin",m.partial(u,c.node),!0);return a};p.fadeIn=function(d){return p._fade(b({end:1},d))};p.fadeOut=function(d){return p._fade(b({end:0},
    d))};p._defaultEasing=function(b){return.5+Math.sin((b+1.5)*Math.PI)/2};var w=function(b){this._properties=b;for(var d in b){var a=b[d];a.start instanceof l&&(a.tempColor=new l)}};w.prototype.getValue=function(b){var d={},a;for(a in this._properties){var c=this._properties[a],f=c.start;f instanceof l?d[a]=l.blendColors(f,c.end,b,c.tempColor).toCss():m.isArray(f)||(d[a]=(c.end-f)*b+f+("opacity"!=a?c.units||"px":0))}return d};p.animateProperty=function(a){var f=a.node=d.byId(a.node);a.easing||(a.easing=
    c._defaultEasing);a=new q(a);h.after(a,"beforeBegin",m.hitch(a,function(){var d={},a;for(a in this.properties){var c=function(b,d){var a={height:b.offsetHeight,width:b.offsetWidth}[d];if(void 0!==a)return a;a=n.get(b,d);return"opacity"==d?+a:e?a:parseFloat(a)};if("width"==a||"height"==a)this.node.display="block";var k=this.properties[a];m.isFunction(k)&&(k=k(f));k=d[a]=b({},m.isObject(k)?k:{end:k});m.isFunction(k.start)&&(k.start=k.start(f));m.isFunction(k.end)&&(k.end=k.end(f));var e=0<=a.toLowerCase().indexOf("color");
    "end"in k?"start"in k||(k.start=c(f,a)):k.end=c(f,a);e?(k.start=new l(k.start),k.end=new l(k.end)):k.start="opacity"==a?+k.start:parseFloat(k.start)}this.curve=new w(d)}),!0);h.after(a,"onAnimate",m.hitch(n,"set",a.node),!0);return a};p.anim=function(b,d,a,c,f,k){return p.animateProperty({node:b,duration:a||q.prototype.duration,properties:d,easing:c,onEnd:f}).play(k||0)};b(c,p);c._Animation=q;return p})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(c,a,
    m,e){var l=c.Color=function(a){a&&this.setColor(a)};l.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:e.transparentColor||[0,0,0,0]};a.extend(l,{r:255,g:255,b:255,a:1,_set:function(a,c,d,e){this.r=a;this.g=c;this.b=d;this.a=e},setColor:function(c){a.isString(c)?
    l.fromString(c,this):a.isArray(c)?l.fromArray(c,this):(this._set(c.r,c.g,c.b,c.a),c instanceof l||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+m.map(["r","g","b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var c=this.r+", "+this.g+", "+this.b;return(a?"rgba("+c+", "+this.a:"rgb("+c)+")"},toString:function(){return this.toCss(!0)}});
    l.blendColors=c.blendColors=function(a,c,d,e){e=e||new l;e.r=Math.round(a.r+(c.r-a.r)*d);e.g=Math.round(a.g+(c.g-a.g)*d);e.b=Math.round(a.b+(c.b-a.b)*d);e.a=a.a+(c.a-a.a)*d;return e.sanitize()};l.fromRgb=c.colorFromRgb=function(a,c){return(a=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/))&&l.fromArray(a[1].split(/\s*,\s*/),c)};l.fromHex=c.colorFromHex=function(a,c){var d=c||new l,e=4==a.length?4:8,b=(1<<e)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;m.forEach(["b","g","r"],function(c){var k=
    a&b;a>>=e;d[c]=4==e?17*k:k});d.a=1;return d};l.fromArray=c.colorFromArray=function(a,c){c=c||new l;c._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(c.a)&&(c.a=1);return c.sanitize()};l.fromString=c.colorFromString=function(a,c){var d=l.named[a];return d&&l.fromArray(d,c)||l.fromRgb(a,c)||l.fromHex(a,c)};return l})},"dojo/request":function(){define(["./request/default!"],function(c){return c})},"dojo/request/default":function(){define(["exports","require","../has"],function(c,a,m){var e=
    m("config-requestProvider"),l;if(m("host-browser")||m("host-webworker"))l="./xhr";e||(e=l);c.getPlatformDefaultId=function(){return l};c.load=function(c,g,d,n){a(["platform"==c?l:e],function(b){d(b)})}})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Basemap ./Ground ./core/Accessor ./core/CollectionFlattener ./core/Evented ./core/Logger ./core/accessorSupport/decorators ./support/basemapUtils ./support/groundUtils ./support/LayersMixin".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){var r=b.getLogger("esri.Map");return function(b){function a(d){d=b.call(this,d)||this;d.basemap=null;d.ground=new h;d._basemapCache=k.createCache();return d}m(a,b);Object.defineProperty(a.prototype,"allLayers",{get:function(){return new d({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(b){return b.layers}})},enumerable:!0,configurable:!0});a.prototype.castBasemap=function(b){return k.ensureType(b,
    this._basemapCache)};a.prototype.castGround=function(b){b=q.ensureType(b);return b?b:(r.error("Map.ground may not be set to null or undefined"),this._get("ground"))};a.prototype.findLayerById=function(b){return this.allLayers.find(function(d){return d.id===b})};e([p.property({readOnly:!0})],a.prototype,"allLayers",null);e([p.property({type:l})],a.prototype,"basemap",void 0);e([p.cast("basemap")],a.prototype,"castBasemap",null);e([p.property({type:h,nonNullable:!0})],a.prototype,"ground",void 0);e([p.cast("ground")],
    a.prototype,"castGround",null);return a=e([p.subclass("esri.Map")],a)}(p.declared(f.LayersMixin(n.EventedMixin(g))))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(c,a){return function(a,c){a.__bases__=c.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(c,a,m,e){var l=arguments.length,h=3>l?a:null===e?e=Object.getOwnPropertyDescriptor(a,m):e,g;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)h=
    Reflect.decorate(c,a,m,e);else for(var d=c.length-1;0<=d;d--)if(g=c[d])h=(3>l?g(h):3<l?g(a,m,h):g(a,m))||h;return 3<l&&h&&Object.defineProperty(a,m,h),h}})},"esri/Basemap":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./core/arrayUtils ./core/Collection ./core/collectionUtils ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/promiseUtils ./core/urlUtils ./core/accessorSupport/decorators ./portal/Portal ./portal/PortalItem ./support/basemapDefinitions ./webdoc/support/writeUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A){var y=0,B=f.getLogger("esri.Basemap");return function(b){function a(a){var c=b.call(this,a)||this;c.id=null;c.portalItem=null;c.spatialReference=null;c.thumbnailUrl=null;c.title="Basemap";c.id=Date.now().toString(16)+"-basemap-"+y++;c.baseLayers=new d;c.referenceLayers=new d;var f=function(b){b.parent&&b.parent!==c&&"remove"in b.parent&&b.parent.remove(b);b.parent=c;"elevation"===b.type&&B.error("Layer '"+b.title+", id:"+b.id+"' of type '"+b.type+
    "' is not supported as a basemap layer and will therefore be ignored.")};c.baseLayers.on("after-add",function(b){return f(b.item)});c.referenceLayers.on("after-add",function(b){return f(b.item)});c.baseLayers.on("after-remove",function(b){b.item.parent=null});c.referenceLayers.on("after-remove",function(b){b.item.parent=null});return c}e(a,b);f=a;a.prototype.initialize=function(){var b=this;this.when().catch(function(a){B.error("#load()","Failed to load basemap (title: '"+b.title+"', id: '"+b.id+
    "')",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};a.prototype.normalizeCtorArgs=function(b){b&&"resourceInfo"in b&&(this._set("resourceInfo",b.resourceInfo),b=m({},b),delete b.resourceInfo);return b};Object.defineProperty(a.prototype,"baseLayers",{set:function(b){this._set("baseLayers",n.referenceSetter(b,this._get("baseLayers")))},enumerable:!0,configurable:!0});a.prototype.writeBaseLayers=function(b,a,d,c){var f=this,k=[];b&&(c=m({},c,{layerContainerType:"basemap"}),
    this.baseLayers.forEach(function(b){b=A.getLayerJSON(b,f._getLayerJSONFromResourceInfo(b),c);r.isSome(b)&&k.push(b)}),this.referenceLayers.forEach(function(b){b=A.getLayerJSON(b,f._getLayerJSONFromResourceInfo(b),c);r.isSome(b)&&(b.isReference=!0,k.push(b))}));a[d]=k};Object.defineProperty(a.prototype,"referenceLayers",{set:function(b){this._set("referenceLayers",n.referenceSetter(b,this._get("referenceLayers")))},enumerable:!0,configurable:!0});a.prototype.writeTitle=function(b,a){a.title=b||"Basemap"};
    a.prototype.load=function(b){this.addResolvingPromise(this._loadFromSource(b));return this.when()};a.prototype.loadAll=function(){var b=this;return q.loadAll(this,function(a){a(b.baseLayers,b.referenceLayers)})};a.prototype.clone=function(){var b={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};this.loaded&&(b.loadStatus="loaded");return(new f({resourceInfo:this.resourceInfo})).set(b)};a.prototype.read=function(b,
    a){this.resourceInfo||this._set("resourceInfo",{data:b,context:a});this.inherited(arguments)};a.prototype.write=function(b,a){b=b||{};a&&a.origin||(a=m({origin:"web-map"},a));this.inherited(arguments,[b,a]);!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(b.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(function(b){b=p.clone(b);b.url&&u.isProtocolRelative(b.url)&&(b.url="https:"+b.url);b.templateUrl&&u.isProtocolRelative(b.templateUrl)&&(b.templateUrl="https:"+b.templateUrl);
    return b}));return b};a.prototype._loadFromSource=function(b){var a=this.resourceInfo,d=this.portalItem;t.throwIfAborted(b);return a?this._loadLayersFromJSON(a.data,a.context?a.context.url:null,b):d?this._loadFromItem(d,b):t.resolve(null)};a.prototype._loadLayersFromJSON=function(b,a,d){var f=this,k=this.resourceInfo&&this.resourceInfo.context,e=this.portalItem&&this.portalItem.portal||k&&k.portal||null,p=k&&"web-scene"===k.origin?"web-scene":"web-map";return t.create(function(b){return c(["./portal/support/layersCreator"],
    b)}).then(function(c){var k=[];t.throwIfAborted(d);if(b.baseMapLayers&&Array.isArray(b.baseMapLayers)){var q={context:{origin:p,url:a,portal:e,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},n=c.populateOperationalLayers(f.baseLayers,b.baseMapLayers.filter(function(b){return!b.isReference}),q);k.push(n);c=c.populateOperationalLayers(f.referenceLayers,b.baseMapLayers.filter(function(b){return b.isReference}),q);k.push(c)}return t.eachAlways(k)}).then(function(){})};a.prototype._loadFromItem=
    function(b,a){var d=this;return b.load(a).then(function(b){return b.fetchData("json",a)}).then(function(c){var f=u.urlToObject(b.itemUrl);d._set("resourceInfo",{data:c.baseMap,context:{origin:"web-map",portal:b.portal||v.getDefault(),url:f}});d.read(d.resourceInfo.data,d.resourceInfo.context);d.read({spatialReference:c.spatialReference},d.resourceInfo.context);d.read({title:b.title,thumbnailUrl:b.thumbnailUrl},{origin:"portal-item",portal:b.portal||v.getDefault(),url:f});return d._loadLayersFromJSON(d.resourceInfo.data,
    f,a)})};a.prototype._getLayerJSONFromResourceInfo=function(b){var a=this.get("resourceInfo.data.baseMapLayers");return r.isSome(a)?g.find(a,function(a){return a.id===b.id}):null};a.fromId=function(b){return(b=z.esriBasemapDefinitions[b])?f.fromJSON(b):null};var f;l([w.property({json:{write:{ignoreOrigin:!0,target:"baseMapLayers"}}})],a.prototype,"baseLayers",null);l([w.writer("baseLayers")],a.prototype,"writeBaseLayers",null);l([w.property({type:String,json:{origins:{"web-scene":{write:!0}}}})],a.prototype,
    "id",void 0);l([w.property({type:x})],a.prototype,"portalItem",void 0);l([w.property()],a.prototype,"referenceLayers",null);l([w.property({readOnly:!0})],a.prototype,"resourceInfo",void 0);l([w.property({type:h.SpatialReference})],a.prototype,"spatialReference",void 0);l([w.property()],a.prototype,"thumbnailUrl",void 0);l([w.property({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"title",void 0);l([w.writer("title")],a.prototype,"writeTitle",null);return a=f=l([w.subclass("esri.Basemap")],
    a)}(w.declared(b.JSONSupportMixin(k)))})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(c){for(var a,m=1,e=arguments.length;m<e;m++){a=arguments[m];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(c[l]=a[l])}return c}})},"esri/geometry":function(){define("require exports ./core/jsonMap ./core/accessorSupport/ensureType ./geometry/Extent ./geometry/Geometry ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=l;a.BaseGeometry=h;a.Multipoint=g;a.Point=d;a.Polygon=n;a.Polyline=b;a.SpatialReference=p;a.isGeometry=function(b){return b instanceof a.BaseGeometry};a.fromJSON=k.fromJSON;a.typeKebabDictionary=m.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"});a.isFeatureGeometryType=function(b){return"point"===
    b||"multipoint"===b||"polyline"===b||"polygon"===b};a.featureGeometryTypeKebabDictionary=m.strict()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"});a.geometryTypes={base:a.BaseGeometry,key:"type",typeMap:{extent:a.Extent,multipoint:a.Multipoint,point:a.Point,polyline:a.Polyline,polygon:a.Polygon}};a.ensureType=e.ensureOneOfType(a.geometryTypes)})},"esri/core/jsonMap":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,
    "__esModule",{value:!0});var m=function(){function a(a,c){void 0===c&&(c={ignoreUnknown:!1});var e=this;this.jsonToAPI=a;this.options=c;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(a);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(a){return e.fromJSON(a)};this.write=function(a,c,b){a=e.toJSON(a);void 0!==a&&(c[b]=a)}}a.prototype.toJSON=function(a){return this.apiToJSON.hasOwnProperty(a)?this.apiToJSON[a]:
    this.options.ignoreUnknown?void 0:a};a.prototype.fromJSON=function(a){return this.jsonToAPI.hasOwnProperty(a)?this.jsonToAPI[a]:this.options.ignoreUnknown?void 0:a};a.prototype.invertMap=function(a){var c={},e;for(e in a)c[a[e]]=e;return c};a.prototype.getKeysSorted=function(a){var c=[],e;for(e in a)c.push(e);c.sort();return c};return a}();a.JSONMap=m;a.strict=function(){return function(a){return new m(a,{ignoreUnknown:!0})}};a.default=m})},"esri/core/accessorSupport/ensureType":function(){define(["require",
    "exports","../compilerUtils","../Logger"],function(c,a,m,e){function l(b){return null==b?b:new Date(b)}function h(b){return null==b?b:!!b}function g(b){return null==b?b:b.toString()}function d(b){return null==b?b:"number"===typeof b&&isNaN(b)?0:parseFloat(b)}function n(b){return null==b?b:Math.round(parseFloat(b))}function b(b){return b&&b.constructor&&void 0!==b.constructor._meta}function p(b,a){return null!=a&&b&&!(a instanceof b)}function k(b){return b&&("isCollection"in b||b._meta&&b._meta.bases&&
    b._meta.bases.some(function(b){return"isCollection"in b}))}function q(b){return b&&b.Type?"function"===typeof b.Type?b.Type:b.Type.base:null}function f(b,a){if(!a||!a.constructor||!k(a.constructor))return r(b,a)?a:new b(a);var d=q(b.prototype.itemType),c=q(a.constructor.prototype.itemType);if(!d)return a;if(!c)return new b(a);if(d===c)return a;if((c=c._meta&&c._meta.bases)&&-1!==c.indexOf(d))return new b(a);r(b,a);return a}function r(a,d){return b(d)?(I.error("Accessor#set","Assigning an instance of '"+
    (d.declaredClass||"unknown")+"' which is not a subclass of '"+u(a)+"'"),!0):!1}function t(b,a){return null==a?a:k(b)?f(b,a):p(b,a)?r(b,a)?a:new b(a):a}function u(b){return b&&b.prototype&&b.prototype.declaredClass||"unknown"}function w(b){switch(b){case Number:return d;case G:return n;case Boolean:return h;case String:return g;case Date:return l;default:return t.bind(null,b)}}function v(b,a){var d=w(b);return 1===arguments.length?d:d(a)}function x(b,a,d){return 1===arguments.length?x.bind(null,b):
    a?Array.isArray(a)?a.map(function(a){return b(a,d)}):[b(a,d)]:a}function z(b,a,d){return 0!==a&&Array.isArray(d)?d.map(function(d){return z(b,a-1,d)}):b(d)}function A(b,a,d){if(2===arguments.length)return A.bind(null,b,a);if(!d)return d;d=z(b,a,d);for(var c=a,f=d;0<c&&Array.isArray(f);)c--,f=f[0];if(void 0!==f)for(f=0;f<c;f++)d=[d];return d}function y(b,a){if(2===arguments.length)return y(b).call(null,a);for(var d=new Set,c=b.filter(function(b){return"function"!==typeof b}),f=b.filter(function(b){return"function"===
    typeof b}),k=0;k<b.length;k++){var e=b[k];"string"!==typeof e&&"number"!==typeof e||d.add(e)}var q=null,n=null;return function(b,a){if(null==b)return b;var k=typeof b,e="string"===k||"number"===k;if(e&&(d.has(b)||f.some(function(b){return"string"===k&&b===String||"number"===k&&b===Number}))||"object"===k&&f.some(function(a){return!p(b,a)}))return b;e&&c.length?(q||(q=c.map(function(b){return"string"===typeof b?"'"+b+"'":""+b}).join(", ")),I.error("Accessor#set","'"+b+"' is not a valid value for this property, only the following values are valid: "+
    q)):"object"===typeof b&&f.length?(n||(n=f.map(function(b){return u(b)}).join(", ")),I.error("Accessor#set","'"+b+"' is not a valid value for this property, value must be one of "+n)):I.error("Accessor#set","'"+b+"' is not a valid value for this property");a&&(a.valid=!1);return null}}function B(a,d){if(2===arguments.length)return B(a).call(null,d);var c={},f=[],k=[],e;for(e in a.typeMap){var q=a.typeMap[e];c[e]=v(q);f.push(u(q));k.push(e)}var n="string"===typeof a.key?function(b){return b[a.key]}:
    a.key;return function(d){if(a.base&&!p(a.base,d)||null==d)return d;var e=n(d)||a.defaultKeyValue,q=c[e];if(!q)return I.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+f.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+k.join("', '")+"'")+")"),null;if(!p(a.typeMap[e],d))return d;if("string"===typeof a.key&&!b(d)){var e={},g;for(g in d)g!==a.key&&(e[g]=d[g]);return q(e)}return q(d)}}function D(b){switch(b.type){case "native":return v(b.value);
    case "array":return x(D(b.value));case "one-of":return E(b);default:m.neverReached(b)}return null}function E(b){var a=null;return function(d,c){if(F(d,b))return d;null==a&&(a=C(b));I.error("Accessor#set","Invalid property value, value needs to be of type "+a);c&&(c.valid=!1);return null}}function C(b){switch(b.type){case "native":switch(b.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case G:return"integer";case Date:return"date";default:return u(b.value)}case "array":return"array of "+
    C(b.value);case "one-of":return b=b.values.map(function(b){return C(b)}),"one of "+b.slice(0,b.length-1)+" or "+b[b.length-1];default:m.neverReached(b)}return"unknown"}function F(b,a){if(null==b)return!0;switch(a.type){case "native":switch(a.value){case Number:case G:return"number"===typeof b;case Boolean:return"boolean"===typeof b;case String:return"string"===typeof b}return b instanceof a.value;case "array":return Array.isArray(b)?!b.some(function(b){return!F(b,a.value)}):!1;case "one-of":return a.values.some(function(a){return F(b,
    a)})}}Object.defineProperty(a,"__esModule",{value:!0});var I=e.getLogger("esri.core.Accessor");a.ensureDate=l;a.ensureBoolean=h;a.ensureString=g;a.ensureNumber=d;a.ensureInteger=n;a.isClassedType=b;a.requiresType=p;a.ensureClass=t;a.ensureType=v;a.ensureArrayTyped=x;a.ensureArray=function(b,a){return 1===arguments.length?x(v.bind(null,b)):x(v.bind(null,b),a)};a.ensureNArrayTyped=A;a.ensureNArray=function(b,a,d){return 2===arguments.length?A(v.bind(null,b),a):A(v.bind(null,b),a,d)};a.isOneOf=function(b){return Array.isArray(b)?
    !b.some(function(a){a=typeof a;return!("string"===a||"number"===a||"function"===a&&1<b.length)}):!1};a.ensureOneOf=y;a.ensureOneOfType=B;var G=function(){return function(){}}();a.Integer=G;a.types={native:function(b){return{type:"native",value:b}},array:function(b){return{type:"array",value:b}},oneOf:function(b){return{type:"one-of",values:b}}};a.isLongFormType=function(b){if(!(b&&"type"in b))return!1;switch(b.type){case "native":case "array":case "one-of":return!0;default:m.neverReachedSilent(b)}return!1};
    a.ensureLongFormType=D;a.default=v})},"esri/core/compilerUtils":function(){define(["require","exports","./has"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.neverReached=function(a){};a.neverReachedSilent=function(a){};a.typeCast=function(a){return function(){return a}};a.tuple=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return a}})},"esri/core/has":function(){define(["require","exports","dojo/sniff","./global","../views/webgl/context-util"],function(c,
    a,m,e,l){function h(){if(d)return d;d={available:!1,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,version:0};var b=document.createElement("canvas");if(!b)return d;var a=l.createContext(b,{failIfMajorPerformanceCaveat:!0},"webgl");!a&&(a=l.createContext(b,{},"webgl"))&&(d.majorPerformanceCaveat=!0);if(!a)return d;b=a.getParameter(a.VERSION);
    if(!b)return d;if(b=b.match(/^WebGL\s+([\d.]*)/)){d.version=parseFloat(b[1]);d.available=.94<=d.version;if(b=a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT))d.supportsHighPrecisionFragment=0<b.precision;d.supportsVertexShaderSamplers=0<a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS);d.supportsElementIndexUint=null!==a.getExtension("OES_element_index_uint");d.supportsStandardDerivatives=null!==a.getExtension("OES_standard_derivatives");d.supportsInstancedArrays=null!==a.getExtension("ANGLE_instanced_arrays");
    d.supportsTextureFloat=null!==a.getExtension("OES_texture_float")}d.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE);return d}function g(){if(n)return n;n={available:!1,version:0};var b=document.createElement("canvas");if(!b)return n;b=l.createContext(b,{},"webgl2");if(!b)return n;n.available=!0;b=b.getParameter(b.VERSION);if(!b)return n;if(b=b.match(/^WebGL\s+([\d.]*)/))n.version=parseFloat(b[1]);return n}(function(){var b=navigator.userAgent,a=b.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i),
    b=b.match(/iPhone/i);a&&m.add("esri-mobile",a);b&&m.add("esri-iPhone",b);m.add("esri-geolocation",function(){return!!navigator.geolocation});m.add("esri-canvas-svg-support",function(){return!(m("trident")||m("ie"))});m.add("esri-secure-context",function(){if("isSecureContext"in e)return e.isSecureContext;if(e.location&&e.location.origin)return 0===e.location.origin.indexOf("https:")});m.add("esri-wasm","WebAssembly"in e);m.add("esri-shared-array-buffer",function(){var b=!1===e.crossOriginIsolated;
    return"SharedArrayBuffer"in e&&!b});m.add("esri-atomics","Atomics"in e);m.add("esri-workers","Worker"in e);m.add("esri-text-decoder","TextDecoder"in e);m.add("esri-deprecation-warnings",!0);m("host-webworker")||(m.add("esri-abortable-fetch","fetch"in e&&"signal"in new Request("https://www.arcgis.com")),m.add("esri-image-decode",function(){if("decode"in new Image){var b=new Image;b.src='data:image/svg+xml;charset\x3dUTF-8,\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg"\x3e\x3c/svg\x3e';
    b.decode().then(function(){m.add("esri-image-decode",!0,!0,!0)}).catch(function(){m.add("esri-image-decode",!1,!0,!0)})}else return!1}),m.add("esri-url-encodes-apostrophe",function(){var b=e.document.createElement("a");b.href="?'";return-1<b.href.indexOf("?%27")}),m.add("esri-webgl",function(){return h().available}),m.add("esri-webgl-high-precision-fragment",function(){return h().supportsHighPrecisionFragment}),m.add("esri-webgl-vertex-shader-samplers",function(){return h().supportsVertexShaderSamplers}),
    m.add("esri-webgl-element-index-uint",function(){return h().supportsElementIndexUint}),m.add("esri-webgl-standard-derivatives",function(){return h().supportsStandardDerivatives}),m.add("esri-webgl-texture-float",function(){return h().supportsTextureFloat}),m.add("esri-webgl-instanced-arrays",function(){return h().supportsInstancedArrays}),m.add("esri-webgl-major-performance-caveat",function(){return h().majorPerformanceCaveat}),m.add("esri-featurelayer-webgl",!0),m.add("esri-featurelayer-webgl-labeling",
    !0),m.add("esri-webgl2",function(){return g().available}),m.add("esri-webgl-max-texture-size",function(){return h().maxTextureSize}))})();var d=null,n=null;return m})},"esri/core/global":function(){define(["require","exports"],function(c,a){return function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}()})},"esri/views/webgl/context-util":function(){define(["require",
    "exports"],function(c,a){function m(a,d,c){void 0===d&&(d={});var b;switch(c){case "webgl":b=["webgl","experimental-webgl","webkit-3d","moz-webgl"];break;case "webgl2":b=["webgl2"];break;default:b=["webgl","experimental-webgl","webkit-3d","moz-webgl"]}c=null;for(var e=0;e<b.length;e++){var k=b[e];try{c=a.getContext(k,d)}catch(q){}if(c)break}return c}function e(a,d){(a=a.parentNode)&&(a.innerHTML='\x3ctable style\x3d"background-color: #8CE; width: 100%; height: 100%;"\x3e\x3ctr\x3e\x3ctd align\x3d"center"\x3e\x3cdiv style\x3d"display: table-cell; vertical-align: middle;"\x3e\x3cdiv style\x3d""\x3e'+
    d+"\x3c/div\x3e\x3c/div\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e")}Object.defineProperty(a,"__esModule",{value:!0});a.createContextOrErrorHTML=function(a,d,c){void 0===d&&(d={});if(!window.WebGLRenderingContext)return e(a,l),null;d=m(a,d,c);return d?d:(e(a,h),null)};a.createContext=m;var l='This page requires a browser that supports WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org"\x3eClick here to upgrade your browser.\x3c/a\x3e',h='It doesn\'t appear your computer can support WebGL.\x3cbr/\x3e\x3ca href\x3d"http://get.webgl.org/troubleshooting/"\x3eClick here for more information.\x3c/a\x3e'})},
    "esri/core/Logger":function(){define(["require","exports","./has","./string","@dojo/framework/shim/Promise"],function(c,a,m,e){var l={info:0,warn:1,error:2};c=function(){function a(c){void 0===c&&(c={});this._loggedMessages={error:new Map,warn:new Map,info:new Map};this.module=c.module||"";this.writer=c.writer||null;this.level=c.level||null;null!=c.enabled&&(this.enabled=!!c.enabled);a._loggers[this.module]=this;c=this.module.lastIndexOf(".");-1!==c&&(this.parent=a.getLogger(this.module.slice(0,c)))}
    a.prototype.log=function(c,d){for(var e=[],b=2;b<arguments.length;b++)e[b-2]=arguments[b];if(this._isEnabled()&&this._matchLevel(c)){if("always"!==d&&!a._throttlingDisabled){var b=this._argsToKey(e),p=this._loggedMessages[c].get(b);if("once"===d&&null!=p||"oncePerTick"===d&&p>=a._tickCounter)return;this._loggedMessages[c].set(b,a._tickCounter);a._scheduleTickCounterIncrement()}(b=this._inheritedWriter())&&b.apply(void 0,[c,this.module].concat(e))}};a.prototype.error=function(){for(var a=[],d=0;d<
    arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["error","always"].concat(a))};a.prototype.warn=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["warn","always"].concat(a))};a.prototype.info=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["info","always"].concat(a))};a.prototype.errorOnce=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["error","once"].concat(a))};
    a.prototype.warnOnce=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["warn","once"].concat(a))};a.prototype.infoOnce=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["info","once"].concat(a))};a.prototype.errorOncePerTick=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["error","oncePerTick"].concat(a))};a.prototype.warnOncePerTick=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=
    arguments[d];this.log.apply(this,["warn","oncePerTick"].concat(a))};a.prototype.infoOncePerTick=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["info","oncePerTick"].concat(a))};a.prototype.getLogger=function(c){return a.getLogger(this.module+"."+c)};Object.defineProperty(a,"test",{get:function(){return{resetLoggers:function(c){void 0===c&&(c={});var d=a._loggers;a._loggers=c;return d},set throttlingDisabled(c){a._throttlingDisabled=c}}},enumerable:!0,configurable:!0});
    a.getLogger=function(c){var d=a._loggers[c];d||(d=new a({module:c}));return d};a.prototype._parentWithMember=function(a,d){for(var c=this;c&&null==c[a];)c=c.parent;return c?c[a]:d};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,d){for(var c=[],b=2;b<arguments.length;b++)c[b-2]=arguments[b];console[a].apply(console,["["+d+"]"].concat(c))};a.prototype._matchLevel=function(a){return l[this._parentWithMember("level",
    "error")]<=l[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a.prototype._argsToKey=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return e.numericHash(JSON.stringify(a,function(a,b){return"object"!==typeof b||Array.isArray(b)?b:"[Object]"}))};a._scheduleTickCounterIncrement=function(){a._tickCounterScheduled||(a._tickCounterScheduled=!0,Promise.resolve().then(function(){a._tickCounter++;a._tickCounterScheduled=!1}))};a._loggers={};a._tickCounter=
    0;a._tickCounterScheduled=!1;a._throttlingDisabled=!1;return a}();c.getLogger("esri").level="warn";return c})},"esri/core/string":function(){define(["require","exports","./object","@dojo/framework/shim/string"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});var l=/\{([^\}]+)\}/g;a.endsWith=e.endsWith;a.startsWith=e.startsWith;a.replace=function(a,c){return a.replace(l,"object"===typeof c?function(a,e){return m.getDeepValue(e,c)}:function(a,e){return c(e)})};a.escapeRegExpString=
    function(a){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return"\\"+a})};a.numericHash=function(a){for(var c=0,d=0;d<a.length;d++)c=(c<<5)-c+a.charCodeAt(d),c|=0;return c}})},"esri/core/object":function(){define(["require","exports"],function(c,a){function m(a,c,h){for(var e=0;e<a.length;e++){var d=a[e];if(null==h)return;if(!(d in h))if(c)h[d]={};else return;h=h[d]}return h}Object.defineProperty(a,"__esModule",{value:!0});a.getDeepValue=function(a,c){if(null!=c)return c[a]||m(a.split("."),
    !1,c)};a.setDeepValue=function(a,c,h){var e=a.split(".");a=e.pop();(h=m(e,!0,h))&&a&&(h[a]=c)}})},"@dojo/framework/shim/string":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ../has/has ./support/util".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=c("tslib"),e=c("./global"),l=c("../has/has");
    c=c("./support/util");a.HIGH_SURROGATE_MIN=55296;a.HIGH_SURROGATE_MAX=56319;a.LOW_SURROGATE_MIN=56320;a.LOW_SURROGATE_MAX=57343;if(l.default("es6-string")&&l.default("es6-string-raw"))a.fromCodePoint=e.default.String.fromCodePoint,a.raw=e.default.String.raw,a.codePointAt=c.wrapNative(e.default.String.prototype.codePointAt),a.endsWith=c.wrapNative(e.default.String.prototype.endsWith),a.includes=c.wrapNative(e.default.String.prototype.includes),a.normalize=c.wrapNative(e.default.String.prototype.normalize),
    a.repeat=c.wrapNative(e.default.String.prototype.repeat),a.startsWith=c.wrapNative(e.default.String.prototype.startsWith);else{var h=function(a,d,c,b,e){void 0===e&&(e=!1);if(null==d)throw new TypeError("string."+a+" requires a valid string to search against.");a=d.length;return[d,String(c),Math.min(Math.max(b!==b?e?a:0:b,0),a)]};a.fromCodePoint=function(){for(var c=0;c<arguments.length;c++);c=arguments.length;if(!c)return"";for(var d=String.fromCharCode,e=[],b=-1,p="";++b<c;){var k=Number(arguments[b]);
    if(!(isFinite(k)&&Math.floor(k)===k&&0<=k&&1114111>=k))throw RangeError("string.fromCodePoint: Invalid code point "+k);65535>=k?e.push(k):(k-=65536,e.push((k>>10)+a.HIGH_SURROGATE_MIN,k%1024+a.LOW_SURROGATE_MIN));if(b+1===c||16384<e.length)p+=d.apply(null,e),e.length=0}return p};a.raw=function(a){for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];var c=a.raw,b="",e=d.length;if(null==a||null==a.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var k=
    0,q=c.length;k<q;k++)b+=c[k]+(k<e&&k<q-1?d[k]:"");return b};a.codePointAt=function(c,d){void 0===d&&(d=0);if(null==c)throw new TypeError("string.codePointAt requries a valid string.");var e=c.length;d!==d&&(d=0);if(!(0>d||d>=e)){var b=c.charCodeAt(d);return b>=a.HIGH_SURROGATE_MIN&&b<=a.HIGH_SURROGATE_MAX&&e>d+1&&(c=c.charCodeAt(d+1),c>=a.LOW_SURROGATE_MIN&&c<=a.LOW_SURROGATE_MAX)?1024*(b-a.HIGH_SURROGATE_MIN)+c-a.LOW_SURROGATE_MIN+65536:b}};a.endsWith=function(a,d,c){if(""===d)return!0;if("undefined"===
    typeof c)c=a.length;else if(null===c||isNaN(c))return!1;c=m.__read(h("endsWith",a,d,c,!0),3);a=c[0];d=c[1];c=c[2];var b=c-d.length;return 0>b?!1:a.slice(b,c)===d};a.includes=function(a,d,c){void 0===c&&(c=0);c=m.__read(h("includes",a,d,c),3);a=c[0];d=c[1];c=c[2];return-1!==a.indexOf(d,c)};a.repeat=function(a,d){void 0===d&&(d=0);if(null==a)throw new TypeError("string.repeat requires a valid string.");d!==d&&(d=0);if(0>d||Infinity===d)throw new RangeError("string.repeat requires a non-negative finite count.");
    for(var c="";d;)d%2&&(c+=a),1<d&&(a+=a),d>>=1;return c};a.startsWith=function(a,d,c){void 0===c&&(c=0);d=String(d);c=m.__read(h("startsWith",a,d,c),3);a=c[0];d=c[1];c=c[2];var b=c+d.length;return b>a.length?!1:a.slice(c,b)===d}}l.default("es2017-string")?(a.padEnd=c.wrapNative(e.default.String.prototype.padEnd),a.padStart=c.wrapNative(e.default.String.prototype.padStart)):(a.padEnd=function(c,d,e){void 0===e&&(e=" ");if(null===c||void 0===c)throw new TypeError("string.repeat requires a valid string.");
    if(Infinity===d)throw new RangeError("string.padEnd requires a non-negative finite count.");if(null===d||void 0===d||0>d)d=0;c=String(c);d-=c.length;0<d&&(c+=a.repeat(e,Math.floor(d/e.length))+e.slice(0,d%e.length));return c},a.padStart=function(c,d,e){void 0===e&&(e=" ");if(null===c||void 0===c)throw new TypeError("string.repeat requires a valid string.");if(Infinity===d)throw new RangeError("string.padStart requires a non-negative finite count.");if(null===d||void 0===d||0>d)d=0;c=String(c);d-=
    c.length;0<d&&(c=a.repeat(e,Math.floor(d/e.length))+e.slice(0,d%e.length)+c);return c})})},"tslib/tslib":function(){var c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v;(function(b){function a(b,a){b!==d&&("function"===typeof Object.create?Object.defineProperty(b,"__esModule",{value:!0}):b.__esModule=!0);return function(d,c){return b[d]=a?a(d,c):c}}var d="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],
    function(c){b(a(d,a(c)))}):"object"===typeof module&&"object"===typeof module.exports?b(a(d,a(module.exports))):b(a(d))})(function(x){var z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,a){b.__proto__=a}||function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};c=function(b,a){function d(){this.constructor=b}z(b,a);b.prototype=null===a?Object.create(a):(d.prototype=a.prototype,new d)};a=Object.assign||function(b){for(var a,d=1,c=arguments.length;d<c;d++){a=arguments[d];for(var f in a)Object.prototype.hasOwnProperty.call(a,
    f)&&(b[f]=a[f])}return b};m=function(b,a){var d={},c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&0>a.indexOf(c)&&(d[c]=b[c]);if(null!=b&&"function"===typeof Object.getOwnPropertySymbols){var f=0;for(c=Object.getOwnPropertySymbols(b);f<c.length;f++)0>a.indexOf(c[f])&&(d[c[f]]=b[c[f]])}return d};e=function(b,a,d,c){var f=arguments.length,k=3>f?a:null===c?c=Object.getOwnPropertyDescriptor(a,d):c,e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(b,a,d,c);
    else for(var q=b.length-1;0<=q;q--)if(e=b[q])k=(3>f?e(k):3<f?e(a,d,k):e(a,d))||k;return 3<f&&k&&Object.defineProperty(a,d,k),k};l=function(b,a){return function(d,c){a(d,c,b)}};h=function(b,a){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(b,a)};g=function(b,a,d,c){return new (d||(d=Promise))(function(f,k){function e(b){try{p(c.next(b))}catch(H){k(H)}}function q(b){try{p(c["throw"](b))}catch(H){k(H)}}function p(b){b.done?f(b.value):(new d(function(a){a(b.value)})).then(e,
    q)}p((c=c.apply(b,a||[])).next())})};d=function(b,a){function d(b){return function(a){return c([b,a])}}function c(d){if(k)throw new TypeError("Generator is already executing.");for(;f;)try{if(k=1,e&&(q=d[0]&2?e["return"]:d[0]?e["throw"]||((q=e["return"])&&q.call(e),0):e.next)&&!(q=q.call(e,d[1])).done)return q;if(e=0,q)d=[d[0]&2,q.value];switch(d[0]){case 0:case 1:q=d;break;case 4:return f.label++,{value:d[1],done:!1};case 5:f.label++;e=d[1];d=[0];continue;case 7:d=f.ops.pop();f.trys.pop();continue;
    default:if(!(q=f.trys,q=0<q.length&&q[q.length-1])&&(6===d[0]||2===d[0])){f=0;continue}if(3===d[0]&&(!q||d[1]>q[0]&&d[1]<q[3]))f.label=d[1];else if(6===d[0]&&f.label<q[1])f.label=q[1],q=d;else if(q&&f.label<q[2])f.label=q[2],f.ops.push(d);else{q[2]&&f.ops.pop();f.trys.pop();continue}}d=a.call(b,f)}catch(H){d=[6,H],e=0}finally{k=q=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}var f={label:0,sent:function(){if(q[0]&1)throw q[1];return q[1]},trys:[],ops:[]},k,e,q,p;return p={next:d(0),
    "throw":d(1),"return":d(2)},"function"===typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p};n=function(b,a){for(var d in b)a.hasOwnProperty(d)||(a[d]=b[d])};b=function(b){var a="function"===typeof Symbol&&b[Symbol.iterator],d=0;return a?a.call(b):{next:function(){b&&d>=b.length&&(b=void 0);return{value:b&&b[d++],done:!b}}}};p=function(b,a){var d="function"===typeof Symbol&&b[Symbol.iterator];if(!d)return b;b=d.call(b);var c,f=[],k;try{for(;(void 0===a||0<a--)&&!(c=b.next()).done;)f.push(c.value)}catch(F){k=
    {error:F}}finally{try{c&&!c.done&&(d=b["return"])&&d.call(b)}finally{if(k)throw k.error;}}return f};k=function(){for(var b=[],a=0;a<arguments.length;a++)b=b.concat(p(arguments[a]));return b};q=function(b){return this instanceof q?(this.v=b,this):new q(b)};f=function(b,a,d){function c(b){n[b]&&(r[b]=function(a){return new Promise(function(d,c){1<g.push([b,a,d,c])||f(b,a)})})}function f(b,a){try{var d=n[b](a);d.value instanceof q?Promise.resolve(d.value.v).then(k,e):p(g[0][2],d)}catch(O){p(g[0][3],
    O)}}function k(b){f("next",b)}function e(b){f("throw",b)}function p(b,a){(b(a),g.shift(),g.length)&&f(g[0][0],g[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=d.apply(b,a||[]),r,g=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r};r=function(b){function a(a,f){d[a]=b[a]?function(d){return(c=!c)?{value:q(b[a](d)),done:"return"===a}:f?f(d):d}:f}var d,c;return d={},a("next"),a("throw",function(b){throw b;
    }),a("return"),d[Symbol.iterator]=function(){return this},d};t=function(a){function d(b){k[b]=a[b]&&function(d){return new Promise(function(f,k){d=a[b](d);c(f,k,d.done,d.value)})}}function c(b,a,d,c){Promise.resolve(c).then(function(a){b({value:a,done:d})},a)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var f=a[Symbol.asyncIterator],k;return f?f.call(a):(a="function"===typeof b?b(a):a[Symbol.iterator](),k={},d("next"),d("throw"),d("return"),k[Symbol.asyncIterator]=
    function(){return this},k)};u=function(b,a){Object.defineProperty?Object.defineProperty(b,"raw",{value:a}):b.raw=a;return b};w=function(b){if(b&&b.__esModule)return b;var a={};if(null!=b)for(var d in b)Object.hasOwnProperty.call(b,d)&&(a[d]=b[d]);a["default"]=b;return a};v=function(b){return b&&b.__esModule?b:{"default":b}};x("__extends",c);x("__assign",a);x("__rest",m);x("__decorate",e);x("__param",l);x("__metadata",h);x("__awaiter",g);x("__generator",d);x("__exportStar",n);x("__values",b);x("__read",
    p);x("__spread",k);x("__await",q);x("__asyncGenerator",f);x("__asyncDelegator",r);x("__asyncValues",t);x("__makeTemplateObject",u);x("__importStar",w);x("__importDefault",v)})},"@dojo/framework/shim/global":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports"],c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){if("undefined"!==
    typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}();a.default=c})},"@dojo/framework/has/has":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","tslib","../shim/global"],c)})(function(c,a){function m(b){b=b.toLowerCase();return!!(b in d||b in a.testCache||a.testFunctions[b])}function e(b,
    c,k){void 0===k&&(k=!1);var e=b.toLowerCase();if(m(e)&&!k&&!(e in d))throw new TypeError('Feature "'+b+'" exists and overwrite not true.');"function"===typeof c?a.testFunctions[e]=c:(a.testCache[e]=c,delete a.testFunctions[e])}function l(b){var c=b.toLowerCase();if(c in d)b=d[c];else if(a.testFunctions[c])b=a.testCache[c]=a.testFunctions[c].call(null),delete a.testFunctions[c];else if(c in a.testCache)b=a.testCache[c];else throw new TypeError('Attempt to detect unregistered has feature "'+b+'"');
    return b}Object.defineProperty(a,"__esModule",{value:!0});var h=c("tslib"),g=c("../shim/global");a.testCache={};a.testFunctions={};c=(g.default.DojoHasEnvironment||{}).staticFeatures;"DojoHasEnvironment"in g.default&&delete g.default.DojoHasEnvironment;var d=c?"function"===typeof c?c.apply(g.default):c:{};a.load=function(b,a,d,c){b?a([b],d):d()};a.normalize=function(b,a){function d(b){var a=c[f++];if(":"===a)return null;if("?"===c[f++]){if(!b&&l(a))return d();d(!0);return d(b)}return a}var c=b.match(/[\?:]|[^:\?]*/g)||
    [],f=0;return(b=d())&&a(b)};a.exists=m;a.add=e;a.default=l;e("public-path",void 0);e("dojo-debug",!1);e("host-browser","undefined"!==typeof document&&"undefined"!==typeof location);e("host-node",function(){if("object"===typeof process&&process.versions&&process.versions.node)return process.versions.node});e("fetch","fetch"in g.default&&"function"===typeof g.default.fetch,!0);e("es6-array",function(){return["from","of"].every(function(b){return b in g.default.Array})&&["findIndex","find","copyWithin"].every(function(b){return b in
    g.default.Array.prototype})},!0);e("es6-array-fill",function(){return"fill"in g.default.Array.prototype?1===[1].fill(9,Number.POSITIVE_INFINITY)[0]:!1},!0);e("es7-array",function(){return"includes"in g.default.Array.prototype},!0);e("es6-map",function(){if("function"===typeof g.default.Map)try{var b=new g.default.Map([[0,1]]);return b.has(0)&&"function"===typeof b.keys&&l("es6-symbol")&&"function"===typeof b.values&&"function"===typeof b.entries}catch(p){}return!1},!0);e("es6-math",function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(b){return"function"===
    typeof g.default.Math[b]})},!0);e("es6-math-imul",function(){return"imul"in g.default.Math?-5===Math.imul(4294967295,5):!1},!0);e("es6-object",function(){return l("es6-symbol")&&["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(b){return"function"===typeof g.default.Object[b]})},!0);e("es2017-object",function(){return["values","entries","getOwnPropertyDescriptors"].every(function(b){return"function"===typeof g.default.Object[b]})},!0);e("es-observable",function(){return"undefined"!==
    typeof g.default.Observable},!0);e("es6-promise",function(){return"undefined"!==typeof g.default.Promise&&l("es6-symbol")},!0);e("es2018-promise-finally",function(){return l("es6-promise")&&"undefined"!==typeof g.default.Promise.prototype.finally},!0);e("es6-set",function(){if("function"===typeof g.default.Set){var b=new g.default.Set([1]);return b.has(1)&&"keys"in b&&"function"===typeof b.keys&&l("es6-symbol")}return!1},!0);e("es6-string",function(){return["fromCodePoint"].every(function(b){return"function"===
    typeof g.default.String[b]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(b){return"function"===typeof g.default.String.prototype[b]})},!0);e("es6-string-raw",function(){function b(b){for(var a=1;a<arguments.length;a++);a=h.__spread(b);a.raw=b.raw;return a}if("raw"in g.default.String){var a=b(n||(n=h.__makeTemplateObject(["a\n",""],["a\\n",""])),1);a.raw=["a\\n"];return"a\\n"===g.default.String.raw(a,42)}return!1},!0);e("es2017-string",function(){return["padStart",
    "padEnd"].every(function(b){return"function"===typeof g.default.String.prototype[b]})},!0);e("es6-symbol",function(){return"undefined"!==typeof g.default.Symbol&&"symbol"===typeof Symbol()},!0);e("es6-weakmap",function(){if("undefined"!==typeof g.default.WeakMap){var b={},a={},d=new g.default.WeakMap([[b,1]]);Object.freeze(b);return 1===d.get(b)&&d.set(a,2)===d&&l("es6-symbol")}return!1},!0);e("microtasks",function(){return l("es6-promise")||0||l("dom-mutationobserver")},!0);e("postmessage",function(){return"undefined"!==
    typeof g.default.window&&"function"===typeof g.default.postMessage},!0);e("raf",function(){return"function"===typeof g.default.requestAnimationFrame},!0);e("setimmediate",function(){return"undefined"!==typeof g.default.setImmediate},!0);e("dom-mutationobserver",function(){if(l("host-browser")&&(g.default.MutationObserver||g.default.WebKitMutationObserver)){var b=document.createElement("div"),a=new (g.default.MutationObserver||g.default.WebKitMutationObserver)(function(){});a.observe(b,{attributes:!0});
    b.style.setProperty("display","block");return!!a.takeRecords().length}return!1},!0);e("dom-webanimation",function(){return l("host-browser")&&void 0!==g.default.Animation&&void 0!==g.default.KeyframeEffect},!0);e("abort-controller",function(){return"undefined"!==typeof g.default.AbortController});e("abort-signal",function(){return"undefined"!==typeof g.default.AbortSignal});e("dom-intersection-observer",function(){return l("host-browser")&&void 0!==g.default.IntersectionObserver},!0);e("dom-resize-observer",
    function(){return l("host-browser")&&void 0!==g.default.ResizeObserver},!0);e("dom-pointer-events",function(){return l("host-browser")&&void 0!==g.default.onpointerdown},!0);e("build-elide",!1);var n})},"@dojo/framework/shim/support/util":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports"],c)})(function(c,a){Object.defineProperty(a,"__esModule",
    {value:!0});a.getValueDescriptor=function(a,c,l,h){void 0===c&&(c=!1);void 0===l&&(l=!0);void 0===h&&(h=!0);return{value:a,enumerable:c,writable:l,configurable:h}};a.wrapNative=function(a){return function(c){for(var e=[],h=1;h<arguments.length;h++)e[h-1]=arguments[h];return a.apply(c,e)}}})},"@dojo/framework/shim/Promise":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&
    define("require exports tslib ./global ./support/queue ./Symbol ../has/has".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=c("tslib"),e=c("./global"),l=c("./support/queue");c("./Symbol");c=c("../has/has");a.ShimPromise=e.default.Promise;a.isThenable=function(a){return a&&"function"===typeof a.then};c.default("es6-promise")||(e.default.Promise=a.ShimPromise=(h=function(){function c(d){var e=this;this.state=1;this[Symbol.toStringTag]="Promise";var b=!1,p=[],k=function(b){p&&
    p.push(b)},q=function(b,a){1===e.state&&(e.state=b,e.resolvedValue=a,k=l.queueMicroTask,p&&0<p.length&&l.queueMicroTask(function(){if(p){for(var b=p.length,a=0;a<b;++a)p[a].call(null);p=null}}))},f=function(d,c){1!==e.state||b||(a.isThenable(c)?(c.then(q.bind(null,0),q.bind(null,2)),b=!0):q(d,c))};this.then=function(b,a){return new c(function(d,c){k(function(){var f=2===e.state?a:b;if("function"===typeof f)try{d(f(e.resolvedValue))}catch(x){c(x)}else 2===e.state?c(e.resolvedValue):d(e.resolvedValue)})})};
    try{d(f.bind(null,0),f.bind(null,2))}catch(r){q(2,r)}}c.all=function(d){return new this(function(e,b){function p(b,a){q[b]=a;++f;g||f<n||e(q)}function k(d,f){++n;a.isThenable(f)?f.then(p.bind(null,d),b):c.resolve(f).then(p.bind(null,d))}var q=[],f=0,n=0,g=!0,u=0;try{for(var h=m.__values(d),l=h.next();!l.done;l=h.next())k(u,l.value),u++}catch(A){x={error:A}}finally{try{l&&!l.done&&(z=h.return)&&z.call(h)}finally{if(x)throw x.error;}}(g=!1,f<n)||e(q);var x,z})};c.race=function(a){return new this(function(d,
    b){try{for(var e=m.__values(a),k=e.next();!k.done;k=e.next()){var q=k.value;q instanceof c?q.then(d,b):c.resolve(q).then(d)}}catch(t){f={error:t}}finally{try{k&&!k.done&&(n=e.return)&&n.call(e)}finally{if(f)throw f.error;}}var f,n})};c.reject=function(a){return new this(function(d,b){b(a)})};c.resolve=function(a){return new this(function(d){d(a)})};c.prototype.catch=function(a){return this.then(void 0,a)};return c}(),h[Symbol.species]=a.ShimPromise,h));c.default("es2018-promise-finally")||(e.default.Promise.prototype.finally=
    function(a){return this.then(a&&function(d){return Promise.resolve(a()).then(function(){return d})},a&&function(d){return Promise.resolve(a()).then(function(){throw d;})})});a.default=a.ShimPromise;var h})},"@dojo/framework/shim/support/queue":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","../global","../../has/has"],c)})(function(c,a){function m(b){b&&
    b.isActive&&b.callback&&b.callback()}function e(b,a){return{destroy:function(){this.destroy=function(){};b.isActive=!1;b.callback=null;a&&a()}}}Object.defineProperty(a,"__esModule",{value:!0});var l=c("../global"),h=c("../../has/has"),g,d;a.queueTask=function(){function b(b){b={isActive:!0,callback:b};var c=d(b);return e(b,a&&function(){a(c)})}var a,d;if(h.default("postmessage")){var c=[];l.default.addEventListener("message",function(b){b.source===l.default&&"dojo-queue-message"===b.data&&(b.stopPropagation(),
    c.length&&m(c.shift()))});d=function(b){c.push(b);l.default.postMessage("dojo-queue-message","*")}}else h.default("setimmediate")?(a=l.default.clearImmediate,d=function(b){return setImmediate(m.bind(null,b))}):(a=l.default.clearTimeout,d=function(b){return setTimeout(m.bind(null,b),0)});return h.default("microtasks")?b:function(a){g();return b(a)}}();if(!h.default("microtasks")){var n=!1;d=[];g=function(){n||(n=!0,a.queueTask(function(){n=!1;if(d.length)for(var b=void 0;b=d.shift();)m(b)}))}}a.queueAnimationTask=
    function(){function b(b){b={isActive:!0,callback:b};var a=requestAnimationFrame(m.bind(null,b));return e(b,function(){cancelAnimationFrame(a)})}return h.default("raf")?h.default("microtasks")?b:function(a){g();return b(a)}:a.queueTask}();a.queueMicroTask=function(){var b;if(h.default("host-node"))b=function(b){l.default.process.nextTick(m.bind(null,b))};else if(h.default("es6-promise"))b=function(b){l.default.Promise.resolve(b).then(m)};else if(h.default("dom-mutationobserver")){var a=l.default.MutationObserver||
    l.default.WebKitMutationObserver,c=document.createElement("div"),q=[];(new a(function(){for(;0<q.length;){var b=q.shift();b&&b.isActive&&b.callback&&b.callback()}})).observe(c,{attributes:!0});b=function(b){q.push(b);c.setAttribute("queueStatus","1")}}else b=function(b){g();d.push(b)};return function(a){a={isActive:!0,callback:a};b(a);return e(a)}}()})},"@dojo/framework/shim/Symbol":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&
    (module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","../has/has","./global","./support/util"],c)})(function(c,a){function m(b){return b&&("symbol"===typeof b||"Symbol"===b["@@toStringTag"])||!1}Object.defineProperty(a,"__esModule",{value:!0});var e=c("../has/has"),l=c("./global"),h=c("./support/util");a.Symbol=l.default.Symbol;if(!e.default("es6-symbol")){var g=function(b){if(!m(b))throw new TypeError(b+" is not a symbol");return b},d=Object.defineProperties,n=
    Object.defineProperty,b=Object.create,p=Object.prototype,k={},q=function(){var a=b(null);return function(b){for(var d=0,c;a[String(b)+(d||"")];)++d;b+=String(d||"");a[b]=!0;c="@@"+b;Object.getOwnPropertyDescriptor(p,c)||n(p,c,{set:function(b){n(this,c,h.getValueDescriptor(b))}});return c}}(),f=function t(b){if(this instanceof f)throw new TypeError("TypeError: Symbol is not a constructor");return t(b)};a.Symbol=l.default.Symbol=function u(b){if(this instanceof u)throw new TypeError("TypeError: Symbol is not a constructor");
    var a=Object.create(f.prototype);b=void 0===b?"":String(b);return d(a,{__description__:h.getValueDescriptor(b),__name__:h.getValueDescriptor(q(b))})};n(a.Symbol,"for",h.getValueDescriptor(function(b){return k[b]?k[b]:k[b]=a.Symbol(String(b))}));d(a.Symbol,{keyFor:h.getValueDescriptor(function(b){var a;g(b);for(a in k)if(k[a]===b)return a}),hasInstance:h.getValueDescriptor(a.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:h.getValueDescriptor(a.Symbol.for("isConcatSpreadable"),!1,!1),iterator:h.getValueDescriptor(a.Symbol.for("iterator"),
    !1,!1),match:h.getValueDescriptor(a.Symbol.for("match"),!1,!1),observable:h.getValueDescriptor(a.Symbol.for("observable"),!1,!1),replace:h.getValueDescriptor(a.Symbol.for("replace"),!1,!1),search:h.getValueDescriptor(a.Symbol.for("search"),!1,!1),species:h.getValueDescriptor(a.Symbol.for("species"),!1,!1),split:h.getValueDescriptor(a.Symbol.for("split"),!1,!1),toPrimitive:h.getValueDescriptor(a.Symbol.for("toPrimitive"),!1,!1),toStringTag:h.getValueDescriptor(a.Symbol.for("toStringTag"),!1,!1),unscopables:h.getValueDescriptor(a.Symbol.for("unscopables"),
    !1,!1)});d(f.prototype,{constructor:h.getValueDescriptor(a.Symbol),toString:h.getValueDescriptor(function(){return this.__name__},!1,!1)});d(a.Symbol.prototype,{toString:h.getValueDescriptor(function(){return"Symbol ("+g(this).__description__+")"}),valueOf:h.getValueDescriptor(function(){return g(this)})});n(a.Symbol.prototype,a.Symbol.toPrimitive,h.getValueDescriptor(function(){return g(this)}));n(a.Symbol.prototype,a.Symbol.toStringTag,h.getValueDescriptor("Symbol",!1,!1,!0));n(f.prototype,a.Symbol.toPrimitive,
    h.getValueDescriptor(a.Symbol.prototype[a.Symbol.toPrimitive],!1,!1,!0));n(f.prototype,a.Symbol.toStringTag,h.getValueDescriptor(a.Symbol.prototype[a.Symbol.toStringTag],!1,!1,!0))}a.isSymbol=m;"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(b){a.Symbol[b]||Object.defineProperty(a.Symbol,b,h.getValueDescriptor(a.Symbol.for(b),!1,!1))});a.default=a.Symbol})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/string ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){function r(b,a,d){return null==a?d:null==d?a:b(a,d)}c=function(a){function d(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];b=a.apply(this,b)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}m(d,a);c=d;d.prototype.normalizeCtorArgs=function(a,d,c,f,k){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null==a.spatialReference?
    b.WGS84:a.spatialReference,a):{xmin:a,ymin:d,xmax:c,ymax:f,spatialReference:null==k?b.WGS84:k}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};d.fromBounds=function(b,a){return new c({xmin:b[0],ymin:b[1],xmax:b[2],ymax:b[3],spatialReference:a})};Object.defineProperty(d.prototype,"center",{get:function(){var b=new n({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(b.z=.5*(this.zmin+this.zmax));this.hasM&&(b.m=.5*(this.mmin+this.mmax));return b},
    enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},
    enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});d.prototype.centerAt=function(b){var a=this.center;return null!=b.z&&this.hasZ?this.offset(b.x-a.x,b.y-a.y,b.z-a.z):this.offset(b.x-a.x,b.y-a.y)};d.prototype.clone=function(){var b=new c;b.xmin=this.xmin;b.ymin=this.ymin;b.xmax=this.xmax;b.ymax=this.ymax;b.spatialReference=this.spatialReference;null!=this.zmin&&(b.zmin=this.zmin,b.zmax=this.zmax);
    null!=this.mmin&&(b.mmin=this.mmin,b.mmax=this.mmax);return b};d.prototype.contains=function(b){if(!b)return!1;var a=this.spatialReference,d=b.spatialReference;a&&d&&!a.equals(d)&&f.canProject(a,d)&&(b=a.isWebMercator?f.geographicToWebMercator(b):f.webMercatorToGeographic(b,!0));return"point"===b.type?p.extentContainsPoint(this,b):"extent"===b.type?p.extentContainsExtent(this,b):!1};d.prototype.equals=function(b){if(!b)return!1;var a=this.spatialReference,d=b.spatialReference;a&&d&&!a.equals(d)&&
    f.canProject(a,d)&&(b=a.isWebMercator?f.geographicToWebMercator(b):f.webMercatorToGeographic(b,!0));return this.xmin===b.xmin&&this.ymin===b.ymin&&this.zmin===b.zmin&&this.mmin===b.mmin&&this.xmax===b.xmax&&this.ymax===b.ymax&&this.zmax===b.zmax&&this.mmax===b.mmax};d.prototype.expand=function(b){b=.5*(1-b);var a=this.width*b,d=this.height*b;this.xmin+=a;this.ymin+=d;this.xmax-=a;this.ymax-=d;this.hasZ&&(a=(this.zmax-this.zmin)*b,this.zmin+=a,this.zmax-=a);this.hasM&&(b*=this.mmax-this.mmin,this.mmin+=
    b,this.mmax-=b);return this};d.prototype.intersects=function(b){if(l.isNone(b))return!1;var a=this.spatialReference,d=b.spatialReference;a&&d&&!a.equals(d)&&f.canProject(a,d)&&(b=a.isWebMercator?f.geographicToWebMercator(b):f.webMercatorToGeographic(b,!0));a=k.getExtentIntersector(b.type);return"mesh"!==b.type?a(this,b):a(this,b.extent)};d.prototype.normalize=function(){var b=this._normalize(!1,!0);return Array.isArray(b)?b:[b]};d.prototype.offset=function(b,a,d){this.xmin+=b;this.ymin+=a;this.xmax+=
    b;this.ymax+=a;null!=d&&(this.zmin+=d,this.zmax+=d);return this};d.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};d.prototype.union=function(b){this.xmin=Math.min(this.xmin,b.xmin);this.ymin=Math.min(this.ymin,b.ymin);this.xmax=Math.max(this.xmax,b.xmax);this.ymax=Math.max(this.ymax,b.ymax);if(this.hasZ||b.hasZ)this.zmin=r(Math.min,this.zmin,b.zmin),this.zmax=r(Math.max,this.zmax,b.zmax);if(this.hasM||b.hasM)this.mmin=r(Math.min,this.mmin,b.mmin),this.mmax=r(Math.max,this.mmax,
    b.mmax);return this};d.prototype.intersection=function(b){if(!this.intersects(b))return null;this.xmin=Math.max(this.xmin,b.xmin);this.ymin=Math.max(this.ymin,b.ymin);this.xmax=Math.min(this.xmax,b.xmax);this.ymax=Math.min(this.ymax,b.ymax);if(this.hasZ||b.hasZ)this.zmin=r(Math.max,this.zmin,b.zmin),this.zmax=r(Math.min,this.zmax,b.zmax);if(this.hasM||b.hasM)this.mmin=r(Math.max,this.mmin,b.mmin),this.mmax=r(Math.min,this.mmax,b.mmax);return this};d.prototype.toJSON=function(b){return this.write(null,
    b)};d.prototype._shiftCM=function(a){void 0===a&&(a=q.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var d=this.spatialReference,c=this._getCM(a);if(c){var k=d.isWebMercator?f.webMercatorToGeographic(c):c;this.xmin-=c.x;this.xmax-=c.x;d.isWebMercator||(k.x=this._normalizeX(k.x,a).x);this.spatialReference=new b(h.replace(d.isWGS84?a.altTemplate:a.wkTemplate,{Central_Meridian:k.x}))}return this};d.prototype._getCM=function(b){var a=null,d=b.valid;b=d[0];var d=d[1],c=this.xmin,
    f=this.xmax;c>=b&&c<=d&&f>=b&&f<=d||(a=this.center);return a};d.prototype._normalize=function(b,a,d){var c=this.spatialReference;if(!c)return this;d=d||q.getInfo(c);if(!d)return this;var f=this._getParts(d).map(function(b){return b.extent});if(2>f.length)return f[0]||this;if(2<f.length)return b?this._shiftCM(d):this.set({xmin:d.valid[0],xmax:d.valid[1]});if(b)return this._shiftCM(d);if(a)return f;var k=!0,e=!0;f.forEach(function(b){b.hasZ||(k=!1);b.hasM||(e=!1)});return{rings:f.map(function(b){var a=
    [[b.xmin,b.ymin],[b.xmin,b.ymax],[b.xmax,b.ymax],[b.xmax,b.ymin],[b.xmin,b.ymin]];if(k)for(var d=(b.zmax-b.zmin)/2,c=0;c<a.length;c++)a[c].push(d);if(e)for(b=(b.mmax-b.mmin)/2,c=0;c<a.length;c++)a[c].push(b);return a}),hasZ:k,hasM:e,spatialReference:c}};d.prototype._getParts=function(b){var a=this.cache._parts;if(!a){var a=[],d=this.ymin,f=this.ymax,k=this.spatialReference,e=this.width,p=this.xmin,n=this.xmax,r=void 0;b=b||q.getInfo(k);var g=b.valid,h=g[0],u=g[1],r=this._normalizeX(this.xmin,b),l=
    r.x,g=r.frameId,r=this._normalizeX(this.xmax,b),t=r.x;b=r.frameId;r=l===t&&0<e;if(e>2*u){e=new c(p<n?l:t,d,u,f,k);p=new c(h,d,p<n?t:l,f,k);n=new c(0,d,u,f,k);d=new c(h,d,0,f,k);f=[];k=[];e.contains(n)&&f.push(g);e.contains(d)&&k.push(g);p.contains(n)&&f.push(b);p.contains(d)&&k.push(b);for(h=g+1;h<b;h++)f.push(h),k.push(h);a.push({extent:e,frameIds:[g]},{extent:p,frameIds:[b]},{extent:n,frameIds:f},{extent:d,frameIds:k})}else l>t||r?a.push({extent:new c(l,d,u,f,k),frameIds:[g]},{extent:new c(h,d,
    t,f,k),frameIds:[b]}):a.push({extent:new c(l,d,t,f,k),frameIds:[g]});this.cache._parts=a}b=this.hasZ;d=this.hasM;if(b||d)for(g={},b&&(g.zmin=this.zmin,g.zmax=this.zmax),d&&(g.mmin=this.mmin,g.mmax=this.mmax),b=0;b<a.length;b++)a[b].extent.set(g);return a};d.prototype._normalizeX=function(b,a){var d=a.valid;a=d[0];var c=d[1],d=2*c,f=0;b>c?(a=Math.ceil(Math.abs(b-c)/d),b-=a*d,f=a):b<a&&(a=Math.ceil(Math.abs(b-a)/d),b+=a*d,f=-a);return{x:b,frameId:f}};var c;e([g.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],
    d.prototype,"cache",void 0);e([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"center",null);e([g.property({readOnly:!0,dependsOn:["cache"]})],d.prototype,"extent",null);e([g.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);e([g.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);e([g.property({readOnly:!0,dependsOn:["ymin","ymax"]})],d.prototype,
    "height",null);e([g.property({readOnly:!0,dependsOn:["xmin","xmax"]})],d.prototype,"width",null);e([g.property({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],d.prototype,"xmin",void 0);e([g.property({type:Number,json:{write:!0}})],d.prototype,"ymin",void 0);e([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmin",void 0);e([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},
    write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],d.prototype,"zmin",void 0);e([g.property({type:Number,json:{write:!0}})],d.prototype,"xmax",void 0);e([g.property({type:Number,json:{write:!0}})],d.prototype,"ymax",void 0);e([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"mmax",void 0);e([g.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],
    d.prototype,"zmax",void 0);return d=c=e([g.subclass("esri.geometry.Extent")],d)}(g.declared(d));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/core/maybe":function(){define(["require","exports","./has"],function(c,a,m){function e(a,c,e){return null!=a?e(a):c}Object.defineProperty(a,"__esModule",{value:!0});a.isSome=function(a){return null!=a};a.isNone=function(a){return null==a};a.applySome=function(a,c){return null!=a?c(a):null};a.unwrap=function(a){return a};a.unwrapOr=function(a,c){return null!=
    a?a:"function"===typeof c?c():c};a.expect=function(a){return a};a.mapSome=function(a,c){var e=[];a.forEach(function(a){a=c(a);null!=a&&e.push(a)});return e};a.mapMany=function(a,c){for(var g=[],d=0;d<a.length;d++)g.push(e(a[d],null,c));return g};a.forEachSome=function(a,c){for(var g=0;g<a.length;g++)e(a[g],null,c)};a.mapOr=e;a.andThen=function(a,c){return null!=a?c(a):null};a.mapSomeFirst=function(a,c){for(var e=0;e<a.length;e++){var d=c(a[e]);if(null!=d)return d}return null};a.get=function(a){for(var c=
    [],e=1;e<arguments.length;e++)c[e-1]=arguments[e];for(var e=a,d=0;d<c.length&&e;)e=e[c[d++]];return e}})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k){function q(b){for(var d in b)a.hasOwnProperty(d)||(a[d]=b[d])}
    Object.defineProperty(a,"__esModule",{value:!0});q(m);q(e);q(l);q(h);q(g);q(d);q(n);q(b);q(p);q(k)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(c,e){m.getPropertyMetadata(c,e).aliasOf=a}}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports","./utils"],function(c,a,m){function e(b){return null!=b.__accessorMetadata__}
    function l(b){return e(b)&&null!=h(b).properties}function h(b){b.__accessorMetadata__||Object.defineProperty(b,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return b.__accessorMetadata__}function g(b){b=h(b);var a=b.properties;a||(a=b.properties={});return a}function d(b,a){var d=h(b);b=d.parameters;b||(b=d.parameters={});d=b[a];d||(d=[],b[a]=d);return d}function n(b){return p.test(b)?"replace":"merge"}function b(b){return k.test(b)?n(b.slice(11)):"merge"}Object.defineProperty(a,
    "__esModule",{value:!0});a.hasMetadata=e;a.hasPropertiesMetadata=l;a.hasPropertyMetadata=function(b,a){return l(b)&&null!=g(b)[a]};a.hasParametersMetadata=function(b,a){return e(b)&&null!=h(b).parameters&&null!=h(b).parameters[a]};a.getMetadata=h;a.getPropertiesMetadata=g;a.getPropertyMetadata=function(b,a){b=g(b);var d=b[a];d||(d=b[a]={});return d};a.setPropertyMetadata=function(b,a,d){g(b)[a]=d};a.getParametersMetadata=d;a.getParameterMetadata=function(b,a,c){var f=d(b,a)[c];f||(d(b,a)[c]=f={index:c});
    return f};a.merge=function(a,d){return m.merge(a,d,b)};a.mergeProperty=function(b,a){return m.merge(b,a,n)};var p=/^[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/,k=/^properties\./})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(c,a,m){function e(a,b,d){return b?Object.keys(b).reduce(function(a,c){var f=null,k="merge";d&&(f=d.path?d.path+"."+c:c,k=d.policy(f));if("replace"===k)return a[c]=b[c],a;if(void 0===a[c])return a[c]=m.clone(b[c]),
    a;var p=a[c],k=b[c];if(p===k)return a;if(Array.isArray(k)||Array.isArray(a))p=p?Array.isArray(p)?a[c]=p.concat():a[c]=[p]:a[c]=[],k&&(Array.isArray(k)||(k=[k]),k.forEach(function(b){-1===p.indexOf(b)&&p.push(b)}));else if(k&&"object"===typeof k)if(d){var q=d.path;d.path=f;a[c]=e(p,k,d);d.path=q}else a[c]=e(p,k,null);else if(!a.hasOwnProperty(c)||b.hasOwnProperty(c))a[c]=k;return a},a||{}):a}function l(a){return Array.isArray(a)?a:a.split(".")}function h(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=
    Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function g(a){return{remove:d(function(){return a.forEach(function(b){return b.remove()})})}}function d(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};a.merge=
    function(a,b,d){return d?e(a,b,{policy:d,path:""}):e(a,b,null)};a.pathToStringOrArray=function(a){return!a||"string"===typeof a&&-1===a.indexOf(".")?a:l(a)};a.pathToArray=l;a.splitPath=h;a.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=l(a);for(var b=Array(a.length),d=0;d<a.length;d++){var c=a[d];b[d]="?"===c[c.length-1];b[d]&&(a[d]=c.slice(0,-1))}return{fullPath:a.join("."),conditional:b}};a.handlesGroup=g;a.parse=function(a,b,d,c){b=h(b);return Array.isArray(b)?(b=b.map(function(b){return c(a,
    b.trim(),d)}),g(b)):c(a,b.trim(),d)};a.once=d})},"esri/core/lang":function(){define(["require","exports","./typedArrayUtil"],function(c,a,m){function e(a,d){var c;if(d)for(c in a)a.hasOwnProperty(c)&&(void 0===a[c]?delete a[c]:a[c]instanceof Object&&e(a[c],!0));else for(c in a)a.hasOwnProperty(c)&&void 0===a[c]&&delete a[c];return a}function l(a){return a&&"object"===typeof a&&"function"!==typeof a?m.isInt8Array(a)||m.isUint8Array(a)||m.isUint8ClampedArray(a)||m.isInt16Array(a)||m.isUint16Array(a)||
    m.isInt32Array(a)||m.isUint32Array(a)||m.isFloat32Array(a)||m.isFloat64Array(a)?m.slice(a):a instanceof Date?new Date(a.getTime()):a instanceof ArrayBuffer?a.slice(0,a.byteLength):"function"===typeof a.clone?a.clone():"function"===typeof a.map&&"function"===typeof a.forEach?a.map(l):"function"===typeof a.notifyChange&&"function"===typeof a.watch?a.clone():h({},a,l):a}function h(a,d,c){var b,e,k={};for(b in d){e=d[b];var q=!(b in k)||k[b]!==e;if(!(b in a)||a[b]!==e&&q)a[b]=c?c(e):e}return a}Object.defineProperty(a,
    "__esModule",{value:!0});a.fixJson=e;a.clone=l;a.equals=function(a,d){return a===d||"number"===typeof a&&isNaN(a)&&"number"===typeof d&&isNaN(d)||"function"===typeof(a||{}).getTime&&"function"===typeof(d||{}).getTime&&a.getTime()===d.getTime()||!1};a.mixin=function(a){void 0===a&&(a={});for(var d=[],c=1;c<arguments.length;c++)d[c-1]=arguments[c];for(c=0;c<d.length;c++)h(a,d[c]);return a}})},"esri/core/typedArrayUtil":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",
    {value:!0});a.forEach=function(a,c){if(a.forEach)a.forEach(c);else for(var e=0;e<a.length;e++)c(a[e],e,a)};a.slice=function(a,c,l){if(a.slice)return a.slice(c,l);void 0===c?c=0:(0>c&&(c+=a.length),c=Math.min(a.length,Math.max(0,c)));void 0===l?l=a.length:(0>l&&(l+=a.length),l=Math.min(a.length,Math.max(0,l)));l=Math.max(0,l-c);for(var e=new a.constructor(l),g=0;g<l;g++)e[g]=a[c+g];return e};a.isArrayBuffer=function(a){return a instanceof ArrayBuffer||a&&a.constructor&&"ArrayBuffer"===a.constructor.name};
    a.isInt8Array=function(a){return a instanceof Int8Array||a&&a.constructor&&"Int8Array"===a.constructor.name};a.isUint8Array=function(a){return a instanceof Uint8Array||a&&a.constructor&&"Uint8Array"===a.constructor.name};a.isUint8ClampedArray=function(a){return a instanceof Uint8ClampedArray||a&&a.constructor&&"Uint8ClampedArray"===a.constructor.name};a.isInt16Array=function(a){return a instanceof Int16Array||a&&a.constructor&&"Int16Array"===a.constructor.name};a.isUint16Array=function(a){return a instanceof
    Uint16Array||a&&a.constructor&&"Uint16Array"===a.constructor.name};a.isInt32Array=function(a){return a instanceof Int32Array||a&&a.constructor&&"Int32Array"===a.constructor.name};a.isUint32Array=function(a){return a instanceof Uint32Array||a&&a.constructor&&"Uint32Array"===a.constructor.name};a.isFloat32Array=function(a){return a instanceof Float32Array||a&&a.constructor&&"Float32Array"===a.constructor.name};a.isFloat64Array=function(a){return a instanceof Float64Array||a&&a.constructor&&"Float64Array"===
    a.constructor.name};a.toArray=function(a){for(var c=Array(a.length),l=0;l<a.length;l++)c[l]=a[l];return c};a.estimateSize=function(a){return a?128+a.buffer.byteLength+64:0}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,c){m.getMetadata(a).autoDestroy=!0;return a[c]}}})},"esri/core/accessorSupport/decorators/cast":function(){define("require exports ../../deprecate ../../Logger ../ensureType ../metadata".split(" "),
    function(c,a,m,e,l,h){function g(b){var a="_meta"in b?l.ensureType(b):b;return function(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b.push(a);return"number"===typeof b[2]?n.apply(this,b):d.apply(this,b)}}function d(b,a,d,c){h.getPropertyMetadata(b,a).cast=c}function n(b,a,d,c){m.deprecated(e.getLogger("esri.core.accessorSupport.decorators.cast"),"@cast decorator on method parameters is deprecated for compatibility with ES decorator spec",{version:"4.14",see:"https://arcg.is/vvbW8"});
    h.getParameterMetadata(b,a,d).cast=c}function b(b){return function(a,d){h.getPropertyMetadata(a,b).cast=a[d]}}Object.defineProperty(a,"__esModule",{value:!0});var p=Object.prototype.toString;a.autocastMethod=function(b,a,d){if(h.hasParametersMetadata(b,a)){var c=h.getParametersMetadata(b,a).filter(function(b){return null!=b.cast});if(c.length){var f=d.value;d.value=function(){for(var b=[],a=0;a<arguments.length;a++)b[a]=arguments[a];for(a=0;a<c.length;a++){var d=c[a];b[d.index]=d.cast(b[d.index])}return f.apply(this,
    b)};return d}console.warn("Method "+b.declaredClass+"::"+a+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===p.call(a[0]))return g(a[0]);if(1===a.length&&"string"===typeof a[0])return b(a[0])}}})},"esri/core/deprecate":function(){define(["require","exports","./has"],function(c,a,m){function e(a,c,d){void 0===d&&(d={});if(m("esri-deprecation-warnings")){var e=
    d.replacement,b=d.version,p=d.see;d=d.warnOnce;e&&(c+="\n\t\ud83d\udee0\ufe0f Replacement: "+e);b&&(c+="\n\t\u2699\ufe0f Version: "+b);p&&(c+="\n\t\ud83d\udd17 See "+p+" for more details.");e=c;b=d;void 0===b&&(b=!1);b&&l.has(e)||(b&&l.add(e),a.warn("\ud83d\uded1 DEPRECATED - "+e))}}Object.defineProperty(a,"__esModule",{value:!0});var l=new Set;a.deprecatedModule=function(a,c,d){void 0===d&&(d={});m("esri-deprecation-warnings")&&e(a,"Module: "+c,d)};a.deprecatedFunction=function(a,c,d){void 0===d&&
    (d={});if(m("esri-deprecation-warnings")){var n=d.moduleName;e(a,"Function: "+((n?n+"::":"")+c+"()"),d)}};a.deprecated=e})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports","../../declare"],function(c,a,m){function e(a){var c=Object.getPrototypeOf(a.prototype),e=a._meta&&a._meta.bases;a=a._meta&&a._meta.parents;if(c&&e&&a&&!(1>=a.length))for(var d=1;d<e.length;d++){var n=e[d],b=n.__accessorMetadata__&&n.__accessorMetadata__.properties,p=c,c=Object.getPrototypeOf(c);
    if(-1!==a.indexOf(n))for(var k=0,q=Object.getOwnPropertyNames(n.prototype);k<q.length;k++){var f=q[k];if("initialized"!==f&&"constructed"!==f&&"destroyed"!==f&&!(b&&f in b)){var r=Object.getOwnPropertyDescriptor(n.prototype,f);r&&(r.get||r.set)&&Object.defineProperty(p,f,r)}}}}Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){var c=function(){return this||{}};if(1<arguments.length){for(var g=[],d=0;d<arguments.length;d++)g.push(arguments[d]);a=m(g);e(a)}c.__bases__=[a];return c}})},
    "esri/core/declare":function(){define(["require","exports","dojo/_base/declare","./deprecate","./Logger"],function(c,a,m,e,l){function h(b,a){b&&!Array.isArray(b)&&"function"!==typeof b&&(a=b,b=null);b=b||[];a=a||{};return g([this].concat(b),a)}function g(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);1<a.length&&e.deprecated(d,"Extending multiple classes with Accessor",{version:"4.13",see:"https://arcg.is/T8fr4"});c=c||{};var k,f;k=0;for(f=n.length;k<
    f;k++)n[k](a,c);a=m(a,c);a.createSubclass=h;var p=a.prototype.isInstanceOf;a.prototype.isInstanceOf=function(){e.deprecatedFunction(d,"isInstanceOf",{moduleName:"Accessor",replacement:"Use `instanceof` or check for property presence `'property' in instance`",version:"4.13"});return p.apply(this,arguments)};k=0;for(f=b.length;k<f;k++)b[k](a);return a}var d=l.getLogger("esri.core.Accessor"),n=[],b=[];(function(a){a.hasMixin=function(b,a){b=Array.isArray(b)?b.reduce(function(b,a){return a._meta?b.concat(a._meta.bases):
    b},[]):b._meta?b._meta.bases:b;if(!b)return!1;if("string"===typeof a)for(var d=b.length-1;0<=d;d--)if(b[d].prototype.declaredClass===a)return!0;return-1!==b.indexOf(a)};a.safeMixin=function(b,a){return m.safeMixin(b,a)};a.before=function(b){n.push(b)};a.after=function(a){b.push(a)}})(g||(g={}));return g})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(c,a,m){function e(b,a){throw Error("declare"+(a?" "+a:"")+": "+b);}function l(b,a){for(var d=[],c=[{cls:0,refs:[]}],
    f={},k=1,q=b.length,p=0,n,r,g,h,u;p<q;++p){(n=b[p])?"[object Function]"!=A.call(n)&&e("mixin #"+p+" is not a callable constructor.",a):e("mixin #"+p+" is unknown. Did you use dojo.require to pull it in?",a);r=n._meta?n._meta.bases:[n];g=0;for(n=r.length-1;0<=n;--n)h=r[n].prototype,h.hasOwnProperty("declaredClass")||(h.declaredClass="uniqName_"+B++),h=h.declaredClass,f.hasOwnProperty(h)||(f[h]={count:0,refs:[],cls:r[n]},++k),h=f[h],g&&g!==h&&(h.refs.push(g),++g.count),g=h;++g.count;c[0].refs.push(g)}for(;c.length;){g=
    c.pop();d.push(g.cls);for(--k;u=g.refs,1==u.length;){g=u[0];if(!g||--g.count){g=0;break}d.push(g.cls);--k}if(g)for(p=0,q=u.length;p<q;++p)g=u[p],--g.count||c.push(g)}k&&e("can't build consistent linearization",a);n=b[0];d[0]=n?n._meta&&n===d[d.length-n._meta.bases.length]?n._meta.bases.length:1:0;return d}function h(b,a,d,c){var f,k,p,q,n,r,g=this._inherited=this._inherited||{};"string"===typeof b&&(f=b,b=a,a=d,d=c);if("function"===typeof b)p=b,b=a,a=d;else try{p=b.callee}catch(T){if(T instanceof
    TypeError)e("strict mode inherited() requires the caller function to be passed before arguments",this.declaredClass);else throw T;}(f=f||p.nom)||e("can't deduce a name to call inherited()",this.declaredClass);d=c=0;q=this.constructor._meta;c=q.bases;r=g.p;if("constructor"!=f){if(g.c!==p&&(r=0,n=c[0],q=n._meta,q.hidden[f]!==p)){(k=q.chains)&&"string"==typeof k[f]&&e("calling chained method with inherited: "+f,this.declaredClass);do if(q=n._meta,k=n.prototype,q&&(k[f]===p&&k.hasOwnProperty(f)||q.hidden[f]===
    p))break;while(n=c[++r]);r=n?r:-1}if(n=c[++r])if(k=n.prototype,n._meta&&k.hasOwnProperty(f))d=k[f];else{p=z[f];do if(k=n.prototype,(d=k[f])&&(n._meta?k.hasOwnProperty(f):d!==p))break;while(n=c[++r])}d=n&&d||z[f]}else{if(g.c!==p&&(r=0,(q=c[0]._meta)&&q.ctor!==p)){for((k=q.chains)&&"manual"===k.constructor||e("calling chained constructor with inherited",this.declaredClass);(n=c[++r])&&(!(q=n._meta)||q.ctor!==p););r=n?r:-1}for(;(n=c[++r])&&!(d=(q=n._meta)?q.ctor:n););d=n&&d}g.c=d;g.p=r;if(d)return!0===
    a?d:d.apply(this,a||b)}function g(b,a,d){return"string"===typeof b?"function"===typeof a?this.__inherited(b,a,d,!0):this.__inherited(b,a,!0):"function"===typeof b?this.__inherited(b,a,!0):this.__inherited(b,!0)}function d(b,a,d,c){var f=this.getInherited(b,a,d);if(f)return f.apply(this,c||d||a||b)}function n(b){for(var a=this.constructor._meta.bases,d=0,c=a.length;d<c;++d)if(a[d]===b)return!0;return this instanceof b}function b(b,a){for(var d in a)"constructor"!=d&&a.hasOwnProperty(d)&&(b[d]=a[d])}
    function p(b){v.safeMixin(this.prototype,b);return this}function k(b,a){b instanceof Array||"function"===typeof b||(a=b,b=void 0);a=a||{};b=b||[];return v([this].concat(b),a)}function q(b,a){return function(){var d=arguments,c=d,f=d[0],e,k;k=b.length;var q;if(!(this instanceof d.callee))return w(d);if(a&&(f&&f.preamble||this.preamble))for(q=Array(b.length),q[0]=d,e=0;;){(f=d[0])&&(f=f.preamble)&&(d=f.apply(this,d)||d);f=b[e].prototype;(f=f.hasOwnProperty("preamble")&&f.preamble)&&(d=f.apply(this,
    d)||d);if(++e==k)break;q[e]=d}for(e=k-1;0<=e;--e)f=b[e],(f=(k=f._meta)?k.ctor:f)&&f.apply(this,q?q[e]:d);(f=this.postscript)&&f.apply(this,c)}}function f(b,a){return function(){var d=arguments,c=d,f=d[0];if(!(this instanceof d.callee))return w(d);a&&(f&&(f=f.preamble)&&(c=f.apply(this,c)||c),(f=this.preamble)&&f.apply(this,c));b&&b.apply(this,d);(f=this.postscript)&&f.apply(this,d)}}function r(b){return function(){var a=arguments,d=0,c,f;if(!(this instanceof a.callee))return w(a);for(;c=b[d];++d)if(c=
    (f=c._meta)?f.ctor:c){c.apply(this,a);break}(c=this.postscript)&&c.apply(this,a)}}function t(b,a,d){return function(){var c,f,e=0,k=1;d&&(e=a.length-1,k=-1);for(;c=a[e];e+=k)f=c._meta,(c=(f?f.hidden:c.prototype)[b])&&c.apply(this,arguments)}}function u(b){y.prototype=b.prototype;b=new y;y.prototype=null;return b}function w(b){var a=b.callee,d=u(a);a.apply(d,b);return d}function v(d,c,w){"string"!=typeof d&&(w=c,c=d,d="");w=w||{};var F,y,C,B,E,L,M,O=1,T=c;"[object Array]"==A.call(c)?(L=l(c,d),C=L[0],
    O=L.length-C,c=L[O]):(L=[0],c?"[object Function]"==A.call(c)?(C=c._meta,L=L.concat(C?C.bases:c)):e("base class is not a callable constructor.",d):null!==c&&e("unknown base class. Did you use dojo.require to pull it in?",d));if(c)for(y=O-1;;--y){F=u(c);if(!y)break;C=L[y];(C._meta?b:x)(F,C.prototype);B=a("csp-restrictions")?function(){}:new Function;B.superclass=c;B.prototype=F;c=F.constructor=B}else F={};v.safeMixin(F,w);C=w.constructor;C!==z.constructor&&(C.nom="constructor",F.constructor=C);for(y=
    O-1;y;--y)(C=L[y]._meta)&&C.chains&&(M=x(M||{},C.chains));F["-chains-"]&&(M=x(M||{},F["-chains-"]));c&&c.prototype&&c.prototype["-chains-"]&&(M=x(M||{},c.prototype["-chains-"]));C=!M||!M.hasOwnProperty("constructor");L[0]=B=M&&"manual"===M.constructor?r(L):1==L.length?f(w.constructor,C):q(L,C);B._meta={bases:L,hidden:w,chains:M,parents:T,ctor:w.constructor};B.superclass=c&&c.prototype;B.extend=p;B.createSubclass=k;B.prototype=F;F.constructor=B;F.getInherited=g;F.isInstanceOf=n;F.inherited=D;F.__inherited=
    h;d&&(F.declaredClass=d,m.setObject(d,B));if(M)for(E in M)F[E]&&"string"==typeof M[E]&&"constructor"!=E&&(C=F[E]=t(E,L,"after"===M[E]),C.nom=E);return B}var x=m.mixin,z=Object.prototype,A=z.toString,y,B=0;y=a("csp-restrictions")?function(){}:new Function;var D=c.config.isDebug?d:h;c.safeMixin=v.safeMixin=function(b,a){var d,c;for(d in a)c=a[d],c===z[d]&&d in z||"constructor"==d||("[object Function]"==A.call(c)&&(c.nom=d),b[d]=c);return b};return c.declare=v})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require",
    "exports","../../jsonMap","./property"],function(c,a,m,e){function l(a){return e.property({type:a})}Object.defineProperty(a,"__esModule",{value:!0});a.enumeration=l;(function(a){a.serializable=function(){return function(a,d){void 0===d&&(d={ignoreUnknown:!0});a=a instanceof m.JSONMap?a:new m.JSONMap(a,d);return e.property({type:d&&d.ignoreUnknown?a.apiValues:String,json:{type:a.jsonValues,read:{reader:a.read},write:{writer:a.write}}})}}})(l=a.enumeration||(a.enumeration={}))})},"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),
    function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(d,c){var b=d.constructor.prototype;b!==Function.prototype&&((d=Object.getOwnPropertyDescriptor(d,c))&&(d.get||d.set)?(a=e.clone(a),d.set&&(a.set=d.set),d.get&&(a.get=d.get)):d&&d.hasOwnProperty("value")&&(a=e.clone(a),a.value=d.value),c=h.getPropertyMetadata(b,c),h.mergeProperty(c,a))}};a.propertyJSONMeta=function(a,
    d,c){a=h.getPropertyMetadata(a.constructor.prototype,c);a.json||(a.json={});a=a.json;void 0!==d&&(a.origins||(a.origins={}),a.origins[d]||(a.origins[d]={}),a=a.origins[d]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,c,g){var d,n;void 0===c||Array.isArray(c)?(n=a,g=c,d=[void 0]):(n=c,d=Array.isArray(a)?a:[a]);return function(b,a){var c=
    b.constructor.prototype;d.forEach(function(d){d=e.propertyJSONMeta(b,d,n);d.read&&"object"!==typeof d.read&&(d.read={});m.setDeepValue("read.reader",c[a],d);g&&(d.read.source=(d.read.source||[]).concat(g))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.shared=function(a){return function(c,l){c[l]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports",
    "../../declare","../metadata"],function(c,a,m,e){function l(b,a){b.read&&("function"===typeof b.read?a.push(b.read):"object"===typeof b.read&&b.read.reader&&a.push(b.read.reader))}function h(b,a){b.write&&("function"===typeof b.write?a.push(b.write):"object"===typeof b.write&&b.write.writer&&a.push(b.write.writer))}function g(b){var a=[];b=e.getPropertiesMetadata(b.prototype);if(!b)return a;for(var d in b){var c=b[d];c.cast&&a.push(c.cast);c.copy&&a.push(c.copy);if(c=c.json)if(l(c,a),h(c,a),c=c.origins)for(var p in c){var n=
    c[p];l(n,a);h(n,a)}}return a}function d(a){var d={values:{},descriptors:{}},c=["__bases__"],f=e.getPropertiesMetadata(a.prototype),p=g(a);Object.getOwnPropertyNames(a.prototype).filter(function(d){return-1!==c.indexOf(d)||f&&f.hasOwnProperty(d)||!b(Object.getOwnPropertyDescriptor(a.prototype,d))&&-1!==p.indexOf(a.prototype[d])?!1:!0}).forEach(function(c){var f=Object.getOwnPropertyDescriptor(a.prototype,c);b(f)?d.descriptors[c]=f:d.values[c]=a.prototype[c]});return d}function n(a){var d=Object.getOwnPropertyNames(a),
    c=Object.getPrototypeOf(a.prototype).constructor,f=Object.getOwnPropertyNames(Function);f.push("__bases__","caller","arguments");var e=Object.getOwnPropertyNames(c),p={values:{},descriptors:{}};d.filter(function(b){return-1!==f.indexOf(b)?!1:-1===e.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(d){var c=Object.getOwnPropertyDescriptor(a,d);b(c)?p.descriptors[d]=c:p.values[d]=a[d]});return p}function b(b){return b&&!(!b.get&&!b.set)}Object.defineProperty(a,"__esModule",{value:!0});a.subclass=function(a){return function(c){var e=
    d(c),f=n(c);null!=a&&(e.values.declaredClass=a);c=m(c.__bases__,e.values);var k=Object.getPrototypeOf(c.prototype),p=c._meta&&c._meta.bases,g=c._meta&&c._meta.parents;if(k&&p&&g&&!(1>=g.length))for(var h=1;h<p.length;h++){var l=p[h],x=l.__accessorMetadata__&&l.__accessorMetadata__.properties,z=k,k=Object.getPrototypeOf(k);if(-1!==g.indexOf(l))for(var A=0,y=Object.getOwnPropertyNames(l.prototype);A<y.length;A++){var B=y[A];if("initialized"!==B&&"constructed"!==B&&"destroyed"!==B&&!(x&&B in x)){var D=
    Object.getOwnPropertyDescriptor(l.prototype,B);b(D)&&Object.defineProperty(z,B,D)}}}Object.defineProperties(c.prototype,e.descriptors);for(var E in f.values)c[E]=f.values[E];Object.defineProperties(c,f.descriptors);return c}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,c,g){var d,n;void 0===c?(n=a,d=[void 0]):"string"!==typeof c?(n=a,d=[void 0],
    g=c):(n=c,d=Array.isArray(a)?a:[a]);return function(b,a){var c=b.constructor.prototype;d.forEach(function(d){d=e.propertyJSONMeta(b,d,n);d.write&&"object"!==typeof d.write&&(d.write={});g&&m.setDeepValue("write.target",g,d);m.setDeepValue("write.writer",c[a],d)})}}})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(c,a,m,
    e,l,h,g){return function(a){function d(b){b=a.call(this,b)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=g.WGS84;return b}m(d,a);Object.defineProperty(d.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});d.prototype.readSpatialReference=function(b,a){if(b instanceof g)return b;if(null!=b){var d=new g;d.read(b,a);return d}return b};d.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};d.prototype.clearCache=
    function(){this.notifyChange("cache")};d.prototype.getCacheValue=function(b){return this.cache[b]};d.prototype.setCacheValue=function(b,a){this.cache[b]=a};e([h.property()],d.prototype,"type",void 0);e([h.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"cache",null);e([h.property({readOnly:!0,dependsOn:["spatialReference"]})],d.prototype,"extent",void 0);e([h.property({type:Boolean,json:{write:{overridePolicy:function(b){return{enabled:b}}}}})],d.prototype,"hasM",void 0);e([h.property({type:Boolean,
    json:{write:{overridePolicy:function(b){return{enabled:b}}}}})],d.prototype,"hasZ",void 0);e([h.property({type:g,json:{write:!0}})],d.prototype,"spatialReference",void 0);e([h.reader("spatialReference")],d.prototype,"readSpatialReference",null);return d=e([h.subclass("esri.geometry.Geometry")],d)}(h.declared(l.JSONSupport))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
    function(c,a,m,e,l,h,g,d,n){function b(b,a){if(!b)return null;if(b.declaredClass)throw Error("JSON object is already hydrated");var d=new this;d.read(b,a);return d}function p(b){return b&&"read"in b&&"write"in b&&"toJSON"in b}Object.defineProperty(a,"__esModule",{value:!0});a.JSONSupportMixin=function(a){a=function(a){function c(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];return a.apply(this,b)||this}m(c,a);c.prototype.read=function(b,a){d.default(this,b,a)};c.prototype.write=function(b,
    a){return n.default(this,b||{},a)};c.prototype.toJSON=function(b){return this.write(null,b)};c.fromJSON=function(a,d){return b.call(this,a,d)};return c=e([g.subclass("esri.core.JSONSupport")],c)}(g.declared(a));a.prototype.toJSON.isDefaultToJSON=!0;return a};a.isJSONSupport=p;h.after(function(a){for(var d=a.prototype;;){if(p(d)){a.fromJSON=b.bind(a);break}d=Object.getPrototypeOf(d);if(!d)break}});c=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}m(a,b);return a=e([g.subclass("esri.core.JSONSupport")],
    a)}(g.declared(a.JSONSupportMixin(l)));a.JSONSupport=c})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch ./accessorSupport/testSupport".split(" "),function(c,a,m,e,l,h,g){a=a.default;c.before(function(a,b){c.hasMixin(a,d)&&e.processPrototype(b)});c.after(function(a){c.hasMixin(a,d)&&(e.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&
    this.__accessor__.initialized||!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var d=c(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===d)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",
    {value:new a(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var c=[],b=0;b<arguments.length;b++)c.push(arguments[b]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,c)}if(g.interceptor)g.interceptor.onInstanceConstruct(this)},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
    }catch(n){console.warn(n.stack)}else if(h.removeTarget(this),this.__accessor__.destroy(),g.interceptor)g.interceptor.onInstanceDestroy(this)},get:function(a){return m.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){l.set(this,a,b);return this},watch:function(a,b,d){return h.watch(this,a,b,d)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},
    _override:function(a,b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return d})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../lang ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(c,
    a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});l.getLogger("esri.core.accessorSupport.Properties");c=function(){function a(b){this.host=b;this._origin=6;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new n.Store;b=this.host.constructor.__accessorMetadata__;this.metadatas=b.properties;this.autoDestroy=b.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;g.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=
    function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var b=this.cursors;if(b)for(var a=0,d=Object.getOwnPropertyNames(b);a<d.length;a++){var c=d[a],e=b[c];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,c);b[c]=null}}if(this.autoDestroy)for(c in this.metadatas)(b=this.internalGet(c))&&b&&"function"===typeof b.destroy&&(b.destroy(),this.metadatas[c].nonNullable||this.internalSet(c,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},
    enumerable:!0,configurable:!0});a.prototype.clearOverride=function(b){this.isOverridden(b)&&(this.overridden[b]=!1,this.propertyInvalidated(b))};a.prototype.get=function(b){var a=this.metadatas[b],d=a.get;return!this.store.has(b)||d&&this.dirties[b]?d?(a=d.call(this.host),this.store.set(b,a,1),this.propertyCommitted(b),a):a.value:this.store.get(b)};a.prototype.getterStatic=function(b,a){return this.store.has(b)?this.store.get(b):a.value};a.prototype.getterComputed=function(b,a){if(this.store.has(b)&&
    !this.dirties[b])return this.store.get(b);a=a.get.call(this.host);this.store.set(b,a,1);this.propertyCommitted(b);return a};a.prototype.originOf=function(b){var a=this.store.originOf(b);return void 0===a&&(b=this.metadatas[b])&&b.hasOwnProperty("value")?"defaults":d.idToName(a)};a.prototype.has=function(b){return this.metadatas[b]?this.store.has(b):!1};a.prototype.internalGet=function(b){if(this.metadatas[b]){var a=this.store;return a.has(b)?a.get(b):this.metadatas[b].value}};a.prototype.internalSet=
    function(b,a){if(this.metadatas[b]){var d=this.initialized?this._origin:0,c=this.store.get(b);e.equals(a,c)&&d===this.store.originOf(b)&&this.store.has(b,d)&&!this.isOverridden(b)||(this.propertyInvalidated(b),this.store.set(b,a,d),this.propertyCommitted(b))}};a.prototype.isOverridden=function(b){return null!=this.overridden&&!0===this.overridden[b]};a.prototype.keys=function(){return Object.keys(this.metadatas)};a.prototype.override=function(a,d){if(this.metadatas[a]){this.overridden||(this.overridden=
    {});var c=this.metadatas[a];if(!c.nonNullable||null!=d){if(c=c.cast){d=this.cast(c,d);var c=d.valid,e=d.value;b.release(d);if(!c)return;d=e}this.overridden[a]=!0;this.internalSet(a,d)}}};a.prototype.set=function(a,d){if(this.metadatas[a]){var c=this.metadatas[a];if(!c.nonNullable||null!=d){var e=c.set;if(c=c.cast){d=this.cast(c,d);var c=d.valid,k=d.value;b.release(d);if(!c)return;d=k}e?e.call(this.host,d):this.internalSet(a,d)}}};a.prototype.setDefaultOrigin=function(b){this._origin=d.nameToId(b)};
    a.prototype.propertyInvalidated=function(b){var a=this.dirties;this.isOverridden(b)||(a[b]=!0);if(a=this.cursors&&this.cursors[b])for(var d=0;d<a.length;d++)a[d].propertyInvalidated(this,b)};a.prototype.propertyCommitted=function(b){var a=this.cursors&&this.cursors[b];this.dirties[b]=!1;if(a)for(var d=0;d<a.length;d++)a[d].propertyCommitted(this,b)};a.prototype.addCursor=function(b,a){this.cursors||(this.cursors={});var d=this.cursors[b];d||(this.cursors[b]=d=[]);d.push(a)};a.prototype.removeCursor=
    function(b,a){var d=this.cursors[b];this.cursors[b]&&(d.splice(d.indexOf(a),1),0===d.length&&(this.cursors[b]=null))};a.prototype.cast=function(a,d){var c=b.acquire();c.valid=!0;c.value=d;a&&(c.value=a.call(this.host,d,c));return c};return a}();m=function(){function b(){this.value=null;this.valid=!0}b.prototype.acquire=function(){this.valid=!0};b.prototype.release=function(){this.value=null};return b}();var b=new h(m);a.default=c})},"esri/core/ObjectPool":function(){define(["require","exports"],function(c,
    a){var m=function(){return function(){}}();return function(){function a(a,c,e,d,n){void 0===d&&(d=1);void 0===n&&(n=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=c;this.releaseFunction=e;this.growthSize=d;!0===c?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof c&&(this.acquireFunction=c);this._pool=Array(n);this._initialSize=n;if(this.classConstructor)for(a=0;a<n;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(d,1)}a.prototype.destroy=
    function(){this.prune(0)};a.prototype.acquire=function(){var c;c=this.classConstructor||m;if(a.test.disabled)c=new c;else{if(0===this._pool.length)for(var e=this.growthSize,g=0;g<e;g++)this._pool[g]=new c;c=this._pool.pop()}if(this.acquireFunction){for(g=arguments.length;0<g;g--)arguments[g]=arguments[g-1];arguments[0]=c;arguments.length++;this.acquireFunction.apply(this,arguments)}else c&&c.acquire&&"function"===typeof c.acquire&&c.acquire.apply(c,arguments);return c};a.prototype.release=function(c){c&&
    !a.test.disabled&&(this.releaseFunction?this.releaseFunction(c):c&&c.release&&"function"===typeof c.release&&c.release(),this._pool.push(c))};a.prototype.prune=function(a){void 0===a&&(a=this._initialSize);if(!(a>=this._pool.length)){for(var c=a;c<this._pool.length;++c)this._dispose(this._pool[c]);this._pool.length=a}};a.prototype._dispose=function(a){a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(){this.classConstructor&&this.classConstructor.call.apply(this.classConstructor,
    arguments)};a.test={disabled:!1};return a}()})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});var h=[m.default,e.default,l.default];a.processPrototypeMetadatas=function(a,d){for(var c=0;c<h.length;c++){var b=h[c];if(b.processPrototypePropertyMetadata)for(var e in a)b.processPrototypePropertyMetadata(e,
    a[e],a,d)}};a.processClassMetadatas=function(a,d){for(var c=0;c<h.length;c++){var b=h[c];if(b.processClassPropertyMetadata)for(var e in a)b.processClassPropertyMetadata(e,a[e],a,d)}};a.instanceCreated=function(a,d){for(var c=Object.getOwnPropertyNames(d),b=0;b<h.length;b++){var e=h[b];e.instanceCreated&&e.instanceCreated(a,d,c)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(c,a,m,e,l,h,g){function d(a,
    b,d){var c=h.getProperties(a);return g.wire(a,d.aliasOf,function(){c.propertyInvalidated(b)})}Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,d,c){var k=b.aliasOf;if(k&&(a=k.split(".")[0],null!=d[a]&&!b.set&&!b.get)){var f;b.get=function(){var b=e.default(this,k);if("function"===typeof b){f||(f=k.split(".").slice(0,-1).join("."));var a=e.default(this,f);a&&(b=b.bind(a))}return b};b.readOnly||(b.set=function(b){return l.default(this,
    k,b)})}},instanceCreated:function(a,b,c){for(var e=0;e<c.length;e++){var p=c[e],f=b[p];f.aliasOf&&d(a,p,f)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(c,a,m){function e(a,c,b){a="?"===a[a.length-1]?a.slice(0,-1):a;if(null!=b.getItemAt||Array.isArray(b)){var d=parseInt(a,10);if(!isNaN(d))return Array.isArray(b)?b[d]:b.getItemAt(d)}d=m.getProperties(b);return c?m.isPropertyDeclared(d,a)?d.get(a):b[a]:m.isPropertyDeclared(d,
    a)?d.internalGet(a):b[a]}function l(a,c,b,p){if(null==a)return a;if((a=e(c[p],b,a))||!(p<c.length-1))return p===c.length-1?a:l(a,c,b,p+1)}function h(a,c,b,p){void 0===b&&(b=!1);void 0===p&&(p=0);return"string"===typeof c&&-1===c.indexOf(".")?e(c,b,a):l(a,m.pathToArray(c),b,p)}function g(a,c){return h(a,c,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=h;a.get=g;a.exists=function(a,c){return void 0!==h(c,a,!0)};a.default=g})},"esri/core/accessorSupport/set":function(){define(["require",
    "exports","../has","../Logger","./get"],function(c,a,m,e,l){function h(a,d,c){if(a&&d)if("object"===typeof d){c=0;for(var b=Object.getOwnPropertyNames(d);c<b.length;c++){var e=b[c];h(a,e,d[e])}}else"_"!==d[0]&&(-1!==d.indexOf(".")?(d=d.split("."),e=d.splice(d.length-1,1)[0],h(l.default(a,d),e,c)):a[d]=c)}Object.defineProperty(a,"__esModule",{value:!0});e.getLogger("esri.core.accessorSupport.set");a.set=h;a.default=h})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],
    function(c,a,m){function e(b,a,c){a=m.splitPath(a);if(Array.isArray(a)){for(var e=[],f=0;f<a.length;f++)e.push((new l(a[f],c)).install(b));return new d(e)}b=(new l(a,c)).install(b);return new n(b)}Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function b(b,a){this.path=b;this.callback=a;this.conditional=this.chain=null;if(-1<b.indexOf(".")){if(b=m.parseConditionalPath(b))this.path=b.fullPath,this.conditional=b.conditional;this.chain=m.pathToArray(this.path)}else"?"===b[b.length-
    1]&&(this.path=b.slice(0,b.length-1),this.conditional=[!0],this.chain=[this.path]);this.callback=a;return this}b.prototype.install=function(b){b=this.chain?new g(this,b):new h(this,b);return b};b.prototype.notify=function(b){this.callback(b,this.path)};return b}(),h=function(){function b(b,a){this.binding=b;this.target=a;m.getProperties(a).addCursor(this.binding.path,this)}b.prototype.destroy=function(){this.target&&(m.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=
    null)};b.prototype.propertyDestroyed=function(b,a){m.getProperties(this.target).removeCursor(a,this)};b.prototype.propertyInvalidated=function(){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(){this.binding&&this.binding.notify(this.target)};return b}(),g=function(){function b(b,a){this.binding=b;this.target=a;this.stack=[];this.properties=m.getProperties(a);this.stack.push({properties:this.properties,propertyName:b.chain[0]});this.properties.addCursor(b.chain[0],
    this);this.moveForward();return this}b.prototype.destroy=function(){for(;;){var b=this.stack.pop();if(null==b)break;b.properties.removeCursor(b.propertyName,this)}this.target=this.binding=null};b.prototype.propertyDestroyed=function(b,a){this.moveBackward(b,a)};b.prototype.propertyInvalidated=function(){this.binding&&this.binding.notify(this.target)};b.prototype.propertyCommitted=function(b,a){this.binding&&(this.moveBackward(b,a),this.moveForward(),this.binding.notify(this.target))};b.prototype.moveBackward=
    function(b,a){for(var d=this.stack,c=d[d.length-1];c.properties!==b&&c.propertyName!==a;)c.properties.removeCursor(c.propertyName,this),d.pop(),c=d[d.length-1]};b.prototype.moveForward=function(){var b=this.stack,a=b[b.length-1];if(1!==b.length||!this.binding.conditional||!this.binding.conditional[b.length-1]||a.properties.metadatas[a.propertyName])if(a=a.properties.internalGet(a.propertyName),(a=m.getProperties(a))&&b.length<this.binding.chain.length){var d=this.binding.chain[b.length];this.binding.conditional&&
    this.binding.conditional[b.length]&&!a.metadatas[d]||(this.stack.push({properties:a,propertyName:d}),a.addCursor(d,this),this.moveForward())}};return b}(),d=function(){function b(b){this.cursors=b}b.prototype.remove=function(){for(var b=this.cursors;0<b.length;)b.pop().destroy();this.cursors=null};return b}(),n=function(){function b(b){this.cursor=b}b.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return b}();a.create=function(b,a){b=m.splitPath(b);if(Array.isArray(b)){for(var c=
    [],e=0;e<b.length;e++)c.push(new l(b[e],a));return function(b){for(var a=[],f=0;f<c.length;f++)a[f]=c[f].install(b);return new d(a)}}var f=new l(b,a);return function(b){return new n(f.install(b))}};a.wire=e;a.default=e})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});e.getLogger("esri.core.accessorSupport.extensions.computedProperty");
    a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,d,c,b){d.dependsOn&&d.dependsOn.length&&(d.wire=h.create(d.dependsOn,function(b){return l.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,d,c){for(var b=0;b<c.length;b++){var e=d[c[b]];e.wire&&e.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),
    function(c,a,m,e,l,h,g){function d(a,b,d){var c=a&&a.json;a&&a.json&&a.json.origins&&d&&(a=a.json.origins[d.origin])&&("any"===b||b in a)&&(c=a);return c}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,b){return d(a,"read",b)};a.originSpecificWritePropertyDefinition=function(a,b){return d(a,"write",b)};a.originSpecificPropertyDefinition=d;a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,b){if(h.process(b)){e.process(b);
    for(var d=b.type,c=0;Array.isArray(d)&&!m.isOneOf(d);)d=d[0],c++;if(b.json.origins)for(var q in b.json.origins){var f=b.json.origins[q];l.create(d,c,a,f);g.create(d,c,a,f)}l.create(d,c,a,b.json);g.create(d,c,a,b.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var c=a.json.origins,
    l={"web-document":["web-scene","web-map"]};a=function(a){if(c[a]){var d=c[a];l[a].forEach(function(a){c[a]=d});delete c[a]}};for(var h in l)a(h)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(c,a,m,e){function l(a,c){if(1<c)return d(a,c);if(1===c)return n(a);if(b(a)){var f=n(a.prototype.itemType.Type);return function(b,d,c){return(b=f(b,d,c))?new a(b):b}}return h(a)}function h(b){return b.prototype.read?
    function(a,d,c){if(null==a)return a;d=new b;d.read(a,c);return d}:b.fromJSON}function g(b,a,d,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return g(b,a,d,c-1)}):b(a,null,d)}function d(b,a){b=h(b);var d=g.bind(null,b);return function(b,c,f){if(null==b)return b;b=d(b,f,a);c=a;for(f=b;0<c&&Array.isArray(f);)c--,f=f[0];if(void 0!==f)for(f=0;f<c;f++)b=[b];return b}}function n(b){var a=h(b);return function(b,d,c){return null==b?b:Array.isArray(b)?b.map(function(b){return a(b,null,c)}):[a(b,null,
    c)]}}function b(b){return e.isCollection(b)?(b=b.prototype.itemType)&&b.Type&&"function"===typeof b.Type?p(b.Type):!1:!1}function p(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||b(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(b,a,d,c){(!c.read||!c.read.reader&&!1!==c.read.enabled)&&p(b)&&m.setDeepValue("read.reader",l(b,a),c)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],
    function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&a.prototype&&a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(c,a){function m(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&
    (a.read.enabled=!0)}function e(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});m(a.json);e(a.json);if(a.json.origins)for(var c in a.json.origins)m(a.json.origins[c]),e(a.json.origins[c]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require",
    "exports","../../../object","./type"],function(c,a,m,e){function l(b,a,d,c){m.setDeepValue(d,h(b,c),a)}function h(b,a){return b&&"function"===typeof b.write?b.write({},a):b&&"function"===typeof b.toJSON?b.toJSON():"number"===typeof b?-Infinity===b?-Number.MAX_VALUE:Infinity===b?Number.MAX_VALUE:isNaN(b)?null:b:b}function g(b,a,d,c){null===b?b=null:b&&"function"===typeof b.map?(b=b.map(function(b){return h(b,c)}),"function"===typeof b.toArray&&(b=b.toArray())):b=[h(b,c)];m.setDeepValue(d,b,a)}function d(b,
    a,c){return 0!==c&&Array.isArray(b)?b.map(function(b){return d(b,a,c-1)}):h(b,a)}function n(b){return function(a,c,e,f){if(null===a)a=null;else{a=d(a,f,b);f=b;for(var k=a;0<f&&Array.isArray(k);)f--,k=k[0];if(void 0!==k)for(k=0;k<f;k++)a=[a]}m.setDeepValue(e,a,c)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(b,a,d,c){!c.write||c.write.writer||!1===c.write.enabled&&!c.write.overridePolicy||(1===a||e.isCollection(b)?c.write.writer=g:c.write.writer=1<a?n(a):l)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require",
    "exports"],function(c,a){function m(a){switch(a){case "defaults":return 0;case "service":return 2;case "portal-item":return 3;case "web-scene":return 4;case "web-map":return 5;case "user":return 6}}function e(a){switch(a){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}}Object.defineProperty(a,"__esModule",{value:!0});a.nameToId=m;a.idToName=e;a.readableNameToId=function(a){return m(a)};a.idToReadableName=
    function(a){return e(a)};a.writableNameToId=function(a){return m(a)};a.idToWritableName=function(a){return e(a)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","../arrayUtils"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._values=new Map}a.prototype.get=function(a){return this._values.get(a)};a.prototype.originOf=function(){return 6};a.prototype.keys=function(){return m.keysOfMap(this._values)};a.prototype.set=function(a,
    c){this._values.set(a,c)};a.prototype.delete=function(a){this._values.delete(a)};a.prototype.has=function(a){return this._values.has(a)};a.prototype.forEach=function(a){this._values.forEach(a)};return a}();a.Store=c})},"esri/core/arrayUtils":function(){define(["require","exports","@dojo/framework/shim/array","./RandomLCG"],function(c,a,m,e){function l(a,d,c,e){e=e||b;for(var f=Math.max(0,e.last-10),k=f;k<c;++k)if(a[k]===d)return e.last=k;c=Math.min(f,c);for(k=0;k<c;++k)if(a[k]===d)return e.last=k;
    return-1}function h(b,a){return-1===b.indexOf(a)}function g(b,a,d){return!b.some(a.bind(null,d))}function d(b){return b}Object.defineProperty(a,"__esModule",{value:!0});a.find=m.find;a.findIndex=m.findIndex;a.includes=m.includes;a.unique=function(b){return b.filter(function(b,a,d){return d.indexOf(b)===a})};a.equals=function(b,a,d){if(!b&&!a)return!0;if(!b||!a||b.length!==a.length)return!1;if(d)for(var c=0;c<b.length;c++){if(!d(b[c],a[c]))return!1}else for(c=0;c<b.length;c++)if(b[c]!==a[c])return!1;
    return!0};a.difference=function(b,a,d){var c;d?(c=a.filter(g.bind(null,b,d)),b=b.filter(g.bind(null,a,d))):(c=a.filter(h.bind(null,b)),b=b.filter(h.bind(null,a)));return{added:c,removed:b}};a.intersect=function(b,a,d){return b&&a?d?b.filter(function(b){return-1<m.findIndex(a,function(a){return d(b,a)})}):b.filter(function(b){return-1<a.indexOf(b)}):[]};var n=!!Array.prototype.fill;a.constant=function(b,a){if(n)return Array(b).fill(a);for(var d=Array(b),c=0;c<b;c++)d[c]=a;return d};a.range=function(b,
    a){void 0===a&&(a=b,b=0);for(var d=Array(a-b),c=b;c<a;c++)d[c-b]=c;return d};a.binaryIndexOf=function(b,a,d){for(var c=b.length,f=0,e=c-1;f<e;){var k=f+Math.floor((e-f)/2);a>b[k]?f=k+1:e=k}e=b[f];return d?a>=b[c-1]?-1:e===a?f:f-1:e===a?f:-1};a.flatten=function(b){return b.reduce(function(b,a){return b.concat(a||[])},[])};c=function(){return function(){this.last=0}}();a.PositionHint=c;var b=new c;a.indexOf=l;a.removeUnordered=function(b,a,d,c){var f=null==d?b.length:d;c=l(b,a,f,c);if(-1!==c)return b[c]=
    b[f-1],null==d&&b.pop(),a};var p=new Set;a.removeUnorderedMany=function(a,d,c,e,k,n){void 0===c&&(c=a.length);void 0===e&&(e=d.length);if(0===e||0===c)return c;p.clear();for(var f=0;f<e;++f)p.add(d[f]);k=k||b;for(f=d=Math.max(0,k.last-10);f<c;++f)if(p.has(a[f])&&(n&&n.push(a[f]),p.delete(a[f]),a[f]=a[c-1],--c,--f,0===p.size||0===c))return p.clear(),c;for(f=0;f<d;++f)if(p.has(a[f])&&(n&&n.push(a[f]),p.delete(a[f]),a[f]=a[c-1],--c,--f,0===p.size||0===c))return p.clear(),c;p.clear();return c};a.pickRandom=
    function(b,a,d){var c=b.length;if(a>=c)return b.slice(0);d=(k.seed=d)?function(){return k.getFloat()}:Math.random;for(var f=new Set,e=[];e.length<a;){var p=Math.floor(d()*c);f.has(p)||(f.add(p),e.push(b[p]))}return e};a.shuffle=function(b,a){a=(k.seed=a)?function(){return k.getFloat()}:Math.random;for(var d=b.length-1;0<d;d--){var c=Math.floor(a()*(d+1)),f=b[d];b[d]=b[c];b[c]=f}return b};var k=new e;a.keysOfMap=function(b){var a=Array(b.size),d=0;b.forEach(function(b,c){return a[d++]=c});return a};
    a.keysOfSet=function(b,a){void 0===a&&(a=d);var c=Array(b.size),f=0;b.forEach(function(b){return c[f++]=a(b)});return c};a.fromMapValues=function(b){if(Array.from)return Array.from(b.values());var a=Array(b.size),d=0;b.forEach(function(b){return a[d++]=b});return a};a.remove=function(b,a){var d=b.indexOf(a);return-1!==d?(b.splice(d,1),a):null}})},"@dojo/framework/shim/array":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=
    c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ../has/has ./support/util".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=c("tslib"),e=c("./global"),l=c("./iterator"),h=c("./number"),g=c("../has/has");c=c("./support/util");if(g.default("es6-array")&&g.default("es6-array-fill"))a.from=e.default.Array.from,a.of=e.default.Array.of,a.copyWithin=c.wrapNative(e.default.Array.prototype.copyWithin),a.fill=c.wrapNative(e.default.Array.prototype.fill),
    a.find=c.wrapNative(e.default.Array.prototype.find),a.findIndex=c.wrapNative(e.default.Array.prototype.findIndex);else{var d=function(b){if(isNaN(b))return 0;b=Number(b);isFinite(b)&&(b=Math.floor(b));return Math.min(Math.max(b,0),h.MAX_SAFE_INTEGER)},n=function(b){b=Number(b);return isNaN(b)?0:0!==b&&isFinite(b)?(0<b?1:-1)*Math.floor(Math.abs(b)):b},b=function(b,a){return 0>b?Math.max(a+b,0):Math.min(b,a)};a.from=function(b,a,c){if(null==b)throw new TypeError("from: requires an array-like object");
    a&&c&&(a=a.bind(c));c=d(b.length);var f="function"===typeof this?Object(new this(c)):Array(c);if(!l.isArrayLike(b)&&!l.isIterable(b))return f;if(l.isArrayLike(b)){if(0===c)return[];for(var e=0;e<b.length;e++)f[e]=a?a(b[e],e):b[e]}else{e=0;try{for(var k=m.__values(b),p=k.next();!p.done;p=k.next()){var q=p.value;f[e]=a?a(q,e):q;e++}}catch(z){n={error:z}}finally{try{p&&!p.done&&(g=k.return)&&g.call(k)}finally{if(n)throw n.error;}}}void 0!==b.length&&(f.length=c);return f;var n,g};a.of=function(){for(var b=
    [],a=0;a<arguments.length;a++)b[a]=arguments[a];return Array.prototype.slice.call(b)};a.copyWithin=function(a,c,e,f){if(null==a)throw new TypeError("copyWithin: target must be an array-like object");var k=d(a.length);c=b(n(c),k);e=b(n(e),k);f=b(void 0===f?k:n(f),k);f=Math.min(f-e,k-c);k=1;c>e&&c<e+f&&(k=-1,e+=f-1,c+=f-1);for(;0<f;)e in a?a[c]=a[e]:delete a[c],c+=k,e+=k,f--;return a};a.fill=function(a,c,e,f){var k=d(a.length);e=b(n(e),k);for(f=b(void 0===f?k:n(f),k);e<f;)a[e++]=c;return a};a.find=
    function(b,d,c){d=a.findIndex(b,d,c);return-1!==d?b[d]:void 0};a.findIndex=function(b,a,c){var f=d(b.length);if(!a)throw new TypeError("find: second argument must be a function");c&&(a=a.bind(c));for(c=0;c<f;c++)if(a(b[c],c,b))return c;return-1}}g.default("es7-array")?a.includes=c.wrapNative(e.default.Array.prototype.includes):a.includes=function(b,a,d){void 0===d&&(d=0);var c;c=b.length;c=Number(c);isNaN(c)?c=0:(isFinite(c)&&(c=Math.floor(c)),c=Math.min(Math.max(c,0),h.MAX_SAFE_INTEGER));for(;d<
    c;++d){var e=b[d];if(a===e||a!==a&&e!==e)return!0}return!1}})},"@dojo/framework/shim/iterator":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./Symbol","./string"],c)})(function(c,a){function m(a){return a&&"function"===typeof a[Symbol.iterator]}function e(a){return a&&"number"===typeof a.length}function l(a){if(m(a))return a[Symbol.iterator]();
    if(e(a))return new d(a)}Object.defineProperty(a,"__esModule",{value:!0});c("./Symbol");var h=c("./string"),g={done:!0,value:void 0},d=function(){function a(b){this._nextIndex=-1;m(b)?this._nativeIterator=b[Symbol.iterator]():this._list=b}a.prototype.next=function(){return this._nativeIterator?this._nativeIterator.next():this._list?++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:g:g};a.prototype[Symbol.iterator]=function(){return this};return a}();a.ShimIterator=d;a.isIterable=
    m;a.isArrayLike=e;a.get=l;a.forOf=function(a,b,d){function c(){p=!0}var p=!1;if(e(a)&&"string"===typeof a)for(var f=a.length,n=0;n<f;++n){var g=a[n];if(n+1<f){var u=g.charCodeAt(0);u>=h.HIGH_SURROGATE_MIN&&u<=h.HIGH_SURROGATE_MAX&&(g+=a[++n])}b.call(d,g,a,c);if(p)break}else if(f=l(a))for(n=f.next();!n.done;){b.call(d,n.value,a,c);if(p)break;n=f.next()}}})},"@dojo/framework/shim/number":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==
    c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./global"],c)})(function(c,a){function m(a){return"number"===typeof a&&l.default.isFinite(a)}function e(a){return m(a)&&Math.floor(a)===a}Object.defineProperty(a,"__esModule",{value:!0});var l=c("./global");a.EPSILON=1;a.MAX_SAFE_INTEGER=Math.pow(2,53)-1;a.MIN_SAFE_INTEGER=-a.MAX_SAFE_INTEGER;a.isNaN=function(a){return"number"===typeof a&&l.default.isNaN(a)};a.isFinite=m;a.isInteger=e;a.isSafeInteger=function(c){return e(c)&&
    Math.abs(c)<=a.MAX_SAFE_INTEGER}})},"esri/core/RandomLCG":function(){define(["require","exports"],function(c,a){return function(){function a(a){void 0===a&&(a=1);this._seed=a}Object.defineProperty(a.prototype,"seed",{set:function(c){this._seed=null==c?Math.random()*a._m:c},enumerable:!0,configurable:!0});a.prototype.getInt=function(){return this._seed=(a._a*this._seed+a._c)%a._m};a.prototype.getFloat=function(){return this.getInt()/(a._m-1)};a.prototype.getIntRange=function(a,c){return Math.round(this.getFloatRange(a,
    c))};a.prototype.getFloatRange=function(c,l){l-=c;var e=this.getInt()/a._m;return c+Math.floor(e*l)};a._m=2147483647;a._a=48271;a._c=0;return a}()})},"esri/core/accessorSupport/introspection":function(){define("require exports ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(c,a,m,e,l,h,g){function d(a,d){return function(b){b=+a(b);null!=d.min&&(b=Math.max(d.min,b));null!=d.max&&(b=Math.min(d.max,b));return b}}function n(a,d){return null==d.get?function(){return this.__accessor__?
    this.__accessor__.getterStatic(a,d):d.value}:function(){return this.__accessor__?this.__accessor__.getterComputed(a,d):d.value}}Object.defineProperty(a,"__esModule",{value:!0});a.processPrototype=function(a){var b=a.declaredClass,c=a.properties||{},n;for(n in c){var f=c[n],g=typeof f;null==f?l.setPropertyMetadata(a,n,{value:f}):Array.isArray(f)?l.setPropertyMetadata(a,n,{type:[f[0]],value:null}):"object"===g?h.getProperties(f)||f instanceof Date?l.setPropertyMetadata(a,n,{type:f.constructor,value:f}):
    l.setPropertyMetadata(a,n,f):"boolean"===g?l.setPropertyMetadata(a,n,{type:Boolean,value:f}):"string"===g?l.setPropertyMetadata(a,n,{type:String,value:f}):"number"===g?l.setPropertyMetadata(a,n,{type:Number,value:f}):"function"===g&&l.setPropertyMetadata(a,n,{type:f,value:null})}a=l.getPropertiesMetadata(a);for(n in a){c=a[n];g=c.type;f=c.types;if(!c.cast)if(g){f=c;var t=0,u=g;if(m.isLongFormType(g))g=m.ensureLongFormType(g);else{for(;Array.isArray(u)&&1===u.length&&"string"!==typeof u[0]&&"number"!==
    typeof u[0];)u=u[0],t++;g=m.isOneOf(u)?0===t?m.ensureOneOf(u):m.ensureNArrayTyped(m.ensureOneOf(u),t):1===t?m.ensureArray(u):1<t?m.ensureNArray(u,t):m.ensureType(g)}f.cast=g}else f&&(Array.isArray(f)?c.cast=m.ensureArrayTyped(m.ensureOneOfType(f[0])):c.cast=m.ensureOneOfType(f));c.range&&(c.cast=d(c.cast,c.range))}e.processPrototypeMetadatas(a,b);return a};a.processClass=function(a){for(var b=a.prototype,d=b.declaredClass,c=a._meta.bases,f={},r=c.length-1;0<=r;r--)l.merge(f,l.getMetadata(c[r].prototype));
    var h=f.properties;e.processClassMetadatas(h,d);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:h,autoDestroy:!!f.autoDestroy}});for(var u={},d=function(a){var b=h[a];u[a]={enumerable:!0,configurable:!0,get:n(a,b),set:function(d){var c=this.__accessor__;if(!c)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:d});else if(!Object.isFrozen(this)){if(c.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+
    this.declaredClass);if(2===c.lifecycle&&b.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);c.set(a,d)}}}},c=0,r=Object.getOwnPropertyNames(h);c<r.length;c++)d(r[c]);Object.defineProperties(a.prototype,u);if(f.parameters)for(a=0,d=Object.getOwnPropertyNames(f.parameters);a<d.length;a++)c=d[a],r=Object.getOwnPropertyDescriptor(b,c)||{value:b[c]},(r=g.autocastMethod(b,c,r))&&Object.defineProperty(b,c,r);return f}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ReentrantObjectPool ../scheduling ./get ./utils ./wire".split(" "),
    function(c,a,m,e,l,h,g,d,n){function b(a){w.has(a)?v.splice(v.indexOf(a),1):w.add(a);v.push(a);x||(x=h.schedule(k))}function p(a){if(!a.removed){var b=a.callback,d=a.path,c=a.oldValue,f=a.target,k=g.valueOf(f,a.propertyPath,!0);e.equals(c,k)||(a.oldValue=k,b.call(f,k,c,d,f))}}function k(){for(var a=10;x&&a--;){x=null;var b=v;v=u.acquire();w.clear();for(var d=u.acquire(),c=0,f=b;c<f.length;c++){var e=f[c],k=e.uid;p(e);k===e.uid&&e.removed&&d.push(e)}for(c=0;c<v.length;c++)e=v[c],e.removed&&(d.push(e),
    w.delete(e),v.splice(c,1),--c);for(c=0;c<d.length;c++)t.pool.release(d[c]);u.release(b);u.release(d);z.forEach(function(a){return a()})}}function q(a,c,f){var e=d.parse(a,c,f,function(a,c,f){var k=g.valueOf(a,c,!0),p,q,r=n.wire(a,c,function(a,d){a.__accessor__.destroyed||p&&p.uid!==q?e.remove():(p||(p=t.pool.acquire(a,d,k,f),q=p.uid,k=null),b(p))});return{remove:d.once(function(){r.remove();p&&(p.uid!==q||p.removed||(p.removed=!0,b(p)),p=null);e=r=k=null})}});return e}function f(a,b,c){var f=d.parse(a,
    b,c,function(a,b,d){var c=g.valueOf(a,b,!0),k=!1;return n.wire(a,b,function(a,b){if(a.__accessor__.destroyed)f.remove();else if(!k){k=!0;var p=g.valueOf(a,b,!0);e.equals(c,p)||d.call(a,p,c,b,a);c=g.valueOf(a,b,!0);k=!1}})});return f}function r(a,b,d,c){void 0===c&&(c=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:c?f(a,b,d):q(a,b,d)}Object.defineProperty(a,"__esModule",{value:!0});var t=function(){function a(b,c,f,e){this.target=b;this.path=c;this.oldValue=f;this.callback=
    e;this.uid=0;this.removed=!1;this.propertyPath=d.pathToStringOrArray(c);this.uid=++a.uid}a.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.uid=++a.uid;this.removed=!0};a.pool=new l.ReentrantObjectPool(a,!0);a.uid=0;return a}(),u=new m,w=new Set,v=u.acquire(),x;a.dispatchTarget=function(a){for(var b=u.copy(v),d=0;d<b.length;d++){var c=b[d];c.target===a&&(p(c),w.delete(c),v.splice(v.indexOf(c),1))}};a.removeTarget=function(a){for(var b=0;b<
    v.length;b++){var d=v[b];d.target===a&&(d.removed=!0)}};a.dispatch=k;var z=new Set;a.afterDispatch=function(a){z.add(a);return{remove:function(){z.delete(a)}}};a.watch=r;a.isValueInUse=function(a){return v.some(function(b){return b.oldValue===a})};a.default=r})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(c,a,m){function e(a){a.length=0}var l=Array.prototype.splice;c=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new m(Array,!1,
    e,c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var d=this.acquire();a.unshift(0,0);l.apply(d,a);a.splice(0,2);return d};a.prototype.release=function(a){this._pool.release(a)};a.prototype.prune=function(){this._pool.prune(0)};a.acquire=function(){return h.acquire()};a.copy=function(a){return h.copy(a)};a.release=function(a){return h.release(a)};a.prune=function(){h.prune()};return a}();var h=new c(100);return c})},"esri/core/ReentrantObjectPool":function(){define(["require",
    "exports","./tsSupport/extendsHelper","./ObjectPool"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c._set=new Set;return c}m(c,a);c.prototype.destroy=function(){a.prototype.destroy.call(this);this._set=null};c.prototype.acquire=function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];c=a.prototype.acquire.apply(this,c);this._set.delete(c);return c};c.prototype.release=function(c){c&&!this._set.has(c)&&
    (a.prototype.release.call(this,c),this._set.add(c))};c.prototype._dispose=function(c){this._set.delete(c);a.prototype._dispose.call(this,c)};return c}(e);a.ReentrantObjectPool=c})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,c){a.__proto__=c}||function(a,c){for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e])};return function(a,m){function e(){this.constructor=a}c(a,m);a.prototype=null===m?
    Object.create(m):(e.prototype=m.prototype,new e)}}()})},"esri/core/scheduling":function(){define("require exports ./nextTick ./now ./PooledArray ./promiseUtils ./requestAnimationFrame".split(" "),function(c,a,m,e,l,h,g){function d(b){void 0===b&&(b=a.now());a.debug.rafId=null;0<z.length&&(a.debug.rafId=n());0<r&&(u=Math.min(b-r,u));a.debug.executeFrameTasks(b)}function n(){return a.debug.requestNextFrame?a.debug.requestNextFrame(k):k()}function b(){z.forEach(function(a){a.removed&&y.push(a)});z.removeUnorderedMany(y.data,
    y.length);y.clear()}function p(){for(;x.length;){var b=x.shift();b.isActive&&(b.isActive=!1,b.callback())}a.debug.willDispatch=!1}function k(){return g(d)}Object.defineProperty(a,"__esModule",{value:!0});a.now=e;var q=function(){return function(a){this.phases=a;this.paused=!1;this.ticks=-1;this.removed=!1}}(),f=function(){function a(a){this.callback=a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),r=-1,t=0,u=1E3,w={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},
    v=["prepare","preRender","render","postRender","update"],x=[],z=new l,A=function(){function a(a){this._task=a}a.prototype.remove=function(){this._task.removed=!0};a.prototype.pause=function(){this._task.paused=!0};a.prototype.resume=function(){this._task.paused=!1};return a}();a.FrameTaskHandle=A;a.debug={frameTasks:z,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);z.forEach(function(a){a.removed=!0});a&&b()},dispatch:p,executeFrameTasks:function(d){void 0===
    d&&(d=a.now());0>r&&(r=d);var c=d-r,f=0<t?t:u,e=Math.max(0,c-f);r=d;for(var k=function(b){var k=v[b];z.forEach(function(p){p.paused||p.removed||(0===b&&p.ticks++,p.phases[k]&&(w.time=d,w.deltaTime=0===p.ticks?0:c,w.elapsedFrameTime=a.now()-d,w.frameDuration=f-e,p.phases[k].call(p,w)))})},p=0;p<v.length;p++)k(p);b()}};a.schedule=function(b){b=new f(b);x.push(b);a.debug.willDispatch||(a.debug.willDispatch=!0,m(p));return b};a.addFrameTask=function(b){b=new q(b);z.push(b);a.debug.rafId||(r=-1,a.debug.rafId=
    n());return new A(b)};a.setFrameDuration=function(a){t=Math.max(0,a)};a.requestNextFrame=n;var y=new l;a.waitTicks=function(a,b){void 0===a&&(a=1);var d=h.createResolver(),c=function(){h.isAborted(b)?d.reject(h.createAbortError()):0===a?d():(--a,m(function(){return c()}))};c();return d.promise}})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(c,a,m){function e(){if(m.postMessage&&!m.importScripts){var a=m.onmessage,d=!0;m.onmessage=function(){d=!1};m.postMessage("",
    "*");m.onmessage=a;return d}return!1}function l(a){d.push(a);1===d.length&&g(function(){for(var a=0,b=n;a<b.length;a++)(0,b[a])();a=d.slice();for(b=d.length=0;b<a.length;b++)(0,a[b])()})}var h=m.MutationObserver||m.WebKitMutationObserver,g=function(){if(m.process&&m.process.nextTick)return function(a){m.process.nextTick(a)};if(m.Promise)return function(a){m.Promise.resolve().then(a)};if(h){var a=[],d=document.createElement("div");(new h(function(){for(;0<a.length;)a.shift()()})).observe(d,{attributes:!0});
    return function(b){a.push(b);d.setAttribute("queueStatus","1")}}if(e()){var c=[];m.addEventListener("message",function(a){if(a.source===m&&"esri-nexttick-message"===a.data)for(a.stopPropagation();c.length;)c.shift()()},!0);return function(a){c.push(a);m.postMessage("esri-nexttick-message","*")}}return m.setImmediate?function(a){return m.setImmediate(a)}:function(a){return m.setTimeout(a,0)}}(),d=[],n=[];(function(a){a.before=function(a){n.push(a);return{remove:function(){n=n.filter(function(b){return b!==
    a})}}}})(l||(l={}));return l})},"esri/core/now":function(){define(["require","exports","./global"],function(c,a,m){return function(){var a=m.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var c;c=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-
    c}}()})},"esri/core/PooledArray":function(){define(["require","exports","./tsSupport/generatorHelper","./arrayUtils","./HeapSort"],function(c,a,m,e,l){return function(){function a(a){var d=this;this.data=[];this._length=0;this._allocator=null;this._deallocator=function(){};this._shrink=function(){};this._hint=new e.PositionHint;a&&(a.initialSize&&(this.data=Array(a.initialSize)),a.allocator?(this._allocator=a.allocator,this._deallocator=a.deallocator):"deallocator"in a&&(this._deallocator=a.deallocator),
    a.shrink&&(this._shrink=function(){d.data.length>1.5*d.length&&(d.data.length=Math.floor(1.1*d.length))}))}a.prototype.toArray=function(){return this.data.slice(0,this.length)};a.prototype.getItemAt=function(a){if(!(0>a||a>=this._length))return this.data[a]};Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(a){if(a>this._length)if(this._allocator)for(;this._length<a;)this.data[this._length++]=this._allocator(this.data[this._length]);else this._length=a;else{if(this._deallocator)for(var d=
    a;d<this._length;++d)this.data[d]=this._deallocator(this.data[d]);this._length=a;this._shrink()}},enumerable:!0,configurable:!0});a.prototype.clear=function(){this.length=0};a.prototype.prune=function(){this.clear();this.data=[]};a.prototype.equal=function(a){return e.equals(this.data,a.data)};a.prototype.push=function(a){return this.data[this._length++]=a};a.prototype.pushArray=function(a,d){void 0===d&&(d=a.length);for(var c=0;c<d;c++)this.data[this._length++]=a[c];return this.back()};a.prototype.pushNew=
    function(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));++this._length;return this.back()};a.prototype.pop=function(){if(0!==this.length){var a=this.data[this.length-1];--this.length;this._shrink();return a}};a.prototype.iterableRemoveMany=function(a){var d,c;return m(this,function(b){switch(b.label){case 0:d=[],c=0,b.label=1;case 1:if(!(c<this.length)||c>=this.length)return[3,4];0>e.indexOf(a.data,this.data[c],a.length,a._hint)&&d.push(this.data[c]);return[4];
    case 2:b.sent(),b.label=3;case 3:return++c,[3,1];case 4:return this.data=d,this._length=this.data.length,[2]}})};a.prototype.remove=function(a){var d=e.indexOf(this.data,a,this.length,this._hint);if(-1!==d)return this.data.splice(d,1),--this.length,a};a.prototype.removeUnordered=function(a){a=e.removeUnordered(this.data,a,this.length,this._hint);void 0!==a&&--this.length;return a};a.prototype.removeUnorderedIndex=function(a){if(!(a>=this.length||0>a))return this.swapElements(a,this.length-1),this.pop()};
    a.prototype.removeUnorderedMany=function(a,d,c){void 0===d&&(d=a.length);this.length=e.removeUnorderedMany(this.data,a,this.length,d,this._hint,c)};a.prototype.front=function(){if(0!==this.length)return this.data[0]};a.prototype.back=function(){if(0!==this.length)return this.data[this.length-1]};a.prototype.swapElements=function(a,d){var c;a>=this.length||d>=this.length||a===d||(c=[this.data[d],this.data[a]],this.data[a]=c[0],this.data[d]=c[1])};a.prototype.sort=function(a){l.sort(this.data,0,this.length,
    a)};a.prototype.iterableSort=function(a){return l.iterableSort(this.data,0,this.length,a)};a.prototype.some=function(a,d){for(var c=0;c<this.length;++c)if(a.call(d,this.data[c],c,this.data))return!0;return!1};a.prototype.filterInPlace=function(a,d){for(var c=0,b=0;b<this._length;++b){var e=this.data[b];a.call(d,e,b,this.data)&&(this.data[b]=this.data[c],this.data[c]=e,c++)}if(this._deallocator)for(b=c;b<this._length;b++)this.data[b]=this._deallocator(this.data[b]);this._length=c;return this};a.prototype.forEach=
    function(a,d){for(var c=this.length,b=0;b<Math.min(this.length,c);++b)a.call(d,this.data[b],b,this.data)};a.prototype.iterableForEach=function(){var a;return m(this,function(d){switch(d.label){case 0:a=0,d.label=1;case 1:return a<this.length?[4,this.data[a]]:[3,4];case 2:d.sent(),d.label=3;case 3:return++a,[3,1];case 4:return[2]}})};a.prototype.map=function(a,d){for(var c=Array(this.length),b=0;b<this.length;++b)c[b]=a.call(d,this.data[b],b,this.data);return c};return a}()})},"esri/core/tsSupport/generatorHelper":function(){define([],
    function(){return function(c,a){function m(a){return function(b){return e([a,b])}}function e(b){if(h)throw new TypeError("Generator is already executing.");for(;l;)try{if(h=1,g&&(d=b[0]&2?g["return"]:b[0]?g["throw"]||((d=g["return"])&&d.call(g),0):g.next)&&!(d=d.call(g,b[1])).done)return d;if(g=0,d)b=[b[0]&2,d.value];switch(b[0]){case 0:case 1:d=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++;g=b[1];b=[0];continue;case 7:b=l.ops.pop();l.trys.pop();continue;default:if(!(d=l.trys,
    d=0<d.length&&d[d.length-1])&&(6===b[0]||2===b[0])){l=0;continue}if(3===b[0]&&(!d||b[1]>d[0]&&b[1]<d[3]))l.label=b[1];else if(6===b[0]&&l.label<d[1])l.label=d[1],d=b;else if(d&&l.label<d[2])l.label=d[2],l.ops.push(b);else{d[2]&&l.ops.pop();l.trys.pop();continue}}b=a.call(c,l)}catch(p){b=[6,p],g=0}finally{h=d=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}var l={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},h,g,d,n;return n={next:m(0),"throw":m(1),"return":m(2)},
    "function"===typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n}})},"esri/core/HeapSort":function(){define(["require","exports","./tsSupport/generatorHelper"],function(c,a,m){var e;(function(a){function c(a,c,b,e){for(var d=c,p=b>>>1,f=a[d-1];c<=p;){c=d<<1;c<b&&0>e(a[c-1],a[c])&&++c;var n=a[c-1];if(0>=e(n,f))break;a[d-1]=n;d=c}a[d-1]=f}function e(a,c){return a<c?-1:a>c?1:0}a.sort=function(a,n,b,p){void 0===n&&(n=0);void 0===b&&(b=a.length);void 0===p&&(p=e);for(var d=b>>>1;d>n;d--)c(a,
    d,b,p);for(var q=n+1,d=b-1;d>n;d--)b=a[n],a[n]=a[d],a[d]=b,c(a,q,d,p)};a.iterableSort=function(a,n,b,p){var d,q,f;return m(this,function(k){switch(k.label){case 0:void 0===n&&(n=0),void 0===b&&(b=a.length),void 0===p&&(p=e),d=b>>>1,k.label=1;case 1:if(!(d>n))return[3,4];c(a,d,b,p);return[4];case 2:k.sent(),k.label=3;case 3:return d--,[3,1];case 4:q=n+1,d=b-1,k.label=5;case 5:if(!(d>n))return[3,8];f=a[n];a[n]=a[d];a[d]=f;c(a,q,d,p);return[4];case 6:k.sent(),k.label=7;case 7:return d--,[3,5];case 8:return[2]}})}})(e||
    (e={}));return e})},"esri/core/promiseUtils":function(){define("require exports @dojo/framework/shim/AbortController dojo/Deferred dojo/promise/all ./Error ./events ./maybe ./has ./clock @dojo/framework/shim/Promise".split(" "),function(c,a,m,e,l,h,g,d,n,b){function p(a){return n("esri-native-promise")?Promise.all(a):l(a)}function k(a,b){if(n("esri-native-promise"))return new Promise(a);var d=new e(b);try{a(function(a){return D(a).then(d.resolve)},d.reject)}catch(I){d.reject(I)}return d.promise}function q(a){void 0===
    a&&(a="Aborted");a=new h("AbortError",a);a.dojoType="cancel";return a}function f(){return new m.default}function r(a){if(u(a))throw q();}function t(a){return d.isSome(a)?"aborted"in a?a:a.signal:a}function u(a){a=t(a);return d.isSome(a)&&a.aborted}function w(a,b){a=t(a);if(!d.isNone(a))if(a.aborted)b(q());else return g.once(a,"abort",function(){return b(q())})}function v(a){return a&&("AbortError"===a.name||"cancel"===a.dojoType)}function x(a){var b=null;a=k(function(a,d){b={resolve:a,reject:d}},
    a);b.promise=a;b.cancel=function(){b.reject(q())};return b}function z(a){if(a){if("function"!==typeof a.forEach){var b=Object.keys(a),d=b.map(function(b){return a[b]});return z(d).then(function(a){var d={};b.forEach(function(b,c){return d[b]=a[c]});return d})}var c=null,f=y;return k(function(b,d){var e=[],k=a.length;0===k&&b(e);a.forEach(function(a){var p={promise:a||f(a)};e.push(p);p.promise.then(function(a){p.value=a}).catch(function(a){p.error=a}).then(function(){--k;0===k&&(c?d(q()):b(e))})})},
    function(b){c=b||"Invocation cancellation";a.forEach(function(a){"cancel"in a&&a.cancel(b)})})}}function A(a){if(n("esri-native-promise"))return Promise.reject(a);var b=new e;b.reject(a);return b.promise}function y(a){void 0===a&&(a=void 0);if(n("esri-native-promise"))return Promise.resolve(a);var b=new e;b.resolve(a);return b.promise}function B(a,b,d){void 0===b&&(b=void 0);var c=f();w(d,function(){return c.abort()});return k(function(d){var f=setTimeout(function(){f=0;d(b)},a);w(c,function(){f&&
    (clearTimeout(f),A(q()))})},function(){return c.abort()})}function D(a){return a&&"object"===typeof a&&"then"in a&&"function"===typeof a.then?a:y(a)}Object.defineProperty(a,"__esModule",{value:!0});n.add("esri-native-promise",!1);a.all=p;a.filter=function(a,b){var d=a.slice();return p(a.map(function(a,d){return b(a,d)})).then(function(a){return d.filter(function(b,d){return a[d]})})};a.create=k;a.createAbortError=q;a.createAbortController=f;a.throwIfAborted=r;a.isAborted=u;a.throwIfAbortError=function(a){if(v(a))throw a;
    };a.onAbort=w;a.onAbortOrThrow=function(a,b){a=t(a);if(!d.isNone(a))return r(a),g.once(a,"abort",function(){return b(q())})};a.isAbortError=v;a.createDeferred=x;a.eachAlways=z;a.eachAlwaysValues=function(a){return z(a).then(function(a){return a.filter(function(a){return!!a.value}).map(function(a){return a.value})})};a.first=function(a){return a&&a.length?k(function(b,d){for(var c=0;c<a.length;c++)a[c].then(b,d)}):y()};a.reject=A;a.resolve=y;a.after=B;a.timeout=function(a,b,d,c){var f=d&&"abort"in
    d?d:null;null!=c||f||(c=d);var e=setTimeout(function(){e=0;f&&f.abort()},b),k=function(){throw c||new h("promiseUtils:timeout","The wrapped promise did not resolve within "+b+" ms");};return a.then(function(a){if(0===e)throw k();clearTimeout(e);return a},function(a){clearTimeout(e);throw 0===e?k():a;})};a.wrapCallback=function(a){var b=!1;return k(function(){a(function(a){b||y(a)})},function(){return b=!0})};a.isPromiseLike=function(a){return a&&"function"===typeof a.then};a.when=D;a.debounce=function(a,
    b){void 0===b&&(b=-1);var d,c,e,k,p=null,n=function(){for(var g=[],r=0;r<arguments.length;r++)g[r]=arguments[r];if(d)return c=g,k&&k.reject(q()),k=x(),g=k.promise,p&&(r=p,p=null,r.abort()),g;e=k||x();k=null;if(0<b){var h=f(),u=d=D(a.apply(void 0,g.concat([h.signal])));B(b).then(function(){d===u&&(k?h.abort():p=h)})}else d=1,d=D(a.apply(void 0,g));var g=function(){var a=c;c=e=d=p=null;null!=a&&n.apply(void 0,a)},r=d,l=e;r.then(g,g);r.then(l.resolve,l.reject);return l.promise};return n};a.createResolver=
    function(a){var d,c;a=k(function(a,b){d=a;c=b},a);var f=function(a){d(a)};f.resolve=function(a){return d(a)};f.reject=function(a){return c(a)};f.timeout=function(a,d){return b.default.setTimeout(function(){return f.reject(d)},a)};f.promise=a;return f};a.always=function(a,b){return a.then(b,b)}})},"@dojo/framework/shim/AbortController":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&
    define.amd&&define(["require","exports","./global","../has/has","./array"],c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=c("./global"),e=c("../has/has"),l=c("./array");a.ShimAbortSignal=m.default.AbortSignal;e.default("abort-signal")||(m.default.AbortSignal=a.ShimAbortSignal=function(){function a(){this._aborted=!1;this.listeners={}}Object.defineProperty(a.prototype,"aborted",{get:function(){return this._aborted},enumerable:!0,configurable:!0});a.prototype.addEventListener=
    function(a,d){a in this.listeners||(this.listeners[a]=[]);this.listeners[a].push(d)};a.prototype.removeEventListener=function(a,d){if(a in this.listeners){var c=l.findIndex(this.listeners[a],function(a){return a===d});0<=c&&this.listeners[a].splice(c,1)}};a.prototype.dispatchEvent=function(a){var d=this,c=a.type;"abort"===c&&(this._aborted=!0,"function"===typeof this.onabort&&this.onabort.call(this,a));if(!(c in this.listeners))return!1;this.listeners[c].forEach(function(b){setTimeout(function(){return b.call(d,
    a)},0)});return!a.preventDefault};return a}());a.ShimAbortController=m.default.AbortController;e.default("abort-controller")||(m.default.AbortController=a.ShimAbortController=function(){function c(){this.signal=new a.ShimAbortSignal}c.prototype.abort=function(){var a;try{a=new Event("abort")}catch(d){"undefined"!==typeof document?(a=document.createEvent("Event"),a.initEvent("abort",!1,!1)):a={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(a)};return c}());a.default=a.ShimAbortController})},
    "dojo/promise/all":function(){define(["../_base/array","../_base/lang","../Deferred","../when"],function(c,a,m,e){var l=c.some;return function(c){var g,d;a.isArray(c)?d=c:c&&"object"===typeof c&&(g=c);var n,b=[];if(g){d=[];for(var p in g)Object.hasOwnProperty.call(g,p)&&(b.push(p),d.push(g[p]));n={}}else d&&(n=[]);if(!d||!d.length)return(new m).resolve(n);var k=new m;k.promise.always(function(){n=b=null});var q=d.length;l(d,function(a,d){g||b.push(d);e(a,function(a){k.isFulfilled()||(n[b[d]]=a,0===
    --q&&k.resolve(n))},k.reject);return k.isFulfilled()});return k.promise}})},"esri/core/Error":function(){define("require exports ./tsSupport/extendsHelper ./lang ./Logger ./Message".split(" "),function(c,a,m,e,l,h){c=function(a){function d(c,b,e){var k=a.call(this,c,b,e)||this;return k instanceof d?k:new d(c,b,e)}m(d,a);d.prototype.toJSON=function(){if(null!=this.details)try{var a=e.clone(this.details);return{name:this.name,message:this.message,details:a,dojoType:this.dojoType}}catch(b){throw l.getLogger("esri.core.Error").error(b),
    b;}return{name:this.name,message:this.message,details:this.details,dojoType:this.dojoType}};d.fromJSON=function(a){var b=new d(a.name,a.message,a.details);null!=a.dojoType&&(b.dojoType=a.dojoType);return b};return d}(h);c.prototype.type="error";return c})},"esri/core/Message":function(){define(["require","exports","./object"],function(c,a,m){function e(a,c){return a.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(a,d){if(""===d)return"$";a=m.getDeepValue(d,c);a=null==a?"":a;if("undefined"===
    typeof a)throw Error('could not find key "'+d+'" in template');return a.toString()})}return function(){function a(c,g,d){this instanceof a&&(this.name=c,this.message=g&&e(g,d)||"",this.details=d)}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"esri/core/events":function(){define(["require","exports"],function(c,a){function m(a){return a&&("function"===typeof a.on||"function"===typeof a.addEventListener)}function e(a,c,e){if(!m(a))throw new TypeError("target is not a Evented or EventTarget object");
    if("on"in a)return a.on(c,e);if(Array.isArray(c)){for(var d=c.slice(),n=0;n<d.length;n++)a.addEventListener(d[n],e);return{remove:function(){for(var b=0;b<d.length;b++)a.removeEventListener(d[b],e)}}}a.addEventListener(c,e);return{remove:function(){a.removeEventListener(c,e)}}}Object.defineProperty(a,"__esModule",{value:!0});a.isEventTarget=m;a.on=e;a.once=function(a,c,g){if(!m(a))throw new TypeError("target is not a Evented or EventTarget object");if("once"in a)return a.once(c,g);var d=e(a,c,function(c){d.remove();
    g.call(a,c)});return{remove:function(){d.remove()}}};a.pausable=function(a,c,g){var d=!1,n=e(a,c,function(b){d||g.call(a,b)});return{resume:function(){d=!1},pause:function(){d=!0},remove:function(){n.remove()}}};a.ieKeyNormalizationMap={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};a.eventKey=function(c){c=c.key;return a.ieKeyNormalizationMap[c]||
    c}})},"esri/core/clock":function(){define(["require","exports","./global"],function(c,a,m){function e(a){return{setTimeout:function(c,e){var d=a.setTimeout(c,e);return{remove:function(){return a.clearTimeout(d)}}}}}Object.defineProperty(a,"__esModule",{value:!0});a.wrap=e;a.default=e(m)})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(c,a,m,e){var l=e();c=m.requestAnimationFrame;if(!c){a=["ms","moz","webkit","o"];for(var h=0;h<a.length&&!c;++h)c=
    m[a[h]+"RequestAnimationFrame"];c||(c=function(a){var d=e(),c=Math.max(0,16-(d-l)),b=m.setTimeout(function(){a(e())},c);l=d+c;return b})}return c})},"esri/core/accessorSupport/testSupport":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.interceptor=null})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),function(c,a,m,e,l,h){function g(a,
    b,c){void 0===c&&(c=d);if(b&&"object"===typeof b){for(var k=l.getProperties(a),p=k.metadatas,f={},n=0,g=Object.getOwnPropertyNames(b);n<g.length;n++){var u=f,w=p,v=g[n],m=b,z=c,A=h.originSpecificReadPropertyDefinition(w[v],z);A&&(!A.read||!1!==A.read.enabled&&!A.read.source)&&(u[v]=!0);for(var y=0,B=Object.getOwnPropertyNames(w);y<B.length;y++){var D=B[y],A=h.originSpecificReadPropertyDefinition(w[D],z),E;a:{E=v;var C=m;if(A&&A.read&&!1!==A.read.enabled&&A.read.source)if(A=A.read.source,"string"===
    typeof A){if(A===E||-1<A.indexOf(".")&&0===A.indexOf(E)&&e.exists(A,C)){E=!0;break a}}else for(var F=0;F<A.length;F++){var I=A[F];if(I===E||-1<I.indexOf(".")&&0===I.indexOf(E)&&e.exists(I,C)){E=!0;break a}}E=!1}E&&(u[D]=!0)}}k.setDefaultOrigin(c.origin);g=0;for(u=Object.getOwnPropertyNames(f);g<u.length;g++)n=u[g],v=(w=h.originSpecificReadPropertyDefinition(p[n],c).read)&&w.source,m=void 0,m=v&&"string"===typeof v?e.valueOf(b,v):b[n],w&&w.reader&&(m=w.reader.call(a,m,b,c)),void 0!==m&&k.set(n,m);
    if(!c||!c.ignoreDefaults)for(b=0,p=Object.getOwnPropertyNames(p);b<p.length;b++)n=p[b],f[n]||(g=a,u=k,w=c,v=(v=h.originSpecificPropertyDefinition(u.metadatas[n],"any",w))&&v.default,void 0!==v&&(g="function"===typeof v?v.call(g,n,w):v,void 0!==g&&u.set(n,g)));k.setDefaultOrigin("user")}}Object.defineProperty(a,"__esModule",{value:!0});var d={origin:"service"};a.read=g;a.readLoadable=function(a,b,c,e){void 0===e&&(e=d);b=m({},e,{messages:[]});c(b);b.messages.forEach(function(b){"warning"!==b.type||
    a.loaded?e&&e.messages.push(b):a.loadWarnings.push(b)})};a.default=g})},"esri/core/accessorSupport/write":function(){define("require exports ../arrayUtils ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(c,a,m,e,l,h,g,d){function n(a,b,d,c,n,g){if(!c||!c.write)return!1;var f=a.get(d);if(!n&&c.write.overridePolicy){var k=c.write.overridePolicy.call(a,f,d,g);void 0!==k&&(n=k)}n||(n=c.write);if(!n||!1===n.enabled)return!1;if((null===f&&!n.allowNull||
    void 0===f)&&n.isRequired)return(b=new e("web-document-write:property-required","Missing value for required property '"+d+"' on '"+a.declaredClass+"'",{propertyName:d,target:a}),g)&&g.messages?g.messages.push(b):b&&!g&&p.error(b.name,b.message),!1;if(void 0===f||null===f&&!n.allowNull)return!1;k=c.default;void 0===k?f=!1:"function"===typeof k?Array.isArray(f)?(a=k.call(a,d,g),f=m.equals(a,f)):f=!1:f=k===f;return f?!1:void 0!==c.default?!0:!n.ignoreOrigin&&g&&g.origin&&b.store.originOf(d)<h.nameToId(g.origin)?
    !1:!0}function b(a,b,c){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return g.merge(b,a.toJSON());var e=g.getProperties(a),f=e.metadatas,k;for(k in f){var p=d.originSpecificWritePropertyDefinition(f[k],c);if(n(a,e,k,p,null,c)){var q=a.get(k),l={};p.write.writer.call(a,q,l,"string"===typeof p.write.target?p.write.target:k,c);p=l;0<Object.keys(p).length&&(b=g.merge(b,p),c&&c.writtenProperties&&c.writtenProperties.push({target:a,propName:k,oldOrigin:h.idToReadableName(e.store.originOf(k)),
    newOrigin:c.origin}))}}return b}Object.defineProperty(a,"__esModule",{value:!0});var p=l.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,b,c,e){var f=g.getProperties(a),k=d.originSpecificWritePropertyDefinition(f.metadatas[b],e);return k?n(a,f,b,k,c,e):!1};a.write=b;a.default=b})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n){c=function(a){function b(b){b=a.call(this,b)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;b.imageCoordinateSystem=null;return b}e(b,a);c=b;b.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return c.WebMercator;if(4326===a.wkid)return c.WGS84}var b=new c;b.read(a);return b};b.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(b.prototype,"isWGS84",{get:function(){return n.isWGS84(this)},
    enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWebMercator",{get:function(){return n.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isGeographic",{get:function(){return n.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWrappable",{get:function(){return n.isWrappable(this)},enumerable:!0,configurable:!0});b.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};b.prototype.clone=function(){if(this===
    c.WGS84)return c.WGS84;if(this===c.WebMercator)return c.WebMercator;var a=new c;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);this.imageCoordinateSystem&&(a.imageCoordinateSystem=g.clone(this.imageCoordinateSystem));return a};b.prototype.equals=function(a){if(null==a)return!1;if(this.imageCoordinateSystem||a.imageCoordinateSystem){if(null==
    this.imageCoordinateSystem||null==a.imageCoordinateSystem)return!1;var b=a.imageCoordinateSystem,d=b.id,b=b.referenceServiceName,c=a.imageCoordinateSystem.geodataXform,e=this.imageCoordinateSystem;return null==d||c?JSON.stringify(e)===JSON.stringify(a.imageCoordinateSystem):b?e.id===d&&e.referenceServiceName===b:e.id===d}return n.equals(this,a)};b.prototype.toJSON=function(a){return this.write(null,a)};var c;b.GCS_NAD_1927=null;b.WGS84=null;b.WebMercator=null;l([d.property({dependsOn:["wkid"],readOnly:!0})],
    b.prototype,"isWGS84",null);l([d.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWebMercator",null);l([d.property({dependsOn:["wkid","wkt"],readOnly:!0})],b.prototype,"isGeographic",null);l([d.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWrappable",null);l([d.property({type:Number,json:{write:!0}})],b.prototype,"latestWkid",void 0);l([d.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],
    b.prototype,"wkid",void 0);l([d.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],b.prototype,"wkt",void 0);l([d.writer("wkt"),d.writer("web-scene","wkt")],b.prototype,"writeWkt",null);l([d.property({type:Number,json:{write:!0}})],b.prototype,"vcsWkid",void 0);l([d.property({type:Number,json:{write:!0}})],b.prototype,"latestVcsWkid",void 0);l([d.property()],b.prototype,"imageCoordinateSystem",void 0);return b=c=l([d.subclass("esri.geometry.SpatialReference")],
    b)}(d.declared(h.JSONSupport));c.prototype.toJSON.isDefaultToJSON=!0;c.GCS_NAD_1927=new c({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});c.WGS84=new c(n.WGS84);c.WebMercator=new c(n.WebMercator);Object.freeze&&(Object.freeze(c.GCS_NAD_1927),Object.freeze(c.WGS84),Object.freeze(c.WebMercator));return c})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require",
    "exports","../../core/string","./WKIDUnitConversion"],function(c,a,m,e){function l(a){return g(a)&&a.wkid?p[a.wkid]:null}function h(a){return g(a)&&!0===d[a.wkid]}function g(a){return null!=a&&(null!=a.wkid&&2E3<=a.wkid||null!=a.wkt)}Object.defineProperty(a,"__esModule",{value:!0});var d={102113:!0,102100:!0,3857:!0,3785:!0},n={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};c=[-2.0037508342788905E7,2.0037508342788905E7];var b=[-2.0037508342787E7,2.0037508342787E7],p={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
    valid:c,origin:b,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:c,origin:b,
    dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:b,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
    valid:c,origin:b,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
    valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,b){return a&&b?a===b?!0:null!=a.wkid||null!=b.wkid?a.wkid===b.wkid||h(a)&&h(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid:a.wkt&&b.wkt?a.wkt.toUpperCase()===b.wkt.toUpperCase():!1:!1};a.getInfo=l;a.isGeographic=function(a){return g(a)?a.wkid?null==e[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1:!1};a.isWGS84=function(a){return g(a)&&4326===a.wkid};a.isWebMercator=h;a.isWrappable=function(a){return g(a)&&
    !0===n[a.wkid]};a.isValid=g;a.WGS84={wkid:4326,wkt:m.replace(l({wkid:4326}).wkTemplate,{Central_Meridian:"0.0"})};a.WebMercator={wkid:102100,latestWkid:3857}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var c,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
    2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
    3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
    3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
    3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
    5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
    6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
    6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
    6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
    6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
    7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
    7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,
    8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,
    8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,
    8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,
    24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,
    32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,
    103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,
    103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,
    103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,
    103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(c=2E3;2045>=c;c++)a[c]=0;for(c=2056;2065>=c;c++)a[c]=0;for(c=2067;2135>=c;c++)a[c]=0;for(c=2137;2154>=c;c++)a[c]=0;for(c=2161;2170>=c;c++)a[c]=0;for(c=2172;2193>=c;c++)a[c]=
    0;for(c=2195;2198>=c;c++)a[c]=0;for(c=2200;2203>=c;c++)a[c]=0;for(c=2205;2217>=c;c++)a[c]=0;for(c=2222;2224>=c;c++)a[c]=1;for(c=2225;2250>=c;c++)a[c]=2;for(c=2251;2253>=c;c++)a[c]=1;for(c=2257;2264>=c;c++)a[c]=2;for(c=2274;2279>=c;c++)a[c]=2;for(c=2280;2282>=c;c++)a[c]=1;for(c=2283;2289>=c;c++)a[c]=2;for(c=2290;2292>=c;c++)a[c]=0;for(c=2308;2313>=c;c++)a[c]=0;for(c=2315;2491>=c;c++)a[c]=0;for(c=2494;2866>=c;c++)a[c]=0;for(c=2867;2869>=c;c++)a[c]=1;for(c=2870;2888>=c;c++)a[c]=2;for(c=2891;2895>=c;c++)a[c]=
    2;for(c=2896;2898>=c;c++)a[c]=1;for(c=2902;2908>=c;c++)a[c]=2;for(c=2915;2920>=c;c++)a[c]=2;for(c=2921;2923>=c;c++)a[c]=1;for(c=2924;2930>=c;c++)a[c]=2;for(c=2931;2962>=c;c++)a[c]=0;for(c=2964;2968>=c;c++)a[c]=2;for(c=2969;2973>=c;c++)a[c]=0;for(c=2975;2991>=c;c++)a[c]=0;for(c=2995;3051>=c;c++)a[c]=0;for(c=3054;3079>=c;c++)a[c]=0;for(c=3081;3088>=c;c++)a[c]=0;for(c=3092;3101>=c;c++)a[c]=0;for(c=3106;3138>=c;c++)a[c]=0;for(c=3146;3151>=c;c++)a[c]=0;for(c=3153;3166>=c;c++)a[c]=0;for(c=3168;3172>=c;c++)a[c]=
    0;for(c=3174;3203>=c;c++)a[c]=0;for(c=3294;3358>=c;c++)a[c]=0;for(c=3367;3403>=c;c++)a[c]=0;for(c=3408;3416>=c;c++)a[c]=0;for(c=3417;3438>=c;c++)a[c]=2;for(c=3441;3446>=c;c++)a[c]=2;for(c=3447;3450>=c;c++)a[c]=0;for(c=3451;3459>=c;c++)a[c]=2;for(c=3460;3478>=c;c++)a[c]=0;for(c=3554;3559>=c;c++)a[c]=0;for(c=3560;3570>=c;c++)a[c]=2;for(c=3571;3581>=c;c++)a[c]=0;for(c=3594;3597>=c;c++)a[c]=0;for(c=3601;3604>=c;c++)a[c]=0;for(c=3637;3639>=c;c++)a[c]=0;for(c=3665;3667>=c;c++)a[c]=0;for(c=3693;3695>=c;c++)a[c]=
    0;for(c=3701;3727>=c;c++)a[c]=0;for(c=3728;3739>=c;c++)a[c]=2;for(c=3740;3751>=c;c++)a[c]=0;for(c=3753;3760>=c;c++)a[c]=2;for(c=3761;3773>=c;c++)a[c]=0;for(c=3775;3777>=c;c++)a[c]=0;for(c=3779;3781>=c;c++)a[c]=0;for(c=3783;3785>=c;c++)a[c]=0;for(c=3788;3791>=c;c++)a[c]=0;for(c=3797;3802>=c;c++)a[c]=0;for(c=3814;3816>=c;c++)a[c]=0;for(c=3825;3829>=c;c++)a[c]=0;for(c=3832;3841>=c;c++)a[c]=0;for(c=3844;3852>=c;c++)a[c]=0;for(c=3873;3885>=c;c++)a[c]=0;for(c=3890;3893>=c;c++)a[c]=0;for(c=3907;3912>=c;c++)a[c]=
    0;for(c=3942;3950>=c;c++)a[c]=0;for(c=3968;3970>=c;c++)a[c]=0;for(c=3973;3976>=c;c++)a[c]=0;for(c=3986;3989>=c;c++)a[c]=0;for(c=3994;3997>=c;c++)a[c]=0;for(c=4048;4051>=c;c++)a[c]=0;for(c=4056;4063>=c;c++)a[c]=0;for(c=4093;4096>=c;c++)a[c]=0;for(c=4390;4398>=c;c++)a[c]=0;for(c=4399;4413>=c;c++)a[c]=2;for(c=4418;4433>=c;c++)a[c]=2;for(c=4455;4457>=c;c++)a[c]=2;for(c=4484;4489>=c;c++)a[c]=0;for(c=4491;4554>=c;c++)a[c]=0;for(c=4568;4589>=c;c++)a[c]=0;for(c=4652;4656>=c;c++)a[c]=0;for(c=4766;4800>=c;c++)a[c]=
    0;for(c=5014;5016>=c;c++)a[c]=0;for(c=5069;5072>=c;c++)a[c]=0;for(c=5105;5130>=c;c++)a[c]=0;for(c=5173;5188>=c;c++)a[c]=0;for(c=5253;5259>=c;c++)a[c]=0;for(c=5269;5275>=c;c++)a[c]=0;for(c=5292;5311>=c;c++)a[c]=0;for(c=5329;5331>=c;c++)a[c]=0;for(c=5343;5349>=c;c++)a[c]=0;for(c=5355;5357>=c;c++)a[c]=0;for(c=5387;5389>=c;c++)a[c]=0;for(c=5459;5463>=c;c++)a[c]=0;for(c=5479;5482>=c;c++)a[c]=0;for(c=5518;5520>=c;c++)a[c]=0;for(c=5530;5539>=c;c++)a[c]=0;for(c=5550;5552>=c;c++)a[c]=0;for(c=5562;5583>=c;c++)a[c]=
    0;for(c=5623;5625>=c;c++)a[c]=2;for(c=5631;5639>=c;c++)a[c]=0;for(c=5649;5653>=c;c++)a[c]=0;for(c=5663;5680>=c;c++)a[c]=0;for(c=5682;5685>=c;c++)a[c]=0;for(c=5875;5877>=c;c++)a[c]=0;for(c=5896;5899>=c;c++)a[c]=0;for(c=5921;5940>=c;c++)a[c]=0;for(c=6050;6125>=c;c++)a[c]=0;for(c=6244;6275>=c;c++)a[c]=0;for(c=6328;6348>=c;c++)a[c]=0;for(c=6350;6356>=c;c++)a[c]=0;for(c=6366;6372>=c;c++)a[c]=0;for(c=6381;6387>=c;c++)a[c]=0;for(c=6393;6404>=c;c++)a[c]=0;for(c=6480;6483>=c;c++)a[c]=0;for(c=6511;6514>=c;c++)a[c]=
    0;for(c=6579;6581>=c;c++)a[c]=0;for(c=6619;6624>=c;c++)a[c]=0;for(c=6625;6627>=c;c++)a[c]=2;for(c=6628;6632>=c;c++)a[c]=0;for(c=6634;6637>=c;c++)a[c]=0;for(c=6669;6692>=c;c++)a[c]=0;for(c=6707;6709>=c;c++)a[c]=0;for(c=6720;6723>=c;c++)a[c]=0;for(c=6732;6738>=c;c++)a[c]=0;for(c=6931;6933>=c;c++)a[c]=0;for(c=6956;6959>=c;c++)a[c]=0;for(c=7005;7007>=c;c++)a[c]=0;for(c=7057;7070>=c;c++)a[c]=2;for(c=7074;7082>=c;c++)a[c]=0;for(c=7109;7118>=c;c++)a[c]=0;for(c=7119;7127>=c;c++)a[c]=1;for(c=7374;7376>=c;c++)a[c]=
    0;for(c=7528;7586>=c;c++)a[c]=0;for(c=7587;7645>=c;c++)a[c]=2;for(c=7692;7696>=c;c++)a[c]=0;for(c=7755;7787>=c;c++)a[c]=0;for(c=7791;7795>=c;c++)a[c]=0;for(c=7799;7801>=c;c++)a[c]=0;for(c=7803;7805>=c;c++)a[c]=0;for(c=7825;7831>=c;c++)a[c]=0;for(c=7845;7859>=c;c++)a[c]=0;for(c=8013;8032>=c;c++)a[c]=0;for(c=8065;8068>=c;c++)a[c]=1;for(c=8518;8529>=c;c++)a[c]=2;for(c=8533;8536>=c;c++)a[c]=2;for(c=8538;8540>=c;c++)a[c]=2;for(c=8677;8679>=c;c++)a[c]=0;for(c=8836;8840>=c;c++)a[c]=0;for(c=8857;8859>=c;c++)a[c]=
    0;for(c=8908;8910>=c;c++)a[c]=0;for(c=9154;9159>=c;c++)a[c]=0;for(c=9205;9218>=c;c++)a[c]=0;for(c=20002;20032>=c;c++)a[c]=0;for(c=20062;20092>=c;c++)a[c]=0;for(c=20135;20138>=c;c++)a[c]=0;for(c=20248;20258>=c;c++)a[c]=0;for(c=20348;20358>=c;c++)a[c]=0;for(c=20436;20440>=c;c++)a[c]=0;for(c=20822;20824>=c;c++)a[c]=0;for(c=20934;20936>=c;c++)a[c]=0;for(c=21035;21037>=c;c++)a[c]=0;for(c=21095;21097>=c;c++)a[c]=0;for(c=21148;21150>=c;c++)a[c]=0;for(c=21413;21423>=c;c++)a[c]=0;for(c=21473;21483>=c;c++)a[c]=
    0;for(c=21780;21782>=c;c++)a[c]=0;for(c=21891;21894>=c;c++)a[c]=0;for(c=21896;21899>=c;c++)a[c]=0;for(c=22171;22177>=c;c++)a[c]=0;for(c=22181;22187>=c;c++)a[c]=0;for(c=22191;22197>=c;c++)a[c]=0;for(c=22234;22236>=c;c++)a[c]=0;for(c=22521;22525>=c;c++)a[c]=0;for(c=22991;22994>=c;c++)a[c]=0;for(c=23028;23038>=c;c++)a[c]=0;for(c=23830;23853>=c;c++)a[c]=0;for(c=23866;23872>=c;c++)a[c]=0;for(c=23877;23884>=c;c++)a[c]=0;for(c=23886;23894>=c;c++)a[c]=0;for(c=23946;23948>=c;c++)a[c]=0;for(c=24311;24313>=
    c;c++)a[c]=0;for(c=24342;24347>=c;c++)a[c]=0;for(c=24370;24374>=c;c++)a[c]=10;for(c=24375;24381>=c;c++)a[c]=0;for(c=24718;24721>=c;c++)a[c]=0;for(c=24817;24821>=c;c++)a[c]=0;for(c=24877;24882>=c;c++)a[c]=0;for(c=24891;24893>=c;c++)a[c]=0;for(c=25391;25395>=c;c++)a[c]=0;for(c=25828;25838>=c;c++)a[c]=0;for(c=26191;26195>=c;c++)a[c]=0;for(c=26391;26393>=c;c++)a[c]=0;for(c=26701;26722>=c;c++)a[c]=0;for(c=26729;26799>=c;c++)a[c]=2;for(c=26801;26803>=c;c++)a[c]=2;for(c=26811;26813>=c;c++)a[c]=2;for(c=26847;26870>=
    c;c++)a[c]=2;for(c=26891;26899>=c;c++)a[c]=0;for(c=26901;26923>=c;c++)a[c]=0;for(c=26929;26946>=c;c++)a[c]=0;for(c=26948;26998>=c;c++)a[c]=0;for(c=27037;27040>=c;c++)a[c]=0;for(c=27205;27232>=c;c++)a[c]=0;for(c=27258;27260>=c;c++)a[c]=0;for(c=27391;27398>=c;c++)a[c]=0;for(c=27561;27564>=c;c++)a[c]=0;for(c=27571;27574>=c;c++)a[c]=0;for(c=27581;27584>=c;c++)a[c]=0;for(c=27591;27594>=c;c++)a[c]=0;for(c=28191;28193>=c;c++)a[c]=0;for(c=28348;28358>=c;c++)a[c]=0;for(c=28402;28432>=c;c++)a[c]=0;for(c=28462;28492>=
    c;c++)a[c]=0;for(c=29118;29122>=c;c++)a[c]=0;for(c=29168;29172>=c;c++)a[c]=0;for(c=29177;29185>=c;c++)a[c]=0;for(c=29187;29195>=c;c++)a[c]=0;for(c=29900;29903>=c;c++)a[c]=0;for(c=30161;30179>=c;c++)a[c]=0;for(c=30491;30494>=c;c++)a[c]=0;for(c=30729;30732>=c;c++)a[c]=0;for(c=31251;31259>=c;c++)a[c]=0;for(c=31265;31268>=c;c++)a[c]=0;for(c=31275;31279>=c;c++)a[c]=0;for(c=31281;31297>=c;c++)a[c]=0;for(c=31461;31469>=c;c++)a[c]=0;for(c=31491;31495>=c;c++)a[c]=0;for(c=31917;31922>=c;c++)a[c]=0;for(c=31965;32E3>=
    c;c++)a[c]=0;for(c=32001;32003>=c;c++)a[c]=2;for(c=32005;32031>=c;c++)a[c]=2;for(c=32033;32060>=c;c++)a[c]=2;for(c=32064;32067>=c;c++)a[c]=2;for(c=32074;32077>=c;c++)a[c]=2;for(c=32081;32086>=c;c++)a[c]=0;for(c=32107;32130>=c;c++)a[c]=0;for(c=32133;32158>=c;c++)a[c]=0;for(c=32164;32167>=c;c++)a[c]=2;for(c=32180;32199>=c;c++)a[c]=0;for(c=32201;32260>=c;c++)a[c]=0;for(c=32301;32360>=c;c++)a[c]=0;for(c=32601;32662>=c;c++)a[c]=0;for(c=32664;32667>=c;c++)a[c]=2;for(c=32701;32761>=c;c++)a[c]=0;for(c=53001;53004>=
    c;c++)a[c]=0;for(c=53008;53019>=c;c++)a[c]=0;for(c=53021;53032>=c;c++)a[c]=0;for(c=53034;53037>=c;c++)a[c]=0;for(c=53042;53046>=c;c++)a[c]=0;for(c=53074;53080>=c;c++)a[c]=0;for(c=54001;54004>=c;c++)a[c]=0;for(c=54008;54019>=c;c++)a[c]=0;for(c=54021;54032>=c;c++)a[c]=0;for(c=54034;54037>=c;c++)a[c]=0;for(c=54042;54046>=c;c++)a[c]=0;for(c=54048;54053>=c;c++)a[c]=0;for(c=54074;54080>=c;c++)a[c]=0;for(c=54098;54101>=c;c++)a[c]=0;for(c=102001;102040>=c;c++)a[c]=0;for(c=102042;102063>=c;c++)a[c]=0;for(c=
    102065;102067>=c;c++)a[c]=0;for(c=102070;102117>=c;c++)a[c]=0;for(c=102122;102216>=c;c++)a[c]=0;for(c=102221;102377>=c;c++)a[c]=0;for(c=102382;102388>=c;c++)a[c]=0;for(c=102389;102398>=c;c++)a[c]=2;for(c=102399;102444>=c;c++)a[c]=0;for(c=102445;102447>=c;c++)a[c]=2;for(c=102448;102458>=c;c++)a[c]=0;for(c=102459;102468>=c;c++)a[c]=2;for(c=102469;102499>=c;c++)a[c]=0;for(c=102500;102519>=c;c++)a[c]=1;for(c=102520;102524>=c;c++)a[c]=0;for(c=102525;102529>=c;c++)a[c]=2;for(c=102530;102588>=c;c++)a[c]=
    0;for(c=102590;102598>=c;c++)a[c]=0;for(c=102601;102603>=c;c++)a[c]=0;for(c=102605;102628>=c;c++)a[c]=0;for(c=102629;102646>=c;c++)a[c]=2;for(c=102648;102700>=c;c++)a[c]=2;for(c=102701;102703>=c;c++)a[c]=0;for(c=102707;102730>=c;c++)a[c]=2;for(c=102733;102758>=c;c++)a[c]=2;for(c=102767;102900>=c;c++)a[c]=0;for(c=102965;102969>=c;c++)a[c]=0;for(c=102971;102973>=c;c++)a[c]=0;for(c=102975;102989>=c;c++)a[c]=0;for(c=102990;102992>=c;c++)a[c]=1;for(c=102997;103002>=c;c++)a[c]=0;for(c=103003;103008>=c;c++)a[c]=
    2;for(c=103009;103011>=c;c++)a[c]=0;for(c=103012;103014>=c;c++)a[c]=2;for(c=103019;103021>=c;c++)a[c]=0;for(c=103022;103024>=c;c++)a[c]=2;for(c=103029;103031>=c;c++)a[c]=0;for(c=103032;103034>=c;c++)a[c]=2;for(c=103065;103068>=c;c++)a[c]=0;for(c=103074;103076>=c;c++)a[c]=0;for(c=103077;103079>=c;c++)a[c]=1;for(c=103080;103082>=c;c++)a[c]=0;for(c=103083;103085>=c;c++)a[c]=2;for(c=103090;103093>=c;c++)a[c]=0;for(c=103097;103099>=c;c++)a[c]=0;for(c=103100;103102>=c;c++)a[c]=2;for(c=103107;103109>=c;c++)a[c]=
    0;for(c=103110;103112>=c;c++)a[c]=2;for(c=103113;103116>=c;c++)a[c]=0;for(c=103117;103120>=c;c++)a[c]=2;for(c=103153;103157>=c;c++)a[c]=0;for(c=103158;103162>=c;c++)a[c]=2;for(c=103163;103165>=c;c++)a[c]=0;for(c=103166;103168>=c;c++)a[c]=1;for(c=103169;103171>=c;c++)a[c]=2;for(c=103186;103188>=c;c++)a[c]=0;for(c=103189;103191>=c;c++)a[c]=2;for(c=103192;103195>=c;c++)a[c]=0;for(c=103196;103199>=c;c++)a[c]=2;for(c=103200;103224>=c;c++)a[c]=0;for(c=103225;103227>=c;c++)a[c]=1;for(c=103232;103237>=c;c++)a[c]=
    0;for(c=103238;103243>=c;c++)a[c]=2;for(c=103244;103246>=c;c++)a[c]=0;for(c=103247;103249>=c;c++)a[c]=2;for(c=103254;103256>=c;c++)a[c]=0;for(c=103257;103259>=c;c++)a[c]=2;for(c=103264;103266>=c;c++)a[c]=0;for(c=103267;103269>=c;c++)a[c]=2;for(c=103300;103375>=c;c++)a[c]=0;for(c=103381;103383>=c;c++)a[c]=0;for(c=103384;103386>=c;c++)a[c]=1;for(c=103387;103389>=c;c++)a[c]=0;for(c=103390;103392>=c;c++)a[c]=2;for(c=103397;103399>=c;c++)a[c]=0;for(c=103400;103471>=c;c++)a[c]=2;for(c=103476;103478>=c;c++)a[c]=
    0;for(c=103479;103481>=c;c++)a[c]=2;for(c=103486;103488>=c;c++)a[c]=0;for(c=103489;103491>=c;c++)a[c]=2;for(c=103492;103495>=c;c++)a[c]=0;for(c=103496;103499>=c;c++)a[c]=2;for(c=103528;103543>=c;c++)a[c]=0;for(c=103544;103548>=c;c++)a[c]=2;for(c=103549;103551>=c;c++)a[c]=0;for(c=103552;103554>=c;c++)a[c]=1;for(c=103555;103557>=c;c++)a[c]=2;for(c=103558;103560>=c;c++)a[c]=0;for(c=103571;103573>=c;c++)a[c]=0;for(c=103574;103576>=c;c++)a[c]=2;for(c=103577;103580>=c;c++)a[c]=0;for(c=103581;103583>=c;c++)a[c]=
    2;for(c=103595;103597>=c;c++)a[c]=0;for(c=103600;103694>=c;c++)a[c]=0;for(c=103696;103698>=c;c++)a[c]=0;for(c=103700;103793>=c;c++)a[c]=2;for(c=103794;103871>=c;c++)a[c]=0;for(c=103900;103971>=c;c++)a[c]=2;return a})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Geometry ./SpatialReference ./support/offset ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){function q(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var f=[0,0],r=l.getLogger("esri.geometry.Point");c=function(a){function d(){for(var b=[],d=0;d<arguments.length;d++)b[d]=arguments[d];b=a.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}m(d,a);c=d;d.copy=function(a,b){b._set("x",a._get("x"));b._set("y",a._get("y"));b._set("z",a._get("z"));b._set("m",a._get("m"));a=a._get("spatialReference");b._set("spatialReference",
    Object.isFrozen(a)?a:a.clone())};d.distance=function(a,b){var d=a.x-b.x,c=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(d*d+c*c+a*a)};d.prototype.normalizeCtorArgs=function(a,b,d,c,e){var p;if(Array.isArray(a))p=a,e=b,a=p[0],b=p[1],d=p[2],c=p[3];else if(a&&"object"===typeof a){if(p=a,a=null!=p.x?p.x:p.longitude,b=null!=p.y?p.y:p.latitude,d=null!=p.z?p.z:p.altitude,c=p.m,(e=p.spatialReference)&&"esri.geometry.SpatialReference"!==e.declaredClass&&(e=new n(e)),null!=p.longitude||null!=p.latitude)null==
    p.longitude?r.warn(".longitude\x3d","Latitude was defined without longitude"):null==p.latitude?r.warn(".latitude\x3d","Longitude was defined without latitude"):!p.declaredClass&&e&&e.isWebMercator&&(b=k.lngLatToXY(p.longitude,p.latitude,f),a=b[0],b=b[1])}else q(d)?(e=d,d=null):q(c)&&(e=c,c=null);a={x:a,y:b};null==a.x&&null!=a.y?r.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&r.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=e&&(a.spatialReference=
    e);null!=d&&(a.z=d);null!=c&&(a.m=c);return a};Object.defineProperty(d.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){a!==this.hasM&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){a!==this.hasZ&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"latitude",{get:function(){var a=this._get("spatialReference");
    if(a){if(a.isWebMercator)return k.xyToLngLat(this.x,this.y,f)[1];if(a.isGeographic)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",k.lngLatToXY(this.x,a,f)[1]):b.isGeographic&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return k.xyToLngLat(this._get("x"),this._get("y"),f)[0];
    if(a.isGeographic)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",k.lngLatToXY(a,this._get("y"),f)[0]):b.isGeographic&&this._set("x",a),this._set("longitude",a))},enumerable:!0,configurable:!0});d.prototype.writeX=function(a,b,d){b[d]=isNaN(a)?"NaN":a};d.prototype.readX=function(a){return"string"===typeof a?NaN:a};d.prototype.clone=function(){var a=new c;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;
    return a};d.prototype.copy=function(a){c.copy(a,this);return this};d.prototype.equals=function(a){var b;if(!a)return!1;var d=this.x,c=this.y,e=this.z,f=this.m,p=this.spatialReference,n=a.z,q=a.m,g=a.x;b=a.y;a=a.spatialReference;if(!p.equals(a))if(p.isWebMercator&&a.isWGS84)b=k.lngLatToXY(g,b),g=b[0],b=b[1],a=p;else if(p.isWGS84&&a.isWebMercator)b=k.xyToLngLat(g,b),g=b[0],b=b[1],a=p;else return!1;return d===g&&c===b&&e===n&&f===q&&p.wkid===a.wkid};d.prototype.offset=function(a,d,c){return b.offsetPoint(this,
    a,d,c)};d.prototype.normalize=function(){if(!this.spatialReference)return this;var a=p.getInfo(this.spatialReference);if(!a)return this;var b=this.x,d=a.valid,a=d[0],c=d[1],d=2*c;b>c?(a=Math.ceil(Math.abs(b-c)/d),b-=a*d):b<a&&(a=Math.ceil(Math.abs(b-a)/d),b+=a*d);this._set("x",b);return this};d.prototype.distance=function(a){return c.distance(this,a)};d.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:
    [this.x,this.y]};d.prototype.toJSON=function(a){return this.write(null,a)};var c;e([h.property({dependsOn:["x","y","z","m","spatialReference"]})],d.prototype,"cache",void 0);e([h.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasM",null);e([h.property({type:Boolean,dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],d.prototype,"hasZ",null);e([h.property({type:Number,dependsOn:["y"]})],d.prototype,"latitude",null);
    e([h.property({type:Number,dependsOn:["x"]})],d.prototype,"longitude",null);e([h.property({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),h.cast(function(a){return isNaN(a)?a:g.ensureNumber(a)})],d.prototype,"x",void 0);e([h.writer("x")],d.prototype,"writeX",null);e([h.reader("x")],d.prototype,"readX",null);e([h.property({type:Number,json:{write:!0}})],d.prototype,"y",void 0);e([h.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],
    d.prototype,"z",void 0);e([h.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],d.prototype,"m",void 0);return d=c=e([h.subclass("esri.geometry.Point")],d)}(h.declared(d));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/offset":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.offsetPoint=function(a,c,l,h){a.x+=c;a.y+=l;null!=h&&null!=a.z&&(a.z+=h);return a};a.offsetCoordsX=function(a,
    c){a[0]+=c;return a}})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(c,a,m,e,l,h){function g(a,b,d,c,e){var f;if("x"in a&&"x"in e)b=b(a.x,a.y,q,c),e.x=b[0],e.y=b[1];else if("xmin"in a&&"xmin"in e)f=b(a.xmin,a.ymin,q,c),e.xmin=f[0],e.ymin=f[1],b=b(a.xmax,a.ymax,q,c),e.xmax=b[0],e.ymax=b[1];else if("paths"in a&&"paths"in e||"rings"in a&&"rings"in e){f="paths"in a?
    a.paths:a.rings;var k=[],p=void 0;for(a=0;a<f.length;a++){var n=f[a],p=[];k.push(p);for(var g=0;g<n.length;g++)p.push(b(n[g][0],n[g][1],[0,0],c)),2<n[g].length&&p[g].push(n[g][2]),3<n[g].length&&p[g].push(n[g][3])}"paths"in e?e.paths=k:e.rings=k}else if("points"in a&&"points"in e){f=a.points;k=[];for(a=0;a<f.length;a++)k[a]=b(f[a][0],f[a][1],[0,0],c),2<f[a].length&&k[a].push(f[a][2]),3<f[a].length&&k[a].push(f[a][3]);e.points=k}else if("type"in a&&"mesh"===a.type&&"type"in e&&"mesh"===e.type&&(f=
    a.vertexAttributes&&a.vertexAttributes.position,k=e.vertexAttributes&&e.vertexAttributes.position,f))for(p=[0,0],a=0;a<f.length;a+=3)b(f[a],f[a+1],p,c),k[a]=p[0],k[a+1]=p[1];e.spatialReference=d;return e}function d(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?h.equals(b,a)?!0:h.isWebMercator(b)&&h.isWGS84(a)||h.isWebMercator(a)&&h.isWGS84(b):!1}function n(a,b,d){void 0===d&&(d=[0,0]);89.99999<b?b=89.99999:-89.99999>b&&
    (b=-89.99999);b*=.017453292519943;d[0]=.017453292519943*a*p;d[1]=k*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return d}function b(a,b,d,c){void 0===d&&(d=[0,0]);void 0===c&&(c=!1);a=a/p*57.29577951308232;d[0]=c?a:a-360*Math.floor((a+180)/360);d[1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*b/p)));return d}Object.defineProperty(a,"__esModule",{value:!0});var p=e.wgs84Radius,k=p/2,q=[0,0];a.canProject=d;a.project=function(a,c){var e=a&&a.spatialReference;c=c&&(null!=c.wkid||null!=c.wkt?c:c.spatialReference);
    return d(e,c)?h.equals(e,c)?m.clone(a):h.isWebMercator(c)?g(a,n,l.WebMercator,!1,m.clone(a)):h.isWGS84(c)?g(a,b,l.WGS84,!1,m.clone(a)):null:null};a.lngLatToXY=n;a.xyToLngLat=b;a.geographicToWebMercator=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=m.clone(a));return g(a,n,l.WebMercator,b,d)};a.webMercatorToGeographic=function(a,d,c){void 0===d&&(d=!1);void 0===c&&(c=m.clone(a));return g(a,b,l.WGS84,d,c)}})},"esri/core/wgs84Constants":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,
    "__esModule",{value:!0});a.wgs84Radius=6378137;a.wgs84InverseFlattening=298.257223563;a.wgs84Flattening=1/a.wgs84InverseFlattening;a.wgs84PolarRadius=a.wgs84Radius*(1-a.wgs84Flattening);a.wgs84Eccentricity=.0818191908426215})},"esri/geometry/support/contains":function(){define(["require","exports"],function(c,a){function m(a,c){return e(a,c[0],c[1])}function e(a,c,b,e){return c>=a.xmin&&c<=a.xmax&&b>=a.ymin&&b<=a.ymax?null!=e&&a.hasZ?e>=a.zmin&&e<=a.zmax:!0:!1}function l(a,c){if(a=a.rings)if(Array.isArray(a[0][0])){for(var b=
    !1,d=0,e=a.length;d<e;d++)b=h(b,a[d],c);c=b}else c=h(!1,a,c);else c=!1;return c}function h(a,c,b){var d=b[0];b=b[1];for(var e=0,n=0,f=c.length;n<f;n++){e++;e===f&&(e=0);var g=c[n],h=g[0],g=g[1],u=c[e],l=u[0],u=u[1];(g<b&&u>=b||u<b&&g>=b)&&h+(b-g)/(u-g)*(l-h)<d&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});var g=[0,0];a.extentContainsPoint=function(a,c){return e(a,c.x,c.y,c.z)};a.extentContainsMultipoint=function(a,c){if(!c.points||c.points.length)return!1;var b=0;for(c=c.points;b<
    c.length;b++)if(!m(a,c[b]))return!1;return!0};a.extentContainsExtent=function(a,c){var b=c.xmin,d=c.ymin,k=c.zmin,n=c.xmax,f=c.ymax,g=c.zmax;return a.hasZ&&c.hasZ?e(a,b,d,k)&&e(a,b,f,k)&&e(a,n,f,k)&&e(a,n,d,k)&&e(a,b,d,g)&&e(a,b,f,g)&&e(a,n,f,g)&&e(a,n,d,g):e(a,b,d)&&e(a,b,f)&&e(a,n,f)&&e(a,n,d)};a.extentContainsCoords2D=m;a.extentContainsCoords3D=function(a,c){return e(a,c[0],c[1],c[2])};a.polygonContainsPoint=function(a,c){g[1]=c.y;g[0]=c.x;return l(a,g)};a.polygonContainsCoords=l})},"esri/geometry/support/intersects":function(){define(["require",
    "exports","./contains"],function(c,a,m){function e(a,b){return m.extentContainsPoint(a,b)}function l(a,b){var c=a.hasZ&&b.hasZ,d;if(a.xmin<=b.xmin){if(d=b.xmin,a.xmax<d)return!1}else if(d=a.xmin,b.xmax<d)return!1;if(a.ymin<=b.ymin){if(d=b.ymin,a.ymax<d)return!1}else if(d=a.ymin,b.ymax<d)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function h(a,b){var c=b.hasZ?m.extentContainsCoords3D:m.extentContainsCoords2D,d=0;for(b=b.points;d<
    b.length;d++)if(c(a,b[d]))return!0;return!1}function g(a,b){p[0]=a.xmin;p[1]=a.ymax;k[0]=a.xmax;k[1]=a.ymax;q[0]=a.xmin;q[1]=a.ymin;f[0]=a.xmax;f[1]=a.ymin;for(var c=0,d=r;c<d.length;c++)if(m.polygonContainsCoords(b,d[c]))return!0;c=0;for(b=b.rings;c<b.length;c++)if(d=b[c],d.length){var e=d[0];if(m.extentContainsCoords2D(a,e))return!0;for(var g=1;g<d.length;g++){var h=d[g];if(m.extentContainsCoords2D(a,h)||n(e,h,t))return!0;e=h}}return!1}function d(a,b){p[0]=a.xmin;p[1]=a.ymax;k[0]=a.xmax;k[1]=a.ymax;
    q[0]=a.xmin;q[1]=a.ymin;f[0]=a.xmax;f[1]=a.ymin;b=b.paths;for(var c=0;c<b.length;c++){var d=b[c];if(b.length){var e=d[0];if(m.extentContainsCoords2D(a,e))return!0;for(var g=1;g<d.length;g++){var r=d[g];if(m.extentContainsCoords2D(a,r)||n(e,r,t))return!0;e=r}}}return!1}function n(a,c,d){for(var e=0;e<d.length;e++)if(b(a,c,d[e][0],d[e][1]))return!0;return!1}function b(a,b,c,d,e){var f=a[0];a=a[1];var k=b[0];b=b[1];var p=c[0],n=c[1];c=d[0]-p;var p=f-p,g=k-f;d=d[1]-n;var n=a-n,q=b-a,r=d*g-c*q;if(0===
    r)return!1;c=(c*n-d*p)/r;p=(g*n-q*p)/r;return 0<=c&&1>=c&&0<=p&&1>=p?(e&&(e[0]=f+c*(k-f),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});a.extentIntersectsPoint=e;a.extentIntersectsExtent=l;a.extentIntersectsMultipoint=h;var p=[0,0],k=[0,0],q=[0,0],f=[0,0],r=[p,k,q,f],t=[[q,p],[p,k],[k,f],[f,q]];a.extentIntersectsPolygon=g;a.extentIntersectsPolyline=d;var u=[0,0];a.isSelfIntersecting=function(a){for(var c=0;c<a.length;c++){for(var d=a[c],e=0;e<d.length-1;e++)for(var f=d[e],
    k=d[e+1],p=c+1;p<a.length;p++)for(var n=0;n<a[p].length-1;n++){var g=a[p][n],q=a[p][n+1],r=b(f,k,g,q,u);if(r&&!(u[0]===f[0]&&u[1]===f[1]||u[0]===g[0]&&u[1]===g[1]||u[0]===k[0]&&u[1]===k[1]||u[0]===q[0]&&u[1]===q[1]))return!0}n=d.length;if(!(4>=n))for(e=0;e<n-3;e++){var h=n-1;0===e&&(h=n-2);f=d[e];k=d[e+1];for(p=e+2;p<h;p++)if(g=d[p],q=d[p+1],(r=b(f,k,g,q,u))&&!(u[0]===f[0]&&u[1]===f[1]||u[0]===g[0]&&u[1]===g[1]||u[0]===k[0]&&u[1]===k[1]||u[0]===q[0]&&u[1]===q[1]))return!0}}return!1};a.segmentIntersects=
    b;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return l;case "esriGeometryMultipoint":case "multipoint":return h;case "esriGeometryPoint":case "point":return e;case "esriGeometryPolygon":case "polygon":return g;case "esriGeometryPolyline":case "polyline":return d;case "mesh":return l}}})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){function p(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}c=function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.points=[];b.type="multipoint";return b}m(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&
    (c.spatialReference=a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new g,c=this.hasZ,d=this.hasM,e=c?3:2,f=a[0],k=p(Math.min),n=p(Math.max),q=f[0],h=f[1],l=f[0],f=f[1],m,C,F,I,
    G=0,J=a.length;G<J;G++){var H=a[G],N=H[0],L=H[1],q=k(q,N),h=k(h,L),l=n(l,N),f=n(f,L);c&&2<H.length&&(N=H[2],m=k(m,N),F=n(F,N));d&&H.length>e&&(H=H[e],C=k(C,H),I=n(I,H))}b.xmin=q;b.ymin=h;b.xmax=l;b.ymax=f;b.spatialReference=this.spatialReference;c?(b.zmin=m,b.zmax=F):(b.zmin=null,b.zmax=null);d?(b.mmin=C,b.mmax=I):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});c.prototype.writePoints=function(a,b){b.points=l.clone(this.points)};c.prototype.addPoint=function(a){this.clearCache();
    b.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};c.prototype.clone=function(){var a={points:l.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new d(a)};c.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new n(b)};c.prototype.removePoint=
    function(a){if(!this._validateInputs(a))return null;this.clearCache();return new n(this.points.splice(a,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,c){if(!this._validateInputs(a))return this;this.clearCache();b.updateSupportFromPoint(c);this.points[a]=c.toArray();return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var d;e([h.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],
    c.prototype,"cache",void 0);e([h.property({dependsOn:["cache"]})],c.prototype,"extent",null);e([h.property({type:[[Number]],json:{write:{isRequired:!0}}})],c.prototype,"points",void 0);e([h.writer("points")],c.prototype,"writePoints",null);return c=d=e([h.subclass("esri.geometry.Multipoint")],c)}(h.declared(d));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=
    function(a,c,l){void 0===l&&(l=!1);var e=a.hasM,g=a.hasZ;Array.isArray(c)?4!==c.length||e||g?3===c.length&&l&&!e?(g=!0,e=!1):3===c.length&&e&&g&&(g=e=!1):g=e=!0:(g=!g&&c.hasZ&&(!e||c.hasM),e=!e&&c.hasM&&(!g||c.hasZ));a.hasZ=g;a.hasM=e}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/extentUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){c=function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.rings=[];b.type="polygon";return b}m(c,a);d=c;c.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,e=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(e=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var d=a.zmin+.5*(a.zmax-a.zmin),
    f=0;f<b.length;f++)b[f].push(d);if(e&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),f=0;f<b.length;f++)b[f].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);e&&(b.hasM=!0);return new d(b)};c.prototype.normalizeCtorArgs=function(a,c){var d=null,e,f,k=null;a&&!Array.isArray(a)?(d=a.rings?a.rings:null,c||(a.spatialReference?c=a.spatialReference:a.rings||(c=a)),e=a.hasZ,f=a.hasM):d=a;d=d||[];c=c||b.WGS84;d.length&&d[0]&&null!=d[0][0]&&"number"===typeof d[0][0]&&(d=[d]);if(k=d[0]&&d[0][0])void 0===e&&void 0===
    f?(e=2<k.length,f=!1):void 0===e?e=!f&&3<k.length:void 0===f&&(f=!e&&3<k.length);return{rings:d,spatialReference:c,hasZ:e,hasM:f}};Object.defineProperty(c.prototype,"centroid",{get:function(){var a=p.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new n;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.spatialReference,
    b=f.getPolygonExtent(this);if(!b)return null;b=new g(b);b.spatialReference=a;return b},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isSelfIntersecting",{get:function(){return r.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b){b.rings=l.clone(this.rings)};c.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,f=a.length;e<f;e++)d[e]=a[e].toArray();
    b[c]=d}return this}};c.prototype.clone=function(){var a=new d;a.spatialReference=this.spatialReference;a.rings=l.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};c.prototype.contains=function(a){if(!a)return!1;t.canProject(a,this.spatialReference)&&(a=t.project(a,this.spatialReference));return k.polygonContainsPoint(this,a)};c.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return q.isClockwise(a,
    this.hasM,this.hasZ)};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new n(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new n(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new n(a[0],a[1],a[2],a[3],this.spatialReference):new n(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();u.updateSupportFromPoint(this,c);Array.isArray(c)||
    (c=c.toArray());this.rings[a].splice(b,0,c);return this};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new n(this.rings[a].splice(b,1)[0],this.spatialReference)};c.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new n(a,b)})};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();
    u.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};c.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};var d;e([h.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);e([h.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",
    null);e([h.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);e([h.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"isSelfIntersecting",null);e([h.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);e([h.writer("rings")],c.prototype,"writePaths",null);return c=d=e([h.subclass("esri.geometry.Polygon")],c)}(h.declared(d));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/centroid":function(){define(["require","exports",
    "./coordsUtils"],function(c,a,m){function e(a,c){if(!a||!a.length)return null;for(var d=[],b=[],e=c?[Infinity,-Infinity,Infinity,-Infinity,Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],k=0,g=a.length;k<g;k++){var f=l(a[k],c,e);f&&b.push(f)}b.sort(function(a,b){var d=a[2]-b[2];0===d&&c&&(d=a[4]-b[4]);return d});b.length&&(k=6*b[0][2],d[0]=b[0][0]/k,d[1]=b[0][1]/k,c&&(k=6*b[0][4],d[2]=0!==k?b[0][3]/k:0),d[0]<e[0]||d[0]>e[1]||d[1]<e[2]||d[1]>e[3]||c&&(d[2]<e[4]||d[2]>e[5]))&&(d.length=
    0);if(!d.length)if(a=a[0]&&a[0].length?h(a[0],c):null)d[0]=a[0],d[1]=a[1],c&&2<a.length&&(d[2]=a[2]);else return null;return d}function l(a,c,e){for(var b=0,d=0,k=0,n=0,f=0,g=0;g<a.length;g++){var h=a[g],u=h[0],l=h[1],m=h[2],x=a[(g+1)%a.length],z=x[0],A=x[1],y=x[2],B=u*A-z*l,n=n+B,b=b+(u+z)*B,d=d+(l+A)*B;c&&2<h.length&&2<x.length&&(B=u*y-z*m,k+=(m+y)*B,f+=B);u<e[0]&&(e[0]=u);u>e[1]&&(e[1]=u);l<e[2]&&(e[2]=l);l>e[3]&&(e[3]=l);c&&(m<e[4]&&(e[4]=m),m>e[5]&&(e[5]=m))}0<n&&(n*=-1);0<f&&(f*=-1);if(!n)return null;
    a=[b,d,.5*n];c&&(a[3]=k,a[4]=.5*f);return a}function h(a,c){for(var d=c?[0,0,0]:[0,0],b=c?[0,0,0]:[0,0],e=0,k=0,g=0,f=0,h=0,l=a.length;h<l-1;h++){var u=a[h],w=a[h+1];if(u&&w){d[0]=u[0];d[1]=u[1];b[0]=w[0];b[1]=w[1];c&&2<u.length&&2<w.length&&(d[2]=u[2],b[2]=w[2]);var v=m.getLength(d,b);v&&(e+=v,u=m.getMidpoint(u,w),k+=v*u[0],g+=v*u[1],c&&2<u.length&&(f+=v*u[2]))}}return 0<e?c?[k/e,g/e,f/e]:[k/e,g/e]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?
    a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?e(a.rings,a.hasZ):null};a.ringsCentroid=e;a.lineCentroid=h})},"esri/geometry/support/coordsUtils":function(){define(["require","exports","./spatialReferenceUtils"],function(c,a,m){function e(a,c){var b=c[0]-a[0],d=c[1]-a[1];return 2<a.length&&2<c.length?(a=a[2]-c[2],Math.sqrt(b*b+d*d+a*a)):Math.sqrt(b*b+d*d)}function l(a,c,b){var d=a[0]+b*(c[0]-a[0]),e=a[1]+b*(c[1]-
    a[1]);return 2<a.length&&2<c.length?[d,e,a[2]+b*(c[2]-a[2])]:[d,e]}function h(a,c,b){for(var d=a.length,e=0,n=0,f=0,g=0;g<d;g++){var h=a[g],u=a[(g+1)%d],l=2,e=e+(h[0]*u[1]-u[0]*h[1]);2<h.length&&2<u.length&&b&&(n+=h[0]*u[2]-u[0]*h[2],l=3);h.length>l&&u.length>l&&c&&(f+=h[0]*u[l]-u[0]*h[l])}return 0>=e&&0>=n&&0>=f}function g(a,c){if(c=m.getInfo(c)){var b=c.valid[0],d=c.valid[1],e=d-b;c=function(a){var c=Infinity,f=-Infinity;a.forEach(function(a){for(var k=a[0];k<b;)k+=e;for(;k>d;)k-=e;c=Math.min(c,
    k);f=Math.max(f,k);a[0]=k});var k=f-c;e-k<k&&a.forEach(function(a){0>a[0]&&(a[0]+=e)})};for(var n=0;n<a.length;n++)c(a[n])}}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var c=a.hasZ,b=a.hasM;if("point"===a.type)return b&&c?[a.x,a.y,a.z,a.m]:c?[a.x,a.y,a.z]:b?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);
    if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,e=!1;a.forEach(function(a){a.hasZ&&(d=!0);a.hasM&&(e=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var c=.5*(a.zmax-a.zmin),k=0;k<b.length;k++)b[k].push(c);if(e&&a.hasM)for(a=.5*(a.mmax-a.mmin),k=0;k<b.length;k++)b[k].push(a);return b})}return null};a.getLength=e;a.getMidpoint=function(a,c){return l(a,c,.5)};a.getPathLength=function(a){for(var c=
    a.length,b=0,d=0;d<c-1;++d)b+=e(a[d],a[d+1]);return b};a.getPointOnPath=function(a,c){if(0>=c)return a[0];for(var b=a.length,d=0,k=0;k<b-1;++k){var n=e(a[k],a[k+1]);if(c-d<n)return l(a[k],a[k+1],(c-d)/n);d+=n}return a[b-1]};a.isClockwise=h;a.closeRingsAndFixWinding=function(a){if("rings"in a){for(var c=0,b=a.rings;c<b.length;c++){var d=b[c];3>d.length||d[0][0]===d[d.length-1][0]&&d[0][1]===d[d.length-1][1]||d.push([d[0][0],d[0][1]])}if(0<a.rings.length&&!h(a.rings[0],a.hasM,a.hasZ))for(c=0;c<a.rings.length;++c)a.rings[c]=
    a.rings[c].reverse()}};a.closeRings=function(a){if("rings"in a){var c=0;for(a=a.rings;c<a.length;c++){var b=a[c];3>b.length||b[0][0]===b[b.length-1][0]&&b[0][1]===b[b.length-1][1]||b.push([b[0][0],b[0][1]])}}};a.getRingArea=function(a){for(var c=a.length,b=0,d=0;d<c;d++)var e=a[d],g=a[(d+1)%c],b=b+(e[0]*g[1]-g[0]*e[1]);return b};a.unnormalizeGeometryOnDatelineCrossing=function(a){if("polygon"!==a.type&&"polyline"!==a.type)return a;g("polygon"===a.type?a.rings:a.paths,a.spatialReference);return a};
    a.unnormalizeVerticesOnDatelineCrossing=g;a.computeUnnormalizedVertexPositionsOnDateLineCrossing=function(a,c,b,e){var d=Infinity,p=-Infinity;a.forEach(function(a){for(var f=a.pos[0];f<c;)f+=e;for(;f>b;)f-=e;d=Math.min(d,f);p=Math.max(p,f);a.unnormalizedPos[0]=f;a.unnormalizedPos[1]=a.pos[1];2<a.pos.length&&(a.unnormalizedPos[2]=a.pos[2]);3<a.pos.length&&(a.unnormalizedPos[3]=a.pos[3])});var f=p-d;e-f<f&&a.forEach(function(a){0>a.unnormalizedPos[0]&&(a.unnormalizedPos[0]+=e)})}})},"esri/geometry/support/extentUtils":function(){define(["require",
    "exports","./boundsUtils"],function(c,a,m){function e(a,c,d){void 0===c&&(c=!1);void 0===d&&(d=!1);return c?d?{xmin:a[0],ymin:a[1],zmin:a[2],mmin:a[3],xmax:a[4],ymax:a[5],zmax:a[6],mmax:a[7]}:{xmin:a[0],ymin:a[1],zmin:a[2],xmax:a[3],ymax:a[4],zmax:a[5]}:d?{xmin:a[0],ymin:a[1],mmin:a[2],xmax:a[3],ymax:a[4],mmax:a[5]}:{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3]}}function l(a){var b=a.hasZ,c=a.hasM;return e(m.getPointsBounds(n,a.points,b,c),b,c)}function h(a){var b=a.x,c=a.y,d=a.z;a=a.m;var e=null!=a;return null!=
    d?e?{xmin:b,ymin:c,zmin:d,mmin:a,xmax:b,ymax:c,zmax:d,mmax:a}:{xmin:b,ymin:c,zmin:d,xmax:b,ymax:c,zmax:d}:e?{xmin:b,ymin:c,mmin:a,xmax:b,ymax:c,mmax:a}:{xmin:b,ymin:c,xmax:b,ymax:c}}function g(a){var b=a.hasZ,c=a.hasM;return(a=m.getRingsOrPathsBounds(n,a.rings,b,c))?e(a,b,c):null}function d(a){var b=a.hasZ,c=a.hasM;return(a=m.getRingsOrPathsBounds(n,a.paths,b,c))?e(a,b,c):null}Object.defineProperty(a,"__esModule",{value:!0});var n=[];a.getGeometryExtent=function(a){return a?void 0!==a.xmin&&void 0!==
    a.ymin&&void 0!==a.xmax&&void 0!==a.ymax?a:void 0!==a.x&&void 0!==a.y?h(a):void 0!==a.rings?g(a):void 0!==a.paths?d(a):void 0!==a.points?l(a):null:null};a.getMultipointExtent=l;a.getPointExtent=h;a.getPolygonExtent=g;a.getPolylineExtent=d})},"esri/geometry/support/boundsUtils":function(){define(["require","exports"],function(c,a){function m(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function e(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}function l(a,
    c,e,g){var b=e?3:2;if(!c.length||!c[0].length)return null;for(var k=c[0][0],p=k[0],k=k[1],q=c[0][0],h=q[0],q=q[1],l=void 0,m=void 0,z=void 0,A=void 0,y=0;y<c.length;y++)for(var B=c[y],D=0;D<B.length;D++){var E=B[D],C=E[0],F=E[1],p=d(p,C),k=d(k,F),h=n(h,C),q=n(q,F);e&&2<E.length&&(C=E[2],l=d(l,C),m=n(m,C));g&&E.length>b&&(A=E[b],z=d(l,A),A=n(m,A))}if(e){if(g)return a[0]=p,a[1]=k,a[2]=l,a[3]=z,a[4]=h,a[5]=q,a[6]=m,a[7]=A,a.length=8,a;a[0]=p;a[1]=k;a[2]=l;a[3]=h;a[4]=q;a[5]=m;a.length=6;return a}if(g)return a[0]=
    p,a[1]=k,a[2]=z,a[3]=h,a[4]=q,a[5]=A,a.length=6,a;a[0]=p;a[1]=k;a[2]=h;a[3]=q;a.length=4;return a}function h(a,c,d,e,f,n){d=c.xmin;e=c.xmax;var b=c.ymin,k=c.ymax,p=c.zmin,g=c.zmax,q=c.mmin;c=c.mmax;if(f){p=p||0;g=g||0;if(n)return a[0]=d,a[1]=b,a[2]=p,a[3]=q||0,a[4]=e,a[5]=k,a[6]=g,a[7]=c||0,a;a[0]=d;a[1]=b;a[2]=p;a[3]=e;a[4]=k;a[5]=g;return a}if(n)return a[0]=d,a[1]=b,a[2]=q||0,a[3]=e,a[4]=k,a[5]=c||0,a;a[0]=d;a[1]=b;a[2]=e;a[3]=k;return a}function g(a,c,e,g,f,h){var b=e?3:2;g=g&&h;e=e&&f;if(!c.length||
    !c[0].length)return null;for(var k=c[0],p=k[0],k=k[1],q=c[0],r=q[0],q=q[1],l=void 0,m=void 0,y=void 0,B=void 0,D=0;D<c.length;D++){var E=c[D],C=E[0],F=E[1],p=d(p,C),k=d(k,F),r=n(r,C),q=n(q,F);e&&2<E.length&&(C=E[2],l=d(l,C),m=n(m,C));g&&E.length>b&&(B=E[b],y=d(l,B),B=n(m,B))}if(f){l=l||0;m=m||0;if(h)return a[0]=p,a[1]=k,a[2]=l,a[3]=y||0,a[4]=r,a[5]=q,a[6]=m,a[7]=B||0,a;a[0]=p;a[1]=k;a[2]=l;a[3]=r;a[4]=q;a[5]=m;return a}if(h)return a[0]=p,a[1]=k,a[2]=y||0,a[3]=r,a[4]=q,a[5]=B||0,a;a[0]=p;a[1]=k;a[2]=
    r;a[3]=q;return a}Object.defineProperty(a,"__esModule",{value:!0});var d=e(Math.min),n=e(Math.max);a.getBoundsXY=function(a,c){if(void 0!==c.paths)return l(a,c.paths,!1,!1);if(void 0!==c.rings)return l(a,c.rings,!1,!1);if(void 0!==c.points)return g(a,c.points,!1,!1,!1,!1);if(m(c))return h(a,c);void 0!==c.x&&void 0!==c.y&&(a[0]=c.x,a[1]=c.y,a[2]=c.x,a[3]=c.y);return a};a.getBoundsXYZ=function(a,c){if(void 0!==c.paths)return l(a,c.paths,!0,!1);if(void 0!==c.rings)return l(a,c.rings,!0,!1);if(void 0!==
    c.points)return g(a,c.points,!0,!1,!0,!1);if(m(c))return h(a,c,!0,!1,!0,!1);void 0!==c.x&&void 0!==c.y&&(a[0]=c.x,a[1]=c.y,a[2]=c.z,a[3]=c.x,a[4]=c.y,a[5]=c.z);return a};a.getRingsOrPathsBounds=l;a.getExtentBounds=h;a.getPointsBounds=g;a.getPointsBoundsWidth=function(a){if(!a.length||!a[0].length)return null;for(var b=a[0][0],c=a[0][0],e=0;e<a.length;e++)var f=a[e][0],b=d(b,f),c=n(c,f);return c-b};a.getPointsBoundsCenterX=function(a){if(!a.length||!a[0].length)return null;for(var b=a[0][0],c=a[0][0],
    e=0;e<a.length;e++)var f=a[e][0],b=d(b,f),c=n(c,f);return b+.5*(c-b)}})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/extentUtils ./support/zmUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k){c=function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.paths=
    [];b.type="polyline";return b}m(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,c){var d=null,e,f,k=null;a&&!Array.isArray(a)?(d=a.paths?a.paths:null,c||(a.spatialReference?c=a.spatialReference:a.paths||(c=a)),e=a.hasZ,f=a.hasM):d=a;d=d||[];c=c||b.WGS84;d.length&&d[0]&&null!=d[0][0]&&"number"===typeof d[0][0]&&(d=[d]);if(k=d[0]&&d[0][0])void 0===e&&void 0===f?(e=2<k.length,f=!1):void 0===e?e=!f&&3<k.length:void 0===f&&(f=!e&&3<k.length);return{paths:d,spatialReference:c,hasZ:e,hasM:f}};Object.defineProperty(c.prototype,
    "extent",{get:function(){var a=this.spatialReference,b=p.getPolylineExtent(this);if(!b)return null;b=new g(b);b.spatialReference=a;return b},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b){b.paths=l.clone(this.paths)};c.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,f=a.length;e<f;e++)d[e]=a[e].toArray();b[c]=d}return this}};c.prototype.clone=function(){var a=new d;a.spatialReference=
    this.spatialReference;a.paths=l.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;return b&&!c?new n(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new n(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new n(a[0],a[1],a[2],a[3],this.spatialReference):new n(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,
    !0))return this;this.clearCache();k.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};c.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new n(a,b)})};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new n(this.paths[a].splice(b,1)[0],this.spatialReference)};
    c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();k.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};c.prototype._validateInputs=function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};var d;e([h.property({dependsOn:["hasM","hasZ","paths"]})],c.prototype,
    "cache",void 0);e([h.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);e([h.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"paths",void 0);e([h.writer("paths")],c.prototype,"writePaths",null);return c=d=e([h.subclass("esri.geometry.Polyline")],c)}(h.declared(d));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Geometry ../Multipoint ../Point ../Polygon ../Polyline".split(" "),
    function(c,a,m,e,l,h,g,d){function n(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function b(a){return void 0!==a.points}function p(a){return void 0!==a.x&&void 0!==a.y}function k(a){return void 0!==a.paths}function q(a){return void 0!==a.rings}function f(a){return a?a instanceof e?a:p(a)?h.fromJSON(a):k(a)?d.fromJSON(a):q(a)?g.fromJSON(a):b(a)?l.fromJSON(a):n(a)?m.fromJSON(a):null:null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");
    }catch(u){console.warn(u.stack)}return f(a)};a.isExtent=n;a.isMultipoint=b;a.isPoint=p;a.isPolyline=k;a.isPolygon=q;a.isMesh=function(a){return void 0!==a.vertexAttributes};a.fromJSON=f;a.getJsonType=function(a){return a?p(a)?"esriGeometryPoint":k(a)?"esriGeometryPolyline":q(a)?"esriGeometryPolygon":n(a)?"esriGeometryEnvelope":b(a)?"esriGeometryMultipoint":null:null};var r={esriGeometryPoint:h,esriGeometryPolyline:d,esriGeometryPolygon:g,esriGeometryEnvelope:m,esriGeometryMultipoint:l};a.getGeometryType=
    function(a){return a&&r[a]||null}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./ArrayPool ./arrayUtils ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k){function q(a){return a?a instanceof y?a.toArray():a.length?Array.prototype.slice.apply(a):[]:[]}function f(a){if(a&&a.length)return a[0]}function r(a,b,c,d){b&&b.forEach(function(b,
    e,f){a.push(b);r(a,c.call(d,b,e,f),c,d)})}c=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var t=function(){},u=new n(c,!0,function(a){a.item=null;a.target=null}),w=new Set,v=new Set,x=new Set,z=new Map,A=0,y=function(a){function c(b){b=a.call(this,b)||this;b._chgListeners=[];b._notifications=null;b._timer=
    null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:A++});return b}m(c,a);n=c;c.isCollection=function(a){return null!=a&&a instanceof n};c.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||a instanceof n?{items:a}:a:{}};Object.defineProperty(c.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges(1)||(this._splice.apply(this,[0,this.length].concat(q(a))),this._emitAfterChanges(1))},enumerable:!0,configurable:!0});c.prototype.hasEventListener=
    function(a){return"change"===a?0<this._chgListeners.length:this._emitter.hasEventListener(a)};c.prototype.on=function(a,b){if("change"===a){var c=this._chgListeners,d={removed:!1,callback:b};c.push(d);this._notifications&&this._notifications.push({listeners:c.slice(),items:this._items.slice(),changes:[]});return{remove:function(){this.remove=t;d.removed=!0;c.splice(c.indexOf(d),1)}}}return this._emitter.on(a,b)};c.prototype.once=function(a,b){var c=this.on(a,b);return{remove:function(){c.remove()}}};
    c.prototype.add=function(a,b){if(this._emitBeforeChanges(1))return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges(1);return this};c.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges(1))return this;b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(q(a)));this._emitAfterChanges(1);return this};c.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges(2))return[];var a=this._splice(0,this.length)||
    [];this._emitAfterChanges(2);return a};c.prototype.clone=function(){return this._createNewInstance({items:this._items.map(d.clone)})};c.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(q);return this._createNewInstance({items:(c=this._items).concat.apply(c,a)})};c.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges(2)){for(var c=this._splice(0,this.length),d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges(2)}};c.prototype.every=
    function(a,b){return this._items.every(a,b)};c.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};c.prototype.find=function(a,b){return h.find(this._items,a,b)};c.prototype.findIndex=function(a,b){return h.findIndex(this._items,a,b)};c.prototype.flatten=function(a,b){var c=[];r(c,this,a,b);return new n(c)};c.prototype.forEach=function(a,b){return this._items.forEach(a,b)};c.prototype.getItemAt=function(a){return this._items[a]};
    c.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};c.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};c.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};c.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};c.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};c.prototype.map=function(a,
    b){a=this._items.map(a,b);return new n({items:a})};c.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges(4))return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges(4)}return a}};c.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges(2)){var a=f(this._splice(this.length-1,1));this._emitAfterChanges(2);return a}};c.prototype.push=function(){for(var a=[],
    b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges(1))return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges(1);return this.length};c.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};c.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};c.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};c.prototype.removeAt=
    function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges(2)))return a=f(this._splice(a,1)),this._emitAfterChanges(2),a};c.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges(2))return[];a=a instanceof n?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var f=b.indexOf(a[e]);if(-1<f){for(var k=e+1,p=f+1,g=Math.min(a.length-k,b.length-p),q=0;q<g&&a[k+q]===b[p+q];)q++;k=1+q;(f=this._splice(f,k))&&0<f.length&&c.push.apply(c,f);e+=k-1}}this._emitAfterChanges(2);
    return c};c.prototype.reverse=function(){if(this._emitBeforeChanges(4))return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges(4);return this};c.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges(2)){var a=f(this._splice(0,1));this._emitAfterChanges(2);return a}};c.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};c.prototype.some=
    function(a,b){return this._items.some(a,b)};c.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges(4))return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));this._emitAfterChanges(4);return this};c.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];d=(b?2:0)|(c.length?1:0);if(this._emitBeforeChanges(d))return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges(d);
    return c};c.prototype.toArray=function(){return this._items.slice()};c.prototype.toJSON=function(){return this.toArray()};c.prototype.toLocaleString=function(){return this._items.toLocaleString()};c.prototype.toString=function(){return this._items.toString()};c.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(!a.length||this._emitBeforeChanges(1))return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges(1);return this.length};c.prototype._createNewInstance=
    function(a){return new this.constructor(a)};c.prototype._splice=function(a,c){for(var d=this,e=[],f=2;f<arguments.length;f++)e[f-2]=arguments[f];var f=this._items,k=this.constructor.prototype.itemType,p,n;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=b.schedule(function(){return d._dispatchChange()}));if(c){n=f.splice(a,c);if(this.hasEventListener("before-remove")){var g=
    u.acquire();g.target=this;g.cancellable=!0;for(var q=0,h=n.length;q<h;q++)p=n[q],g.reset(p),this.emit("before-remove",g),g.defaultPrevented&&(n.splice(q,1),f.splice(a,0,p),a+=1,--q,--h);u.release(g)}this.length=this._items.length;if(this.hasEventListener("after-remove")){p=u.acquire();p.target=this;p.cancellable=!1;h=n.length;for(q=0;q<h;q++)p.reset(n[q]),this.emit("after-remove",p);u.release(p)}}if(e&&e.length){if(k){q=[];for(h=0;h<e.length;h++)p=e[h],g=k.ensureType(p),null==g&&null!=p||q.push(g);
    e=q}k=this.hasEventListener("before-add");q=this.hasEventListener("after-add");h=a===this.length;if(k||q){p=u.acquire();p.target=this;p.cancellable=!0;g=u.acquire();g.target=this;g.cancellable=!1;for(var r=0,l=e;r<l.length;r++){var t=l[r];k?(p.reset(t),this.emit("before-add",p),p.defaultPrevented||(h?f.push(t):f.splice(a++,0,t),this._set("length",f.length),q&&(g.reset(t),this.emit("after-add",g)))):(h?f.push(t):f.splice(a++,0,t),this._set("length",f.length),g.reset(t),this.emit("after-add",g))}u.release(g);
    u.release(p)}else h?f.push.apply(f,e):f.splice.apply(f,[a,0].concat(e)),this._set("length",f.length)}(e&&e.length||n&&n.length)&&this._notifyChangeEvent(e,n);return n};c.prototype._emitBeforeChanges=function(a){var b=!1;if(this.hasEventListener("before-changes")){var c=u.acquire();c.target=this;c.cancellable=!0;c.type=a;this.emit("before-changes",c);b=c.defaultPrevented;u.release(c)}return b};c.prototype._emitAfterChanges=function(a){if(this.hasEventListener("after-changes")){var b=u.acquire();b.target=
    this;b.cancellable=!1;b.type=a;this.emit("after-changes",b);u.release(b)}};c.prototype._notifyChangeEvent=function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};c.prototype._dispatchChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;w.clear();v.clear();x.clear();for(var d=0;d<b.length;d++){var e=
    b[d],f=e.added,e=e.removed;if(f)if(0===x.size&&0===v.size)for(var k=0,p=f;k<p.length;k++)f=p[k],w.add(f);else for(k=0,p=f;k<p.length;k++)f=p[k],v.has(f)?(x.add(f),v.delete(f)):x.has(f)||w.add(f);if(e)if(0===x.size&&0===w.size)for(k=0;k<e.length;k++)f=e[k],v.add(f);else for(k=0;k<e.length;k++)f=e[k],w.has(f)?w.delete(f):(x.delete(f),v.add(f))}var n=l.acquire();w.forEach(function(a){n.push(a)});var g=l.acquire();v.forEach(function(a){g.push(a)});var q=c._items,h=a.items,r=l.acquire();x.forEach(function(a){h.indexOf(a)!==
    q.indexOf(a)&&r.push(a)});if(a.listeners&&(n.length||g.length||r.length))for(b={target:c,added:n,removed:g,moved:r},d=a.listeners.length,f=0;f<d;f++)e=a.listeners[f],e.removed||e.callback.call(c,b);l.release(n);l.release(g);l.release(r)},c=this,d=0;d<a.length;d++)b(a[d]);w.clear();v.clear();x.clear()}};var n;c.ofType=function(a){if(!a)return n;if(z.has(a))return z.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var d=
    a.typeMap[c].prototype.declaredClass;b=b?b+(" | "+d):d}c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);return c=e([p.subclass("esri.core.Collection\x3c"+b+"\x3e")],c)}(p.declared(n));d={Type:a,ensureType:"function"===typeof a?k.ensureType(a):k.ensureOneOfType(a)};Object.defineProperty(c.prototype,"itemType",{value:d});z.set(a,c);return c};e([p.property()],c.prototype,"length",void 0);e([p.property()],c.prototype,"items",null);return c=n=e([p.subclass("esri.core.Collection")],
    c)}(p.declared(g.EventedAccessor));return y})},"esri/core/Evented":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/utils".split(" "),function(c,a,m,e,l,h,g){var d=function(){function a(b){this._emitter=new a.EventEmitter(this);this._emitter=new a.EventEmitter(b&&void 0!==b.target?b.target:this)}a.prototype.emit=function(a,c){return this._emitter.emit(a,c)};a.prototype.on=function(a,c){return this._emitter.on(a,
    c)};a.prototype.once=function(a,c){return this._emitter.once(a,c)};a.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return a}();(function(a){var b=function(){function a(a){this.target=a}a.prototype.clear=function(){this._listenersMap&&this._listenersMap.clear()};a.prototype.emit=function(a,b){var c=this;a=this._listenersMap&&this._listenersMap.get(a);if(!a)return!1;b=b||{};if(!b.target&&this.target||b.target&&!this.target)b.target=this.target;a.slice().forEach(function(a){a.call(c.target,
    b)});return 0<a.length};a.prototype.on=function(a,b){var c=this;if(Array.isArray(a)){var d=a.map(function(a){return c.on(a,b)});return g.handlesGroup(d)}if(-1<a.indexOf(","))throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);d=this._listenersMap.get(a)||[];d.push(b);this._listenersMap.set(a,d);return{remove:function(){var d=c._listenersMap&&c._listenersMap.get(a)||[];0<=d.indexOf(b)&&d.splice(d.indexOf(b),
    1)}}};a.prototype.once=function(a,b){var c=this,d;return d=this.on(a,function(a){d.remove();b.call(c.target,a)})};a.prototype.hasEventListener=function(a){a=this._listenersMap&&this._listenersMap.get(a);return null!=a&&0<a.length};return a}();a.EventEmitter=b;a.EventedMixin=function(a){return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c._emitter=new b(c);return c}m(c,a);c.prototype.emit=function(a,b){return this._emitter.emit(a,b)};c.prototype.on=function(a,b){return this._emitter.on(a,
    b)};c.prototype.once=function(a,b){return this._emitter.once(a,b)};c.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return c=e([h.subclass("esri.core.Evented")],c)}(h.declared(a))};var c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._emitter=new d.EventEmitter(b);return b}m(b,a);b.prototype.emit=function(a,b){return this._emitter.emit(a,b)};b.prototype.on=function(a,b){return this._emitter.on(a,b)};b.prototype.once=function(a,b){return this._emitter.once(a,
    b)};b.prototype.hasEventListener=function(a){return this._emitter.hasEventListener(a)};return b=e([h.subclass("esri.core.Evented")],b)}(h.declared(l));a.EventedAccessor=c})(d||(d={}));return d})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,c,h){void 0===h&&(h=m);c||(c=new h);if(c===a)return c;c.removeAll();a&&(Array.isArray(a)||"items"in a&&Array.isArray(a.items))?c.addMany(a):
    a&&c.add(a);return c};a.castForReferenceSetter=function(a){return a}})},"esri/core/Loadable":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./Error ./lang ./Promise ./promiseUtils ./Warning ./accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g,d,n,b,p){var k=function(a){a=function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;d.loadError=null;d.loadStatus="not-loaded";d.loadWarnings=
    null;d._set("loadWarnings",[]);d.addResolvingPromise(n.create(function(a){var b=d.load.bind(d);d.load=function(c){var e=n.create(function(a,b){n.onAbortOrThrow(c,b);d.destroyed&&b(new h("load:instance-destroyed","Instance is destroyed",{instance:d}));d._promiseProps.when(a,b)});if("not-loaded"===d.loadStatus){d._set("loadStatus","loading");var f=d._loadController=n.createAbortController();b({signal:f.signal});n.onAbort(f.signal,function(){d._promiseProps.abort()})}a();return e}}));d.when(function(){d._set("loadStatus",
    "loaded");d._loadController=null},function(a){d._set("loadStatus","failed");d._set("loadError",a);d._loadController=null});return d}m(c,a);Object.defineProperty(c.prototype,"loaded",{get:function(){return"loaded"===this.loadStatus},enumerable:!0,configurable:!0});c.prototype.load=function(){return null};c.prototype.cancelLoad=function(){if(this.isFulfilled())return this;this._set("loadError",new h("load:cancelled","Cancelled"));this._loadController.abort();return this};e([p.property({readOnly:!0,
    dependsOn:["loadStatus"]})],c.prototype,"loaded",null);e([p.property({readOnly:!0})],c.prototype,"loadError",void 0);e([p.property()],c.prototype,"loadStatus",void 0);e([p.property({type:[b],readOnly:!0})],c.prototype,"loadWarnings",void 0);return c=e([p.subclass("esri.core.Loadable")],c)}(p.declared(a));a.prototype["-chains-"]=g.mixin({},l._meta.chains,{load:"after"});return a};c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b=e([p.subclass("esri.core.Loadable")],
    b)}(p.declared(k(d.EsriPromise)));(function(a){a.LoadableMixin=k;a.isLoadable=function(a){return!(!a||!a.load)}})(c||(c={}));return c})},"esri/core/Promise":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./has ./promiseUtils ./scheduling ./accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});var b=function(){function a(a){var b=this;this.instance=a;this._resolver=g.createDeferred();
    this._status=void 0;this._resolvingPromises=[];this._resolver.promise.then(function(){b._status=0;b._cleanUp()},function(){b._status=1;b._cleanUp()})}a.prototype.addResolvingPromise=function(a){this._resolvingPromises.push(a);this._tryResolve()};a.prototype.isResolved=function(){return 0===this._status};a.prototype.isRejected=function(){return 1===this._status};a.prototype.isFulfilled=function(){return null!=this._status};a.prototype.abort=function(){this._resolver.reject(g.createAbortError())};a.prototype.when=
    function(a,b){return this._resolver.promise.then(a,b)};a.prototype._cleanUp=function(){this._allPromise=this._resolvingPromises=this._allPromise=null};a.prototype._tryResolve=function(){var a=this;if(!this.isFulfilled()){var b=g.createDeferred(),c=this._resolvingPromises.concat([b.promise]),e=this._allPromise=g.all(c);e.then(function(){a.isFulfilled()||a._allPromise!==e||a._resolver.resolve(a.instance)},function(b){a.isFulfilled()||a._allPromise!==e||g.isAbortError(b)||a._resolver.reject(b)});h("esri-native-promise")?
    b.resolve():d.schedule(function(){return b.resolve()})}};return a}();a.EsriPromiseMixin=function(a){return function(a){function c(){for(var c=[],e=0;e<arguments.length;e++)c[e]=arguments[e];c=a.apply(this,c)||this;c._promiseProps=new b(c);c.addResolvingPromise(h("esri-native-promise")?g.resolve():g.create(function(a){return d.schedule(a)}));return c}m(c,a);c.prototype.isResolved=function(){return this._promiseProps.isResolved()};c.prototype.isRejected=function(){return this._promiseProps.isRejected()};
    c.prototype.isFulfilled=function(){return this._promiseProps.isFulfilled()};c.prototype.when=function(a,b){var c=this;return g.create(function(a,b){c._promiseProps.when(a,b)}).then(a,b)};c.prototype.catch=function(a){return this.when(null,a)};c.prototype.addResolvingPromise=function(a){a&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in a?a.when():a)};return c=e([n.subclass("esri.core.Promise")],c)}(n.declared(a))};c=function(a){function b(){return null!==
    a&&a.apply(this,arguments)||this}m(b,a);return b=e([n.subclass("esri.core.Promise")],b)}(n.declared(a.EsriPromiseMixin(l)));a.EsriPromise=c})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(c,a,m,e,l){c=function(a){function c(d,e,b){var p=a.call(this,d,e,b)||this;return p instanceof c?p:new c(d,e,b)}m(c,a);return c}(l);c.prototype.type="warning";return c})},"esri/core/loadAll":function(){define("require exports ./tsSupport/generatorHelper ./tsSupport/awaiterHelper ./asyncUtils ./Collection ./Loadable".split(" "),
    function(c,a,m,e,l,h,g){function d(a,c){return e(this,void 0,void 0,function(){return m(this,function(b){switch(b.label){case 0:return[4,a.load()];case 1:return b.sent(),[2,n(a,c)]}})})}function n(a,c){return e(this,void 0,void 0,function(){var b,d,f,n=this;return m(this,function(k){switch(k.label){case 0:return b=[],d=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];for(c=0;c<a.length;c++){var e=a[c];e&&(Array.isArray(e)?d.apply(void 0,e):h.isCollection(e)?e.forEach(function(a){return d(a)}):
    g.isLoadable(e)&&b.push(e))}},c(d),f=null,[4,l.map(b,function(a){return e(n,void 0,void 0,function(){var b;return m(this,function(c){switch(c.label){case 0:return[4,l.result("loadAll"in a&&"function"===typeof a.loadAll?a.loadAll():a.load())];case 1:return b=c.sent(),!1!==b.ok||f||(f=a),[2]}})})})];case 1:k.sent();if(f)throw f.loadError;return[2,a]}})})}Object.defineProperty(a,"__esModule",{value:!0});a.loadAll=d;a.loadAllChildren=n;a.default=d})},"esri/core/tsSupport/awaiterHelper":function(){define(["../promiseUtils"],
    function(c){return function(a,m,e,l){var h=null;return c.create(function(e,d){function n(a){try{p(l.next(a))}catch(q){d(q)}}function b(a){try{p(l["throw"](a))}catch(q){d(q)}}function p(a){a.done?(h=c.when(a.value),h.then(e,d)):(h=c.when(a.value),h.then(n,b))}p((l=l.apply(a,m||[])).next())},function(a){h&&h.cancel&&h.cancel(a)})}})},"esri/core/asyncUtils":function(){define(["require","exports","./tsSupport/generatorHelper","./tsSupport/awaiterHelper","./promiseUtils"],function(c,a,m,e,l){Object.defineProperty(a,
    "__esModule",{value:!0});a.forEach=function(a,c,d){return l.eachAlways(a.map(function(a,b){return c.apply(d,[a,b])}))};a.map=function(a,c,d){return l.eachAlways(a.map(function(a,b){return c.apply(d,[a,b])})).then(function(a){return a.map(function(a){return a.value})})};a.result=function(a){return a.then(function(a){return{ok:!0,value:a}}).catch(function(a){return{ok:!1,error:a}})};a.assertResult=function(a){if(!0===a.ok)return a.value;throw a.error;}})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper ../config ../kernel ./Error ./global ./Logger ./string".split(" "),
    function(c,a,m,e,l,h,g,d,n){function b(a){var b={path:null,query:null},c=new Q(a),d=a.indexOf("?");null===c.query?b.path=a:(b.path=a.substring(0,d),b.query=p(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b}function p(a){var b={},c=0;for(a=a.split("\x26");c<a.length;c++){var d=a[c];if(d){var e=d.indexOf("\x3d"),f=void 0,k=void 0;0>e?(f=decodeURIComponent(d),k=""):(f=decodeURIComponent(d.slice(0,e)),k=decodeURIComponent(d.slice(e+
    1)));d=b[f];"string"===typeof d&&(d=b[f]=[d]);Array.isArray(d)?d.push(k):b[f]=k}}return b}function k(a){return a&&"object"===typeof a&&"toJSON"in a&&"function"===typeof a.toJSON}function q(a,b){return a?b&&"function"===typeof b?Object.keys(a).map(function(c){return encodeURIComponent(c)+"\x3d"+encodeURIComponent(b(c,a[c]))}).join("\x26"):Object.keys(a).map(function(c){var d=a[c];if(null==d)return"";var e=encodeURIComponent(c)+"\x3d";return(c=b&&b[c])?e+encodeURIComponent(c(d)):Array.isArray(d)?d.map(function(a){return k(a)?
    e+encodeURIComponent(JSON.stringify(a)):e+encodeURIComponent(a)}).join("\x26"):k(d)?e+encodeURIComponent(JSON.stringify(d)):e+encodeURIComponent(d)}).filter(function(a){return a}).join("\x26"):""}function f(a){var b=a.indexOf("?");-1!==b?(S.path=a.slice(0,b),S.query=a.slice(b+1)):(S.path=a,S.query=null);return S}function r(a){a=f(a).path;a&&"/"===a[a.length-1]||(a+="/");a=M(a,!0);return a=a.toLowerCase()}function t(a){var b=aa.proxyRules;a=r(a);for(var c=0;c<b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}
    function u(a){a=z(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function w(a,b,c){void 0===c&&(c=!1);a=ia(a);b=ia(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function v(b,c,d){void 0===c&&(c=a.appBaseUrl);if(G(b))return d&&d.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===y(b).slice(2)?"http:"+b:"https:"+b;if(!J(b)){d=A;if("/"===b[0]){var e=c.indexOf("//"),e=c.indexOf("/",e+2);c=-1===e?
    c:c.slice(0,e)}return d(c,b)}return b}function x(b,c,d){void 0===c&&(c=a.appBaseUrl);if(!B(b))return b;var e=z(b),f=e.toLowerCase();c=z(c).toLowerCase().replace(/\/+$/,"");if((d=d?z(d).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(d))return b;for(var k=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},p=k(f,"/",f.indexOf("//")+2),n=-1;f.slice(0,p+1)===c.slice(0,p)+"/";){n=p+1;if(p===f.length)break;p=k(f,"/",p+1)}if(-1===n||d&&n<d.length)return b;b=e.slice(n);e=c.slice(n-1).replace(/[^/]+/g,
    "").length;if(0<e)for(f=0;f<e;f++)b="../"+b;else b="./"+b;return b}function z(a){a=a.trim();a=v(a);if(/^https?:\/\//i.test(a)){var b=f(a);a=b.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");b.query&&(a+="?"+b.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=O(a)}function A(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(B(a[0])){var c=a[0],d=c.indexOf("//");-1!==d&&(b.push(c.slice(0,d+1)),X.test(a[0])&&(b[0]+="/"),a[0]=c.slice(d+2))}else"/"===
    a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)d=a[c],".."===d&&0<b.length&&".."!==b[b.length-1]?b.pop():(!d&&c===a.length-1||d&&("."!==d||0===b.length))&&b.push(d);return b.join("/")}}function y(a,b){void 0===b&&(b=!1);if(D(a)||E(a))return null;var c=a.indexOf("://");if(-1===c&&G(a))c=2;else if(-1!==c)c+=3;else return null;c=a.indexOf("/",c);-1!==c&&(a=a.slice(0,c));b&&(a=M(a,!0));return a}function B(a){return G(a)||J(a)}function D(a){return"blob:"===
    a.slice(0,5)}function E(a){return"data:"===a.slice(0,5)}function C(a){a=F(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer}function F(a){return(a=a.match(W))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function I(a){var b=C(a);if(!b)return null;a=F(a);return new Blob([b],{type:a.mediaType})}function G(a){return a&&"/"===a[0]&&"/"===a[1]}function J(a){return ma.test(a)}function H(b){return P.test(b)||"http"===
    a.appUrl.scheme&&G(b)}function N(a){return G(a)?"https:"+a:a.replace(P,"https:")}function L(){return"https"===a.appUrl.scheme}function M(a,b){void 0===b&&(b=!1);if(G(a))return a.slice(2);a=a.replace(ma,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function O(b){var c=aa.httpsDomains;if(!H(b))return b;var d=b.indexOf("/",7),e;e=-1===d?b:b.slice(0,d);e=e.toLowerCase().slice(7);if(ja.test(e))if(n.endsWith(e,":80"))e=e.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&
    e===a.appUrl.authority&&!da.test(b))return b;if(L()&&e===a.appUrl.authority||c&&c.some(function(a){return e===a||n.endsWith(e,"."+a)})||L()&&!t(b))b=N(b);return b}function T(a,b,c){if(!(b&&c&&a&&B(a)))return a;var d=a.indexOf("//"),e=a.indexOf("/",d+2),f=a.indexOf(":",d+2),e=Math.min(0>e?a.length:e,0>f?a.length:f);if(a.slice(d+2,e).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,d+2);a=a.slice(e);return""+b+c+a}function ia(b){if("string"===typeof b)return new Q(v(b));b.scheme||(b.scheme=a.appUrl.scheme);
    return b}function la(b,c){var d=c&&c.url&&c.url.path;b&&d&&(b=v(b,d,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(d=c.urlKey+"."+c.customBaseUrl,c=w(a.appUrl,a.appUrl.scheme+"://"+d)?T(b,c.portalHostname,d):T(b,d,c.portalHostname)):c=b;return c}function sa(a,b){if(!a)return a;!B(a)&&b&&b.blockedRelativeUrls&&b.blockedRelativeUrls.push(a);var c=v(a);if(b){var d=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;d&&(c=x(c,d,d),c!==
    a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?T(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;B(c)&&(c=z(c));return c}function ca(a,c,d){a=b(a);var e=a.query||{};e[c]=String(d);return a.path+"?"+q(e)}Object.defineProperty(a,"__esModule",{value:!0});var U=d.getLogger("esri.core.urlUtils"),aa=e.request,ma=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,P=/^\s*http:/i,V=/^\s*https:/i,X=/^\s*file:/i,ja=/:\d+$/,da=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,
    Y=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,ba=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,Q=function(){function a(a){void 0===a&&(a="");this.uri=a;this.port=this.host=this.password=this.user=this.fragment=this.query=this.path=this.authority=this.scheme=null;a=this.uri.match(Y);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(ba),
    this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)}a.prototype.toString=function(){return this.uri};return a}();a.Url=Q;a.appUrl=new Q(e.applicationUrl);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=b;a.queryToObject=p;a.objectToQuery=q;a.getProxyUrl=function(c){void 0===
    c&&(c=!1);var d,e=aa.proxyUrl;if("string"===typeof c){if(d=c,d=V.test(d)||"https"===a.appUrl.scheme&&G(d),c=t(c))e=c.proxyUrl}else d=!!c;if(!e)throw U.warn("esri/config: esriConfig.request.proxyUrl is not set."),new h("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");d&&L()&&(e=N(e));return b(e)};a.addProxy=function(a){var c=t(a),d,e;c&&(e=f(c.proxyUrl),d=e.path,e=e.query?p(e.query):null);d&&(c=b(a),a=d+"?"+c.path,(d=q(m({},e,c.query)))&&(a=a+"?"+d));return a};var S=
    {path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:r(a.urlPrefix)};for(var b=aa.proxyRules,c=a.urlPrefix,d=b.length,e=0;e<b.length;e++){var f=b[e].urlPrefix;if(0===c.indexOf(f)){if(c.length===f.length)return-1;d=e;break}0===f.indexOf(c)&&(d=e+1)}b.splice(d,0,a);return d};a.getProxyRule=t;a.hasSamePortal=function(a,b){a=u(a);b=u(b);return M(a)===M(b)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&n.startsWith(a,
    b)},c=aa.interceptors;if(c)for(var d=0;d<c.length;d++){var e=c[d];if(Array.isArray(e.urls)){if(e.urls.some(b))return e}else if(b(e.urls))return e}return null};a.hasSameOrigin=w;a.isTrustedServer=function(b){if("string"===typeof b)if(B(b))b=ia(b);else return!0;if(w(b,a.appUrl))return!0;for(var c=aa.trustedServers||[],d=0;d<c.length;d++){var e;e=c[d];a.trustedServersUrlCache[e]||(J(e)||G(e)?a.trustedServersUrlCache[e]=[new Q(v(e))]:a.trustedServersUrlCache[e]=[new Q("http://"+e),new Q("https://"+e)]);
    e=a.trustedServersUrlCache[e];for(var f=0;f<e.length;f++)if(w(b,e[f]))return!0}return!1};a.makeAbsolute=v;a.makeRelative=x;a.normalize=z;a.join=A;a.getOrigin=y;a.isAbsolute=B;a.isBlobProtocol=D;a.isDataProtocol=E;a.dataToArrayBuffer=C;var W=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=F;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.dataToBlob=I;a.downloadDataAsFile=function(a,b){var c;a:if(c=document.createElement("a"),"download"in
    c){var d=null;if(g.URL&&g.URL.createObjectURL){d=I(a);if(!d){c=!1;break a}d=g.URL.createObjectURL(d)}c.download=b;c.href=d||a;c.style.display="none";document.body.appendChild(c);c.click();document.body.removeChild(c);d&&g.URL.revokeObjectURL(d);c=void 0}else c=!1;c||window.navigator.msSaveOrOpenBlob&&window.navigator.msSaveOrOpenBlob(I(a),b)};a.isProtocolRelative=G;a.hasProtocol=J;a.toHTTP=function(a){return G(a)?"http:"+a:a.replace(V,"http:")};a.toHTTPS=N;a.isAppHTTPS=L;a.removeFile=function(a){var b=
    0;if(B(a)){var c=a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=T;a.fromJSON=la;a.read=function(a,b,c){return la(a,c)};a.toJSON=sa;a.write=function(a,b,c,d){(a=sa(a,d))&&(b[c]=a)};a.isSVG=function(a){return fa.test(a)};a.removeQueryParameters=function(a,c){a=b(a);var d=Object.keys(a.query||{});0<d.length&&c&&c.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+
    d.join(", ")+".");return a.path};a.addQueryParameter=ca;a.addQueryParameters=function(a,c){a=b(a);var d=a.query||{},e;for(e in c)d[e]=c[e];return(c=q(d))?a.path+"?"+c:a.path};a.removeQueryParameter=function(a,c){var d=b(a),e=d.path,d=d.query;if(!d)return a;delete d[c];return(a=q(d))?e+"?"+a:e};a.addTokenParameter=function(a){var b=l.id&&l.id.findCredential(a);return b&&b.token?ca(a,"token",b.token):a};var fa=/(^data:image\/svg|\.svg$)/i})},"esri/config":function(){define(["require","exports","./core/global"],
    function(c,a,m){c={applicationUrl:m.location&&m.location.href,fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" "),
    interceptors:[],maxUrlLength:2E3,proxyRules:[],proxyUrl:null,timeout:6E4,trustedServers:[],useIdentity:!0}};c.request.corsEnabledServers=[];c.request.corsEnabledServers.push=function(){console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664");return 0};return c})},"esri/kernel":function(){define("require exports dojo/_base/kernel ./core/has ./core/promiseUtils ./support/revision".split(" "),function(c,a,m,e,
    l,h){Object.defineProperty(a,"__esModule",{value:!0});a.revision=h.commitHash;(function(){var a=m.config,c=a.has&&void 0!==a.has["config-deferredInstrumentation"],n=a.has&&void 0!==a.has["config-useDeferredInstrumentation"];void 0!==a.useDeferredInstrumentation||c||n||(e.add("config-deferredInstrumentation",!1,!0,!0),e.add("config-useDeferredInstrumentation",!1,!0,!0))})();a.version="4.14";a.workerMessages={request:function(a){return l.create(function(a){c(["./request"],a)}).then(function(c){var d=
    a.options||{};d.responseType="array-buffer";return c(a.url,d)}).then(function(a){return{result:{data:a.data,ssl:a.ssl},transferList:[a.data]}})}};!e("host-webworker")&&e("esri-console-log-version")&&console.debug("Using ArcGIS API for JavaScript "+a.version+" [Date: "+h.buildDate+", Revision: "+h.commitHash.slice(0,8)+"]")})},"esri/support/revision":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.buildDate="20200225";a.commitHash="a7c61d146adcb667e94a631c9f2b1f4fe0c6e051"})},
    "esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/paramHelper dojo/_base/kernel ../config ../kernel ../request ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser @dojo/framework/shim/Promise".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B){var D,E={PortalGroup:function(){return w.create(function(a){return c(["./PortalGroup"],a)})},PortalItem:function(){return w.create(function(a){return c(["./PortalItem"],a)})},PortalUser:function(){return w.create(function(a){return c(["./PortalUser"],a)})}};return function(a){function d(c){c=a.call(this,c)||this;c.access=null;c.allSSL=!1;c.authMode="auto";c.authorizedCrossOriginDomains=null;c.basemapGalleryGroupQuery=null;c.bingKey=null;c.canListApps=
    !1;c.canListData=!1;c.canListPreProvisionedItems=!1;c.canProvisionDirectPurchase=!1;c.canSearchPublic=!0;c.canShareBingPublic=!1;c.canSharePublic=!1;c.canSignInArcGIS=!1;c.canSignInIDP=!1;c.colorSetsGroupQuery=null;c.commentsEnabled=!1;c.created=null;c.culture=null;c.customBaseUrl=null;c.defaultBasemap=null;c.defaultExtent=null;c.defaultVectorBasemap=null;c.description=null;c.eueiEnabled=!1;c.featuredGroups=null;c.featuredItemsGroupQuery=null;c.galleryTemplatesGroupQuery=null;c.livingAtlasGroupQuery=
    null;c.hasCategorySchema=!1;c.helperServices=null;c.homePageFeaturedContent=null;c.homePageFeaturedContentCount=null;c.httpPort=null;c.httpsPort=null;c.id=null;c.ipCntryCode=null;c.isPortal=!1;c.isReadOnly=!1;c.layerTemplatesGroupQuery=null;c.maxTokenExpirationMinutes=null;c.modified=null;c.name=null;c.portalHostname=null;c.portalMode=null;c.portalProperties=null;c.region=null;c.rotatorPanels=null;c.showHomePageDescription=!1;c.sourceJSON=null;c.supportsHostedServices=!1;c.symbolSetsGroupQuery=null;
    c.templatesGroupQuery=null;c.units=null;c.url=b.portalUrl;c.urlKey=null;c.user=null;c.useStandardizedQuery=!1;c.useVectorBasemaps=!1;c.vectorBasemapGalleryGroupQuery=null;return c}l(d,a);f=d;d.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};d.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};d.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var c=0;c<
    a.length;c++){var d=a[c];-1===b.request.trustedServers.indexOf(d)&&b.request.trustedServers.push(d)}return a};d.prototype.readDefaultBasemap=function(a){return a?(a=D.fromJSON(a),a.portalItem={portal:this},a):null};d.prototype.readDefaultVectorBasemap=function(a){return a?(a=D.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(d.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,
    configurable:!0});Object.defineProperty(d.prototype,"isOrganization",{get:function(){return!!this.access},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+
    b):null},enumerable:!0,configurable:!0});d.prototype.readUrlKey=function(a){return a?a.toLowerCase():a};d.prototype.readUser=function(a){var b=null;a&&(b=B.fromJSON(a),b.portal=this);return b};d.prototype.load=function(a){var b=this,d=w.create(function(a){return c(["../Basemap"],a)}).then(function(b){w.throwIfAborted(a);D=b}).then(function(){return b.sourceJSON?b.sourceJSON:b._fetchSelf(b.authMode,!1,a)}).then(function(a){if(p.id){var c=p.id;b.credential=c.findCredential(b.restUrl);b.credential||
    b.authMode!==f.AUTH_MODE_AUTO||(b._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(b.restUrl)&&b._signIn()}))}b.sourceJSON=a;b.read(a)});this.addResolvingPromise(d);return this.when()};d.prototype.createClosestFacilityTask=function(){return e(this,void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperServiceUrl("closestFacility"),[4,new Promise(function(a,b){c(["../tasks/ClosestFacilityTask"],
    a,b)})];case 2:return b=d.sent(),[2,new b(a)]}})})};d.prototype.createElevationLayers=function(){return e(this,void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperService("defaultElevationLayers"),[4,new Promise(function(a,b){c(["../layers/ElevationLayer"],a,b)})];case 2:return b=d.sent(),[2,a?a.map(function(a){return new b({id:a.id,url:a.url})}):[]]}})})};d.prototype.createGeometryService=function(){return e(this,
    void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperServiceUrl("geometry"),[4,new Promise(function(a,b){c(["../tasks/GeometryService"],a,b)})];case 2:return b=d.sent(),[2,new b(a)]}})})};d.prototype.createPrintTask=function(){return e(this,void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperServiceUrl("printTask"),[4,
    new Promise(function(a,b){c(["../tasks/PrintTask"],a,b)})];case 2:return b=d.sent(),[2,new b(a)]}})})};d.prototype.createRouteTask=function(){return e(this,void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperServiceUrl("route"),[4,new Promise(function(a,b){c(["../tasks/RouteTask"],a,b)})];case 2:return b=d.sent(),[2,new b(a)]}})})};d.prototype.createServiceAreaTask=function(){return e(this,void 0,void 0,function(){var a,
    b;return g(this,function(d){switch(d.label){case 0:return[4,this.load()];case 1:return d.sent(),a=this._getHelperServiceUrl("serviceArea"),[4,new Promise(function(a,b){c(["../tasks/ServiceAreaTask"],a,b)})];case 2:return b=d.sent(),[2,new b(a)]}})})};d.prototype.fetchBasemaps=function(a,b){var c=new A;c.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);c.disableExtraQuery=!0;return this.queryGroups(c,b).then(function(a){c.num=100;c.query='type:"Web Map" -type:"Web Application"';
    return a.total?(a=a.results[0],c.sortField=a.sortField||"name",c.sortOrder=a.sortOrder||"desc",a.queryItems(c,b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new D({portalItem:a})}):[]})};d.prototype.fetchCategorySchema=function(a){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",a).then(function(a){return a.categorySchema}):w.isAborted(a)?w.reject(w.createAbortError()):w.resolve([])};
    d.prototype.fetchFeaturedGroups=function(a){var b=this.featuredGroups,c=new A;c.num=100;c.sortField="title";if(b&&b.length){for(var d=[],e=0;e<b.length;e++){var f=b[e];d.push('(title:"'+f.title+'" AND owner:'+f.owner+")")}c.query=d.join(" OR ");return this.queryGroups(c,a).then(function(a){return a.results})}return w.isAborted(a)?w.reject(w.createAbortError()):w.resolve([])};d.prototype.fetchRegions=function(a){return this._request(this.restUrl+"/portals/regions",m({},a,{query:{culture:this.user&&
    this.user.culture||this.culture||n.locale}}))};d.getDefault=function(){if(!f._default||f._default.destroyed)f._default=new f;return f._default};d.prototype.queryGroups=function(a,b){return this._queryPortal("/community/groups",a,"PortalGroup",b)};d.prototype.queryItems=function(a,b){return this._queryPortal("/search",a,"PortalItem",b)};d.prototype.queryUsers=function(a,b){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser",b)};d.prototype.toJSON=function(){throw new q("internal:not-yet-implemented",
    "Portal.toJSON is not yet implemented");};d.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new f({sourceJSON:a})};d.prototype._getHelperService=function(a){var b=this.helperServices&&this.helperServices[a];if(!b)throw new q("portal:service-not-found",'The `helperServices` do not include an entry named "'+a+'"');return b};d.prototype._getHelperServiceUrl=function(a){var b=this._getHelperService(a);if(!b.url)throw new q("portal:service-url-not-found",
    'The `helperServices` entry "'+a+'" does not include a `url` value');return b.url};d.prototype._fetchSelf=function(a,b,c){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var d=this.restUrl+"/portals/self";a=m({authMode:a,query:{culture:n.locale}},c);"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(d,a)};d.prototype._queryPortal=function(a,b,c,d){var e=this,k=x.ensureType(A,b),p=function(b){return e._request(e.restUrl+a,m({},k.toRequestOptions(e),d)).then(function(a){var c=
    k.clone();c.start=a.nextStart;return new y({nextQueryParams:c,queryParams:k,total:a.total,results:f._resultsToTypedArray(b,{portal:e},a,d)})}).then(function(a){return w.all(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return a},function(b){w.throwIfAbortError(b);return a})})};return c&&E[c]?E[c]().then(function(a){w.throwIfAborted(d);return p(a)}):p()};d.prototype._signIn=function(){var a=this;if(this.authMode===f.AUTH_MODE_ANONYMOUS)return w.reject(new q("portal:invalid-auth-mode",
    'Current "authMode"\' is "'+this.authMode+'"'));if("failed"===this.loadStatus)return w.reject(this.loadError);var b=function(b){return w.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&
    (a.sourceJSON=b,a.read(b))})};return p.id?p.id.getCredential(this.restUrl).then(function(a){return b(a)}):b(this.credential)};d.prototype._normalizeSSL=function(a){return a.replace(/^http:/i,"https:").replace(":7080",":7443")};d.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};d.prototype._requestToTypedArray=function(a,b,d){var e=this,k=function(c){return e._request(a,b).then(function(a){var b=
    f._resultsToTypedArray(c,{portal:e},a);return w.all(b.map(function(b){return"function"===typeof b.when?b.when():a})).then(function(){return b},function(){return b})})};return d?w.create(function(a){return c(["./"+d],a)}).then(function(a){return k(a)}):k()};d.prototype._request=function(a,b){void 0===b&&(b={});var c=m({f:"json"},b.query),d=b.authMode,e=b.body,p=b.cacheBust,n=b.method,g=b.responseType;b={authMode:void 0===d?this.authMode===f.AUTH_MODE_ANONYMOUS?"anonymous":"auto":d,body:void 0===e?
    null:e,cacheBust:void 0===p?!1:p,method:void 0===n?"auto":n,query:c,responseType:void 0===g?"json":g,timeout:0,signal:b.signal};return k(this._normalizeSSL(a),b).then(function(a){return a.data})};d._resultsToTypedArray=function(a,b,c,d){if(c){var e=u.isSome(d)?d.signal:null;c=c.listings||c.notifications||c.userInvitations||c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c;if(a||b)c=c.map(function(c){c=r.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load(e);
    return c})}else c=[];return c};var f;d.AUTH_MODE_ANONYMOUS="anonymous";d.AUTH_MODE_AUTO="auto";d.AUTH_MODE_IMMEDIATE="immediate";h([v.property()],d.prototype,"access",void 0);h([v.property()],d.prototype,"allSSL",void 0);h([v.property()],d.prototype,"authMode",void 0);h([v.property()],d.prototype,"authorizedCrossOriginDomains",void 0);h([v.reader("authorizedCrossOriginDomains")],d.prototype,"readAuthorizedCrossOriginDomains",null);h([v.property()],d.prototype,"basemapGalleryGroupQuery",void 0);h([v.property()],
    d.prototype,"bingKey",void 0);h([v.property()],d.prototype,"canListApps",void 0);h([v.property()],d.prototype,"canListData",void 0);h([v.property()],d.prototype,"canListPreProvisionedItems",void 0);h([v.property()],d.prototype,"canProvisionDirectPurchase",void 0);h([v.property()],d.prototype,"canSearchPublic",void 0);h([v.property()],d.prototype,"canShareBingPublic",void 0);h([v.property()],d.prototype,"canSharePublic",void 0);h([v.property()],d.prototype,"canSignInArcGIS",void 0);h([v.property()],
    d.prototype,"canSignInIDP",void 0);h([v.property()],d.prototype,"colorSetsGroupQuery",void 0);h([v.property()],d.prototype,"commentsEnabled",void 0);h([v.property({type:Date})],d.prototype,"created",void 0);h([v.property()],d.prototype,"credential",void 0);h([v.property()],d.prototype,"culture",void 0);h([v.property()],d.prototype,"currentVersion",void 0);h([v.property()],d.prototype,"customBaseUrl",void 0);h([v.property()],d.prototype,"defaultBasemap",void 0);h([v.reader("defaultBasemap")],d.prototype,
    "readDefaultBasemap",null);h([v.property({type:z})],d.prototype,"defaultExtent",void 0);h([v.property()],d.prototype,"defaultVectorBasemap",void 0);h([v.reader("defaultVectorBasemap")],d.prototype,"readDefaultVectorBasemap",null);h([v.property()],d.prototype,"description",void 0);h([v.property()],d.prototype,"eueiEnabled",void 0);h([v.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],d.prototype,"extraQuery",null);h([v.property()],d.prototype,"featuredGroups",void 0);h([v.property()],
    d.prototype,"featuredItemsGroupQuery",void 0);h([v.property()],d.prototype,"galleryTemplatesGroupQuery",void 0);h([v.property()],d.prototype,"livingAtlasGroupQuery",void 0);h([v.property()],d.prototype,"hasCategorySchema",void 0);h([v.property()],d.prototype,"helpBase",void 0);h([v.property()],d.prototype,"helperServices",void 0);h([v.property()],d.prototype,"helpMap",void 0);h([v.property()],d.prototype,"homePageFeaturedContent",void 0);h([v.property()],d.prototype,"homePageFeaturedContentCount",
    void 0);h([v.property()],d.prototype,"httpPort",void 0);h([v.property()],d.prototype,"httpsPort",void 0);h([v.property()],d.prototype,"id",void 0);h([v.property()],d.prototype,"ipCntryCode",void 0);h([v.property({dependsOn:["access"],readOnly:!0})],d.prototype,"isOrganization",null);h([v.property()],d.prototype,"isPortal",void 0);h([v.property()],d.prototype,"isReadOnly",void 0);h([v.property()],d.prototype,"layerTemplatesGroupQuery",void 0);h([v.property()],d.prototype,"maxTokenExpirationMinutes",
    void 0);h([v.property({type:Date})],d.prototype,"modified",void 0);h([v.property()],d.prototype,"name",void 0);h([v.property()],d.prototype,"portalHostname",void 0);h([v.property()],d.prototype,"portalMode",void 0);h([v.property()],d.prototype,"portalProperties",void 0);h([v.property()],d.prototype,"region",void 0);h([v.property({dependsOn:["url"],readOnly:!0})],d.prototype,"restUrl",null);h([v.property()],d.prototype,"rotatorPanels",void 0);h([v.property()],d.prototype,"showHomePageDescription",
    void 0);h([v.property()],d.prototype,"sourceJSON",void 0);h([v.property()],d.prototype,"staticImagesUrl",void 0);h([v.property()],d.prototype,"stylesGroupQuery",void 0);h([v.property()],d.prototype,"supportsHostedServices",void 0);h([v.property()],d.prototype,"symbolSetsGroupQuery",void 0);h([v.property()],d.prototype,"templatesGroupQuery",void 0);h([v.property()],d.prototype,"thumbnail",void 0);h([v.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],d.prototype,"thumbnailUrl",null);h([v.property()],
    d.prototype,"units",void 0);h([v.property()],d.prototype,"url",void 0);h([v.property()],d.prototype,"urlKey",void 0);h([v.reader("urlKey")],d.prototype,"readUrlKey",null);h([v.property()],d.prototype,"user",void 0);h([v.reader("user")],d.prototype,"readUser",null);h([v.property()],d.prototype,"useStandardizedQuery",void 0);h([v.property()],d.prototype,"useVectorBasemaps",void 0);h([v.property()],d.prototype,"vectorBasemapGalleryGroupQuery",void 0);return d=f=h([v.subclass("esri.portal.Portal")],d)}(v.declared(f.JSONSupportMixin(t)))})},
    "esri/core/tsSupport/paramHelper":function(){define([],function(){return function(c,a){return function(m,e){a(m,e,c)}}})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/awaiterHelper ./core/tsSupport/generatorHelper ./config ./kernel ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/string ./core/urlUtils @dojo/framework/shim/Promise".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){function r(a,b){var c=k.createAbortController();
    return k.create(function(d,e){t(c.signal,a,b).then(d).catch(e)},function(){c.abort()})}function t(a,c,d){return e(this,void 0,void 0,function(){var e,p,n,g,q,r,u,t;return l(this,function(l){switch(l.label){case 0:return e=f.isDataProtocol(c),(p=f.isBlobProtocol(c))||e||(c=f.normalize(c)),n={url:c,requestOptions:m({},d)},(g=f.getInterceptor(c))?[4,E(g,n)]:[3,2];case 1:q=l.sent();if(null!=q)return[2,{data:q,getHeader:T,requestOptions:n.requestOptions,url:n.url}];g.after||g.error||(g=null);l.label=2;
    case 2:c=n.url;d=n.requestOptions;if("image"===d.responseType){if(b("host-webworker"))throw x("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),n);}else if(e)throw x("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+d.responseType),n);if("head"===d.method){if(d.body)throw x("request:invalid-parameters",Error("body parameter cannot be set when method is 'head'"),n);if(e||p)throw x("request:invalid-parameters",
    Error("data and blob URLs are not supported for method 'head'"),n);}return[4,z()];case 3:l.sent();if(H)return[2,H.execute(c,d)];r=k.createAbortController();k.onAbort(a,function(){return r.abort()});k.onAbort(d,function(){return r.abort()});u={controller:r,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:g,params:n,redoRequest:!1,useIdentity:h.request.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1};return[4,I(u)];case 4:return t=l.sent(),g&&g.after&&g.after(t),[2,
    t]}})})}function u(a){f.isBlobProtocol(a)||f.isDataProtocol(a)||(a=f.getOrigin(a))&&-1===r._corsServers.indexOf(a)&&r._corsServers.push(a)}function w(a){a=f.getOrigin(a);return!a||q.endsWith(a,".arcgis.com")||-1!==r._corsServers.indexOf(a)||f.isTrustedServer(a)}function v(){var a;try{a=new DOMException("Aborted","AbortError")}catch(la){a=Error("Aborted"),a.name="AbortError"}return a}function x(a,b,c,e){var f="Error",k={url:c.url,requestOptions:c.requestOptions,getHeader:T,ssl:!1};if(b instanceof d)return b.details?
    (b.details=p.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=k,b;if(b){c=e&&function(a){return e.headers.get(a)};var n=e&&e.status,g=b.message;g&&(f=g);c&&(k.getHeader=c);k.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||n||0;k.subCode=b.subcode;k.messageCode=b.messageCode;k.messages="string"===typeof b.details?[b.details]:b.details}a=new d(a,f,k);b&&"cancel"===b.dojoType&&(a.dojoType="cancel");return a}function z(){return e(this,void 0,void 0,function(){var a;
    return l(this,function(d){switch(d.label){case 0:return b("host-webworker")?H?[3,2]:[4,new Promise(function(a,b){c(["./core/workers/request"],a,b)})]:[3,3];case 1:H=d.sent(),d.label=2;case 2:return[3,6];case 3:if(r._abortableFetch)return[3,6];if(!b("esri-abortable-fetch")||!b("esri-native-promise")&&(13>b("safari")||13>b("ios")))return[3,4];r._abortableFetch=n.fetch.bind(n);return[3,6];case 4:return a=r,[4,new Promise(function(a,b){c(["whatwg-fetch"],a,b)})];case 5:a._abortableFetch=d.sent().fetch,
    d.label=6;case 6:return[2]}})})}function A(){return e(this,void 0,void 0,function(){return l(this,function(a){switch(a.label){case 0:return g.id?[3,2]:[4,new Promise(function(a,b){c(["./identity/IdentityManager"],a,b)})];case 1:a.sent(),a.label=2;case 2:return[2]}})})}function y(a){return e(this,void 0,void 0,function(){var b,c,d,e,f,p,q,h;return l(this,function(l){switch(l.label){case 0:b=a.params.url;c=a.params.requestOptions;d=a.controller.signal;e=c.body;q=p=f=null;N&&"HTMLFormElement"in n&&(e instanceof
    FormData?f=e:e instanceof HTMLFormElement&&(p=e,f=new FormData(p)));"string"===typeof e&&(q=e);a.fetchOptions={cache:c.cacheBust&&!r._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:c.headers||{},method:"head"===c.method?"HEAD":"GET",mode:"cors",redirect:"follow",signal:d};if(f||q)a.fetchOptions.body=f||q;"anonymous"===c.authMode&&(a.useIdentity=!1);a.hasToken=!!(/token=/i.test(b)||c.query&&c.query.token||f&&f.get&&f.get("token")||p&&p.elements.token);if(!a.useIdentity||
    a.hasToken||a.credentialToken||B(b)||k.isAborted(d))return[3,11];h=void 0;return"immediate"!==c.authMode?[3,3]:[4,A()];case 1:return l.sent(),[4,g.id.getCredential(b,{signal:d})];case 2:return h=l.sent(),a.credential=h,[3,10];case 3:return"no-prompt"!==c.authMode?[3,9]:[4,A()];case 4:l.sent(),l.label=5;case 5:return l.trys.push([5,7,,8]),[4,g.id.getCredential(b,{prompt:!1,signal:d})];case 6:return h=l.sent(),a.credential=h,[3,8];case 7:return l.sent(),[3,8];case 8:return[3,10];case 9:g.id&&(h=g.id.findCredential(b)),
    l.label=10;case 10:h&&(a.credentialToken=h.token,a.useSSL=!!h.ssl),l.label=11;case 11:return[2]}})})}function B(a){return O.some(function(b){return b.test(a)})}function D(a){return e(this,void 0,void 0,function(){var c,d,e,p,n,q,t,v,z,A,y,B,D,I,G,E,M,O,H,T,ia,L,R;return l(this,function(l){switch(l.label){case 0:c=a.params.url;d=a.params.requestOptions;e=a.fetchOptions;p=f.isBlobProtocol(c)||f.isDataProtocol(c);n=d.responseType||"json";q=p?0:null!=d.timeout?d.timeout:h.request.timeout;t=!1;if(!p){a.useSSL&&
    (c=f.toHTTPS(c));d.cacheBust&&"default"===e.cache&&(c=f.addQueryParameter(c,"request.preventCache",Date.now()));v=m({},d.query);a.credentialToken&&(v.token=a.credentialToken);z=f.objectToQuery(v);b("esri-url-encodes-apostrophe")&&(z=z.replace(/'/g,"%27"));A=c.length+1+z.length;y=void 0;t="post"===d.method||!!d.body||A>h.request.maxUrlLength;if(B=d.useProxy||!!f.getProxyRule(c))D=f.getProxyUrl(c),y=D.path,!t&&y.length+1+A>h.request.maxUrlLength&&(t=!0),D.query&&(v=m({},D.query,v));if("HEAD"===e.method&&
    (t||B)){if(t){if(A>h.request.maxUrlLength)throw x("request:invalid-parameters",Error("URL exceeds maximum length"),a.params);throw x("request:invalid-parameters",Error("cannot use POST request when method is 'head'"),a.params);}if(B)throw x("request:invalid-parameters",Error("cannot use proxy when method is 'head'"),a.params);}t?(e.method="POST",d.body?c=f.addQueryParameters(c,v):(e.body=f.objectToQuery(v),e.headers["Content-Type"]="application/x-www-form-urlencoded")):c=f.addQueryParameters(c,v);
    B&&(a.useProxy=!0,c=y+"?"+c);v.token&&N&&e.body instanceof FormData&&(I=e.body,I.set?I.set("token",v.token):I.append("token",v.token));d.hasOwnProperty("withCredentials")?a.withCredentials=d.withCredentials:f.isTrustedServer(c)?a.withCredentials=!0:g.id&&(G=g.id.findServerInfo(c))&&G.webTierAuth&&(a.withCredentials=!0);a.withCredentials&&(e.credentials="include")}E=0;M=!1;0<q&&(E=setTimeout(function(){M=!0;a.controller.abort()},q));l.label=1;case 1:return l.trys.push([1,18,19,20]),"image"!==d.responseType||
    "default"!==e.cache||"GET"!==e.method||t||C(d.headers)||!p&&!a.useProxy&&h.request.proxyUrl&&!w(c)?[3,3]:[4,J(c,a)];case 2:return H=l.sent(),[3,17];case 3:return[4,r._abortableFetch(c,e)];case 4:O=l.sent();a.useProxy||u(c);if(!O.ok||"HEAD"===e.method)return[3,17];T=n;switch(T){case "array-buffer":return[3,5];case "blob":return[3,7];case "image":return[3,7]}return[3,9];case 5:return[4,O.arrayBuffer()];case 6:return H=l.sent(),[3,11];case 7:return[4,O.blob()];case 8:return H=l.sent(),[3,11];case 9:return[4,
    O.text()];case 10:return H=l.sent(),[3,11];case 11:E&&(clearTimeout(E),E=0);if("json"===n||"xml"===n||"document"===n)if(H)switch(n){case "json":H=JSON.parse(H);break;case "xml":H=F(H,"application/xml");break;case "document":H=F(H,"text/html")}else H=null;ia=O.headers.get("Content-Type");if(!/application\/json|text\/plain/i.test(ia)||!(H instanceof ArrayBuffer&&750>=H.byteLength||H instanceof Blob&&750>=H.size))return[3,15];l.label=12;case 12:return l.trys.push([12,14,,15]),[4,(new Response(H)).json()];
    case 13:return L=l.sent(),L.error&&(H=L),[3,15];case 14:return l.sent(),[3,15];case 15:return"image"===n&&H instanceof Blob?[4,J(URL.createObjectURL(H),a,!0)]:[3,17];case 16:H=l.sent(),l.label=17;case 17:return[3,20];case 18:R=l.sent();if("AbortError"===R.name){if(M)throw Error("Timeout exceeded");throw k.createAbortError("Request canceled");}if(!O&&R instanceof TypeError&&h.request.proxyUrl&&!d.body&&"post"!==d.method&&"head"!==d.method&&!a.useProxy)a.redoRequest=!0,f.addProxyRule({proxyUrl:h.request.proxyUrl,
    urlPrefix:f.removeFile(f.urlToObject(c).path)});else throw R;return[3,20];case 19:return E&&clearTimeout(E),[7];case 20:return[2,[O,H]]}})})}function E(a,b){return e(this,void 0,void 0,function(){var c,e,f;return l(this,function(k){switch(k.label){case 0:if(null!=a.responseData)return[2,a.responseData];a.headers&&(b.requestOptions.headers=m({},b.requestOptions.headers,a.headers));a.query&&(b.requestOptions.query=m({},b.requestOptions.query,a.query));if(!a.before)return[3,5];e=c=void 0;k.label=1;case 1:return k.trys.push([1,
    3,,4]),[4,a.before(b)];case 2:return e=k.sent(),[3,4];case 3:return f=k.sent(),c=x("request:interceptor",f,b),[3,4];case 4:if(e instanceof Error||e instanceof d)c=x("request:interceptor",e,b);if(c)throw a.error&&a.error(c),c;return[2,e];case 5:return[2]}})})}function C(a){if(a)for(var b=0,c=Object.getOwnPropertyNames(a);b<c.length;b++)if(a[c[b]])return!0;return!1}function F(a,b){var c;try{c=(new DOMParser).parseFromString(a,b)}catch(ca){}if(!c||c.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");
    return c}function I(a){return e(this,void 0,void 0,function(){var b,c,d,e,k,p,n,q,r,u,t;return l(this,function(l){switch(l.label){case 0:return[4,y(a)];case 1:l.sent(),l.label=2;case 2:l.trys.push([2,8,,9]),l.label=3;case 3:return[4,D(a)];case 4:b=l.sent(),c=b[0],d=b[1],l.label=5;case 5:return[4,G(a,c,d)];case 6:if(!l.sent())return[3,3];l.label=7;case 7:return[3,9];case 8:throw e=l.sent(),k=x("request:server",e,a.params,c),k.details.ssl=a.useSSL,a.interceptor&&a.interceptor.error&&a.interceptor.error(k),
    k;case 9:return p=a.params.url,/\/sharing\/rest\/(accounts|portals)\/self/i.test(p)&&!a.hasToken&&!a.credentialToken&&d&&d.user&&d.user.username&&!f.isTrustedServer(p)&&(n=f.getOrigin(p,!0))&&h.request.trustedServers.push(n),(q=a.credential)&&g.id&&(u=(r=g.id.findServerInfo(q.server))&&r.owningSystemUrl)&&(u=u.replace(/\/?$/,"/sharing"),(t=g.id.findCredential(u,q.userId))&&-1===g.id._getIdenticalSvcIdx(u,t)&&t.resources.unshift(u)),[2,{data:d,getHeader:c?function(a){return c.headers.get(a)}:T,requestOptions:a.params.requestOptions,
    ssl:a.useSSL,url:a.params.url}]}})})}function G(a,b,c){return e(this,void 0,void 0,function(){var d,e,f,k,n,q,h;return l(this,function(l){switch(l.label){case 0:if(a.redoRequest)return a.redoRequest=!1,[2,!1];if(!b)return[2,!0];if(!b.ok)throw Error("Unable to load "+b.url+" status: "+b.status);c&&c.error&&(d=p.mixin(Error(),c.error));d&&(e=Number(d.code),f=d.hasOwnProperty("subcode")?Number(d.subcode):null,k=(k=d.messageCode)&&k.toUpperCase());n=a.params.requestOptions.authMode;return 403===e&&(4===
    f||d.message&&-1<d.message.toLowerCase().indexOf("ssl")&&-1===d.message.toLowerCase().indexOf("permission"))?a.useSSL?[3,6]:(a.useSSL=!0,[2,!1]):[3,1];case 1:return!a.useIdentity||"no-prompt"===n&&498!==e||-1===L.indexOf(e)||B(a.params.url)||!(403!==e||-1===M.indexOf(k)&&(null==f||2===f&&a.credentialToken))?[3,6]:[4,A()];case 2:l.sent(),l.label=3;case 3:return l.trys.push([3,5,,6]),[4,g.id.getCredential(a.params.url,{error:x("request:server",d,a.params),prompt:"no-prompt"!==n,signal:a.controller.signal,
    token:a.credentialToken})];case 4:return q=l.sent(),a.credential=q,a.credentialToken=q.token,a.useSSL=a.useSSL||q.ssl,[2,!1];case 5:h=l.sent();if("no-prompt"===n)return a.credential=null,a.credentialToken=null,[2,!1];d=h;return[3,6];case 6:if(d)throw d;return[2,!0]}})})}function J(a,c,d){void 0===d&&(d=!1);return k.create(function(e,f){var n=c.controller.signal;if(k.isAborted(n))throw v();var p=new Image;p.crossOrigin=c.withCredentials?"use-credentials":"anonymous";var g=function(){l();f(Error("Unable to load "+
    a))},q=function(){var a=p;l();e(a)},h=function(){if(p){var a=p;l();a.src="";f(v())}},l=function(){b("esri-image-decode")||(p.removeEventListener("error",g),p.removeEventListener("load",q));p=q=g=null;n.removeEventListener("abort",h);h=null;d&&URL.revokeObjectURL(a)};p.alt="";p.src=a;n.addEventListener("abort",h);b("esri-image-decode")?p.decode().then(q,g):(p.addEventListener("error",g),p.addEventListener("load",q))})}var H,N="FormData"in n,L=[499,498,403,401],M=["COM_0056","COM_0057","SB_0008"],O=
    [/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],T=function(){return null};r._abortableFetch=null;r._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return r})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){var q=new g.default({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function c(b){b=a.call(this,b)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}e(c,a);f=c;Object.defineProperty(c.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,
    configurable:!0});c.prototype.clone=function(){return new f({categories:this.categories?d.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};c.prototype.toRequestOptions=function(a,b){var c;this.categories&&(c=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var d;if(this.extent){var e=k.project(this.extent,
    p.WGS84);e&&(d=e.xmin+","+e.ymin+","+e.xmax+","+e.ymax)}e=this.query;!this.disableExtraQuery&&a.extraQuery&&(e="("+e+")"+a.extraQuery);a={categories:c,bbox:d,q:e,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=q.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:m({},b,a)}};var f;l([n.property()],c.prototype,"categories",void 0);l([n.property()],c.prototype,"disableExtraQuery",void 0);l([n.property({type:b})],c.prototype,"extent",void 0);l([n.property()],
    c.prototype,"num",void 0);l([n.property()],c.prototype,"query",void 0);l([n.property()],c.prototype,"sortField",void 0);l([n.property()],c.prototype,"sortOrder",null);l([n.property()],c.prototype,"start",void 0);return c=f=l([n.subclass("esri.portal.PortalQueryParams")],c)}(n.declared(h))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(c,
    a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.nextQueryParams=null;c.queryParams=null;c.results=null;c.total=null;return c}m(c,a);e([h.property()],c.prototype,"nextQueryParams",void 0);e([h.property()],c.prototype,"queryParams",void 0);e([h.property()],c.prototype,"results",void 0);e([h.property()],c.prototype,"total",void 0);return c=e([h.subclass("esri.portal.PortalQueryResult")],c)}(h.declared(l))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){return function(a){function k(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.sourceJSON=null;b.units=null;b.username=null;b.userType=null;return b}m(k,a);p=k;Object.defineProperty(k.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
    "/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});k.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e=
    {method:"post"};c&&(e.query=c.createPostQuery(),null!=d&&("string"===typeof d?e.query.text=d:"object"===typeof d&&(e.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+("string"===typeof a?a:a.id));return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c.reload():c.load()})};k.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
    null;a.portal=null})};k.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",c=a.map(function(a){return a.id});return c.length?(c={method:"post",query:{items:c.join(",")}},this.portal._request(b,c).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):g.resolve(void 0)};k.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=n.fromJSON(b);b.portal=
    a.portal;return b}):[]})};k.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(c){return c&&c.groups?c.groups.map(function(c){c=b.fromJSON(c);c.portal=a.portal;return c}):[]})};k.prototype.fetchItems=function(a){var b=this;a||(a={});var d=this.userContentUrl;a.folder&&(d+="/"+a.folder.id);var e;return g.create(function(a){return c(["./PortalItem"],a)}).then(function(c){e=c;return b.portal._request(d,{query:{folders:!1,num:a.num||10,start:a.start||1,sortField:a.sortField||
    "created",sortOrder:a.sortOrder||"asc"}})}).then(function(a){var c;return a&&a.items?(c=a.items.map(function(a){a=e.fromJSON(a);a.portal=b.portal;return a}),g.all(c.map(function(a){return a.load()})).catch(function(a){return a}).then(function(){return{items:c,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};k.prototype.fetchTags=function(){return this.portal._request(this.url+"/tags").then(function(a){return a.tags})};k.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;
    b&&a&&(b+="\x26w\x3d"+a);return b};k.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new b({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):g.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};k.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};k.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");
    var b=new p;b.sourceJSON=a;b.read(a);return b};var p;e([d.property()],k.prototype,"access",void 0);e([d.property({type:Date})],k.prototype,"created",void 0);e([d.property()],k.prototype,"culture",void 0);e([d.property()],k.prototype,"description",void 0);e([d.property()],k.prototype,"email",void 0);e([d.property()],k.prototype,"favGroupId",void 0);e([d.property()],k.prototype,"fullName",void 0);e([d.property({type:Date})],k.prototype,"modified",void 0);e([d.property()],k.prototype,"orgId",void 0);
    e([d.property()],k.prototype,"portal",void 0);e([d.property()],k.prototype,"preferredView",void 0);e([d.property()],k.prototype,"privileges",void 0);e([d.property()],k.prototype,"region",void 0);e([d.property()],k.prototype,"role",void 0);e([d.property()],k.prototype,"roleId",void 0);e([d.property()],k.prototype,"sourceJSON",void 0);e([d.property()],k.prototype,"thumbnail",void 0);e([d.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],k.prototype,"thumbnailUrl",null);
    e([d.property()],k.prototype,"units",void 0);e([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],k.prototype,"userContentUrl",null);e([d.property({dependsOn:["portal.restUrl"],readOnly:!0})],k.prototype,"url",null);e([d.property()],k.prototype,"username",void 0);e([d.property()],k.prototype,"userType",void 0);return k=p=e([d.subclass("esri.portal.PortalUser")],k)}(d.declared(h.JSONSupport))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}m(c,a);Object.defineProperty(c.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};e([g.property({type:Date})],c.prototype,
    "created",void 0);e([g.property()],c.prototype,"id",void 0);e([g.property()],c.prototype,"portal",void 0);e([g.property()],c.prototype,"title",void 0);e([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,"url",null);e([g.property()],c.prototype,"username",void 0);return c=e([g.subclass("esri.portal.PortalFolder")],c)}(g.declared(h.JSONSupport))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./PortalQueryParams".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b){b=a.call(this,b)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}m(c,a);Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.fetchCategorySchema=function(a){var b=this;return this.portal._request(this.url+"/categorySchema",a).then(function(c){c=c.categorySchema||[];return c.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?b._fetchCategorySchemaSet("LivingAtlas",a):c})};c.prototype.fetchMembers=function(a){return this.portal._request(this.url+"/users",
    a)};c.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};c.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};c.prototype.queryItems=function(a,c){a=n.ensureType(b,a);if(5<parseFloat(this.portal.currentVersion))return a=a||new b,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem",c);a=a?a.clone():new b;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a,
    c)};c.prototype._fetchCategorySchemaSet=function(a,c){var d=this;return this.portal._fetchSelf(this.portal.authMode,!0,c).then(function(a){if(a=a.contentCategorySetsGroupQuery){var e=new b;e.disableExtraQuery=!0;e.num=1;e.query=a;return d.portal.queryGroups(e,c)}throw new h("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(d){if(d.total){d=d.results[0];var e=new b;e.num=1;e.query='typekeywords:"'+a+'"';return d.queryItems(e,c)}throw new h("portal-group:fetchCategorySchema",
    "contentCategorySetsGroupQuery group not found");}).then(function(a){return a.total?a.results[0].fetchData("json",c).then(function(a){return(a=a&&a.categorySchema)&&a.length?a:[]}):[]})};e([d.property()],c.prototype,"access",void 0);e([d.property({type:Date})],c.prototype,"created",void 0);e([d.property()],c.prototype,"description",void 0);e([d.property()],c.prototype,"id",void 0);e([d.property()],c.prototype,"isInvitationOnly",void 0);e([d.property({type:Date})],c.prototype,"modified",void 0);e([d.property()],
    c.prototype,"owner",void 0);e([d.property()],c.prototype,"portal",void 0);e([d.property()],c.prototype,"snippet",void 0);e([d.property()],c.prototype,"sortField",void 0);e([d.property()],c.prototype,"sortOrder",void 0);e([d.property()],c.prototype,"tags",void 0);e([d.property()],c.prototype,"thumbnail",void 0);e([d.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],c.prototype,"thumbnailUrl",null);e([d.property()],c.prototype,"title",void 0);e([d.property({dependsOn:["portal.restUrl"],
    readOnly:!0})],c.prototype,"url",null);return c=e([d.subclass("esri.portal.PortalGroup")],c)}(d.declared(g.JSONSupport))})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/Error ../core/JSONSupport ../core/lang ../core/Loadable ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../geometry/Extent ./Portal ./PortalRating".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){return function(a){function n(b){b=a.call(this,b)||this;b.access=null;b.accessInformation=null;b.applicationProxies=null;b.avgRating=null;b.categories=null;b.created=null;b.culture=null;b.description=null;b.extent=null;b.groupCategories=null;b.id=null;b.itemControl=null;b.licenseInfo=null;b.modified=null;b.name=null;b.numComments=null;b.numRatings=null;b.numViews=null;b.owner=null;b.ownerFolder=null;b.portal=null;b.screenshots=null;b.size=null;b.snippet=
    null;b.sourceJSON=null;b.tags=null;b.title=null;b.type=null;b.typeKeywords=null;b.url=null;return b}m(n,a);g=n;n.from=function(a){return f.ensureClass(g,a)};Object.defineProperty(n.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===a||"Feature Collection"===a?c=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":-1<b.indexOf("Markup")?"Markup":"Feature Layer":"Image Service"===a?c=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":
    "Imagery Layer":"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Geoprocessing Service"===a&&this.portal&&this.portal.isPortal?c=-1<b.indexOf("Web Tool")?"Tool":"Geoprocessing Service":"Geocoding Service"===a?c="Locator":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":"GeoJson"===a?c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"netCDF"===a?c="NetCDF":"Map Service"===a?c=-1===b.indexOf("Spatiotemporal")&&
    (-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled"))&&-1===b.indexOf("Relational")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/gi,"Add-In"):"datastore catalog service"===a?c="Big Data File Share":"Compact Tile Package"===a&&(c="Tile Package (tpkx)");return c},enumerable:!0,configurable:!0});n.prototype.readExtent=function(a){return a&&a.length?new r(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(n.prototype,"iconUrl",{get:function(){var a=
    this.type&&this.type.toLowerCase()||"",b=this.typeKeywords||[],d=!1,e=!1,f=!1,k=!1,n=!1;0<a.indexOf("service")||"feature collection"===a||"kml"===a||"wms"===a||"wmts"===a||"wfs"===a?(d=-1<b.indexOf("Hosted Service"),"feature service"===a||"feature collection"===a||"kml"===a||"wfs"===a?(e=-1<b.indexOf("Table"),f=-1<b.indexOf("Route Layer"),k=-1<b.indexOf("Markup"),a=(n=-1!==b.indexOf("Spatiotemporal"))&&e?"spatiotemporaltable":e?"table":f?"routelayer":k?"markup":n?"spatiotemporal":d?"featureshosted":
    "features"):a="map service"===a||"wms"===a||"wmts"===a?d||-1<b.indexOf("Tiled")||"wmts"===a?"maptiles":"mapimages":"scene service"===a?-1<b.indexOf("Line")?"sceneweblayerline":-1<b.indexOf("3DObject")?"sceneweblayermultipatch":-1<b.indexOf("Point")?"sceneweblayerpoint":-1<b.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<b.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<b.indexOf("Polygon")?"sceneweblayerpolygon":-1<b.indexOf("Building")?"sceneweblayerbuilding":"sceneweblayer":"image service"===
    a?-1<b.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===a?"streamlayer":"vector tile service"===a?"vectortile":"datastore catalog service"===a?"datastorecollection":"geocoding service"===a?"geocodeservice":"geoprocessing service"===a?-1<b.indexOf("Web Tool")&&this.portal&&this.portal.isPortal?"tool":"layers":"layers"):a="web map"===a||"cityengine web scene"===a?"maps":"web scene"===a?-1<b.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===
    a||"mobile application"===a||"application"===a||"operation view"===a||"desktop application"===a?"apps":"map document"===a||"map package"===a||"published map"===a||"scene document"===a||"globe document"===a||"basemap package"===a||"mobile basemap package"===a||"mobile map package"===a||"project package"===a||"project template"===a||"pro map"===a||"layout"===a||"layer"===a&&-1<b.indexOf("ArcGIS Pro")||"explorer map"===a&&b.indexOf("Explorer Document")?"mapsgray":"service definition"===a||"csv"===a||
    "shapefile"===a||"cad drawing"===a||"geojson"===a||"360 vr experience"===a||"netcdf"===a?"datafiles":"explorer add in"===a||"desktop add in"===a||"windows viewer add in"===a||"windows viewer configuration"===a?"appsgray":"arcgis pro add in"===a||"arcgis pro configuration"===a?"addindesktop":"rule package"===a||"file geodatabase"===a||"sqlite geodatabase"===a||"csv collection"===a||"kml collection"===a||"windows mobile package"===a||"map template"===a||"desktop application template"===a||"arcpad package"===
    a||"code sample"===a||"form"===a||"document link"===a||"operations dashboard add in"===a||"rules package"===a||"image"===a||"workflow manager package"===a||"explorer map"===a&&-1<b.indexOf("Explorer Mapping Application")||-1<b.indexOf("Document")?"datafilesgray":"network analysis service"===a||"geoprocessing service"===a||"geodata service"===a||"geometry service"===a||"geoprocessing package"===a||"locator package"===a||"geoprocessing sample"===a||"workflow manager service"===a?"toolsgray":"layer"===
    a||"layer package"===a||"explorer layer"===a?"layersgray":"scene package"===a?"scenepackage":"mobile scene package"===a?"mobilescenepackage":"tile package"===a||"compact tile package"===a?"tilepackage":"task file"===a?"taskfile":"report template"===a?"report-template":"statistical data collection"===a?"statisticaldatacollection":"insights workbook"===a?"workbook":"insights model"===a?"insightsmodel":"insights page"===a?"insightspage":"insights theme"===a?"insightstheme":"hub initiative"===a?"hubinitiative":
    "hubpage"===a?"hubpage":"hub site application"===a?"hubsite":"relational database connection"===a?"relationaldatabaseconnection":"big data file share"===a?"datastorecollection":"image collection"===a?"imagecollection":"style"===a?"style":"desktop style"===a?"desktopstyle":"dashboard"===a?"dashboard":"raster function template"===a?"rasterprocessingtemplate":"vector tile package"===a?"vectortilepackage":"ortho mapping project"===a?"orthomappingproject":"ortho mapping template"===a?"orthomappingtemplate":
    "solution"===a?"solutions":"geopackage"===a?"geopackage":"deep learning package"===a?"deeplearningpackage":"real time analytic"===a?"realtimeanalytics":"big data analytic"===a?"bigdataanalytics":"feed"===a?"feed":"excalibur imagery project"===a?"excaliburimageryproject":"notebook"===a?"notebook":"storymap"===a?"storymap":"survey123 add in"===a?"survey123addin":"mission"===a?"mission":"quickcapture project"===a?"quickcaptureproject":"pro report"===a?"proreport":"urban model"===a?"urbanmodel":"web experience"===
    a?"experiencebuilder":"web experience template"===a?"webexperiencetemplate":"workflow"===a?"workflow":"insights script"===a?"insightsscript":"kernel gateway connection"===a?"kernelgatewayconnection":"maps";return a?c.toUrl("../images/portal/"+a+"16.png"):null},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service;WMTS;WMS".split(";").indexOf(this.type)},
    enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(n.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");
    if(!a)return null;var b=this.owner||this.get("portal.user.username");return b?a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id:null},enumerable:!0,configurable:!0});n.prototype.load=function(a){var c=this;this.portal||(this.portal=t.getDefault());var d=this.portal.load(a).then(function(){return c.sourceJSON?c.sourceJSON:c.id&&c.itemUrl?c.portal._request(c.itemUrl,{signal:b.isSome(a)?a.signal:null}):{}}).then(function(a){c.sourceJSON=a;c.read(a)});this.addResolvingPromise(d);
    return this.when()};n.prototype.addRating=function(a){var b={method:"post",query:{}};a instanceof u&&(a=a.rating);isNaN(a)||"number"!==typeof a||(b.query.rating=a);return this.portal._request(this.itemUrl+"/addRating",b).then(function(){return new u({rating:a,created:new Date})})};n.prototype.clone=function(){var a={access:this.access,accessInformation:this.accessInformation,applicationProxies:d.clone(this.applicationProxies),avgRating:this.avgRating,categories:d.clone(this.categories),created:d.clone(this.created),
    culture:this.culture,description:this.description,extent:d.clone(this.extent),groupCategories:d.clone(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:d.clone(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:d.clone(this.screenshots),size:this.size,snippet:this.snippet,tags:d.clone(this.tags),thumbnail:this.thumbnail,
    title:this.title,type:this.type,typeKeywords:d.clone(this.typeKeywords),url:this.url};this.loaded&&(a.loadStatus="loaded");return(new g({sourceJSON:this.sourceJSON})).set(a)};n.prototype.createPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"extent"===b&&a[b]&&(a[b]=JSON.stringify(a[b]));return a};n.prototype.deleteRating=function(){return this.portal._request(this.itemUrl+"/deleteRating",
    {method:"post"}).then(function(){})};n.prototype.fetchData=function(a,b){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",l({responseType:a},b))};n.prototype.fetchRating=function(a){return this.portal._request(this.itemUrl+"/rating",a).then(function(a){return null!=a.rating?(a.created=new Date(a.created),new u(a)):null})};n.prototype.fetchRelatedItems=function(a,b){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",l({query:a},b),"PortalItem")};n.prototype.getThumbnailUrl=
    function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};n.prototype.reload=function(){var a=this;return this.portal._request(this.itemUrl,{cacheBust:!0}).then(function(b){a.sourceJSON=b;a.read(b);return a})};n.prototype.update=function(a){var b=this;return this.id?this.load().then(function(){return b.portal._signIn()}).then(function(){var c=a&&a.data,d={method:"post"};d.query=b.createPostQuery();for(var e in d.query)null===d.query[e]&&(d.query[e]="");d.query.clearEmptyFields=!0;null!=
    c&&("string"===typeof c?d.query.text=c:"object"===typeof c&&(d.query.text=JSON.stringify(c)));return b.portal._request(b.userItemUrl+"/update",d).then(function(){return b.reload()})}):p.reject(new h("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};n.prototype.updateThumbnail=function(a){var c=this;return this.id?this.load().then(function(){return c.portal._signIn()}).then(function(){var d=a.thumbnail,e=a.filename,f={method:"post"};if("string"===typeof d)k.isDataProtocol(d)?
    f.query={data:d}:f.query={url:k.makeAbsolute(d)},b.isSome(e)&&(f.query.filename=e);else{var n=new FormData;b.isSome(e)?n.append("file",d,e):n.append("file",d);f.body=n}return c.portal._request(c.userItemUrl+"/updateThumbnail",f).then(function(){return c.reload()})}):p.reject(new h("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))};n.prototype.toJSON=function(){var a=this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&
    [[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return d.fixJson(a)};n.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");return new g({sourceJSON:a})};n.prototype._getPostQuery=function(){var a=this.toJSON(),
    b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"extent"===b&&a[b]&&(a[b]=JSON.stringify(a[b]));return a};var g;e([q.property()],n.prototype,"access",void 0);e([q.property()],n.prototype,"accessInformation",void 0);e([q.property({json:{read:{source:"appProxies"}}})],n.prototype,"applicationProxies",void 0);e([q.property()],n.prototype,"avgRating",void 0);e([q.property()],n.prototype,"categories",void 0);e([q.property({type:Date})],
    n.prototype,"created",void 0);e([q.property()],n.prototype,"culture",void 0);e([q.property()],n.prototype,"description",void 0);e([q.property({dependsOn:["type","typeKeywords"],readOnly:!0})],n.prototype,"displayName",null);e([q.property({type:r})],n.prototype,"extent",void 0);e([q.reader("extent")],n.prototype,"readExtent",null);e([q.property()],n.prototype,"groupCategories",void 0);e([q.property({dependsOn:["type","typeKeywords"],readOnly:!0})],n.prototype,"iconUrl",null);e([q.property()],n.prototype,
    "id",void 0);e([q.property({dependsOn:["type"],readOnly:!0})],n.prototype,"isLayer",null);e([q.property()],n.prototype,"itemControl",void 0);e([q.property({dependsOn:["portal.restUrl","id"],readOnly:!0})],n.prototype,"itemUrl",null);e([q.property()],n.prototype,"licenseInfo",void 0);e([q.property({type:Date})],n.prototype,"modified",void 0);e([q.property()],n.prototype,"name",void 0);e([q.property()],n.prototype,"numComments",void 0);e([q.property()],n.prototype,"numRatings",void 0);e([q.property()],
    n.prototype,"numViews",void 0);e([q.property()],n.prototype,"owner",void 0);e([q.property()],n.prototype,"ownerFolder",void 0);e([q.property({type:t})],n.prototype,"portal",void 0);e([q.property()],n.prototype,"screenshots",void 0);e([q.property()],n.prototype,"size",void 0);e([q.property()],n.prototype,"snippet",void 0);e([q.property()],n.prototype,"sourceJSON",void 0);e([q.property()],n.prototype,"tags",void 0);e([q.property()],n.prototype,"thumbnail",void 0);e([q.property({dependsOn:["itemUrl",
    "thumbnail","portal.credential.token"],readOnly:!0})],n.prototype,"thumbnailUrl",null);e([q.property()],n.prototype,"title",void 0);e([q.property()],n.prototype,"type",void 0);e([q.property()],n.prototype,"typeKeywords",void 0);e([q.property()],n.prototype,"url",void 0);e([q.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],n.prototype,"userItemUrl",null);return n=g=e([q.subclass("esri.portal.PortalItem")],n)}(q.declared(g.JSONSupportMixin(n)))})},
    "esri/portal/PortalRating":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.created=null;c.rating=null;return c}m(c,a);e([h.property()],c.prototype,"created",void 0);e([h.property()],c.prototype,"rating",void 0);return c=e([h.subclass("esri.portal.PortalRating")],c)}(h.declared(l))})},"esri/support/basemapDefinitions":function(){define(["require",
    "exports","dojo/i18n!../nls/basemaps"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.esriBasemapDefinitions={streets:{id:"streets",title:m.streets,thumbnailUrl:c.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",title:m.satellite,thumbnailUrl:c.toUrl("../images/basemap/satellite.jpg"),
    baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",title:m.hybrid,thumbnailUrl:c.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,
    visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",title:m.terrain,thumbnailUrl:c.toUrl("../images/basemap/terrain.jpg"),baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",
    layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",title:m.topo,thumbnailUrl:c.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",
    layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",title:m.gray,thumbnailUrl:c.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",
    layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",title:m["dark-gray"],thumbnailUrl:c.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",
    url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",title:m.oceans,thumbnailUrl:c.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",
    showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",title:m["national-geographic"],thumbnailUrl:c.toUrl("../images/basemap/national-geographic.jpg"),baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",
    title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",title:m.osm,thumbnailUrl:c.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",title:m["dark-gray"],thumbnailUrl:c.toUrl("../images/basemap/dark-gray-vector.jpg"),baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/c11ce4f7801740b2905eb03ddc963ac8/resources/styles/root.json",
    layerType:"VectorTileLayer",title:"World Dark Gray",visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",title:m.gray,thumbnailUrl:c.toUrl("../images/basemap/gray-vector.jpg"),baseMapLayers:[{id:"gray-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/8a2cba3b0ebf4140b7c0dc5ee149549a/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Light Gray",visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",title:m.streets,thumbnailUrl:c.toUrl("../images/basemap/streets-vector.jpg"),
    baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",title:m.topo,thumbnailUrl:c.toUrl("../images/basemap/topo-vector.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",
    title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",title:m["streets-night-vector"],thumbnailUrl:c.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",
    layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",title:m["streets-relief-vector"],thumbnailUrl:c.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",
    styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",showLegend:!1,visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",title:m["streets-navigation-vector"],thumbnailUrl:c.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",
    layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]}}})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./has!host-browser?./_base/xhr ./json module".split(" "),function(c,a,m,e,l,h,g,d,n){m.add("dojo-preload-i18n-Api",1);g=c.i18n={};var b=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,p=function(a,b,c,d){var e=[c+d];b=b.split("-");for(var f="",k=0;k<b.length;k++)if(f+=(f?"-":"")+b[k],!a||a[f])e.push(c+f+"/"+d),e.specificity=
    f;return e},k={},q=function(a,b,d){d=d?d.toLowerCase():c.locale;a=a.replace(/\./g,"/");b=b.replace(/\./g,"/");return/root/i.test(d)?a+"/nls/"+b:a+"/nls/"+d+"/"+b},f=c.getL10nName=function(a,b,c){return a=n.id+"!"+q(a,b,c)},r=function(a,b,c,d,e,f){a([b],function(n){var g=h.clone(n.root||n.ROOT),q=p(!n._v1x&&n,e,c,d);a(q,function(){for(var a=1;a<q.length;a++)g=h.mixin(h.clone(g),arguments[a]);k[b+"/"+e]=g;g.$locale=q.specificity;f()})})},t=function(a){var b=l.extraLocale||[],b=h.isArray(b)?b:[b];b.push(a);
    return b},u=function(a,f,n){var p=b.exec(a),g=p[1]+"/",q=p[5]||p[4],l=g+q,u=(p=p[5]&&p[4])||c.locale||"",w=l+"/"+u,p=p?[u]:t(u),y=p.length,B=function(){--y||n(h.delegate(k[w]))},u=a.split("*"),D="preload"==u[1];if(m("dojo-preload-i18n-Api")){if(D&&(k[a]||(k[a]=1,z(u[2],d.parse(u[3]),1,f)),n(1)),(u=D)||(v&&x.push([a,f,n]),u=v&&!k[w]),u)return}else if(D){n(1);return}e.forEach(p,function(a){var b=l+"/"+a;m("dojo-preload-i18n-Api")&&A(b);k[b]?B():r(f,l,g,q,a,B)})};m("dojo-preload-i18n-Api");var w=g.normalizeLocale=
    function(a){a=a?a.toLowerCase():c.locale;return"root"==a?"ROOT":a},v=0,x=[],z=g._preloadLocalizations=function(b,d,f,n){function p(a,b){n([a],b)}function g(a,b){for(a=a.split("-");a.length;){if(b(a.join("-")))return;a.pop()}b("ROOT")}function q(){for(--v;!v&&x.length;)u.apply(null,x.shift())}function l(c){c=w(c);g(c,function(f){if(0<=e.indexOf(d,f)){var l=b.replace(/\./g,"/")+"_"+f;v++;p(l,function(b){for(var d in b){var e=b[d],p=d.match(/(.+)\/([^\/]+)$/),l;if(p&&(l=p[2],p=p[1]+"/",e._localized)){var r;
    if("ROOT"===f){var u=r=e._localized;delete e._localized;u.root=e;k[a.toAbsMid(d)]=u}else r=e._localized,k[a.toAbsMid(p+l+"/"+f)]=e;f!==c&&function(b,d,e,f){var p=[],l=[];g(c,function(c){f[c]&&(p.push(a.toAbsMid(b+c+"/"+d)),l.push(a.toAbsMid(b+d+"/"+c)))});p.length?(v++,n(p,function(){for(var f=p.length-1;0<=f;f--)e=h.mixin(h.clone(e),arguments[f]),k[l[f]]=e;k[a.toAbsMid(b+d+"/"+c)]=h.clone(e);q()})):k[a.toAbsMid(b+d+"/"+c)]=e}(p,l,e,r)}}q()});return!0}return!1})}n=n||a;l();e.forEach(c.config.extraLocale,
    l)},A=function(){},y={},A=function(a){for(var b,d=a.split("/"),e=c.global[d[0]],f=1;e&&f<d.length-1;e=e[d[f++]]);e&&((b=e[d[f]])||(b=e[d[f].replace(/-/g,"_")]),b&&(k[a]=b));return b};g.getLocalization=function(b,c,d){var e,f=q(b,c,d);if(y[f])return y[f];u(f,a,function(a){e=y[f]=a});return e};return h.mixin(g,{dynamic:!0,normalize:function(a,b){return/^\./.test(a)?b(a):a},load:u,cache:k,getL10nName:f})})},"esri/webdoc/support/writeUtils":function(){define("require exports ../../core/Error ../../core/lang ../../core/maybe ../../core/object".split(" "),
    function(c,a,m,e,l,h){function g(a){return!("feature"!==a.type||a.url||!a.source||"memory"!==a.source.type)}Object.defineProperty(a,"__esModule",{value:!0});var d=new Set;"bing-maps open-street-map tile unknown unsupported vector-tile web-tile".split(" ").forEach(function(a){return d.add(a)});var n=new Set;"feature tile unknown unsupported vector-tile web-tile".split(" ").forEach(function(a){return n.add(a)});a.getLayerJSON=function(a,c,k){if(!("write"in a&&a.write))return k&&k.messages&&k.messages.push(new m("layer:unsupported",
    "Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted",{layer:a})),null;var b;k.restrictedWebMapWriting?(b="basemap"===k.layerContainerType?d:"operational-layers"===k.layerContainerType?n:null,b=l.isSome(b)?b.has(a.type)&&!g(a):!0):b=!0;if(b)return c={},a.write(c,k)?c:null;if(l.isSome(c)){k=c=e.clone(c);if(g(a)){if(b=(b=h.getDeepValue("featureCollection.layers",k))&&b[0]&&b[0].layerDefinition)"maxScale"in a&&(b.maxScale=a.maxScale),"minScale"in a&&(b.minScale=a.minScale)}else"group"!==
    a.type&&("maxScale"in a&&(k.maxScale=a.maxScale),"minScale"in a&&(k.minScale=a.minScale));k.opacity=a.opacity;k.title=a.title;k.visibility=a.visible}return c}})},"esri/Ground":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Color ./core/Collection ./core/collectionUtils ./core/compilerUtils ./core/Error ./core/JSONSupport ./core/lang ./core/Loadable ./core/loadAll ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./ground/NavigationConstraint ./layers/support/types ./webdoc/support/opacityUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z){function A(a){return"elevation"===a.type||a&&"createElevationSampler"in a}var y=r.getLogger("esri.Ground");return function(a){function p(b){var c=a.call(this,b)||this;c.opacity=1;c.surfaceColor=null;c.navigationConstraint=null;c.layers=new g;c.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==c&&"remove"in a.parent&&a.parent.remove(a);a.parent=c;x.isOfType(a,["elevation","base-elevation"])||y.error("Layer '"+a.title+", id:"+a.id+"' of type '"+
    a.type+"' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.")});c.layers.on("after-remove",function(a){a.item.parent=null});return c}e(p,a);q=p;p.prototype.initialize=function(){this.when().catch(function(a){y.error("#load()","Failed to load ground",a)});this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)};p.prototype.normalizeCtorArgs=function(a){a&&"resourceInfo"in a&&(this._set("resourceInfo",a.resourceInfo),
    a=m({},a),delete a.resourceInfo);return a};Object.defineProperty(p.prototype,"layers",{set:function(a){this._set("layers",d.referenceSetter(a,this._get("layers")))},enumerable:!0,configurable:!0});p.prototype.writeLayers=function(a,c,d,e){var f=[];a&&(e=m({},e,{layerContainerType:"ground"}),a.forEach(function(a){if("write"in a){var c={};n.typeCast(a)().write(c,e)&&f.push(c)}else e&&e.messages&&e.messages.push(new b("layer:unsupported","Layers ("+a.title+", "+a.id+") of type '"+a.declaredClass+"' cannot be persisted in the ground",
    {layer:a}))}));c.layers=f};p.prototype.load=function(a){this.addResolvingPromise(this._loadFromSource(a));return this.when()};p.prototype.loadAll=function(){var a=this;return f.loadAll(this,function(b){b(a.layers)})};p.prototype.queryElevation=function(a,b){var c=this;return this._importElevationQuery().then(function(d){d=new d.ElevationQuery;var e=c.layers.filter(A).toArray();return d.queryAll(e,a,b)})};p.prototype.createElevationSampler=function(a,b){var c=this.layers.filter(A).toArray();return 1===
    c.length?c[0].createElevationSampler(a,b):this._importElevationQuery().then(function(d){return(new d.ElevationQuery).createSamplerAll(c,a,b)})};p.prototype.clone=function(){var a={opacity:this.opacity,surfaceColor:k.clone(this.surfaceColor),navigationConstraint:k.clone(this.navigationConstraint),layers:this.layers.slice()};this.loaded&&(a.loadStatus="loaded");return(new q({resourceInfo:this.resourceInfo})).set(a)};p.prototype.read=function(a,b){this.resourceInfo||this._set("resourceInfo",{data:a,
    context:b});this.inherited(arguments)};p.prototype._loadFromSource=function(a){var b=this.resourceInfo;return b?this._loadLayersFromJSON(b.data,b.context,a):t.resolve(null)};p.prototype._loadLayersFromJSON=function(a,b,d){var e=this,f=b&&b.origin||"web-scene",k=b&&b.portal||null,n=b&&b.url||null;return t.create(function(a){return c(["./portal/support/layersCreator"],a)}).then(function(b){t.throwIfAborted(d);var c=[];a.layers&&Array.isArray(a.layers)&&c.push(b.populateOperationalLayers(e.layers,a.layers,
    {context:{origin:f,url:n,portal:k,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"}));return t.eachAlways(c)}).then(function(){})};p.prototype._importElevationQuery=function(){return t.create(function(a){c(["./layers/support/ElevationQuery"],a)})};var q;l([u.property({json:{read:!1}})],p.prototype,"layers",null);l([u.writer("layers")],p.prototype,"writeLayers",null);l([u.property({readOnly:!0})],p.prototype,"resourceInfo",void 0);l([u.property({type:Number,nonNullable:!0,
    range:{min:0,max:1},json:{type:w.Integer,read:{reader:z.transparencyToOpacity,source:"transparency"},write:{writer:function(a,b){b.transparency=z.opacityToTransparency(a)},target:"transparency"}}})],p.prototype,"opacity",void 0);l([u.property({type:h,json:{type:[w.Integer],write:function(a,b){b.surfaceColor=a.toJSON().slice(0,3)}}})],p.prototype,"surfaceColor",void 0);l([u.property({type:v.NavigationConstraint,json:{write:!0}})],p.prototype,"navigationConstraint",void 0);return p=q=l([u.subclass("esri.Ground")],
    p)}(u.declared(p.JSONSupportMixin(q)))})},"esri/Color":function(){define(["require","exports","./core/mathUtils","./core/accessorSupport/ensureType"],function(c,a,m,e){function l(a){return m.clamp(e.ensureInteger(a),0,255)}function h(a,c,b){a=Number(a);return isNaN(a)?b:a<c?c:a>b?b:a}function g(a,c,b){0>b&&++b;1<b&&--b;var d=6*b;return 1>d?a+(c-a)*d:1>2*b?c:2>3*b?a+(c-a)*(2/3-b)*6:a}c=function(){function a(a){this.b=this.g=this.r=255;this.a=1;a&&this.setColor(a)}a.blendColors=function(c,b,d,e){void 0===
    e&&(e=new a);e.r=Math.round(c.r+(b.r-c.r)*d);e.g=Math.round(c.g+(b.g-c.g)*d);e.b=Math.round(c.b+(b.b-c.b)*d);e.a=c.a+(b.a-c.a)*d;return e._sanitize()};a.fromRgb=function(c,b){var d=c.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){c=d[2].split(/\s*,\s*/);d=d[1];if("rgb"===d&&3===c.length||"rgba"===d&&4===c.length)return d=c[0],"%"===d.charAt(d.length-1)?(d=c.map(function(a){return 2.56*parseFloat(a)}),4===c.length&&(d[3]=parseFloat(c[3])),a.fromArray(d,b)):a.fromArray(c.map(function(a){return parseFloat(a)}),
    b);if("hsl"===d&&3===c.length||"hsla"===d&&4===c.length){var d=(parseFloat(c[0])%360+360)%360/360,e=parseFloat(c[1])/100,n=parseFloat(c[2])/100,e=.5>=n?n*(e+1):n+e-n*e,n=2*n-e,d=[256*g(n,e,d+1/3),256*g(n,e,d),256*g(n,e,d-1/3),1];4===c.length&&(d[3]=parseFloat(c[3]));return a.fromArray(d,b)}}return null};a.fromHex=function(c,b){void 0===b&&(b=new a);var d=4===c.length?4:8,e=(1<<d)-1,n=Number("0x"+c.substr(1));if(isNaN(n))return null;["b","g","r"].forEach(function(a){var c=n&e;n>>=d;b[a]=4===d?17*c:
    c});b.a=1;return b};a.fromArray=function(c,b){void 0===b&&(b=new a);b._set(Number(c[0]),Number(c[1]),Number(c[2]),Number(c[3]));isNaN(b.a)&&(b.a=1);return b._sanitize()};a.fromString=function(c,b){var d=a.named[c];return d&&a.fromArray(d,b)||a.fromRgb(c,b)||a.fromHex(c,b)};a.toJSON=function(a){return a&&[l(a.r),l(a.g),l(a.b),1<a.a?a.a:l(255*a.a)]};a.fromJSON=function(c){return c&&new a([c[0],c[1],c[2],c[3]/255])};a.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};a.toUnitRGBA=function(a){return[a.r/
    255,a.g/255,a.b/255,null!=a.a?a.a:1]};a.prototype.setColor=function(c){"string"===typeof c?a.fromString(c,this):Array.isArray(c)?a.fromArray(c,this):(this._set(c.r,c.g,c.b,c.a),c instanceof a||this._sanitize());return this};a.prototype.toRgb=function(){return[this.r,this.g,this.b]};a.prototype.toRgba=function(){return[this.r,this.g,this.b,this.a]};a.prototype.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return"#"+(2>a.length?"0"+a:a)+(2>b.length?"0"+b:b)+
    (2>c.length?"0"+c:c)};a.prototype.toCss=function(a){void 0===a&&(a=!1);var b=this.r+", "+this.g+", "+this.b;return a?"rgba("+b+", "+this.a+")":"rgb("+b+")"};a.prototype.toString=function(){return this.toCss(!0)};a.prototype.toJSON=function(){return[l(this.r),l(this.g),l(this.b),1<this.a?this.a:l(255*this.a)]};a.prototype.clone=function(){return new a(this.toRgba())};a.prototype._sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,
    255));this.a=h(this.a,0,1);return this};a.prototype._set=function(a,b,c,d){this.r=a;this.g=b;this.b=c;this.a=d};a.named={transparent:[0,0,0,0],black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,
    255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],
    darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],
    gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,
    182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
    21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rebeccapurple:[102,51,153],
    rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,
    205,50]};return a}();c.prototype.declaredClass="esri.Color";return c})},"esri/core/mathUtils":function(){define(["require","exports"],function(c,a){function m(a,c,d){return a<c?c:a>d?d:a}function e(a){l[0]=a;return l[0]}Object.defineProperty(a,"__esModule",{value:!0});var l=new Float32Array(1);a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.nextHighestPowerOfTwo=function(a){--a;for(var c=1;32>c;c<<=1)a|=a>>c;
    return a+1};a.clamp=m;a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};a.lerp=function(a,c,d){return a+(c-a)*d};a.deg2rad=function(a){return a*Math.PI/180};a.rad2deg=function(a){return 180*a/Math.PI};a.acosClamped=function(a){return Math.acos(m(a,-1,1))};a.asinClamped=function(a){return Math.asin(m(a,
    -1,1))};a.floatEqualRelative=function(c,e,d){void 0===d&&(d=1E-6);if(a.isNaN(c)||a.isNaN(e))return!1;if(c===e)return!0;var n=Math.abs(c-e),b=Math.abs(c),p=Math.abs(e);if(0===c||0===e||1E-12>b&&1E-12>p){if(n>.01*d)return!1}else if(n/(b+p)>d)return!1;return!0};a.floatEqualAbsolute=function(c,e,d){void 0===d&&(d=1E-6);return a.isNaN(c)||a.isNaN(e)?!1:(c>e?c-e:e-c)<=d};a.clampFloat32=function(c){return e(Math.max(-a.NUMBER_MAX_FLOAT32,Math.min(c,a.NUMBER_MAX_FLOAT32)))};a.NUMBER_MAX_FLOAT32=e(3.4028234663852886E38)})},
    "esri/ground/NavigationConstraint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=a.call(this,b)||this;b.type="none";return b}m(c,a);n=c;c.prototype.clone=function(){return new n({type:this.type})};var n;e([h.enumeration.serializable()({none:"none",stayAbove:"stay-above"})],
    c.prototype,"type",void 0);return c=n=e([h.subclass("esri.ground.NavigationConstraint")],c)}(h.declared(l.JSONSupport));a.NavigationConstraint=c})},"esri/layers/support/types":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isOfType=function(a,c){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var e=Array.isArray(c);return a.some(function(a){a=a.__accessorMetadata__;if(!a)return!1;a=a.properties;if(!a||!a.type||!a.type.value)return!1;
    a=a.type.value;return e?-1!==c.indexOf(a):a===c})}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=m.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-a/100,1))}})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Collection ./Handles ./accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b._handles=new h;b.root=null;return b}m(c,a);c.prototype.initialize=function(){var a=this;this._handles.add(this.rootCollectionNames.map(function(b){return a.watch("root."+b,function(){return a.updateCollections()},!0)}));this.updateCollections()};c.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};c.prototype.updateCollections=function(){var a=this;this._collections=
    this.rootCollectionNames.map(function(b){return a.get("root."+b)}).filter(function(a){return null!=a});this.refresh()};c.prototype.refresh=function(){var a=this,c=this._handles;c.remove("collections");this.removeAll();for(var d=[],e=[],f=0,n=this._collections;f<n.length;f++)this._processCollection(d,e,n[f]);this.push.apply(this,e);for(e=0;e<d.length;e++)c.add(d[e].on("after-changes",function(){return a.refresh()}),"collections")};c.prototype._createNewInstance=function(a){return new l(a)};c.prototype._processCollection=
    function(a,c,d){var b=this;d&&(a.push(d),d.forEach(function(d){d&&(c.push(d),b._processCollection(a,c,b.getChildrenFunction(d)))}))};e([g.property()],c.prototype,"rootCollectionNames",void 0);e([g.property()],c.prototype,"root",void 0);e([g.property()],c.prototype,"getChildrenFunction",void 0);return c=e([g.subclass("esri.core.CollectionFlattener")],c)}(g.declared(l))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b._groups=new Map;return b}m(c,a);c.prototype.destroy=function(){this.removeAll()};Object.defineProperty(c.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,configurable:!0});c.prototype.add=function(a,c){var b=this;if(!this._isHandle(a)&&!Array.isArray(a)&&!h.isCollection(a))return this;var d=this._getOrCreateGroup(c);Array.isArray(a)||h.isCollection(a)?a.forEach(function(a){return b._isHandle(a)&&
    d.push(a)}):d.push(a);this.notifyChange("size");return this};c.prototype.forEach=function(a,c){if("function"===typeof a)this._groups.forEach(function(b){return b.forEach(a)});else{var b=this._getGroup(a);b&&b.forEach(c)}};c.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};c.prototype.remove=function(a){if(Array.isArray(a)||h.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);
    this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};c.prototype._isHandle=function(a){return a&&!!a.remove};c.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};c.prototype._getGroup=function(a){return this._groups.get(this._ensureGroupKey(a))};c.prototype._deleteGroup=
    function(a){return this._groups.delete(this._ensureGroupKey(a))};c.prototype._ensureGroupKey=function(a){return a||"_default_"};e([g.property({readOnly:!0})],c.prototype,"size",null);return c=e([g.subclass("esri.core.Handles")],c)}(g.declared(l))})},"esri/support/basemapUtils":function(){define("require exports ../Basemap ../core/Collection ../core/Logger ../core/urlUtils ../core/accessorSupport/ensureType ./basemapDefinitions".split(" "),function(c,a,m,e,l,h,g,d){function n(a,b){var c;if("string"===
    typeof a){if(!(a in d.esriBasemapDefinitions))return b=Object.keys(d.esriBasemapDefinitions).map(function(a){return'"'+a+'"'}).join(", "),x.warn("Unable to find basemap definition for: "+a+". Try one of these: "+b),null;b&&(c=b[a]);c||(c=m.fromId(a),b&&(b[a]=c))}else c=g.default(m,a);return c}function b(a,b){var c=new e;a.forEach(function(a){var d=b.find(function(b){return w(q(a),q(b))})||a;c.some(function(a){return a===d})?c.push(a):c.push(d)});return c}function p(a){return a?!a.loaded&&a.resourceInfo?
    f(a.resourceInfo.data):{baseLayers:k(a.baseLayers),referenceLayers:k(a.referenceLayers)}:null}function k(a){return(e.isCollection(a)?a.toArray():a).map(q)}function q(a){return{type:a.type,url:v("urlTemplate"in a&&a.urlTemplate||a.url||"styleUrl"in a&&a.styleUrl),minScale:"minScale"in a&&null!=a.minScale?a.minScale:0,maxScale:"maxScale"in a&&null!=a.maxScale?a.maxScale:0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visible?!!a.visible:!0}}function f(a){return a?{baseLayers:r(a.baseMapLayers.filter(function(a){return!a.isReference})),
    referenceLayers:r(a.baseMapLayers.filter(function(a){return a.isReference}))}:null}function r(a){return a.map(function(a){var b;switch(a.layerType){case "VectorTileLayer":b="vector-tile";break;case "ArcGISTiledMapServiceLayer":b="tile";break;default:b="unknown"}return{type:b,url:v(a.templateUrl||a.urlTemplate||a.styleUrl||a.url),minScale:null!=a.minScale?a.minScale:0,maxScale:null!=a.maxScale?a.maxScale:0,opacity:null!=a.opacity?a.opacity:1,visible:null!=a.visibility?!!a.visibility:!0}})}function t(a,
    b,c){return null!=a!==(null!=b)?"not-equal":a?u(a.baseLayers,b.baseLayers)?u(a.referenceLayers,b.referenceLayers)?"equal":c.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function u(a,b){if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!w(a[c],b[c]))return!1;return!0}function w(a,b){return a.type===b.type&&a.url===b.url&&a.minScale===b.minScale&&a.maxScale===b.maxScale&&a.visible===b.visible&&a.opacity===b.opacity}function v(a){return a?h.normalize(a).replace(/^\s*https?:/i,
    "").toLowerCase():""}Object.defineProperty(a,"__esModule",{value:!0});var x=l.getLogger("esri.support.basemapUtils");a.createCache=function(){return{}};a.ensureType=n;a.clonePreservingTiledLayers=function(a,c){void 0===c&&(c=null);a=n(a);if(!a)return null;var d=new m({id:a.id,title:a.title,baseLayers:a.baseLayers.slice(),referenceLayers:a.referenceLayers.slice()});c&&(d.baseLayers=b(d.baseLayers,c.baseLayers),d.referenceLayers=b(d.referenceLayers,c.referenceLayers));d.load();d.portalItem=a.portalItem;
    return d};a.getWellKnownBasemapId=function(a){var b=null;a=p(a);for(var c in d.esriBasemapDefinitions){var e=f(d.esriBasemapDefinitions[c]),e=t(a,e,{mustMatchReferences:!1});if("equal"===e){b=c;break}"base-layers-equal"===e&&(b=c)}return b};a.contentEquals=function(a,b){if(a===b)return!0;a=p(a);b=p(b);return"equal"===t(a,b,{mustMatchReferences:!0})}})},"esri/support/groundUtils":function(){define(["require","exports","../Ground","../core/Logger","../core/accessorSupport/ensureType"],function(c,a,
    m,e,l){Object.defineProperty(a,"__esModule",{value:!0});var h=e.getLogger("esri.support.groundUtils");a.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};a.ensureType=
    function(c){var d;"string"===typeof c?c in a.groundElevationLayers?d=new m({resourceInfo:{data:{layers:[a.groundElevationLayers[c]]}}}):h.warn("Unable to find ground definition for: "+c+'. Try "world-elevation"'):d=l.default(m,c);return d}})},"esri/support/LayersMixin":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/Logger ../core/promiseUtils ../core/accessorSupport/decorators ../layers/Layer".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){function p(a,b,c){var d;if(a)for(var e=0,f=a.length;e<f;e++)if(d=a.getItemAt(e),d[b]===c||d&&"group"===d.type&&(d=p(d.layers,b,c)))return d}Object.defineProperty(a,"__esModule",{value:!0});var k=g.getLogger("esri.support.LayersMixin");a.LayersMixin=function(a){return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.call(this,b)||this;d.layers=new l;d.layers.on("after-add",function(a){a=a.item;a.parent&&a.parent!==d&&"remove"in
    a.parent&&a.parent.remove(a);a.parent=d;d.layerAdded(a);"elevation"===a.type&&k.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"' is not supported as an operational layer and will therefore be ignored.")});d.layers.on("after-remove",function(a){a=a.item;a.parent=null;d.layerRemoved(a)});return d}m(c,a);c.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(c.prototype,"layers",{set:function(a){this._set("layers",h.referenceSetter(a,this._get("layers")))},
    enumerable:!0,configurable:!0});c.prototype.add=function(a,c){var e=this,f=this.layers;c=f.getNextIndex(c);a instanceof b?(a.parent===this&&this.reorder(a,c),f.add(a,c)):d.isPromiseLike(a)?a.then(function(a){e.destroyed||e.add(a,c)}):k.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")};c.prototype.addMany=function(a,b){var c=this,d=this.layers;b=d.getNextIndex(b);a.slice().forEach(function(a){a.parent===c?c.reorder(a,b):(d.add(a,b),b+=1)})};c.prototype.findLayerById=
    function(a){return p(this.layers,"id",a)};c.prototype.findLayerByUid=function(a){return p(this.layers,"uid",a)};c.prototype.remove=function(a){return this.layers.remove(a)};c.prototype.removeMany=function(a){return this.layers.removeMany(a)};c.prototype.removeAll=function(){return this.layers.removeAll()};c.prototype.reorder=function(a,b){return this.layers.reorder(a,b)};c.prototype.layerAdded=function(a){};c.prototype.layerRemoved=function(a){};e([n.property()],c.prototype,"layers",null);return c=
    e([n.subclass("esri.support.LayersMixin")],c)}(n.declared(a))}})},"esri/layers/Layer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../config ../geometry ../request ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators @dojo/framework/shim/Promise".split(" "),function(c,
    a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){var w=0,v=r.getLogger("esri.layers.Layer");return function(a){function f(){var b=null!==a&&a.apply(this,arguments)||this;b.attributionDataUrl=null;b.fullExtent=new n.Extent(-180,-90,180,90,n.SpatialReference.WGS84);b.legendEnabled=!0;b.listMode="show";b.opacity=1;b.parent=null;b.popupEnabled=!0;b.attributionVisible=!0;b.spatialReference=n.SpatialReference.WGS84;b.title=null;b.type=null;b.url=null;b.visible=!0;return b}e(f,a);f.fromArcGISServerUrl=function(a){return g(this,
    void 0,void 0,function(){var b,d,e;return h(this,function(f){switch(f.label){case 0:return b="string"===typeof a?{url:a}:a,[4,new Promise(function(a,b){c(["./support/arcgisLayers"],a,b)})];case 1:d=f.sent(),f.label=2;case 2:return f.trys.push([2,4,,5]),[4,d.fromUrl(b)];case 3:return[2,f.sent()];case 4:throw e=f.sent(),v.error("#fromArcGISServerUrl({ url: '"+b.url+"'})","Failed to create layer from arcgis server url",e),e;case 5:return[2]}})})};f.fromPortalItem=function(a){return g(this,void 0,void 0,
    function(){var b,e,f,k,p,n;return h(this,function(g){switch(g.label){case 0:return b="portalItem"in a?a:{portalItem:a},[4,new Promise(function(a,b){c(["../portal/support/portalLayers"],a,b)})];case 1:e=g.sent(),g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.fromItem(b)];case 3:return[2,g.sent()];case 4:throw f=g.sent(),p=(k=b&&b.portalItem)&&k.id||"unset",n=k&&k.portal&&k.portal.url||d.portalUrl,v.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+n+"', id: '"+p+"')",
    f),f;case 5:return[2]}})})};f.prototype.initialize=function(){var a=this;this.when().catch(function(b){r.getLogger(a.declaredClass).error("#load()","Failed to load layer (title: '"+a.title+"', id: '"+a.id+"')",b)})};Object.defineProperty(f.prototype,"hasAttributionData",{get:function(){return null!=this.attributionDataUrl},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"id",{get:function(){return Date.now().toString(16)+"-layer-"+w++},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,
    "parsedUrl",{get:function(){var a=this._get("url");return a?t.urlToObject(a):null},enumerable:!0,configurable:!0});f.prototype.fetchAttributionData=function(){return g(this,void 0,void 0,function(){var a,c;return h(this,function(d){switch(d.label){case 0:return a=this.attributionDataUrl,this.hasAttributionData&&a?[4,b(a,{query:{f:"json"},responseType:"json"})]:[3,2];case 1:return c=d.sent(),[2,c.data];case 2:throw new p("layer:no-attribution-data","Layer does not have attribution data");}})})};l([u.property({type:String})],
    f.prototype,"attributionDataUrl",void 0);l([u.property({type:n.Extent})],f.prototype,"fullExtent",void 0);l([u.property({readOnly:!0,dependsOn:["attributionDataUrl"]})],f.prototype,"hasAttributionData",null);l([u.property({type:String})],f.prototype,"id",null);l([u.property({type:Boolean})],f.prototype,"legendEnabled",void 0);l([u.property({type:["show","hide","hide-children"]})],f.prototype,"listMode",void 0);l([u.property({type:Number,range:{min:0,max:1},nonNullable:!0})],f.prototype,"opacity",
    void 0);l([u.property()],f.prototype,"parent",void 0);l([u.property({readOnly:!0,dependsOn:["url"]})],f.prototype,"parsedUrl",null);l([u.property({type:Boolean})],f.prototype,"popupEnabled",void 0);l([u.property({type:Boolean})],f.prototype,"attributionVisible",void 0);l([u.property({type:n.SpatialReference})],f.prototype,"spatialReference",void 0);l([u.property({type:String})],f.prototype,"title",void 0);l([u.property({type:String,readOnly:!0,json:{read:!1}})],f.prototype,"type",void 0);l([u.property()],
    f.prototype,"url",void 0);l([u.property({type:Boolean,nonNullable:!0})],f.prototype,"visible",void 0);return f=l([u.subclass("esri.layers.Layer")],f)}(u.declared(k.EventedMixin(q.IdentifiableMixin(f))))})},"esri/core/Identifiable":function(){define(["require","exports","./tsSupport/declareExtendsHelper","./tsSupport/decorateHelper","./accessorSupport/decorators"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});var h=0;a.IdentifiableMixin=function(a){return function(a){function c(){for(var b=
    [],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;Object.defineProperty(b,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+h++});return b}m(c,a);return c=e([l.subclass("esri.core.Identifiable")],c)}(l.declared(a))};c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);return c=e([l.subclass("esri.core.Identifiable")],c)}(l.declared(a.IdentifiableMixin(function(){return function(){}}())));a.Identifiable=c})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./geometry ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n){function b(){return{enabled:!this.camera}}return function(a){function c(b){b=a.call(this,b)||this;b.rotation=0;b.scale=0;b.targetGeometry=null;b.camera=null;return b}m(c,a);p=c;c.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};c.prototype.clone=function(){return new p({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var p;e([d.property({type:Number,
    json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],c.prototype,"rotation",void 0);e([d.cast("rotation")],c.prototype,"castRotation",null);e([d.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:b}}}}})],c.prototype,"scale",void 0);e([d.property({types:h.geometryTypes,json:{read:n.fromJSON,write:!0,origins:{"web-scene":{read:n.fromJSON,write:{overridePolicy:b}}}}})],c.prototype,"targetGeometry",void 0);e([d.property({type:l,json:{write:!0}})],c.prototype,
    "camera",void 0);return c=p=e([d.subclass("esri.Viewpoint")],c)}(d.declared(g.JSONSupport))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/mathUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./geometry/Point ./views/3d/support/mathUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b,c,d,e){b=a.call(this,b)||this;b.position=new n([0,0,0]);b.heading=
    0;b.tilt=0;b.fov=55;return b}m(c,a);p=c;c.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};c.prototype.writePosition=function(a,b,c,e){var f=a.clone();f.x=d.ensureNumber(a.x||0);f.y=d.ensureNumber(a.y||0);f.z=a.hasZ?d.ensureNumber(a.z||0):a.z;b[c]=f.write(null,e)};c.prototype.readPosition=function(a,b){var c=new n;c.read(a,b);c.x=d.ensureNumber(c.x||0);c.y=d.ensureNumber(c.y||
    0);c.z=c.hasZ?d.ensureNumber(c.z||0):c.z;return c};c.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};c.prototype.clone=function(){return new p({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var p;e([g.property({type:n,json:{write:{isRequired:!0}}})],c.prototype,"position",void 0);e([g.writer("position")],c.prototype,"writePosition",null);e([g.reader("position")],c.prototype,
    "readPosition",null);e([g.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),g.cast(function(a){return b.cyclicalDeg.normalize(d.ensureNumber(a))})],c.prototype,"heading",void 0);e([g.property({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),g.cast(function(a){return h.clamp(d.ensureNumber(a),-180,180)})],c.prototype,"tilt",void 0);e([g.property({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],c.prototype,"fov",void 0);return c=p=e([g.subclass("esri.Camera")],c)}(g.declared(l.JSONSupport))})},
    "esri/views/3d/support/mathUtils":function(){define(["require","exports","../../../core/mathUtils","../../../core/libs/gl-matrix-2/vec3","../../../core/libs/gl-matrix-2/vec3f64"],function(c,a,m,e,l){function h(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.cosCapped=function(a,b){return a>b?Math.cos(b):Math.cos(a)};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*
    Math.atan(b*Math.tan(.5*a)/c)};a.maxScale=function(a){return Math.sqrt(Math.max(Math.max(a[0]*a[0]+a[4]*a[4]+a[8]*a[8],a[1]*a[1]+a[5]*a[5]+a[9]*a[9]),a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))};a.scaleFromMatrix=function(a,b){e.vec3.set(a,Math.sqrt(b[0]*b[0]+b[4]*b[4]+b[8]*b[8]),Math.sqrt(b[1]*b[1]+b[5]*b[5]+b[9]*b[9]),Math.sqrt(b[2]*b[2]+b[6]*b[6]+b[10]*b[10]));return a};a.makeOrthonormal=function(a,b,c){c=c||a;var d=e.vec3.dot(a,b);e.vec3.set(c,a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2]);e.vec3.normalize(c,c)};
    a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?e.vec3.set(b,0,1,0):e.vec3.set(b,1,0,0);e.vec3.cross(c,a,b);e.vec3.normalize(b,b);e.vec3.cross(b,c,a);e.vec3.normalize(c,c)};a.moduloPositive=function(a,b){return(a%b+b)%b};a.cartesianToSpherical=function(a,b){var c=e.vec3.length(a),d=m.asinClamped(a[2]/c);e.vec3.set(b,c,d,Math.atan2(a[1]/c,a[0]/c));return b};a.sphericalToCartesian=function(a,b){var c=a[0],d=a[1];a=a[2];var k=Math.cos(d);e.vec3.set(b,c*k*Math.cos(a),c*k*Math.sin(a),c*Math.sin(d))};
    a.directionFromTo=function(a,b,c){var d=c[0]-b[0],e=c[1]-b[1];b=c[2]-b[2];c=d*d+e*e+b*b;if(!c)return a[0]=0,a[1]=0,a[2]=0,a;c=1/Math.sqrt(c);a[0]=d*c;a[1]=e*c;a[2]=b*c;return a};a.bilerp=function(a,b,c,d,e,p){a+=(b-a)*e;return a+(c+(d-c)*e-a)*p};a.slerp=function(a,c,d,n){void 0===n&&(n=l.vec3f64.create());var f=e.vec3.length(a),k=e.vec3.length(c),g=e.vec3.dot(a,c)/(f*k);if(.9999999999999999>g){var g=Math.acos(g),h=((1-d)*f+d*k)/Math.sin(g),k=h/k*Math.sin(d*g);e.vec3.scale(b,a,h/f*Math.sin((1-d)*g));
    e.vec3.scale(p,c,k);return e.vec3.add(n,b,p)}return e.vec3.lerp(n,a,c,d)};a.angle=function(a,c,d){a=e.vec3.normalize(b,a);c=e.vec3.normalize(p,c);var f=m.acosClamped(e.vec3.dot(a,c));return d&&(a=e.vec3.cross(n,a,c),0>e.vec3.dot(a,d))?-f:f};a.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var d=1;c>a[d][0];)d++;var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,
    b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};c=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};
    a.prototype.clamp=function(a,b){void 0===b&&(b=0);return m.clamp(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.shortestSignedDiff=function(a,b){a=this.normalize(a);b=this.normalize(b);var c=
    b-a;a=b<a?this.minimalMonotonic(a,b)-a:b-this.minimalMonotonic(b,a);return Math.abs(c)<Math.abs(a)?c:a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=c;a.planeFromPoints=function(a,b,c,p){e.vec3.subtract(g,b,a);e.vec3.subtract(d,c,a);e.vec3.cross(p,g,d);e.vec3.normalize(p,p);p[3]=-e.vec3.dot(a,p)};var g=l.vec3f64.create(),d=l.vec3f64.create();a.cyclical2PI=h(new c(0,2*Math.PI));a.cyclicalPI=h(new c(-Math.PI,Math.PI));
    a.cyclicalDeg=h(new c(0,360));var n=l.vec3f64.create(),b=l.vec3f64.create(),p=l.vec3f64.create()})},"esri/core/libs/gl-matrix-2/vec3":function(){define(["require","exports","./math/vec3"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.vec3=m})},"esri/core/libs/gl-matrix-2/math/vec3":function(){define(["require","exports","../factories/vec3f64","./common"],function(c,a,m,e){function l(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)}function h(a,b){a[0]=b[0];a[1]=b[1];
    a[2]=b[2];return a}function g(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];return a}function d(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];a[2]=b[2]*c[2];return a}function n(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];a[2]=b[2]/c[2];return a}function b(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+d*d+a*a)}function p(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}function k(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a}function q(a,b){var c=b[0],d=b[1],e=b[2],c=c*c+
    d*d+e*e;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c,a[2]=b[2]*c);return a}function f(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}Object.defineProperty(a,"__esModule",{value:!0});a.length=l;a.copy=h;a.set=function(a,b,c,d){a[0]=b;a[1]=c;a[2]=d;return a};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];return a};a.subtract=g;a.multiply=d;a.divide=n;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);a[2]=Math.ceil(b[2]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);
    a[1]=Math.floor(b[1]);a[2]=Math.floor(b[2]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);a[2]=Math.min(b[2],c[2]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);a[2]=Math.max(b[2],c[2]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);a[2]=Math.round(b[2]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;return a};a.scaleAndAdd=function(a,b,c,d){a[0]=b[0]+c[0]*d;a[1]=b[1]+c[1]*d;
    a[2]=b[2]+c[2]*d;return a};a.distance=b;a.squaredDistance=p;a.squaredLength=k;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};a.normalize=q;a.dot=f;a.cross=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=c[0],k=c[1];c=c[2];a[0]=e*c-b*k;a[1]=b*f-d*c;a[2]=d*k-e*f;return a};a.lerp=function(a,b,c,d){var e=b[0],f=b[1];b=b[2];a[0]=e+d*(c[0]-e);a[1]=f+d*(c[1]-f);a[2]=b+d*(c[2]-b);return a};a.hermite=function(a,b,c,d,e,
    f){var k=f*f,p=k*(2*f-3)+1,n=k*(f-2)+f,g=k*(f-1);f=k*(3-2*f);a[0]=b[0]*p+c[0]*n+d[0]*g+e[0]*f;a[1]=b[1]*p+c[1]*n+d[1]*g+e[1]*f;a[2]=b[2]*p+c[2]*n+d[2]*g+e[2]*f;return a};a.bezier=function(a,b,c,d,e,f){var k=1-f,p=k*k,n=f*f,g=p*k,p=3*f*p,k=3*n*k;f*=n;a[0]=b[0]*g+c[0]*p+d[0]*k+e[0]*f;a[1]=b[1]*g+c[1]*p+d[1]*k+e[1]*f;a[2]=b[2]*g+c[2]*p+d[2]*k+e[2]*f;return a};a.random=function(a,b){b=b||1;var c=2*e.RANDOM()*Math.PI,d=2*e.RANDOM()-1,f=Math.sqrt(1-d*d)*b;a[0]=Math.cos(c)*f;a[1]=Math.sin(c)*f;a[2]=d*b;
    return a};a.transformMat4=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=c[0]*d+c[4]*e+c[8]*b+c[12];a[1]=c[1]*d+c[5]*e+c[9]*b+c[13];a[2]=c[2]*d+c[6]*e+c[10]*b+c[14];return a};a.transformMat3=function(a,b,c){var d=b[0],e=b[1];b=b[2];a[0]=d*c[0]+e*c[3]+b*c[6];a[1]=d*c[1]+e*c[4]+b*c[7];a[2]=d*c[2]+e*c[5]+b*c[8];return a};a.transformQuat=function(a,b,c){var d=c[0],e=c[1],f=c[2],k=b[0],p=b[1];b=b[2];var n=e*b-f*p,g=f*k-d*b,h=d*p-e*k;c=2*c[3];a[0]=k+n*c+2*(e*h-f*g);a[1]=p+g*c+2*(f*n-d*h);a[2]=b+h*c+2*(d*
    g-e*n);return a};a.rotateX=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0];f[1]=e[1]*Math.cos(d)-e[2]*Math.sin(d);f[2]=e[1]*Math.sin(d)+e[2]*Math.cos(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};a.rotateY=function(a,b,c,d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[2]*Math.sin(d)+e[0]*Math.cos(d);f[1]=e[1];f[2]=e[2]*Math.cos(d)-e[0]*Math.sin(d);a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};a.rotateZ=function(a,b,c,
    d){var e=[],f=[];e[0]=b[0]-c[0];e[1]=b[1]-c[1];e[2]=b[2]-c[2];f[0]=e[0]*Math.cos(d)-e[1]*Math.sin(d);f[1]=e[0]*Math.sin(d)+e[1]*Math.cos(d);f[2]=e[2];a[0]=f[0]+c[0];a[1]=f[1]+c[1];a[2]=f[2]+c[2];return a};a.angle=function(a,b){h(r,a);h(t,b);q(r,r);q(t,t);a=f(r,t);return 1<a?0:-1>a?Math.PI:Math.acos(a)};var r=m.create(),t=m.create();a.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]};a.equals=function(a,b){var c=a[0],
    d=a[1];a=a[2];var f=b[0],k=b[1];b=b[2];return Math.abs(c-f)<=e.EPSILON*Math.max(1,Math.abs(c),Math.abs(f))&&Math.abs(d-k)<=e.EPSILON*Math.max(1,Math.abs(d),Math.abs(k))&&Math.abs(a-b)<=e.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};a.sub=g;a.mul=d;a.div=n;a.dist=b;a.sqrDist=p;a.len=l;a.sqrLen=k})},"esri/core/libs/gl-matrix-2/factories/vec3f64":function(){define(["require","exports"],function(c,a){function m(){return[0,0,0]}function e(){return[1,1,1]}function l(){return[1,0,0]}function h(){return[0,
    1,0]}function g(){return[0,0,1]}Object.defineProperty(a,"__esModule",{value:!0});a.create=m;a.clone=function(a){return[a[0],a[1],a[2]]};a.fromValues=function(a,c,b){return[a,c,b]};a.fromArray=function(a){for(var c=m(),b=Math.min(3,a.length),d=0;d<b;++d)c[d]=a[d];return c};a.createView=function(a,c){return new Float64Array(a,c,3)};a.zeros=function(){return m()};a.ones=e;a.unitX=l;a.unitY=h;a.unitZ=g;a.ZEROS=m();a.ONES=e();a.UNIT_X=l();a.UNIT_Y=h();a.UNIT_Z=g()})},"esri/core/libs/gl-matrix-2/math/common":function(){define(["require",
    "exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.EPSILON=1E-6;a.RANDOM=Math.random;var m=Math.PI/180,e=180/Math.PI;a.toRadian=function(a){return a*m};a.toDegree=function(a){return a*e};a.equals=function(c,e){return Math.abs(c-e)<=a.EPSILON*Math.max(1,Math.abs(c),Math.abs(e))}})},"esri/core/libs/gl-matrix-2/vec3f64":function(){define(["require","exports","./factories/vec3f64"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.vec3f64=m})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/promiseUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/read ../../core/accessorSupport/write ../support/commonProperties".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});a.OperationalLayer=function(c){return function(c){function k(){var a=null!==c&&c.apply(this,arguments)||this;a.title="Layer";return a}m(k,c);k.prototype.writeListMode=function(a,b,c,d){d&&"ground"===d.layerContainerType?b[c]=a:a&&n.willPropertyWrite(this,c,{},d)&&(b[c]=a)};k.prototype.writeTitle=function(a,b){b.title=a||"Layer"};k.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};k.prototype.read=function(a,
    b){var c=this,e=arguments;b&&(b.layer=this);d.readLoadable(this,a,function(b){return c.inherited(e,[a,b])},b)};k.prototype.write=function(b,c){if(c&&c.origin){var d=c.origin+"/"+(c.layerContainerType||"operational-layers"),e=a.supportedTypes[d],e=e&&e[this.operationalLayerType];if("write"!==e&&"readwrite"!==e)return c.messages&&c.messages.push(new l("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+d+"'",{layer:this})),
    null}d=this.inherited(arguments,[b,c]);e=!!c&&!!c.messages&&!!c.messages.filter(function(a){return a instanceof l&&"web-document-write:property-required"===a.name}).length;return!this.url&&e?null:d};e([g.property({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],k.prototype,"id",void 0);e([g.property({json:{write:{ignoreOrigin:!0}}})],k.prototype,"listMode",void 0);e([g.writer("listMode")],k.prototype,"writeListMode",null);e([g.property({type:String,
    json:{write:{ignoreOrigin:!0,allowNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}}}}})],k.prototype,"title",void 0);e([g.writer("title")],k.prototype,"writeTitle",null);e([g.property({type:String,readOnly:!0,json:{write:{target:"layerType",ignoreOrigin:!0}}})],k.prototype,"operationalLayerType",void 0);e([g.writer("operationalLayerType")],k.prototype,"writeOperationalLayerType",null);e([g.property(b.opacity)],k.prototype,"opacity",void 0);e([g.property({type:Boolean,json:{read:{source:"visibility"},
    write:{target:"visibility"},origins:{"web-document":{read:{source:"visibility"},write:{target:"visibility"},default:!0}}}})],k.prototype,"visible",void 0);return k=e([g.subclass("esri.layers.mixins.OperationalLayer")],k)}(g.declared(c))};a.typeModuleMap={ArcGISFeatureLayer:function(){return h.create(function(a){return c(["../FeatureLayer"],a)})},ArcGISImageServiceLayer:function(){return h.create(function(a){return c(["../ImageryLayer"],a)})},ArcGISImageServiceVectorLayer:function(){return h.resolve(null)},
    ArcGISMapServiceLayer:function(){return h.create(function(a){return c(["../MapImageLayer"],a)})},ArcGISSceneServiceLayer:function(){return h.create(function(a){return c(["../SceneLayer"],a)})},ArcGISStreamLayer:function(){return h.create(function(a){return c(["../StreamLayer"],a)})},ArcGISTiledElevationServiceLayer:function(){return h.create(function(a){return c(["../ElevationLayer"],a)})},ArcGISTiledImageServiceLayer:function(){return h.create(function(a){return c(["../TileLayer"],a)})},ArcGISTiledMapServiceLayer:function(){return h.create(function(a){return c(["../TileLayer"],
    a)})},BingMapsAerial:function(){return h.create(function(a){return c(["../BingMapsLayer"],a)})},BingMapsRoad:function(){return h.create(function(a){return c(["../BingMapsLayer"],a)})},BingMapsHybrid:function(){return h.create(function(a){return c(["../BingMapsLayer"],a)})},BuildingSceneLayer:function(){return h.create(function(a){return c(["../BuildingSceneLayer"],a)})},CSV:function(){return h.create(function(a){return c(["../CSVLayer"],a)})},GeoRSS:function(){return h.create(function(a){return c(["../GeoRSSLayer"],
    a)})},GroupLayer:function(){return h.create(function(a){return c(["../GroupLayer"],a)})},IntegratedMeshLayer:function(){return h.create(function(a){return c(["../IntegratedMeshLayer"],a)})},KML:function(){return h.create(function(a){return c(["../KMLLayer"],a)})},OpenStreetMap:function(){return h.create(function(a){return c(["../OpenStreetMapLayer"],a)})},PointCloudLayer:function(){return h.create(function(a){return c(["../PointCloudLayer"],a)})},VectorTileLayer:function(){return h.create(function(a){return c(["../VectorTileLayer"],
    a)})},WebTiledLayer:function(){return h.create(function(a){return c(["../WebTileLayer"],a)})},WFS:function(){return h.resolve(null)},WMS:function(){return h.create(function(a){return c(["../WMSLayer"],a)})},RasterDataLayer:function(){return h.resolve(null)}};a.supportedTypes={"web-scene/operational-layers":{ArcGISFeatureLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISSceneServiceLayer:"readwrite",ArcGISTiledElevationServiceLayer:"read",ArcGISTiledImageServiceLayer:"readwrite",
    ArcGISTiledMapServiceLayer:"readwrite",BuildingSceneLayer:"readwrite",GroupLayer:"readwrite",IntegratedMeshLayer:"readwrite",PointCloudLayer:"readwrite",WebTiledLayer:"readwrite",CSV:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",KML:"readwrite",RasterDataLayer:"readwrite"},"web-scene/basemap":{ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",WebTiledLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",ArcGISImageServiceLayer:"readwrite",
    WMS:"readwrite",ArcGISMapServiceLayer:"readwrite"},"web-scene/ground":{ArcGISTiledElevationServiceLayer:"readwrite"},"web-map/operational-layers":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISStreamLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",ArcGISFeatureLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite",CSV:"readwrite",GeoRSS:"readwrite",
    KML:"readwrite",VectorTileLayer:"readwrite",WFS:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite"},"web-map/basemap":{ArcGISImageServiceLayer:"readwrite",ArcGISImageServiceVectorLayer:"readwrite",ArcGISMapServiceLayer:"readwrite",ArcGISTiledImageServiceLayer:"readwrite",ArcGISTiledMapServiceLayer:"readwrite",OpenStreetMap:"readwrite",VectorTileLayer:"readwrite",WMS:"readwrite",WebTiledLayer:"readwrite",BingMapsAerial:"readwrite",BingMapsRoad:"readwrite",BingMapsHybrid:"readwrite"}}})},"esri/layers/support/commonProperties":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/urlUtils ../../core/accessorSupport/utils ../../core/accessorSupport/write ../../symbols/support/ElevationInfo ../../webdoc/support/opacityUtils".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});a.screenSizePerspectiveEnabled={type:Boolean,value:!0,json:{origins:{"web-scene":{read:{source:["id","url","layerType"],reader:function(a,b){if(null==b.screenSizePerspective&&"defaults"===this.originOf("screenSizePerspectiveEnabled"))l.getProperties(this).store.set("screenSizePerspectiveEnabled",!1,0);else return b.screenSizePerspective}},write:{ignoreOrigin:!0,target:"screenSizePerspective",writer:function(a,b,c,d){"defaults"===
    this.originOf("screenSizePerspectiveEnabled")&&a?b[c]=a:h.willPropertyWrite(this,"screenSizePerspectiveEnabled",{},d)&&(b[c]=a)}}}}}};a.popupEnabled={type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:function(a,b){return!b.disablePopup}},write:{target:"disablePopup",writer:function(a,b,c){b[c]=!a}}}};a.labelsVisible={type:Boolean,json:{read:{source:"showLabels"},write:{target:"showLabels"}}};a.url={type:String,json:{write:{isRequired:!0,ignoreOrigin:!0,writer:e.write}}};a.legendEnabled=
    {type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}};a.elevationInfo={value:null,type:g,json:{origins:{service:{read:{source:"elevationInfo"},write:{target:"elevationInfo",enabled:!1}}},read:{source:"layerDefinition.elevationInfo"},write:{target:"layerDefinition.elevationInfo"}}};a.readOnlyService=function(a){return{type:a,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}};a.opacity={type:Number,json:{origins:{"web-document":{default:1,
    write:!0,read:!0}}}};a.opacityDrawingInfo=m({},a.opacity,{json:m({},a.opacity.json,{origins:{"web-document":m({},a.opacity.json.origins["web-document"],{write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}})},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:function(a,b,c){if((!c||"service"===c.origin)&&b.drawingInfo&&void 0!==b.drawingInfo.transparency)return d.transparencyToOpacity(b.drawingInfo.transparency);
    if(b.layerDefinition&&b.layerDefinition.drawingInfo&&void 0!==b.layerDefinition.drawingInfo.transparency)return d.transparencyToOpacity(b.layerDefinition.drawingInfo.transparency)}}})})})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ./FeatureExpressionInfo ./unitConversionUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){var k=g.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),q=new g.JSONMap({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);d=c;c.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};
    c.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(c.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});
    c.prototype.write=function(){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};c.prototype.clone=function(){return new d({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var d;e([n.property({type:b,json:{write:!0}})],c.prototype,"featureExpressionInfo",void 0);e([n.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c.prototype,
    "readFeatureExpressionInfo",null);e([n.writer("featureExpressionInfo",{featureExpressionInfo:{type:b},"featureExpression.value":{type:[0]}})],c.prototype,"writeFeatureExpressionInfo",null);e([n.property({type:k.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{type:k.jsonValues,read:k.read,write:{writer:k.write,isRequired:!0}}})],c.prototype,"mode",null);e([n.property({type:Number,json:{write:!0}})],c.prototype,"offset",void 0);e([n.property({type:p.supportedUnits,json:{type:String,
    read:q.read,write:q.write}})],c.prototype,"unit",null);return c=d=e([n.subclass("esri.layers.support.ElevationInfo")],c)}(n.declared(d.JSONSupport))})},"esri/symbols/support/FeatureExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../layers/support/fieldUtils".split(" "),function(c,a,m,
    e,l,h,g,d,n){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);c=b;b.prototype.collectRequiredFields=function(a,b){return h(this,void 0,void 0,function(){return l(this,function(c){return[2,n.collectArcadeFieldNames(a,b,this.expression)]})})};b.prototype.clone=function(){return new c({expression:this.expression,title:this.title})};var c;e([d.property({type:String,json:{write:!0}})],b.prototype,"expression",void 0);e([d.property({type:String,json:{write:!0}})],b.prototype,
    "title",void 0);return b=c=e([d.subclass("esri.layers.support.FeatureExpressionInfo")],b)}(d.declared(g.JSONSupport))})},"esri/layers/support/fieldUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper @dojo/framework/shim/array ../../core/Error ../../core/iteratorUtils ../../core/maybe ../../core/object ../../core/promiseUtils ./domains ../../support/arcadeOnDemand".split(" "),function(c,a,m,e,l,h,g,d,n,
    b,p,k,q){function f(a,c,d){if(a)for(var e=0;e<a.length;e++){var f=a[e],k=b.getDeepValue(f,c);(k=k&&"function"!==typeof k&&w(d,k))&&b.setDeepValue(f,k.name,c)}}function r(a,b){if(!a||!b)return[];M.clear();t(M,a,b);return d.valuesOfSet(M).sort()}function t(a,b,c){if(c)if(b&&b.length)if(h.includes(c,"*"))for(c=0;c<b.length;c++)a.add(b[c].name);else for(var d=0;d<c.length;d++)e=c[d],u(a,b,e);else if(h.includes(c,"*"))a.clear(),a.add("*");else for(b=0;b<c.length;b++){var e=c[b];a.add(e)}}function u(a,
    b,c){b&&b.length?(b=w(b,c))&&a.add(b.name):"string"===typeof c&&a.add(c)}function w(a,b){if("string"!==typeof b)return null;if(null!=a){b=b.toLowerCase();for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.name.toLowerCase()===b)return d}}return null}function v(a,b,c){return l(this,void 0,void 0,function(){var d,f,k,g,n;return e(this,function(e){switch(e.label){case 0:return c?[4,q.loadArcade()]:[2];case 1:d=e.sent().arcadeUtils;f=d.extractFieldNames(c);k=0;for(g=f;k<g.length;k++)n=g[k],u(a,b,n);return[2]}})})}
    function x(a,c){return l(this,void 0,void 0,function(){var d,f;return e(this,function(e){if(!c)return[2];d=c.fields;return(f=b.getDeepValue("elevationInfo.featureExpressionInfo",c))?[2,f.collectRequiredFields(a,d)]:[2]})})}function z(a,b){return l(this,void 0,void 0,function(){var c,d;return e(this,function(e){switch(e.label){case 0:return c=b.labelingInfo,d=b.fields,c&&c.length?[4,p.all(c.map(function(b){return A(a,d,b)}))]:[2];case 1:return e.sent(),[2]}})})}function A(a,b,c){return l(this,void 0,
    void 0,function(){var d,f,k,g,n;return e(this,function(e){switch(e.label){case 0:if(!c)return[2];d=c.getLabelExpression();f=c.where;return"arcade"!==d.type?[3,2]:[4,v(a,b,d.expression)];case 1:return e.sent(),[3,3];case 2:(k=d.expression.match(/{[^}]*}/g))&&k.forEach(function(c){u(a,b,c.slice(1,-1))}),e.label=3;case 3:return g=/['"]+/g,f&&(n=f.split(" "),3===n.length&&u(a,b,n[0].replace(g,"")),7===n.length&&(u(a,b,n[0].replace(g,"")),u(a,b,n[4].replace(g,"")))),[2]}})})}function y(a){return"number"===
    typeof a&&!isNaN(a)&&isFinite(a)}function B(a){return null===a||y(a)}function D(a){return null===a||O(a)}function E(a){return null!=a&&"string"===typeof a}function C(a){return null===a||E(a)}function F(){return!0}function I(a,b){var c;switch(a.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":c=a.nullable?D:O;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":c=
    a.nullable?B:y;break;case "string":case "esriFieldTypeString":c=a.nullable?C:E;break;default:c=F}return 1===arguments.length?c:c(b)}function G(a){return null!=a&&T.has(a.type)}function J(a,b){return a.nullable&&null===b?null:G(a)&&!H(a.type,Number(b))?ia.OUT_OF_RANGE:I(a,b)?a.domain?k.validateDomainValue(a.domain,b):null:la.INVALID_TYPE}function H(a,b){return(a="string"===typeof a?N(a):a)?a.isInteger?O(b)&&b>=a.min&&b<=a.max:b>=a.min&&b<=a.max:!1}function N(b){switch(b){case "esriFieldTypeSmallInteger":case "small-integer":return a.smallIntegerRange;
    case "esriFieldTypeInteger":case "integer":return a.integerRange;case "esriFieldTypeSingle":case "single":return a.singleRange;case "esriFieldTypeDouble":case "double":return a.doubleRange}}function L(a,b,c){if(!b||!b.attributes||!a){if(n.isSome(c))for(var d=0;d<a.length;d++)b=a[d],c.add(b);return!0}for(var d=b.attributes,e=!1,f=0;f<a.length;f++)if(b=a[f],!(b in d))if(e=!0,n.isSome(c))c.add(b);else break;return e}Object.defineProperty(a,"__esModule",{value:!0});a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");
    a.visualVariableFields=["field","normalizationField"];a.fixRendererFields=function(b,c){if(null!=b&&null!=c){var d=0;for(b=Array.isArray(b)?b:[b];d<b.length;d++){var e=b[d];f(a.rendererFields,e,c);if("visualVariables"in e&&e.visualVariables)for(var k=0,e=e.visualVariables;k<e.length;k++)f(a.visualVariableFields,e[k],c)}}};a.fixTimeInfoFields=function(a,b){if(null!=a&&null!=b)if("startField"in a){var c=w(b,a.startField);b=w(b,a.endField);a.startField=c&&c.name||null;a.endField=b&&b.name||null}else c=
    w(b,a.startTimeField),b=w(b,a.endTimeField),a.startTimeField=c&&c.name||null,a.endTimeField=b&&b.name||null};var M=new Set;a.fixFields=r;a.collectFields=t;a.collectField=u;a.unpackFieldNames=function(a,b){return b&&a?h.includes(b,"*")?a.map(function(a){return a.name}):b:[]};a.packFields=function(a,b,c){void 0===c&&(c=1);if(!b||!a)return[];if(h.includes(b,"*"))return["*"];b=r(a,b);return b.length/a.length>=c?["*"]:b};a.getField=w;a.hasField=function(a,b){if(!a||!b||"string"!==typeof b)return!1;b=b.toLowerCase();
    for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.name.toLowerCase()===b)return!0}return!1};a.collectArcadeFieldNames=v;a.getElevationFields=function(a){return l(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:if(!a)return[2,[]];b=new Set;return[4,x(b,a)];case 1:return c.sent(),[2,d.valuesOfSet(b).sort()]}})})};a.collectElevationFields=x;a.collectFilterFields=function(a,b,d){return l(this,void 0,void 0,function(){var f,k;return e(this,function(e){switch(e.label){case 0:if(!b||
    !d||!(d.where&&"1\x3d1"!==d.where||d.timeExtent))return[2];b.timeInfo&&d.timeExtent&&t(a,b.fields,[b.timeInfo.startField,b.timeInfo.endField]);return d.where?[4,p.create(function(a){c(["../../core/sql/WhereClause"],a)})]:[3,2];case 1:f=e.sent();k=f.WhereClause.create(d.where,b.fieldsIndex);if(!k.isStandardized)throw new g("fieldUtils:collectFilterFields","Where clause is not standardized");t(a,b.fields,k.fieldNames);e.label=2;case 2:return[2]}})})};a.getTimeFields=function(a){return l(this,void 0,
    void 0,function(){var b;return e(this,function(c){return a?(b="timeInfo"in a&&a.timeInfo)?[2,r(a.fields,[a.trackIdField,b.startField,b.endField])]:[2,[]]:[2,[]]})})};a.getFeatureEditFields=function(a){if(!a)return[];var b="editFieldsInfo"in a&&a.editFieldsInfo;return b?r(a.fields,[b&&b.creatorField,b&&b.creationDateField,b&&b.editorField,b&&b.editDateField]):[]};a.getFeatureGeometryFields=function(a){if(!a)return[];var b="geometryProperties"in a&&a.geometryProperties;return b?r(a.fields,[b&&b.shapeAreaFieldName,
    b&&b.shapeLengthFieldName]):[]};a.getLabelingFields=function(a){return l(this,void 0,void 0,function(){var b;return e(this,function(c){switch(c.label){case 0:if(!a)return[2,[]];b=new Set;return[4,z(b,a)];case 1:return c.sent(),[2,d.valuesOfSet(b).sort()]}})})};a.collectLabelingFields=z;a.getFieldDefaultValue=function(a){var b=a.defaultValue;if(void 0!==b&&I(a,b))return b;if(a.nullable)return null};var O=function(){return"isInteger"in Number?Number.isInteger:function(a){return"number"===typeof a&&
    isFinite(a)&&Math.floor(a)===a}}();a.isValueMatchingFieldType=I;a.numericTypes=["integer","small-integer","single","double"];var T=d.createSetFromValues(a.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]));a.isNumericField=G;a.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};a.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};a.isValidFieldValue=
    function(a,b){return null===J(a,b)};var ia;(ia=a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var la;(la=a.TypeValidationError||(a.TypeValidationError={})).INVALID_TYPE="type-validation-error::invalid-type";a.sanitizeNullFieldValue=function(a){return null==a||"number"===typeof a&&isNaN(a)?null:a};a.validateFieldValue=J;a.isNumberInRange=H;a.getFieldRange=function(a){var b=k.getDomainRange(a.domain);if(b)return b;if(G(a))return N(a.type)};
    a.getNumericTypeForValue=function(b){if(!y(b))return null;if(O(b)){if(b>=a.smallIntegerRange.min&&b<=a.smallIntegerRange.max)return"esriFieldTypeSmallInteger";if(b>=a.integerRange.min&&b<=a.integerRange.max)return"esriFieldTypeInteger"}return b>=a.singleRange.min&&b<=a.singleRange.max?"esriFieldTypeSingle":"esriFieldTypeDouble"};a.smallIntegerRange={min:-32768,max:32767,isInteger:!0};a.integerRange={min:-2147483648,max:2147483647,isInteger:!0};a.singleRange={min:-3.4E38,max:1.2E38,isInteger:!1};a.doubleRange=
    {min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};a.validationErrorToString=function(a,b,c){switch(a){case k.DomainValidationError.INVALID_CODED_VALUE:return"Value "+c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case k.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+b.name+", domain: "+JSON.stringify(b.domain);case la.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+
    b.name+", type: "+b.type+", nullable: "+b.nullable;case ia.OUT_OF_RANGE:return a=N(b.type),"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+b.type+", value range is "+a.min+" to "+a.max}};a.featureHasFields=function(a,b){return!L(a,b,null)};a.populateMissingFields=L})},"esri/core/iteratorUtils":function(){define(["require","exports","@dojo/framework/shim/array"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.someMap=Map.prototype.entries?function(a,
    c){a=a.entries();for(var e=a.next();!e.done;e=a.next())if(c(e.value[1],e.value[0]))return!0;return!1}:function(a,c){var e=!0;a.forEach(function(a,d){e&&(e=!c(a,d))});return!e};c=!!Map.prototype.values;a.pairsOfMap=function(a){var c=[];a.forEach(function(a,e){return c.push([e,a])});return c};a.valuesOfMap=c?function(a){return m.from(a.values())}:function(a){var c=Array(a.size),e=0;a.forEach(function(a){return c[e++]=a});return c};a.keysOfMap=function(a){var c=Array(a.size),e=0;a.forEach(function(a,
    d){return c[e++]=d});return c};a.MapFromValues=c?function(a){return new Map(a)}:function(a){for(var c=new Map,e=0;e<a.length;e++){var g=a[e];c.set(g[0],g[1])}return c};a.someSet=Set.prototype.entries?function(a,c){a=a.entries();for(var e=a.next();!e.done;e=a.next())if(c(e.value[0]))return!0;return!1}:function(a,c){var e=!0;a.forEach(function(a){e&&(e=!c(a))});return!e};c=!!Set.prototype.values;a.valuesOfSet=c?function(a){return m.from(a.values())}:function(a){var c=Array(a.size),e=0;a.forEach(function(a){return c[e++]=
    a});return c};a.createSetFromValues=c?function(a){return new Set(a)}:function(a){for(var c=new Set,e=0;e<a.length;e++)c.add(a[e]);return c}})},"esri/layers/support/domains":function(){define("require exports ../../core/compilerUtils ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(c,a,m,e,l,h,g){function d(a,c){switch(a.type){case "range":var b="range"in a?a.range[1]:a.maxValue;if(+c<("range"in a?a.range[0]:a.minValue)||+c>b)return n.VALUE_OUT_OF_RANGE;break;case "coded-value":case "codedValue":if(null==
    a.codedValues||a.codedValues.every(function(a){return null==a||a.code!==c}))return n.INVALID_CODED_VALUE}return null}Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=e;a.DomainBase=l;a.InheritedDomain=h;a.RangeDomain=g;var n;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(n=a.DomainValidationError||(a.DomainValidationError={}));a.isValidDomainValue=function(a,c){return null===
    d(a,c)};a.validateDomainValue=d;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain,inherited:a.InheritedDomain}};a.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};a.fromJSON=function(b){if(!b||!b.type)return null;switch(b.type){case "range":return a.RangeDomain.fromJSON(b);case "codedValue":return a.CodedValueDomain.fromJSON(b);case "inherited":return a.InheritedDomain.fromJSON(b);
    default:m.neverReached(b)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./CodedValue ./Domain".split(" "),function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}m(b,a);c=b;b.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);
    this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};b.prototype.clone=function(){return new c({codedValues:l.clone(this.codedValues),name:this.name})};var c;e([h.property({type:[g.default],json:{write:!0}})],b.prototype,"codedValues",void 0);e([h.enumeration.serializable()({codedValue:"coded-value"})],b.prototype,"type",void 0);return b=c=e([h.subclass("esri.layers.support.CodedValueDomain")],b)}(h.declared(d))})},"esri/layers/support/CodedValue":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=a.call(this,b)||this;b.name=null;b.code=null;return b}e(c,a);n=c;c.prototype.clone=function(){return new n({name:this.name,code:this.code})};var n;m([h.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);m([h.property({type:[String,Number],json:{write:!0}})],c.prototype,"code",void 0);return c=n=m([h.subclass("esri.layers.support.CodedValue")],c)}(h.declared(l.JSONSupport));a.CodedValue=
    c;a.default=c})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g){var d=new l.default({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function b(b){b=a.call(this,b)||this;b.name=null;b.type=null;return b}m(b,a);e([g.property({type:String,json:{write:!0}})],
    b.prototype,"name",void 0);e([g.enumeration.serializable()(d)],b.prototype,"type",void 0);return b=e([g.subclass("esri.layers.support.Domain")],b)}(g.declared(h.JSONSupport))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.type="inherited";return b}m(c,a);
    n=c;c.prototype.clone=function(){return new n};var n;e([l.enumeration.serializable()({inherited:"inherited"})],c.prototype,"type",void 0);return c=n=e([l.subclass("esri.layers.support.InheritedDomain")],c)}(l.declared(h))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||
    this;b.maxValue=null;b.minValue=null;b.type="range";return b}m(c,a);n=c;c.prototype.clone=function(){return new n({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var n;e([l.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(a,c){return c.range&&c.range[1]}},write:{enabled:!1,overridePolicy:function(){return{enabled:null!=this.maxValue&&null==this.minValue}},target:"range",writer:function(a,c,d){c[d]=[this.minValue||0,a]}}}})],c.prototype,"maxValue",void 0);
    e([l.property({type:Number,json:{type:[Number],read:{source:"range",reader:function(a,c){return c.range&&c.range[0]}},write:{target:"range",writer:function(a,c,d){c[d]=[a,this.maxValue||0]}}}})],c.prototype,"minValue",void 0);e([l.enumeration.serializable()({range:"range"})],c.prototype,"type",void 0);return c=n=e([l.subclass("esri.layers.support.RangeDomain")],c)}(l.declared(h))})},"esri/support/arcadeOnDemand":function(){define("require exports ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../geometry ../core/maybe ../core/promiseUtils @dojo/framework/shim/Promise".split(" "),
    function(c,a,m,e,l,h,g,d){function n(){return e(this,void 0,void 0,function(){var a=this;return m(this,function(d){b||(b=function(){return e(a,void 0,void 0,function(){var a;return m(this,function(b){switch(b.label){case 0:return[4,new Promise(function(a,b){c(["./arcadeUtils"],a,b)})];case 1:return a=b.sent(),[4,a.arcade.load()];case 2:return b.sent(),[2,{arcade:a.arcade,arcadeUtils:a,Dictionary:a.Dictionary,Feature:a.arcadeFeature}]}})})}());return[2,b]})})}Object.defineProperty(a,"__esModule",{value:!0});
    var b;a.loadArcade=n;a.createLabelExpression=function(a,b,c){return p.create(a,b,c,null,["$feature"])};a.createVVExpression=function(a,b,c){return p.create(a,b,c,null,["$feature","$view"])};a.createRendererExpression=function(a,b,c){return p.create(a,b,c,null,["$feature","$view"])};a.createDictionaryExpression=function(a,b,c,d){return p.create(a,b,c,d,["$feature","$view"])};var p=function(){function a(a,b,c,d,e,k,n){this.evaluate=d;this._syntaxTree=c;this._arcade=a;this._arcadeDictionary=b;this._arcadeFeature=
    e;this._fields=k;this._spatialReference=n;this._referencesGeometry=a.scriptTouchesGeometry(this._syntaxTree);this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"$view.scale")}a.create=function(b,c,k,p,u,w){return e(this,void 0,void 0,function(){var e,f,q,r,t,B,D,E,C,F,I,G,J,H,N;return m(this,function(m){switch(m.label){case 0:return[4,n()];case 1:return e=m.sent(),f=e.arcade,q=e.Feature,r=e.Dictionary,t=h.SpatialReference.fromJSON(c),B=f.parseScript(b,w),D=u.reduce(function(a,b){var c;
    return l({},a,(c={},c[b]=null,c))},{}),E=null,g.isSome(p)&&(E=new r(p),E.immutable=!0,D.$config=null),C=f.scriptUsesGeometryEngine(B)&&f.enableGeometrySupport(),F=f.scriptUsesFeatureSet(B)&&f.enableFeatureSetSupport(),I=f.scriptIsAsync(B)&&f.enableAsyncSupport(),G={vars:D,spatialReference:t,useAsync:!!I},J=new r,J.immutable=!1,J.setField("scale",0),H=f.compileScript(B,G),N=function(a){"$view"in a&&a.$view&&(J.setField("scale",a.$view.scale),a.$view=J);E&&(a.$config=E);return H({vars:a,spatialReference:t})},
    [4,d.all([C,F,I])];case 2:return m.sent(),[2,new a(f,r,B,N,new q,k,t)]}})})};a.prototype.repurposeFeature=function(a){a.geometry&&!a.geometry.spatialReference&&(a.geometry.spatialReference=this._spatialReference);this._arcadeFeature.repurposeFromGraphicLikeObject(a.geometry,a.attributes,{fields:this._fields});return this._arcadeFeature};a.prototype.createDictionary=function(){return new this._arcadeDictionary};a.prototype.referencesMember=function(a){return this._arcade.referencesMember(this._syntaxTree,
    a)};a.prototype.referencesFunction=function(a){return this._arcade.referencesFunction(this._syntaxTree,a)};a.prototype.referencesGeometry=function(){return this._referencesGeometry};a.prototype.referencesScale=function(){return this._referencesScale};a.prototype.extractFieldLiterals=function(a){return this._arcade.extractFieldLiterals(this._syntaxTree,a)};return a}();a.default=p})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(c,
    a,m){Object.defineProperty(a,"__esModule",{value:!0});a.supportsUnit=function(a){return null!=m.meterIn[a]};a.getMetersPerUnit=function(a){return 1/(m.meterIn[a]||1)};a.supportedUnits=function(){var a=Object.keys(m.meterIn);a.sort();return a}()})},"esri/renderers/support/utils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/Logger ../../core/unitUtils ../../intl/date ./numberUtils ../visualVariables/support/ColorStop".split(" "),function(c,a,m,e,l,h,g,d){function n(a,
    b,c){var d="";0===b?d=k.lt+" ":b===c&&(d=k.gt+" ");return d+a}function b(a){var b=a.minValue,c=a.maxValue,d=a.isFirstBreak?"":k.gt+" ";a="percent-of-total"===a.normalizationType?k.pct:"";b=null==b?"":g.format(b);c=null==c?"":g.format(c);return d+b+a+" "+k.ld+" "+c+a}Object.defineProperty(a,"__esModule",{value:!0});var p=e.getLogger("esri.renderers.support.utils"),k={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},q={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},
    f={millisecond:"long-month-day-year-long-time",second:"long-month-day-year-long-time",minute:"long-month-day-year-short-time",hour:"long-month-day-year-short-time",day:"long-month-day-year",month:"long-month-day-year",year:"year"};a.meterIn={inches:l.convertUnit(1,"meters","inches"),feet:l.convertUnit(1,"meters","feet"),"us-feet":l.convertUnit(1,"meters","us-feet"),yards:l.convertUnit(1,"meters","yards"),miles:l.convertUnit(1,"meters","miles"),"nautical-miles":l.convertUnit(1,"meters","nautical-miles"),
    millimeters:l.convertUnit(1,"meters","millimeters"),centimeters:l.convertUnit(1,"meters","centimeters"),decimeters:l.convertUnit(1,"meters","decimeters"),meters:l.convertUnit(1,"meters","meters"),kilometers:l.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/l.lengthToDegrees(1,"meters")};a.timelineDateFormatOptions=h.convertDateFormatToIntlOptions("short-date");a.createColorStops=function(a){var b=a.values,c=a.colors,e=a.labelIndexes,f=a.isDate,k=a.dateFormatOptions;return b.map(function(a,
    p){var l=null;if(!e||-1<e.indexOf(p)){var q=void 0;(q=f?h.formatDate(a,k):g.format(a))&&(l=n(q,p,b.length-1))}return new d({value:a,color:c[p],label:l})})};a.updateColorStops=function(a){var b=a.stops,c=a.changes,d=a.isDate,e=a.dateFormatOptions,f=b.map(function(a){return a.value});a=[];for(var k=0;k<c.length;k++){var p=c[k];a.push(p.index);f[p.index]=p.value}var l=g.round(f,{indexes:a});b.forEach(function(a,c){a.value=f[c];if(null!=a.label){var k=void 0,p=null;(k=d?h.formatDate(l[c],e):g.format(l[c]))&&
    (p=n(k,c,b.length-1));a.label=p}})};a.createClassBreakLabel=b;a.setLabelsForClassBreaks=function(a){var c=a.classBreakInfos,d=a.normalizationType,e=[];if(c&&c.length)if("standard-deviation"===a.classificationMethod)p.warn("setLabelsForClassBreaks","cannot set labels for class breaks generated using 'standard-deviation' method.");else if(a.round){e.push(c[0].minValue);for(a=0;a<c.length;a++)e.push(c[a].maxValue);e=g.round(e);c.forEach(function(a,c){a.label=b({minValue:0===c?e[0]:e[c],maxValue:e[c+
    1],isFirstBreak:0===c,normalizationType:d})})}else c.forEach(function(a,c){a.label=b({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===c,normalizationType:d})})};a.updateClassBreak=function(a){if("standard-deviation"===a.classificationMethod)p.warn("updateClassBreak","cannot update labels for class breaks generated using 'standard-deviation' method.");else{var c=a.classBreaks,d=a.change,e=d.index,d=d.value,f=c.length,k=-1,n=-1;0===e?k=e:e===f?n=e-1:(n=e-1,k=e);a=a.normalizationType;e=null;
    -1<k&&k<f&&(e=c[k],e.minValue=d,e.label=b({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===k,normalizationType:a}));-1<n&&n<f&&(e=c[n],e.maxValue=d,e.label=b({minValue:e.minValue,maxValue:e.maxValue,isFirstBreak:0===n,normalizationType:a}))}};a.calculateDateFormatInterval=function(a){a=a.map(function(a){return new Date(a)});for(var b=a.length,c=Infinity,d=null,e=0;e<b-1;e++){for(var f=a[e],k=[],n=Infinity,g=null,p=e+1;p<b;p++){var h=a[p],h=f.getFullYear()!==h.getFullYear()&&"year"||f.getMonth()!==
    h.getMonth()&&"month"||f.getDate()!==h.getDate()&&"day"||f.getHours()!==h.getHours()&&"hour"||f.getMinutes()!==h.getMinutes()&&"minute"||f.getSeconds()!==h.getSeconds()&&"second"||"millisecond",l=q[h];l<n&&(n=l,g=h);k.push(h)}n<c&&(c=n,d=g)}return d};a.createUniqueValueLabel=function(a){var b=a.value,c=a.domain,d=a.fieldInfo;a=a.dateFormatInterval;var e=String(b);(c=c&&"codedValues"in c&&c.codedValues?c.getName(b):null)?e=c:"number"===typeof b&&(e=d&&"date"===d.type?h.formatDate(b,a&&h.convertDateFormatToIntlOptions(f[a])):
    g.format(b));return e}})},"esri/core/unitUtils":function(){define("require exports ./compilerUtils ./iteratorUtils ./jsonMap ./wgs84Constants ../geometry/support/WKIDUnitConversion".split(" "),function(c,a,m,e,l,h,g){function d(a){if(a=y[a])return a;throw Error("unknown measure");}function n(a){return A[a].baseUnit}function b(a,b){void 0===b&&(b=null);b=b||d(a);return A[b].baseUnit===a}function p(a,c,e){if(c===e)return a;var f=d(c);if(f!==d(e))throw Error("incompatible units");a=b(c,f)?a:a*A[f].units[c].inBaseUnits;
    return b(e,f)?a:a/A[f].units[e].inBaseUnits}function k(a){return z.fromJSON(a.toLowerCase())||null}function q(a,b){void 0===b&&(b=t);return f(a,!0)||b}function f(a,b){void 0===b&&(b=!1);var c,d,e;null!=a&&("object"===typeof a?(c=a.wkid,d=a.wkt):"number"===typeof a?c=a:"string"===typeof a&&(d=a));c?(e=v.values[v[c]],!e&&b&&x.has(c)&&(e=u)):d&&-1!==d.search(/^PROJCS/i)&&(a=w.exec(d))&&a[1]&&(e=parseFloat(a[1].split(",")[1]));return e}function r(a){var b,c,d;null!=a&&("object"===typeof a?(b=a.wkid,c=
    a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=v.units[v[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=w.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&a[1]);return d?k(d):null}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;var t=h.wgs84Radius*Math.PI/180,u=h.wgs84Radius*Math.PI/200,w=/UNIT\[([^\]]+)\]\]$/i,v=g,x=e.createSetFromValues([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),z=l.strict()({meter:"meters",foot:"feet",
    foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});c={millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},
    decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1E3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}};e={"square-millimeters":{inBaseUnits:1E-6},"square-centimeters":{inBaseUnits:1E-4},"square-decimeters":{inBaseUnits:.1*.1},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:1E6},"square-inches":{inBaseUnits:6.4516E-4},"square-feet":{inBaseUnits:.09290304},
    "square-yards":{inBaseUnits:.83612736},"square-miles":{inBaseUnits:2589988.110336},"square-us-feet":{inBaseUnits:function(a){return a*a}(1200/3937)},acres:{inBaseUnits:4046.8564224},ares:{inBaseUnits:100},hectares:{inBaseUnits:1E4}};var A={length:{baseUnit:"meters",units:c},area:{baseUnit:"square-meters",units:e},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1E3*1E-9},"cubic-centimeters":{inBaseUnits:.001},"cubic-decimeters":{inBaseUnits:1},"cubic-meters":{inBaseUnits:1E3},
    "cubic-kilometers":{inBaseUnits:1E12},"cubic-inches":{inBaseUnits:.016387064},"cubic-feet":{inBaseUnits:.09290304*304.8},"cubic-yards":{inBaseUnits:764.554857984},"cubic-miles":{inBaseUnits:4.16818182544058E12}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},y=function(){var a={},b;for(b in A)for(var c in A[b].units)a[c]=b;return a}();a.measurementAreaUnits="metric imperial square-inches square-feet square-yards square-miles square-us-feet square-meters square-kilometers acres ares hectares".split(" ");
    a.measurementLengthUnits="metric imperial inches feet yards miles nautical-miles us-feet meters kilometers".split(" ");a.measureForUnit=d;a.baseUnitForMeasure=n;a.baseUnitForUnit=function(a){return n(d(a))};a.isBaseUnit=b;a.convertUnit=p;a.preferredMetricLengthUnit=function(a,b){return 3E3>p(a,b,"meters")?"meters":"kilometers"};a.preferredMetricVerticalLengthUnit=function(a,b){return 1E5>p(a,b,"meters")?"meters":"kilometers"};a.preferredImperialLengthUnit=function(a,b){return 1E3>p(a,b,"feet")?"feet":
    "miles"};a.preferredImperialVerticalLengthUnit=function(a,b){return 1E5>p(a,b,"feet")?"feet":"miles"};a.preferredMetricAreaUnit=function(a,b){return 3E6>p(a,b,"square-meters")?"square-meters":"square-kilometers"};a.preferredImperialAreaUnit=function(a,b){return 1E6>p(a,b,"square-feet")?"square-feet":"square-miles"};a.lengthToDegrees=function(a,b,c){void 0===c&&(c=h.wgs84Radius);return p(a,b,"meters")/(c*Math.PI/180)};a.unitFromRESTJSON=k;a.unitToRESTJSON=function(a){return z.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=
    function(a){a=q(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<q(a)?"meters":r(a)};a.getMetersPerUnitForSR=q;a.getMetersPerUnit=f;a.getUnitString=r;a.getDefaultUnitSystem=function(a){if(!a)return null;a=r(a);switch(a){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";
    case "50-kilometers":case "150-kilometers":case "meters":return"metric";case null:case void 0:break;default:m.neverReached(a)}return null}})},"esri/intl/date":function(){define("require exports ../core/tsSupport/assignHelper @dojo/framework/shim/WeakMap ../core/jsonMap ./locale".split(" "),function(c,a,m,e,l,h){function g(a){a=a||t;if(!r.has(a)){var b=h.getLocale(),b=f[h.getLocale()]||b;r.set(a,new Intl.DateTimeFormat(b,a))}return r.get(a)}Object.defineProperty(a,"__esModule",{value:!0});c={year:"numeric",
    month:"numeric",day:"numeric"};var d={year:"numeric",month:"long",day:"numeric"},n={year:"numeric",month:"short",day:"numeric"},b={year:"numeric",month:"long",weekday:"long",day:"numeric"},p={hour:"numeric",minute:"numeric"},k=m({},p,{second:"numeric"}),q={"short-date":c,"short-date-short-time":m({},c,p),"short-date-short-time-24":m({},c,p,{hour12:!1}),"short-date-long-time":m({},c,k),"short-date-long-time-24":m({},c,k,{hour12:!1}),"short-date-le":c,"short-date-le-short-time":m({},c,p),"short-date-le-short-time-24":m({},
    c,p,{hour12:!1}),"short-date-le-long-time":m({},c,k),"short-date-le-long-time-24":m({},c,k,{hour12:!1}),"long-month-day-year":d,"long-month-day-year-short-time":m({},d,p),"long-month-day-year-short-time-24":m({},d,p,{hour12:!1}),"long-month-day-year-long-time":m({},d,k),"long-month-day-year-long-time-24":m({},d,k,{hour12:!1}),"day-short-month-year":n,"day-short-month-year-short-time":m({},n,p),"day-short-month-year-short-time-24":m({},n,p,{hour12:!1}),"day-short-month-year-long-time":m({},n,k),"day-short-month-year-long-time-24":m({},
    n,k,{hour12:!1}),"long-date":b,"long-date-short-time":m({},b,p),"long-date-short-time-24":m({},b,p,{hour12:!1}),"long-date-long-time":m({},b,k),"long-date-long-time-24":m({},b,k,{hour12:!1}),"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":p,"long-time":k};a.dictionary=l.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",
    shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",
    dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",
    shortMonthYear:"short-month-year",year:"year"});a.dateFormats=a.dictionary.apiValues;a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);var f={ar:"ar-u-nu-latn-ca-gregory"},r=new e.default,t=q["short-date-short-time"];h.onLocaleChange(function(){r=new e.default;t=q["short-date-short-time"]});a.getDateTimeFormatter=g;a.convertDateFormatToIntlOptions=function(a){return q[a]||null};a.formatDate=function(a,b){return g(b).format(a)}})},"@dojo/framework/shim/WeakMap":function(){(function(c){"object"===
    typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ../has/has ./Symbol".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=c("tslib"),e=c("./global"),l=c("./iterator"),h=c("../has/has");c("./Symbol");a.WeakMap=e.default.WeakMap;if(!h.default("es6-weakmap")){var g={},d=function(){var a=Math.floor(Date.now()%1E8);return function(){return"__wm"+
    Math.floor(1E8*Math.random())+(a++ +"__")}}();a.WeakMap=function(){function a(a){this[Symbol.toStringTag]="WeakMap";this._name=d();this._frozenEntries=[];if(a)if(l.isArrayLike(a))for(var b=0;b<a.length;b++){var c=a[b];this.set(c[0],c[1])}else try{for(b=m.__values(a),c=b.next();!c.done;c=b.next()){var e=m.__read(c.value,2);this.set(e[0],e[1])}}catch(t){f={error:t}}finally{try{c&&!c.done&&(n=b.return)&&n.call(b)}finally{if(f)throw f.error;}}var f,n}a.prototype._getFrozenEntryIndex=function(a){for(var b=
    0;b<this._frozenEntries.length;b++)if(this._frozenEntries[b].key===a)return b;return-1};a.prototype.delete=function(a){if(void 0===a||null===a)return!1;var b=a[this._name];if(b&&b.key===a&&b.value!==g)return b.value=g,!0;a=this._getFrozenEntryIndex(a);return 0<=a?(this._frozenEntries.splice(a,1),!0):!1};a.prototype.get=function(a){if(void 0!==a&&null!==a){var b=a[this._name];if(b&&b.key===a&&b.value!==g)return b.value;a=this._getFrozenEntryIndex(a);if(0<=a)return this._frozenEntries[a].value}};a.prototype.has=
    function(a){if(void 0===a||null===a)return!1;var b=a[this._name];return b&&b.key===a&&b.value!==g||0<=this._getFrozenEntryIndex(a)?!0:!1};a.prototype.set=function(a,c){if(!a||"object"!==typeof a&&"function"!==typeof a)throw new TypeError("Invalid value used as weak map key");var b=a[this._name];b&&b.key===a||(b=Object.create(null,{key:{value:a}}),Object.isFrozen(a)?this._frozenEntries.push(b):Object.defineProperty(a,this._name,{value:b}));b.value=c;return this};return a}()}a.default=a.WeakMap})},
    "esri/intl/locale":function(){define(["require","exports","dojo/_base/kernel"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});var e=m.locale;a.getLocale=function(){return e};a.setLocale=function(a){e=a;l.slice().forEach(function(c){c.call(null,a)})};var l=[];a.onLocaleChange=function(a){l.push(a);return{remove:function(){l.splice(l.indexOf(a),1)}}}})},"esri/renderers/support/numberUtils":function(){define(["require","exports","../../intl"],function(c,a,m){function e(a,b){return a-
    b}function l(a,b){var c;c=Number(a.toFixed(b));c<a?a=c+1/Math.pow(10,b):(a=c,c-=1/Math.pow(10,b));c=Number(c.toFixed(b));a=Number(a.toFixed(b));return[c,a]}function h(a,b,c,e,n){a=d(a,b,c,e);b=null==a.next||a.next<=n;return(null==a.previous||a.previous<=n)&&b||a.previous+a.next<=2*n}function g(a){a=String(a);var b=a.match(n);if(b&&b[1])return{integer:b[1].split("").length,fractional:b[3]?b[3].split("").length:0};if(-1<a.toLowerCase().indexOf("e")&&(b=a.split("e"),a=b[0],b=b[1],a&&b)){a=Number(a);
    var b=Number(b),c=0<b;c||(b=Math.abs(b));a=g(a);c?(a.integer+=b,a.fractional=b>a.fractional?0:a.fractional-b):(a.fractional+=b,a.integer=b>a.integer?1:a.integer-b);return a}return{integer:0,fractional:0}}function d(a,b,c,d){var e={previous:null,next:null};if(null!=c){var f=a-c;e.previous=Math.floor(Math.abs(100*(b-c-f)/f))}null!=d&&(f=d-a,e.next=Math.floor(Math.abs(100*(d-b-f)/f)));return e}Object.defineProperty(a,"__esModule",{value:!0});var n=/^-?(\d+)(\.(\d+))?$/i;a.numDigits=g;a.percentChange=
    d;a.round=function(a,b){void 0===b&&(b={});a=a.slice(0);var c=b.tolerance,c=void 0===c?2:c,d=b.strictBounds,d=void 0===d?!1:d;b=b.indexes;b=void 0===b?a.map(function(a,b){return b}):b;b.sort(e);for(var k=0;k<b.length;k++){var n=b[k],p=a[n],m=0===n?null:a[n-1],v=n===a.length-1?null:a[n+1],x=g(p).fractional;if(x){for(var z=0,A=!1,y=void 0;z<=x&&!A;)A=l(p,z),y=d&&0===k?A[1]:A[0],A=h(p,y,m,v,c),z++;A&&(a[n]=y)}}return a};var b={maximumFractionDigits:20};a.format=function(a){return m.formatNumber(a,b)}})},
    "esri/intl":function(){define(["require","exports","./intl/date","./intl/number","./intl/substitute"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.formatDate=m.formatDate;a.convertDateFormatToIntlOptions=m.convertDateFormatToIntlOptions;a.formatNumber=e.formatNumber;a.convertNumberFormatToIntlOptions=e.convertNumberFormatToIntlOptions;a.substitute=l.substitute})},"esri/intl/number":function(){define(["require","exports","../core/tsSupport/assignHelper","@dojo/framework/shim/WeakMap",
    "./locale"],function(c,a,m,e,l){function h(a){var b=a||n;if(!d.has(b)){var c=l.getLocale(),c=g[l.getLocale()]||c;d.set(b,new Intl.NumberFormat(c,a))}return d.get(b)}Object.defineProperty(a,"__esModule",{value:!0});var g={ar:"ar-u-nu-arab"},d=new e.default,n={};l.onLocaleChange(function(){d=new e.default;n={}});a.getFormatter=h;a.convertNumberFormatToIntlOptions=function(a){void 0===a&&(a={});var b={};null!=a.digitSeparator&&(b.useGrouping=a.digitSeparator);null!=a.places&&(b.minimumFractionDigits=
    b.maximumFractionDigits=a.places);return b};a.formatNumber=function(a,c){return h(c).format(a)}})},"esri/intl/substitute":function(){define("require exports ../core/Logger ../core/object ../core/string ./date ./number".split(" "),function(c,a,m,e,l,h,g){function d(a){switch(typeof a){case "string":return a;case "number":return g.formatNumber(a);case "boolean":return""+a;default:return a instanceof Date?h.formatDate(a):""}}Object.defineProperty(a,"__esModule",{value:!0});var n=m.getLogger("esri.intl");
    a.substitute=function(a,c,k){void 0===k&&(k={});k=k.format;var b=void 0===k?{}:k;return l.replace(a,function(a){var f;var k,p=a.indexOf(":");-1===p?k=a.trim():(k=a.slice(0,p).trim(),f=a.slice(p+1).trim());if(k)if(a=e.getDeepValue(k,c),null==a)f="";else if(k=b[f]||b[k])b:switch(k.type){case "date":f=h.formatDate(a,k.intlOptions);break b;case "number":f=g.formatNumber(a,k.intlOptions);break b;default:n.warn("missing format descriptor for key {key}"),f=d(a)}else if(f)b:switch(f.toLowerCase()){case "dateformat":f=
    h.formatDate(a);break b;case "numberformat":f=g.formatNumber(a);break b;default:n.warn("inline format is unsupported since 4.12: "+f),f=/^(dateformat|datestring)/i.test(f)?h.formatDate(a):/^numberformat/i.test(f)?g.formatNumber(a):d(a)}else f=d(a);else f="";return f})}})},"esri/renderers/visualVariables/support/ColorStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../Color ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.color=null;b.label=null;b.value=null;return b}m(b,a);c=b;b.prototype.writeValue=function(a,b,c){b[c]=null==a?0:a};b.prototype.clone=function(){return new c({color:this.color&&this.color.clone(),label:this.label,value:this.value})};var c;e([g.property({type:l,json:{type:[d.Integer],write:!0}})],b.prototype,"color",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);e([g.property({type:Number,
    json:{write:{allowNull:!0}}})],b.prototype,"value",void 0);e([g.writer("value")],b.prototype,"writeValue",null);return b=c=e([g.subclass("esri.renderers.visualVariables.support.ColorStop")],b)}(g.declared(h.JSONSupport))})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/urlUtils ../../core/accessorSupport/decorators ../../portal/Portal ../../portal/PortalItem".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q){Object.defineProperty(a,"__esModule",{value:!0});var f=d.getLogger("esri.layers.mixins.PortalLayer");a.PortalLayer=function(a){return function(a){function d(){return null!==a&&a.apply(this,arguments)||this}m(d,a);Object.defineProperty(d.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});d.prototype.readPortalItem=function(a,b,c){if(b.itemId)return new q({id:b.itemId,
    portal:c&&c.portal})};d.prototype.writePortalItem=function(a,b){a&&a.id&&(b.itemId=a.id)};d.prototype.loadFromPortal=function(a,b){return h(this,void 0,void 0,function(){var d,e;return l(this,function(k){switch(k.label){case 0:if(!this.portalItem||!this.portalItem.id)return[2];k.label=1;case 1:return k.trys.push([1,4,,5]),[4,n.create(function(a){return c(["../../portal/support/layersLoader"],a)})];case 2:return d=k.sent(),n.throwIfAborted(b),[4,d.load({instance:this,supportedTypes:a.supportedTypes,
    validateItem:a.validateItem,supportsData:a.supportsData},b)];case 3:return[2,k.sent()];case 4:throw e=k.sent(),f.warn("Failed to load layer ("+this.title+", "+this.id+") portal item ("+this.portalItem.id+")\n  "+e),e;case 5:return[2]}})})};d.prototype.read=function(a,b){b&&(b.layer=this);this.inherited(arguments)};d.prototype.write=function(a,c){var d=c&&c.portal,e=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||k.getDefault());return d&&e&&!b.hasSamePortal(e.restUrl,d.restUrl)?(c.messages&&
    c.messages.push(new g("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",{layer:this})),null):this.inherited(arguments)};e([p.property({type:q})],d.prototype,"portalItem",null);e([p.reader("web-document","portalItem",["itemId"])],d.prototype,"readPortalItem",null);
    e([p.writer("portalItem",{itemId:{type:String}})],d.prototype,"writePortalItem",null);return d=e([p.subclass("esri.layers.mixins.PortalLayer")],d)}(p.declared(a))}})},"esri/layers/mixins/ScaleRangeLayer":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.ScaleRangeLayer=function(a){return function(a){function c(){var c=
    null!==a&&a.apply(this,arguments)||this;c.minScale=0;c.maxScale=0;return c}m(c,a);Object.defineProperty(c.prototype,"scaleRangeId",{get:function(){return this.minScale+","+this.maxScale},enumerable:!0,configurable:!0});e([l.property({type:Number,json:{write:!0}})],c.prototype,"minScale",void 0);e([l.property({type:Number,json:{write:!0}})],c.prototype,"maxScale",void 0);e([l.property({readOnly:!0,dependsOn:["minScale","maxScale"]})],c.prototype,"scaleRangeId",null);return c=e([l.subclass("esri.layers.mixins.ScaleRangeLayer")],
    c)}(l.declared(a))}})},"esri/layers/mixins/RefreshableLayer":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.RefreshableLayer=function(a){return function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.refreshInterval=0;return c}m(c,a);c.prototype.refresh=function(){this.emit("refresh")};e([l.property({type:Number,
    cast:function(a){return.1<=a?a:0>=a?0:.1},json:{write:!0,origins:{"web-document":{write:!0}}}})],c.prototype,"refreshInterval",void 0);return c=e([l.subclass("esri.layers.mixins.RefreshableLayer")],c)}(l.declared(a))}})},"esri/portal/support/layersCreator":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Collection ../../core/has ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils ./portalLayers ../../renderers/support/styleUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){function q(a,b,c){return e(this,void 0,void 0,function(){var d;return m(this,function(e){switch(e.label){case 0:return d=new a,d.read(b,c.context),"group"===d.type&&t(b)?[4,w(d,b,c.context)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[4,k.loadStyleRenderer(d,c.context)];case 3:return e.sent(),[2,d]}})})}function f(a,b){return e(this,void 0,void 0,function(){var c;return m(this,function(d){switch(d.label){case 0:return[4,r(a,b)];case 1:return c=d.sent(),[2,q(c,a,
    b)]}})})}function r(a,c){return e(this,void 0,void 0,function(){var e,f,k,g,h,l,q,r;return m(this,function(m){switch(m.label){case 0:e=c.context;switch(e.origin){case "web-scene":switch(e.layerContainerType){case "basemap":m=A;break;case "ground":m=z;break;default:m=x}break;default:switch(e.layerContainerType){case "basemap":m=B;break;default:m=y}}f=m;k=a.layerType||a.type;!k&&c&&c.defaultLayerType&&(k=c.defaultLayerType);h=(g=f[k])?d.layerLookupMap[g]:d.layerLookupMap.UnknownLayer;if("Feature Collection"!==
    a.type)return[3,4];if(!a.itemId)return[3,3];l=new n({id:a.itemId,portal:e&&e.portal});return[4,l.load()];case 1:return m.sent(),[4,p.selectLayerClassPath(l)];case 2:q=m.sent(),r=q.className||"UnknownLayer",h=d.layerLookupMap[r],m.label=3;case 3:return[3,5];case 4:"ArcGISFeatureLayer"===k&&(b.isMapNotesLayer(a)?h=d.layerLookupMap.MapNotesLayer:t(a)&&(h=d.layerLookupMap.GroupLayer)),m.label=5;case 5:return a.wmtsInfo&&(h=d.layerLookupMap.WMTSLayer),[2,h()]}})})}function t(a){if("ArcGISFeatureLayer"!==
    a.layerType||"Feature Collection"===a.type)return!1;a=a.featureCollection;return!!(a&&a.layers&&1<a.layers.length)}function u(a,b,c){return e(this,void 0,void 0,function(){var d,e,f;return m(this,function(k){switch(k.label){case 0:return d=new l,e=v(d,Array.isArray(b.layers)?b.layers:[],c),[4,a];case 1:return f=k.sent(),[4,e];case 2:return k.sent(),"group"===f.type?(f.layers.addMany(d),[2,f]):[2,void 0]}})})}function w(a,b,c){return e(this,void 0,void 0,function(){var e,f,k,n,g;return m(this,function(p){switch(p.label){case 0:return e=
    d.layerLookupMap.FeatureLayer,[4,e()];case 1:return f=p.sent(),k=b.featureCollection,n=k.showLegend,g=k.layers.map(function(a){var b=new f;b.read(a,c);null!=n&&b.read({showLegend:n},c);return b}),a.layers.addMany(g),[2]}})})}function v(a,b,c){return e(this,void 0,void 0,function(){var d,e,k,n,p,h,l,q,r;return m(this,function(m){switch(m.label){case 0:if(!b)return[2];d=[];e=0;for(k=b;e<k.length;e++)n=k[e],p=f(n,c),"GroupLayer"===n.layerType?d.push(u(p,n,c)):d.push(p);return[4,g.eachAlways(d)];case 1:h=
    m.sent();l=0;for(q=h;l<q.length;l++)r=q[l],!r.value||c.filter&&!c.filter(r.value)||a.add(r.value);return[2]}})})}Object.defineProperty(a,"__esModule",{value:!0});var x={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",
    ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer"},z={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},A={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",
    ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},y={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"GeoRSSLayer",
    KML:"KMLLayer",WFS:"UnsupportedLayer",WMS:"WMSLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",DefaultTileLayer:"TileLayer"},B={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",
    BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"};a.createLayer=f;a.populateOperationalLayers=function(a,b,c){return e(this,void 0,void 0,function(){return m(this,function(d){return[2,v(a,b,c)]})})}})},"esri/layers/support/lazyLayerLoader":function(){define(["require","exports","../../core/promiseUtils"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.layerLookupMap={CSVLayer:function(){return m.create(function(a){return c(["../CSVLayer"],
    a)})},ElevationLayer:function(){return m.create(function(a){return c(["../ElevationLayer"],a)})},FeatureLayer:function(){return m.create(function(a){return c(["../FeatureLayer"],a)})},GroupLayer:function(){return m.create(function(a){return c(["../GroupLayer"],a)})},GeoRSSLayer:function(){return m.create(function(a){return c(["../GeoRSSLayer"],a)})},ImageryLayer:function(){return m.create(function(a){return c(["../ImageryLayer"],a)})},KMLLayer:function(){return m.create(function(a){return c(["../KMLLayer"],
    a)})},MapImageLayer:function(){return m.create(function(a){return c(["../MapImageLayer"],a)})},MapNotesLayer:function(){return m.create(function(a){return c(["../MapNotesLayer"],a)})},OpenStreetMapLayer:function(){return m.create(function(a){return c(["../OpenStreetMapLayer"],a)})},PointCloudLayer:function(){return m.create(function(a){return c(["../PointCloudLayer"],a)})},SceneLayer:function(){return m.create(function(a){return c(["../SceneLayer"],a)})},BuildingSceneLayer:function(){return m.create(function(a){return c(["../BuildingSceneLayer"],
    a)})},IntegratedMeshLayer:function(){return m.create(function(a){return c(["../IntegratedMeshLayer"],a)})},StreamLayer:function(){return m.create(function(a){return c(["../StreamLayer"],a)})},TileLayer:function(){return m.create(function(a){return c(["../TileLayer"],a)})},UnknownLayer:function(){return m.create(function(a){return c(["../UnknownLayer"],a)})},UnsupportedLayer:function(){return m.create(function(a){return c(["../UnsupportedLayer"],a)})},VectorTileLayer:function(){return m.create(function(a){return c(["../VectorTileLayer"],
    a)})},WebTileLayer:function(){return m.create(function(a){return c(["../WebTileLayer"],a)})},WMSLayer:function(){return m.create(function(a){return c(["../WMSLayer"],a)})},WMTSLayer:function(){return m.create(function(a){return c(["../WMTSLayer"],a)})},BingMapsLayer:function(){return m.create(function(a){return c(["../BingMapsLayer"],a)})}}})},"esri/portal/support/mapNotesUtils":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isMapNotesLayer=
    function(a){var c=["TITLE","DESCRIPTION","IMAGE_URL","IMAGE_LINK_URL"];if((a=a.layers||a.featureCollection&&a.featureCollection.layers)&&Array.isArray(a))return a=a[0],a.layerDefinition&&Array.isArray(a.layerDefinition.fields)&&a.layerDefinition.fields.forEach(function(a){a=c.indexOf(a.name);-1<a&&c.splice(a,1)}),c.length?!1:!0}})},"esri/portal/support/portalLayers":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/Collection ../../core/Error ../../core/promiseUtils ../../layers/support/lazyLayerLoader ../PortalItem ./mapNotesUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){function p(a){switch(a.type){case "Map Service":return q(a);case "Feature Service":return f(a);case "Feature Collection":return t(a);case "Scene Service":return r(a);case "Image Service":return u(a);case "Stream Service":return{className:"StreamLayer"};case "Vector Tile Service":return{className:"VectorTileLayer"};case "KML":return{className:"KMLLayer"};case "WMTS":return{className:"WMTSLayer"};case "WMS":return{className:"WMSLayer"};default:return g.reject(new h("portal:unknown-item-type",
    "Unknown item type '${type}'",{type:a.type}))}}function k(a){return(0,d.layerLookupMap[a.className])().then(function(b){return{constructor:b,properties:a.properties}})}function q(a){return w(a).then(function(a){return a?{className:"TileLayer"}:{className:"MapImageLayer"}})}function f(a){return v(a).then(function(a){if("object"===typeof a){var b={};null!=a.id&&(b.layerId=a.id);return{className:"FeatureLayer",properties:b}}return{className:"GroupLayer"}})}function r(a){return v(a).then(function(b){if("object"===
    typeof b){var c={},d=void 0;null!=b.id?(c.layerId=b.id,d=a.url+"/layers/"+b.id):d=a.url;if(Array.isArray(a.typeKeywords)&&0<a.typeKeywords.length){b={IntegratedMesh:"IntegratedMeshLayer","3DObject":"SceneLayer",Point:"SceneLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};for(var e=0,f=Object.keys(b);e<f.length;e++){var k=f[e];if(-1!==a.typeKeywords.indexOf(k))return{className:b[k]}}}return x(d).then(function(a){var b="SceneLayer",d={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",
    PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"};a&&a.layerType&&d[a.layerType]&&(b=d[a.layerType]);return{className:b,properties:c}})}return{className:"GroupLayer"}})}function t(a){return a.load().then(function(){return a.fetchData()}).then(function(a){if(a&&Array.isArray(a.layers)){if(b.isMapNotesLayer(a))return{className:"MapNotesLayer"};if(1===a.layers.length)return{className:"FeatureLayer"}}return{className:"GroupLayer"}})}function u(a){return w(a).then(function(b){var c=new l(a.typeKeywords);
    return b?c.find(function(a){return"elevation 3d layer"===a.toLowerCase()})?{className:"ElevationLayer"}:{className:"TileLayer"}:{className:"ImageryLayer"}})}function w(a){return x(a.url).then(function(a){return a.tileInfo})}function v(a){return!a.url||a.url.match(/\/\d+$/)?g.resolve({}):a.load().then(function(){return a.fetchData()}).then(function(b){return b&&Array.isArray(b.layers)?1===b.layers.length?{id:b.layers[0].id}:!1:x(a.url).then(function(a){return a&&Array.isArray(a.layers)?1===a.layers.length?
    {id:a.layers[0].id}:!1:{}})})}function x(a){return e(a,{responseType:"json",query:{f:"json"}}).then(function(a){return a.data})}Object.defineProperty(a,"__esModule",{value:!0});a.fromItem=function(a){!a.portalItem||a.portalItem instanceof n||a.portalItem.constructor&&a.portalItem.constructor._meta||(a=m({},a,{portalItem:new n(a.portalItem)}));return a.portalItem.load().then(p).then(k).then(function(b){var c=m({portalItem:a.portalItem},b.properties);return g.resolve(new b.constructor(c))})};a.selectLayerClassPath=
    p})},"esri/renderers/support/styleUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/asyncUtils ../../core/promiseUtils ../../core/Warning".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});a.loadStyleRenderer=function(a,c,b){return e(this,void 0,void 0,function(){var d,e,n;return m(this,function(f){switch(f.label){case 0:return(d=a&&a.getAtOrigin&&a.getAtOrigin("renderer",c.origin))&&"unique-value"===
    d.type&&d.styleOrigin?[4,l.result(d.populateFromStyle())]:[3,2];case 1:e=f.sent(),h.throwIfAborted(b),!1===e.ok&&(n=e.error,c&&c.messages&&c.messages.push(new g("renderer:style-reference","Failed to create unique value renderer from style reference: "+n.message,{error:n,context:c})),a.clear("renderer",c.origin)),f.label=2;case 2:return[2]}})})}})},"esri/layers/FeatureLayer":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../PopupTemplate ../renderers ../request ../symbols ../core/Collection ../core/Error ../core/Handles ../core/jsonMap ../core/Logger ../core/maybe ../core/MultiOriginJSONSupport ../core/object ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ./Layer ./graphics/sources/MemorySource ./mixins/ArcGISService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/RefreshableLayer ./mixins/ScaleRangeLayer ./mixins/TemporalLayer ./support/arcgisLayerUrl ./support/commonProperties ./support/FeatureIndex ./support/FeatureReduction ./support/FeatureReductionCluster ./support/FeatureReductionSelection ./support/featureReductionUtils ./support/FeatureTemplate ./support/FeatureType ./support/fieldProperties ./support/FieldsIndex ./support/fieldUtils ./support/LabelClass ./support/labelingInfo ./support/layerSourceUtils ./support/Relationship ./support/TimeInfo ../renderers/support/jsonUtils ../renderers/support/styleUtils ../support/popupUtils ../symbols/support/jsonUtils ../tasks/support/AttachmentQuery ../tasks/support/FeatureSet ../tasks/support/Query ../tasks/support/RelationshipQuery @dojo/framework/shim/Promise".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D,E,C,F,I,G,J,H,N,L,M,O,T,ia,la,sa,ca,U,aa,ma,P,V,X,ja,da,Y,ba,Q,S,W,fa,Z,oa,ga,ha){function K(a,b,c){return!(a&&a.hasOwnProperty(b)?!a[b]:!c)}function R(a,b,c){return a&&a.hasOwnProperty(b)?a[b]:c}var ea=new t.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),na={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",
    keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},pa=u.getLogger("esri.layers.FeatureLayer"),ka=ma.defineFieldProperties();return function(a){function h(b){b=a.call(this,b)||this;b._handles=new r;b.capabilities=null;b.copyright=null;b.displayField=null;b.definitionExpression=null;b.dynamicDataSource=null;b.editFieldsInfo=null;b.editingEnabled=!0;b.editingInfo=null;b.elevationInfo=null;b.featureReduction=null;b.fields=null;b.fullExtent=null;b.gdbVersion=null;b.geometryProperties=null;b.geometryType=
    null;b.hasM=void 0;b.hasZ=void 0;b.heightModelInfo=null;b.historicMoment=null;b.isTable=!1;b.labelsVisible=!0;b.labelingInfo=null;b.layerId=void 0;b.legendEnabled=!0;b.minScale=0;b.maxScale=0;b.globalIdField=null;b.objectIdField=null;b.outFields=null;b.path=null;b.popupEnabled=!0;b.popupTemplate=null;b.relationships=null;b.sourceJSON=null;b.returnM=void 0;b.returnZ=void 0;b.screenSizePerspectiveEnabled=!0;b.serviceDefinitionExpression=null;b.spatialReference=E.WGS84;b.templates=null;b.timeInfo=null;
    b.title=null;b.sublayerTitleMode="item-title";b.trackIdField=null;b.type="feature";b.typeIdField=null;b.types=null;b.indexes=new (q.ofType(T.FeatureIndex));b.userIsAdmin=!1;b.version=void 0;b.visible=!0;return b}e(h,a);h.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null)};h.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?m({url:a},b):a};h.prototype.load=function(a){var b=this,c=w.isSome(a)?a.signal:null;if(this.portalItem&&this.portalItem.loaded&&
    this.source)this.addResolvingPromise(this.createGraphicsSource(c).then(function(a){return b._initLayerProperties(a)}));else return a=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},a).catch(function(a){return a}).then(function(){return d(b,void 0,void 0,function(){var a,b;return g(this,function(d){switch(d.label){case 0:return this.url&&null==this.layerId&&/FeatureServer|MapServer\/*$/i.test(this.url)?[4,this._fetchFirstLayerId(c)]:[3,2];case 1:a=d.sent(),null!=a&&(this.layerId=
    a),d.label=2;case 2:if(!this.url&&!this._hasMemorySource())throw new f("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");b=this._initLayerProperties;return[4,this.createGraphicsSource(c)];case 3:return[2,b.apply(this,[d.sent()])]}})})}),this.addResolvingPromise(a),this.when()};h.prototype.readCapabilities=function(a,b){b=b.layerDefinition||b;return{attachment:this._readAttachmentCapabilities(b.attachmentProperties),data:this._readDataCapabilities(b),
    metadata:this._readMetadataCapabilities(b),operations:this._readOperationsCapabilities(b.capabilities||a,b),query:this._readQueryCapabilities(b),queryRelated:this._readQueryRelatedCapabilities(b),editing:this._readEditingCapabilities(b)}};h.prototype.readEditingEnabled=function(a,b){return b.layerDefinition&&"Query"===b.layerDefinition.capabilities?!1:!0};h.prototype.writeEditingEnabled=function(a,b){a||x.setDeepValue("layerDefinition.capabilities","Query",b)};h.prototype.readEditingInfo=function(a,
    b){return(a=b.editingInfo)?{lastEditDate:null!=a.lastEditDate?new Date(a.lastEditDate):null}:null};h.prototype.readFeatureReduction=function(a,b,c){return ca.read(a,b,c)};h.prototype.writeWebSceneFeatureReduction=function(a,b,c,d){ca.writeTarget(a,b,"layerDefinition.featureReduction",d)};Object.defineProperty(h.prototype,"fieldsIndex",{get:function(){return new P(this.fields||[])},enumerable:!0,configurable:!0});h.prototype.readIsTable=function(a,b){b=b&&b.layerDefinition||b;return"Table"===b.type};
    Object.defineProperty(h.prototype,"hasService",{get:function(){return!this._hasMemorySource()},enumerable:!0,configurable:!0});h.prototype.readMinScale=function(a,b){return b.effectiveMinScale||a||0};h.prototype.readMaxScale=function(a,b){return b.effectiveMaxScale||a||0};h.prototype.readGlobalIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.globalIdField)return b.globalIdField;if(b.fields)for(a=0,b=b.fields;a<b.length;a++){var c=b[a];if("esriFieldTypeGlobalID"===c.type)return c.name}};
    h.prototype.readObjectIdFieldFromService=function(a,b){b=b.layerDefinition||b;if(b.objectIdField)return b.objectIdField;if(b.fields)for(a=0,b=b.fields;a<b.length;a++){var c=b[a];if("esriFieldTypeOID"===c.type)return c.name}};Object.defineProperty(h.prototype,"parsedUrl",{get:function(){var a=this.url?A.urlToObject(this.url):null;if(null!=a)if(null!=this.layerId)a.path=A.join(a.path,this.layerId.toString());else if(null!=this.dynamicDataSource){var b={source:da.sourceToJSON(this.dynamicDataSource)};
    a.query={layer:JSON.stringify(b)}}return a},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"defaultPopupTemplate",{get:function(){return this.createPopupTemplate()},enumerable:!0,configurable:!0});Object.defineProperty(h.prototype,"renderer",{set:function(a){V.fixRendererFields(a,this.fields);this._set("renderer",a)},enumerable:!0,configurable:!0});h.prototype.readRenderer=function(a,c,d){c=c.layerDefinition||c;var e=c.drawingInfo&&c.drawingInfo.renderer||void 0,f,n;if(e)(f=Q.read(e,
    c,d)||void 0)||pa.error("Failed to create renderer",{rendererDefinition:c.drawingInfo.renderer,layer:this,context:d});else if(c.defaultSymbol)fa.read(c.defaultSymbol,c,d),c.types&&c.types.length?(f=new b.UniqueValueRenderer({defaultSymbol:n,field:c.typeIdField}),c.types.forEach(function(a){e.addUniqueValueInfo(a.id,fa.read(a.symbol,a,d))})):f=new b.SimpleRenderer({symbol:n});else if("Table"!==c.type){switch(c.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":n=new k.SimpleMarkerSymbol;
    break;case "esriGeometryPolyline":n=new k.SimpleLineSymbol;break;case "esriGeometryPolygon":n=new k.SimpleFillSymbol}f=n&&new b.SimpleRenderer({symbol:n})}return f};h.prototype.writeRenderer=function(a,b,c,d){Q.writeTarget(a,b,c,d)};h.prototype.writeWebSceneRenderer=function(a,b,c,d){Q.writeTarget(a,b,"layerDefinition.drawingInfo.renderer",d)};Object.defineProperty(h.prototype,"source",{set:function(a){var b=this._get("source");b!==a&&(b&&b instanceof q&&this._resetMemorySource(b),a&&a instanceof
    q&&this._initMemorySource(a),this._set("source",a))},enumerable:!0,configurable:!0});h.prototype.castSource=function(a){return a?Array.isArray(a)||a instanceof q?new F.default({layer:this,items:a}):a:null};h.prototype.readSource=function(a,b){a=oa.fromJSON(b.featureSet);return new F.default({layer:this,items:a&&a.features||[]})};h.prototype.readTemplates=function(a,b){var c=b.editFieldsInfo;b=c&&c.creatorField;c=c&&c.editorField;a=a&&a.map(function(a){return U.fromJSON(a)});this._fixTemplates(a,b);
    this._fixTemplates(a,c);return a};h.prototype.readTitle=function(a,b){a=b.layerDefinition&&b.layerDefinition.name||b.name;b=b.title||b.layerDefinition&&b.layerDefinition.title;if(a){b=this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?M.titleFromUrlAndName(this.url,a):a;a=a||this.url&&M.parse(this.url).title;if(!a)return;"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a);return M.cleanTitle(a)}if("item-title"===this.sublayerTitleMode&&
    b)return b};h.prototype.readTitleFromWebMap=function(a,b){return b.title||b.layerDefinition&&b.layerDefinition.name};h.prototype.readTypeIdField=function(a,b){b=b.layerDefinition||b;if(a=b.typeIdField)if(b=V.getField(b.fields,a))a=b.name;return a};h.prototype.readTypes=function(a,b){var c=this;b=b.layerDefinition||b;a=b.types;var d=(b=b.editFieldsInfo)&&b.creatorField,e=b&&b.editorField;return a&&a.map(function(a){a=aa.fromJSON(a);c._fixTemplates(a.templates,d);c._fixTemplates(a.templates,e);return a})};
    Object.defineProperty(h.prototype,"url",{set:function(a){a=M.sanitizeUrlWithLayerId(this,a,pa);this._set("url",a.url);null!=a.layerId&&this._set("layerId",a.layerId)},enumerable:!0,configurable:!0});h.prototype.writeUrl=function(a,b,c,d){M.writeUrlWithLayerId(this,a,null,b,d)};h.prototype.readVersion=function(a,b){return b.currentVersion?b.currentVersion:b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||
    b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||b.hasOwnProperty("types")?10:9.3};h.prototype.readVisible=function(a,b){if(b.layerDefinition&&null!=b.layerDefinition.defaultVisibility)return!!b.layerDefinition.defaultVisibility;if(null!=b.visibility)return!!b.visibility};h.prototype.addAttachment=function(a,b){var c=this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){if(!("addAttachment"in c.source))throw new f("FeatureLayer","Layer source does not support addAttachment capability");
    return c.source.addAttachment(a,b)})};h.prototype.updateAttachment=function(a,b,c){var d=this;return this.load().then(function(){return d._checkAttachmentSupport(a)}).then(function(){if(!("updateAttachment"in d.source))throw new f("FeatureLayer","Layer source does not support updateAttachment capability");return d.source.updateAttachment(a,b,c)})};h.prototype.applyEdits=function(a,b){return d(this,void 0,void 0,function(){var d;return g(this,function(e){switch(e.label){case 0:return[4,new Promise(function(a,
    b){c(["./graphics/editingSupport"],a,b)})];case 1:return d=e.sent(),[2,d.applyEdits(this,a,b)]}})})};h.prototype.on=function(a,b){return this.inherited(arguments,[a,b])};h.prototype.createPopupTemplate=function(a){return W.createPopupTemplate(this,a)};h.prototype.createGraphicsSource=function(a){return d(this,void 0,void 0,function(){var b,d;return g(this,function(e){switch(e.label){case 0:return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),[2,this.source.load({signal:a})]):
    [4,z.create(function(a){return c(["./graphics/sources/FeatureLayerSource"],a)})];case 1:return b=e.sent(),z.throwIfAborted(a),[4,(new b.default({layer:this})).load({signal:a})];case 2:return d=e.sent(),this.emit("graphics-source-create",{graphicsSource:d}),[2,d]}})})};h.prototype.createQuery=function(){var a=new ga,b=this.get("capabilities.data");a.gdbVersion=this.gdbVersion;a.historicMoment=this.historicMoment;a.returnGeometry=!0;b&&(b.supportsZ&&null!=this.returnZ&&(a.returnZ=this.returnZ),b.supportsM&&
    null!=this.returnM&&(a.returnM=this.returnM));a.outFields=["*"];a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a};h.prototype.deleteAttachments=function(a,b){var c=this;return this.load().then(function(){return c._checkAttachmentSupport(a)}).then(function(){if(!("deleteAttachments"in c.source))throw new f("FeatureLayer","Layer source does not support deleteAttachments capability");return c.source.deleteAttachments(a,b)})};
    h.prototype.getFeatureType=function(a){var b=this.typeIdField;if(!b||!a)return null;var c=a.attributes?a.attributes[b]:void 0;if(null==c)return null;var d=null;this.types.some(function(a){var b=a.id;if(null==b)return!1;b.toString()===c.toString()&&(d=a);return!!d});return d};h.prototype.getFieldDomain=function(a,b){var c=this,d,e=!1;b=(b=b&&b.feature)&&b.attributes;var f=this.typeIdField&&b&&b[this.typeIdField];null!=f&&this.types&&this.types.some(function(b){return b.id==f?((d=b.domains&&b.domains[a])&&
    "inherited"===d.type&&(d=c._getLayerDomain(a),e=!0),!0):!1});e||d||(d=this._getLayerDomain(a));return d};h.prototype.getField=function(a){return this.fieldsIndex.get(a)};h.prototype.queryAttachments=function(a,b){var c=this;a=Z.from(a);return this.load().then(function(){if(!c.get("capabilities.data.supportsAttachment"))throw new f("FeatureLayer","this layer doesn't support attachments");var b=a.attachmentTypes,d=a.objectIds,e=a.globalIds,k=a.num,n=a.size,g=a.start,h=a.where;if(!c.get("capabilities.operations.supportsQueryAttachments")&&
    (b=b&&b.length,e=e&&e.length,n=n&&n.length,d&&1<d.length||b||e||n||k||g||h))throw new f("FeatureLayer","when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",a);if(!(d&&d.length||h))throw new f("FeatureLayer","'objectIds' or 'where' are required to perform attachment query",a);if(!("queryAttachments"in c.source))throw new f("FeatureLayer","Layer source does not support queryAttachments capability",a);return c.source.queryAttachments(a)})};h.prototype.queryFeatures=function(a,
    b){var c=this;return this.load().then(function(){return c.source.queryFeatures(ga.from(a)||c.createQuery(),b)}).then(function(a){if(a&&a.features)for(var b=0,d=a.features;b<d.length;b++){var e=d[b];e.layer=e.sourceLayer=c}return a})};h.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){if(c.source.queryObjectIds)return c.source.queryObjectIds(ga.from(a)||c.createQuery(),b);throw new f("FeatureLayer","Layer source does not support queryObjectIds capability");})};h.prototype.queryFeatureCount=
    function(a,b){var c=this;return this.load().then(function(){if(c.source.queryFeatureCount)return c.source.queryFeatureCount(ga.from(a)||c.createQuery(),b);throw new f("FeatureLayer","Layer source does not support queryFeatureCount capability");})};h.prototype.queryExtent=function(a,b){var c=this;return this.load().then(function(){if(c.source.queryExtent)return c.source.queryExtent(ga.from(a)||c.createQuery(),b);throw new f("FeatureLayer","Layer source does not support queryExtent capability");})};
    h.prototype.queryRelatedFeatures=function(a,b){var c=this;return this.load().then(function(){if("queryRelatedFeatures"in c.source)return c.source.queryRelatedFeatures(ha.from(a),b);throw new f("FeatureLayer","Layer source does not support queryRelatedFeatures capability");})};h.prototype.read=function(a,b){var c=a.featureCollection;if(c){var d=c.layers;d&&1===d.length&&(this.inherited(arguments,[d[0],b]),null!=c.showLegend&&this.inherited(arguments,[{showLegend:c.showLegend},b]))}this.inherited(arguments,
    [a,b]);b&&"service"===b.origin&&this.revert(["objectIdField","fields","timeInfo"],"service")};h.prototype.write=function(a,b){return b&&("web-scene"===b.origin||"web-map"===b.origin)&&b.messages&&this.isTable?(b.messages.push(new f("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes and web maps",{layer:this})),null):this.inherited(arguments)};h.prototype._checkAttachmentSupport=function(a){var b=a.attributes,
    c=this.objectIdField;if(!this.get("capabilities.data.supportsAttachment"))return z.reject(new f("FeatureLayer","this layer doesn't support attachments"));if(!a)return z.reject(new f("FeatureLayer","A feature is required to add/delete/update attachments"));if(!b)return z.reject(new f("FeatureLayer","'attributes' are required on a feature to query attachments"));if(!b[c])return z.reject(new f("FeatureLayer","feature is missing the identifying attribute "+c))};h.prototype._getLayerDomain=function(a){if(!this.fields)return null;
    var b=null;this.fields.some(function(c){c.name===a&&(b=c.domain);return!!b});return b};h.prototype._fetchFirstLayerId=function(a){return p(this.url,{query:{f:"json"},responseType:"json",signal:a}).then(function(a){if(a=a.data){if(Array.isArray(a.layers)&&0<a.layers.length)return a.layers[0].id;if(Array.isArray(a.tables)&&0<a.tables.length)return a.tables[0].id}})};h.prototype._initLayerProperties=function(a){return d(this,void 0,void 0,function(){return g(this,function(b){this._set("source",a);a.sourceJSON&&
    (this.sourceJSON=a.sourceJSON,this.read(a.sourceJSON,{origin:"service",url:this.parsedUrl}));this._verifySource();this._verifyFields();V.fixRendererFields(this.renderer,this.fields);V.fixTimeInfoFields(this.timeInfo,this.fields);return[2,S.loadStyleRenderer(this,{origin:"service"})]})})};h.prototype._verifyFields=function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+a+")");this.isTable||this._hasMemorySource()||
    -1!==a.search(/\/FeatureServer\//i)||this.fields&&this.fields.some(function(a){return"geometry"===a.type})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")};h.prototype._fixTemplates=function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})};h.prototype._verifySource=function(){if(this._hasMemorySource()){if(this.url)throw new f("feature-layer:mixed-source-and-url",
    "FeatureLayer cannot be created with both an in-memory source and a url");}else if(!this.url)throw new f("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source");};h.prototype._initMemorySource=function(a){var b=this;a.forEach(function(a){a.layer=b;a.sourceLayer=b});this._handles.add([a.on("after-add",function(a){a.item.layer=b;a.item.sourceLayer=b}),a.on("after-remove",function(a){a.item.layer=null;a.item.sourceLayer=null})],"fl-source")};h.prototype._resetMemorySource=
    function(a){a.forEach(function(a){a.layer=null;a.sourceLayer=null});this._handles.remove("fl-source")};h.prototype._hasMemorySource=function(){return!(this.url||!this.source)};h.prototype._readAttachmentCapabilities=function(a){var b={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};a&&Array.isArray(a)&&a.forEach(function(a){var c=na[a.name];c&&(b[c]=!!a.isEnabled)});return b};h.prototype._readDataCapabilities=function(a){return{isVersioned:K(a,"isDataVersioned",
    !1),supportsAttachment:K(a,"hasAttachments",!1),supportsM:K(a,"hasM",!1),supportsZ:K(a,"hasZ",!1)}};h.prototype._readMetadataCapabilities=function(a){return{supportsAdvancedFieldProperties:K(a,"supportsFieldDescriptionProperty",!1)}};h.prototype._readOperationsCapabilities=function(a,b){a=a?a.toLowerCase().split(",").map(function(a){return a.trim()}):[];var c=-1!==a.indexOf("editing"),d=c&&-1!==a.indexOf("create"),e=c&&-1!==a.indexOf("delete"),f=c&&-1!==a.indexOf("update");!c||d||e||f||(d=e=f=!0);
    return{supportsCalculate:K(b,"supportsCalculate",!1),supportsTruncate:K(b,"supportsTruncate",!1),supportsValidateSql:K(b,"supportsValidateSql",!1),supportsAdd:d,supportsDelete:e,supportsEditing:c,supportsQuery:-1!==a.indexOf("query"),supportsQueryAttachments:K(b.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:K(b,"supportsAttachmentsResizing",!1),supportsSync:-1!==a.indexOf("sync"),supportsUpdate:f,supportsExceedsLimitStatistics:K(b,"supportsExceedsLimitStatistics",
    !1)}};h.prototype._readQueryCapabilities=function(a){var b=a.advancedQueryCapabilities,c=a.ownershipBasedAccessControlForFeatures,d=a.archivingInfo,e=(a.supportedQueryFormats||"").split(",").reduce(function(a,b){(b=b.toLowerCase().trim())&&a.add(b);return a},new Set);return{supportsStatistics:K(b,"supportsStatistics",a.supportsStatistics),supportsCentroid:K(b,"supportsReturningGeometryCentroid",!1),supportsDistance:K(b,"supportsQueryWithDistance",!1),supportsDistinct:K(b,"supportsDistinct",a.supportsAdvancedQueries),
    supportsExtent:K(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:K(b,"supportsReturningGeometryProperties",!1),supportsHavingClause:K(b,"supportsHavingClause",!1),supportsOrderBy:K(b,"supportsOrderBy",a.supportsAdvancedQueries),supportsPagination:K(b,"supportsPagination",!1),supportsQuantization:K(a,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:K(a,"supportsQuantizationEditMode",!1),supportsQueryGeometry:K(a,"supportsReturningQueryGeometry",!1),supportsResultType:K(b,
    "supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:K(b,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:K(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:K(a,"useStandardizedQueries",!1),supportsQueryByOthers:K(c,"allowOthersToQuery",!0),supportsHistoricMoment:K(d,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:e.has("pbf"),supportsDisjointSpatialRelationship:K(b,"supportsDisjointSpatialRel",!1),supportsCacheHint:K(b,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:R(a,
    "maxRecordCountFactor",void 0),maxRecordCount:R(a,"maxRecordCount",void 0),standardMaxRecordCount:R(a,"standardMaxRecordCount",void 0),tileMaxRecordCount:R(a,"tileMaxRecordCount",void 0)}};h.prototype._readQueryRelatedCapabilities=function(a){a=a.advancedQueryCapabilities;var b=K(a,"supportsAdvancedQueryRelated",!1);return{supportsPagination:K(a,"supportsQueryRelatedPagination",!1),supportsCount:b,supportsOrderBy:b}};h.prototype._readEditingCapabilities=function(a){var b=a.ownershipBasedAccessControlForFeatures;
    return{supportsGeometryUpdate:K(a,"allowGeometryUpdates",!0),supportsGlobalId:K(a,"supportsApplyEditsWithGlobalIds",!1),supportsRollbackOnFailure:K(a,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:K(a,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:K(a,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:K(b,"allowAnonymousToDelete",!0),supportsDeleteByOthers:K(b,"allowOthersToDelete",!0),supportsUpdateByAnonymous:K(b,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:K(b,
    "allowOthersToUpdate",!0)}};l([y.property({readOnly:!0,json:{read:!1}})],h.prototype,"capabilities",void 0);l([y.reader("service","capabilities","advancedQueryCapabilities allowGeometryUpdates allowUpdateWithoutMValues archivingInfo capabilities hasAttachments hasM hasZ maxRecordCount maxRecordCountFactor ownershipBasedAccessControlForFeatures standardMaxRecordCount supportedQueryFormats supportsAdvancedQueries supportsApplyEditsWithGlobalIds supportsAttachmentsByUploadId supportsAttachmentsResizing supportsCalculate supportsCoordinatesQuantization supportsExceedsLimitStatistics supportsFieldDescriptionProperty supportsQuantizationEditMode supportsRollbackOnFailureParameter supportsStatistics supportsTruncate supportsValidateSql tileMaxRecordCount useStandardizedQueries".split(" "))],
    h.prototype,"readCapabilities",null);l([y.property({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],h.prototype,"copyright",void 0);l([y.property({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],h.prototype,"displayField",void 0);l([y.property({type:String,json:{origins:{service:{read:!1,write:!1}},read:{source:"layerDefinition.definitionExpression"},write:{target:"layerDefinition.definitionExpression"}}})],
    h.prototype,"definitionExpression",void 0);l([y.property({readOnly:!0,json:{read:fa.read}})],h.prototype,"defaultSymbol",void 0);l([y.property()],h.prototype,"dynamicDataSource",void 0);l([y.property({readOnly:!0})],h.prototype,"editFieldsInfo",void 0);l([y.property({type:Boolean})],h.prototype,"editingEnabled",void 0);l([y.reader(["portal-item","web-map","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],h.prototype,"readEditingEnabled",null);l([y.writer(["portal-item","web-map","web-scene"],
    "editingEnabled",{"layerDefinition.capabilities":{type:String}})],h.prototype,"writeEditingEnabled",null);l([y.property({readOnly:!0})],h.prototype,"editingInfo",void 0);l([y.reader("editingInfo")],h.prototype,"readEditingInfo",null);l([y.property(O.elevationInfo)],h.prototype,"elevationInfo",void 0);l([y.property({types:{key:"type",base:ia.default,typeMap:{selection:sa.default,cluster:la.default}},json:{write:{target:"layerDefinition.featureReduction"}}})],h.prototype,"featureReduction",void 0);
    l([y.reader("featureReduction",["layerDefinition.featureReduction"])],h.prototype,"readFeatureReduction",null);l([y.writer("web-scene","featureReduction",{"layerDefinition.featureReduction":{types:ca.webSceneFeatureReductionTypes}})],h.prototype,"writeWebSceneFeatureReduction",null);l([y.property(m({},ka.fields,{json:{origins:{service:{read:!0}},read:{source:"layerDefinition.fields"}}}))],h.prototype,"fields",void 0);l([y.property({readOnly:!0,dependsOn:["fields"]})],h.prototype,"fieldsIndex",null);
    l([y.property({type:B,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],h.prototype,"fullExtent",void 0);l([y.property()],h.prototype,"gdbVersion",void 0);l([y.property({readOnly:!0})],h.prototype,"geometryProperties",void 0);l([y.property({type:"point polygon polyline multipoint multipatch mesh".split(" "),json:{origins:{service:{read:ea.read}},read:{source:"layerDefinition.geometryType",reader:ea.read}}})],h.prototype,"geometryType",void 0);l([y.property({type:Boolean,
    json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],h.prototype,"hasM",void 0);l([y.property({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],h.prototype,"hasZ",void 0);l([y.property({readOnly:!0,type:D})],h.prototype,"heightModelInfo",void 0);l([y.property({type:Date})],h.prototype,"historicMoment",void 0);l([y.property({json:{origins:{service:{read:!1},"portal-item":{read:!1}}}})],h.prototype,"id",void 0);l([y.property({readOnly:!0})],
    h.prototype,"isTable",void 0);l([y.reader("service","isTable",["type"]),y.reader("isTable",["layerDefinition.type"])],h.prototype,"readIsTable",null);l([y.property({dependsOn:["loaded","url","source"],readOnly:!0})],h.prototype,"hasService",null);l([y.property(O.labelsVisible)],h.prototype,"labelsVisible",void 0);l([y.property({type:[X],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:ja.reader},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",
    reader:ja.reader},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],h.prototype,"labelingInfo",void 0);l([y.property(O.opacityDrawingInfo)],h.prototype,"opacity",void 0);l([y.property({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],h.prototype,"layerId",void 0);l([y.property(O.legendEnabled)],h.prototype,"legendEnabled",void 0);l([y.property({type:["show","hide"]})],h.prototype,"listMode",void 0);l([y.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},
    read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}})],h.prototype,"minScale",void 0);l([y.reader("service","minScale",["minScale","effectiveMinScale"])],h.prototype,"readMinScale",null);l([y.property({type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}})],h.prototype,"maxScale",void 0);l([y.reader("service","maxScale",["maxScale","effectiveMaxScale"])],h.prototype,"readMaxScale",
    null);l([y.property({type:String})],h.prototype,"globalIdField",void 0);l([y.reader("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),y.reader("service","globalIdField",["globalIdField","fields"])],h.prototype,"readGlobalIdFieldFromService",null);l([y.property({type:String})],h.prototype,"objectIdField",void 0);l([y.reader("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),y.reader("service","objectIdField",["objectIdField","fields"])],h.prototype,
    "readObjectIdFieldFromService",null);l([y.property({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],h.prototype,"operationalLayerType",void 0);l([y.property(ka.outFields)],h.prototype,"outFields",void 0);l([y.property({readOnly:!0,dependsOn:["layerId"]})],h.prototype,"parsedUrl",null);l([y.property({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],h.prototype,"path",void 0);l([y.property(O.popupEnabled)],h.prototype,"popupEnabled",void 0);l([y.property({type:n,json:{read:{source:"popupInfo"},
    write:{target:"popupInfo"}}})],h.prototype,"popupTemplate",void 0);l([y.property({readOnly:!0,dependsOn:["fields","title"]})],h.prototype,"defaultPopupTemplate",null);l([y.property({type:[Y],readOnly:!0})],h.prototype,"relationships",void 0);l([y.property({types:b.rendererTypes,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}}},write:{target:"layerDefinition.drawingInfo.renderer"}}})],h.prototype,"renderer",null);l([y.reader("service","renderer",["drawingInfo.renderer","defaultSymbol",
    "type"]),y.reader("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol","layerDefinition.type"])],h.prototype,"readRenderer",null);l([y.writer("renderer")],h.prototype,"writeRenderer",null);l([y.writer("web-scene","renderer",{"layerDefinition.drawingInfo.renderer":{types:b.webSceneRendererTypes}})],h.prototype,"writeWebSceneRenderer",null);l([y.property()],h.prototype,"sourceJSON",void 0);l([y.property({type:Boolean})],h.prototype,"returnM",void 0);l([y.property({type:Boolean})],
    h.prototype,"returnZ",void 0);l([y.property(O.screenSizePerspectiveEnabled)],h.prototype,"screenSizePerspectiveEnabled",void 0);l([y.property()],h.prototype,"source",null);l([y.cast("source")],h.prototype,"castSource",null);l([y.reader("portal-item","source",["featureSet"]),y.reader("web-map","source",["featureSet"])],h.prototype,"readSource",null);l([y.property({readOnly:!0,json:{origins:{service:{read:{source:"definitionExpression"}}}}})],h.prototype,"serviceDefinitionExpression",void 0);l([y.property({type:E,
    json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],h.prototype,"spatialReference",void 0);l([y.property({type:[U]})],h.prototype,"templates",void 0);l([y.reader("templates",["editFieldsInfo","creatorField","editorField","templates"])],h.prototype,"readTemplates",null);l([y.property({type:ba})],h.prototype,"timeInfo",void 0);l([y.property()],h.prototype,"title",void 0);l([y.reader("service","title",["name"]),y.reader("portal-item",
    "title",["layerDefinition.title","layerDefinition.name","title"])],h.prototype,"readTitle",null);l([y.reader("web-map","title",["layerDefinition.name","title"])],h.prototype,"readTitleFromWebMap",null);l([y.property({type:String})],h.prototype,"sublayerTitleMode",void 0);l([y.property({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],h.prototype,"trackIdField",void 0);l([y.property({json:{read:!1}})],h.prototype,"type",void 0);l([y.property({type:String})],h.prototype,"typeIdField",void 0);
    l([y.reader("service","typeIdField"),y.reader("typeIdField",["layerDefinition.typeIdField"])],h.prototype,"readTypeIdField",null);l([y.property({type:[aa]})],h.prototype,"types",void 0);l([y.reader("service","types",["types"]),y.reader("types",["layerDefinition.types"])],h.prototype,"readTypes",null);l([y.property({type:q.ofType(T.FeatureIndex),readOnly:!0})],h.prototype,"indexes",void 0);l([y.property(O.url)],h.prototype,"url",null);l([y.writer("url")],h.prototype,"writeUrl",null);l([y.property({readOnly:!0})],
    h.prototype,"userIsAdmin",void 0);l([y.property({json:{origins:{service:{read:!0}},read:!1}})],h.prototype,"version",void 0);l([y.reader("service","version","currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "))],h.prototype,"readVersion",null);l([y.property({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],h.prototype,"visible",void 0);l([y.reader("portal-item","visible",["visibility",
    "layerDefinition.defaultVisibility"])],h.prototype,"readVisible",null);return h=l([y.subclass("esri.layers.FeatureLayer")],h)}(y.declared(L.TemporalLayer(N.ScaleRangeLayer(H.RefreshableLayer(I.ArcGISService(G.OperationalLayer(J.PortalLayer(v.MultiOriginJSONMixin(C)))))))))})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/tsSupport/generatorHelper ./core/tsSupport/awaiterHelper ./core/arrayUtils ./core/Collection ./core/iteratorUtils ./core/JSONSupport ./core/lang ./core/Logger ./core/promiseUtils ./core/accessorSupport/decorators ./core/accessorSupport/ensureType ./layers/support/fieldUtils ./popup/content ./popup/ExpressionInfo ./popup/FieldInfo ./popup/LayerOptions ./popup/RelatedRecordsInfo ./popup/content/AttachmentsContent ./popup/content/Content ./popup/content/FieldsContent ./popup/content/MediaContent ./popup/content/TextContent ./popup/content/support/mediaInfoTypes ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D,E,C,F,I,G,J){var H=n.ofType({key:"type",defaultKeyValue:"button",base:I,typeMap:{button:G,toggle:J}}),N={base:B,key:"type",typeMap:{media:E,text:C,attachments:y,fields:D}},L=q.getLogger("esri.PopupTemplate");return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.lastEditInfoEnabled=!0;b.outFields=null;b.overwriteActions=!1;b.title=
    "";b.relatedRecordsInfo=null;return b}e(c,a);p=c;c.prototype.castContent=function(a){if(Array.isArray(a))return a.map(function(a){return t.ensureOneOfType(N,a)});if("string"===typeof a||"function"===typeof a||a instanceof HTMLElement||f.isPromiseLike(a))return a;L.error("content error","unsupported content value",{value:a});return null};c.prototype.readContent=function(a,b){a=b.popupElements;return Array.isArray(a)&&0<a.length?this._readPopupInfoElements(b):this._readPopupInfo(b)};c.prototype.writeContent=
    function(a,b){var c=this;"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=a.map(function(a){return a&&a.toJSON()}),b.popupElements.forEach(function(a){"attachments"===a.type?c._writeAttachmentContent(b):"media"===a.type?c._writeMediaContent(a,b):"text"===a.type&&c._writeTextContent(a,b)}))};c.prototype.writeFieldInfos=function(a,b){var c=this.content,c=Array.isArray(c)?c:null;if(a){var d=c?c.some(function(a){return"fields"===a.type&&(!a.fieldInfos||0===a.fieldInfos.length)}):
    !1;b.fieldInfos=a.filter(Boolean).map(function(a){a=a.toJSON();d||(a.visible=!1);return a})}if(c)for(a=0;a<c.length;a++){var e=c[a];"fields"===e.type&&this._writeFieldsContent(e,b)}};c.prototype.writeLayerOptions=function(a,b){b.layerOptions=!a||null===a.showNoDataRecords&&null===a.returnTopmostRaster?null:a.toJSON()};c.prototype.writeTitle=function(a,b){b.title=a||""};c.prototype.clone=function(){var a=this.actions,a=a?k.clone(a.toArray()):[];return new p({actions:a,content:Array.isArray(this.content)?
    k.clone(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?k.clone(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?k.clone(this.fieldInfos):null,layerOptions:this.layerOptions?k.clone(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?k.clone(this.outFields):null,overwriteActions:this.overwriteActions,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?k.clone(this.relatedRecordsInfo):
    null})};c.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){return h(this,function(c){switch(c.label){case 0:return[4,this._collectExpressionInfoFields(a,b,this.expressionInfos)];case 1:return c.sent(),u.collectFields(a,b,(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content))),[2]}})})};c.prototype.getRequiredFields=function(a){return g(this,void 0,void 0,function(){var c;return h(this,
    function(d){switch(d.label){case 0:return c=new Set,[4,this.collectRequiredFields(c,a)];case 1:return d.sent(),[2,b.valuesOfSet(c).sort()]}})})};c.prototype._writeFieldsContent=function(a,b){Array.isArray(a.fieldInfos)&&a.fieldInfos.length&&(a=k.clone(a.fieldInfos),Array.isArray(b.fieldInfos)?a.forEach(function(a){var c=d.find(b.fieldInfos,function(b){return b.fieldName.toLowerCase()===a.fieldName.toLowerCase()});c?c.visible=!0:b.fieldInfos.push(a)}):b.fieldInfos=a)};c.prototype._writeAttachmentContent=
    function(a){a.showAttachments||(a.showAttachments=!0)};c.prototype._writeTextContent=function(a,b){!b.description&&a.text&&(b.description=a.text)};c.prototype._writeMediaContent=function(a,b){Array.isArray(a.mediaInfos)&&a.mediaInfos.length&&(a=k.clone(a.mediaInfos),Array.isArray(b.mediaInfos)?b.mediaInfos=b.mediaInfos.concat(a):b.mediaInfos=a)};c.prototype._readPopupInfoElements=function(a){var b=a.description,c=a.mediaInfos,d=!1,e=!1;return a.popupElements.map(function(a){if("media"===a.type)return a.mediaInfos||
    !c||e||(a.mediaInfos=c,e=!0),E.fromJSON(a);if("text"===a.type)return a.text||!b||d||(a.text=b,d=!0),C.fromJSON(a);if("attachments"===a.type)return y.fromJSON(a);if("fields"===a.type)return D.fromJSON(a)}).filter(Boolean)};c.prototype._readPopupInfo=function(a){var b=a.description,c=a.mediaInfos;a=a.showAttachments;var d=[];b?d.push(new C({text:b})):d.push(new D);Array.isArray(c)&&c.length&&d.push(E.fromJSON({mediaInfos:c}));a&&d.push(y.fromJSON({displayType:"list"}));return d.length?d:b};c.prototype._getContentElementFields=
    function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};c.prototype._getMediaInfoFields=function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,f=c.tooltipField,k=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),
    this._extractFieldNames(k),this._extractFieldNames(c),e);d&&a.push(d);f&&a.push(f);return a};c.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};c.prototype._collectExpressionInfoFields=function(a,b,c){return g(this,void 0,void 0,function(){return h(this,function(d){switch(d.label){case 0:return c?[4,f.all(c.map(function(c){return u.collectArcadeFieldNames(a,
    b,c.expression)}))]:[2];case 1:return d.sent(),[2]}})})};c.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};c.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):[]};c.prototype._getActionFields=function(a){var b=
    a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};c.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):[]};c.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,
    "{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var p;l([r.property({type:H})],c.prototype,"actions",void 0);l([r.property()],c.prototype,"content",void 0);l([r.cast("content")],c.prototype,"castContent",null);l([r.reader("content",["description","popupElements","mediaInfos","showAttachments"])],c.prototype,"readContent",null);l([r.writer("content",{popupElements:{type:n.ofType(w.types)},showAttachments:{type:Boolean},mediaInfos:{type:n.ofType(F.types)},description:{type:String}})],c.prototype,
    "writeContent",null);l([r.property({type:[v],json:{write:!0}})],c.prototype,"expressionInfos",void 0);l([r.property({type:[x]})],c.prototype,"fieldInfos",void 0);l([r.writer("fieldInfos")],c.prototype,"writeFieldInfos",null);l([r.property({type:z})],c.prototype,"layerOptions",void 0);l([r.writer("layerOptions")],c.prototype,"writeLayerOptions",null);l([r.property({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],c.prototype,"lastEditInfoEnabled",
    void 0);l([r.property()],c.prototype,"outFields",void 0);l([r.property()],c.prototype,"overwriteActions",void 0);l([r.property({json:{type:String}})],c.prototype,"title",void 0);l([r.writer("title")],c.prototype,"writeTitle",null);l([r.property({type:A,json:{write:!0}})],c.prototype,"relatedRecordsInfo",void 0);return c=p=l([r.subclass("esri.PopupTemplate")],c)}(r.declared(p.JSONSupport))})},"esri/popup/content":function(){define("require exports ./content/AttachmentsContent ./content/Content ./content/FieldsContent ./content/MediaContent ./content/TextContent".split(" "),
    function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});a.AttachmentsContent=m;a.BaseContent=e;a.FieldsContent=l;a.MediaContent=h;a.TextContent=g;a.isContent=function(c){return c instanceof a.BaseContent};a.types={base:null,key:"type",typeMap:{attachment:a.AttachmentsContent,fields:a.FieldsContent,media:a.MediaContent,text:a.TextContent}}})},"esri/popup/content/AttachmentsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../../layers/support/AttachmentInfo ./Content".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.attachmentInfos=null;b.displayType=null;b.type="attachments";return b}m(b,a);c=b;b.prototype.clone=function(){return new c({displayType:this.displayType,attachmentInfos:this.attachmentInfos?l.clone(this.attachmentInfos):null})};var c;e([h.property({type:[g]})],b.prototype,"attachmentInfos",void 0);e([h.property({type:["preview","list"],json:{write:!0}})],b.prototype,"displayType",void 0);e([h.property({type:["attachments"],
    readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=c=e([h.subclass("esri.popup.content.AttachmentsContent")],b)}(h.declared(d))})},"esri/layers/support/AttachmentInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./exifUtils".split(" "),function(c,a,m,e,l,h,g,d){var n={1:{id:1,rotation:0,mirrored:!1},2:{id:2,
    rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};return function(a){function b(b){b=a.call(this,b)||this;b.contentType=null;b.exifInfo=null;b.id=null;b.globalId=null;b.keywords=null;b.name=null;b.parentGlobalId=null;b.parentObjectId=null;b.size=null;b.url=null;return b}m(b,a);c=b;Object.defineProperty(b.prototype,"orientationInfo",
    {get:function(){var a=d.getExifValue({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:this.exifInfo});return n[a]||null},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new c({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})};var c;e([h.property({type:String})],b.prototype,"contentType",void 0);e([h.property()],
    b.prototype,"exifInfo",void 0);e([h.property({readOnly:!0,dependsOn:["exifInfo"]})],b.prototype,"orientationInfo",null);e([h.property({type:g.Integer})],b.prototype,"id",void 0);e([h.property({type:String})],b.prototype,"globalId",void 0);e([h.property({type:String})],b.prototype,"keywords",void 0);e([h.property({type:String})],b.prototype,"name",void 0);e([h.property({json:{read:!1}})],b.prototype,"parentGlobalId",void 0);e([h.property({json:{read:!1}})],b.prototype,"parentObjectId",void 0);e([h.property({type:g.Integer})],
    b.prototype,"size",void 0);e([h.property({json:{read:!1}})],b.prototype,"url",void 0);return b=c=e([h.subclass("esri.layers.support.AttachmentInfo")],b)}(h.declared(l.JSONSupport))})},"esri/layers/support/exifUtils":function(){define(["require","exports","../../core/arrayUtils"],function(c,a,m){function e(a){var c=a.tagName;a=a.tags;return a&&c?(a=m.find(a,function(a){return a.name===c}))&&a.value||null:null}Object.defineProperty(a,"__esModule",{value:!0});a.getExifValue=function(a){var c=a.exifInfo,
    g=a.exifName;a=a.tagName;return c&&g&&a?(c=m.find(c,function(a){return a.name===g}))?e({tagName:a,tags:c.tags}):null:null}})},"esri/popup/content/Content":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.type=null;return c}m(c,a);e([h.property({type:["attachments","fields","media","text"],
    readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e([h.subclass("esri.popup.content.Content")],c)}(h.declared(l.JSONSupport))})},"esri/popup/content/FieldsContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ../FieldInfo ./Content".split(" "),function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.fieldInfos=null;b.type="fields";
    return b}m(b,a);c=b;b.prototype.writeFieldInfos=function(a,b){b.fieldInfos=a&&a.map(function(a){return a.toJSON()})};b.prototype.clone=function(){return new c({fieldInfos:Array.isArray(this.fieldInfos)?l.clone(this.fieldInfos):null})};var c;e([h.property({type:[g]})],b.prototype,"fieldInfos",void 0);e([h.writer("fieldInfos")],b.prototype,"writeFieldInfos",null);e([h.property({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],b.prototype,"type",void 0);return b=c=e([h.subclass("esri.popup.content.FieldsContent")],
    b)}(h.declared(d))})},"esri/popup/FieldInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/FieldInfoFormat".split(" "),function(c,a,m,e,l,h,g,d,n){var b=new l.default({richtext:"rich-text",textarea:"text-area",textbox:"text-box"});return function(a){function c(b){b=a.call(this,b)||this;b.fieldName=null;b.format=null;b.isEditable=!1;b.label=null;
    b.stringFieldOption="text-box";b.statisticType=null;b.tooltip=null;b.visible=!0;return b}m(c,a);h=c;c.prototype.writeStringFieldOption=function(a,c){c.stringFieldOption=b.toJSON(a)};c.prototype.readStringFieldOption=function(a){if(a)return b.fromJSON(a)};c.prototype.clone=function(){return new h({fieldName:this.fieldName,format:this.format?g.clone(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,
    visible:this.visible})};var h;e([d.property({type:String,json:{write:!0}})],c.prototype,"fieldName",void 0);e([d.property({type:n,json:{write:!0}})],c.prototype,"format",void 0);e([d.property({type:Boolean,json:{write:!0,default:!1}})],c.prototype,"isEditable",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);e([d.property({type:b.apiValues,json:{write:!0,default:"text-box",type:b.jsonValues}})],c.prototype,"stringFieldOption",void 0);e([d.writer("stringFieldOption")],
    c.prototype,"writeStringFieldOption",null);e([d.reader("stringFieldOption")],c.prototype,"readStringFieldOption",null);e([d.property({type:"count sum min max avg stddev var".split(" "),json:{write:!0}})],c.prototype,"statisticType",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"tooltip",void 0);e([d.property({type:Boolean,json:{write:!0}})],c.prototype,"visible",void 0);return c=h=e([d.subclass("esri.popup.FieldInfo")],c)}(d.declared(h.JSONSupport))})},"esri/popup/support/FieldInfoFormat":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/date ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../intl/date ../../intl/number".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b){b=a.call(this,b)||this;b.dateFormat=null;b.digitSeparator=!1;b.places=null;return b}m(c,a);h=c;c.prototype.clone=function(){return new h({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})};c.prototype.format=function(a){return this.dateFormat?n.formatDate(a,n.convertDateFormatToIntlOptions(this.dateFormat)):b.formatNumber(a,b.convertNumberFormatToIntlOptions(this))};var h;e([g.enumeration.serializable()(l.dictionary)],
    c.prototype,"dateFormat",void 0);e([g.property({type:Boolean,json:{write:!0}})],c.prototype,"digitSeparator",void 0);e([g.property({type:d.Integer,json:{write:!0}})],c.prototype,"places",void 0);return c=h=e([g.subclass("esri.popup.support.FieldInfoFormat")],c)}(g.declared(h.JSONSupport))})},"esri/core/date":function(){define(["require","exports","./jsonMap"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.formats={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",
    "short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')",
    "short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","long-month-day-year-short-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-month-day-year-short-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
    "long-month-day-year-long-time":"(datePattern: 'MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-month-day-year-long-time-24":"(datePattern: 'MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","day-short-month-year-short-time":"(datePattern: 'd MMM y', timePattern: 'h:mm a', selector: 'date and time')","day-short-month-year-short-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm', selector: 'date and time')",
    "day-short-month-year-long-time":"(datePattern: 'd MMM y', timePattern: 'h:mm:ss a', selector: 'date and time')","day-short-month-year-long-time-24":"(datePattern: 'd MMM y', timePattern: 'H:mm:ss', selector: 'date and time')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","long-date-short-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm a', selector: 'date and time')","long-date-short-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm', selector: 'date and time')",
    "long-date-long-time":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'h:mm:ss a', selector: 'date and time')","long-date-long-time-24":"(datePattern: 'EEEE, MMMM d, y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};a.dictionary=m.strict()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",
    shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",
    longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",
    longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a.toJSON=a.dictionary.toJSON.bind(a.dictionary);a.fromJSON=a.dictionary.fromJSON.bind(a.dictionary);a.getFormat=function(c){return a.formats[c]}})},"esri/popup/content/MediaContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./BarChartMediaInfo ./ColumnChartMediaInfo ./Content ./ImageMediaInfo ./LineChartMediaInfo ./PieChartMediaInfo ./support/mediaInfoTypes".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q){return function(a){function c(b){b=a.call(this,b)||this;b.mediaInfos=null;b.type="media";return b}m(c,a);f=c;c.prototype.readMediaInfos=function(a){return a&&a.map(function(a){if("image"===a.type)return b.fromJSON(a);if("barchart"===a.type)return g.fromJSON(a);if("columnchart"===a.type)return d.fromJSON(a);if("linechart"===a.type)return p.fromJSON(a);if("piechart"===a.type)return k.fromJSON(a)}).filter(Boolean)};c.prototype.writeMediaInfos=function(a,b){b.mediaInfos=
    a&&a.map(function(a){return a.toJSON()})};c.prototype.clone=function(){return new f({mediaInfos:this.mediaInfos?l.clone(this.mediaInfos):null})};var f;e([h.property({types:[q.types]})],c.prototype,"mediaInfos",void 0);e([h.reader("mediaInfos")],c.prototype,"readMediaInfos",null);e([h.writer("mediaInfos")],c.prototype,"writeMediaInfos",null);e([h.property({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=f=e([h.subclass("esri.popup.content.MediaContent")],c)}(h.declared(n))})},
    "esri/popup/content/BarChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="bar-chart";return b}m(c,a);b=c;c.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;
    e([l.property({type:["bar-chart"],readOnly:!0,json:{read:!1,write:g.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=b=e([l.subclass("esri.popup.content.BarChartMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/mixins/ChartMediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./MediaInfo ../support/ChartMediaInfoValue".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(b){b=
    a.call(this,b)||this;b.type=null;b.value=null;return b}m(c,a);e([l.property({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);e([l.property({type:g,json:{write:!0}})],c.prototype,"value",void 0);return c=e([l.subclass("esri.popup.content.mixins.ChartMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/mixins/MediaInfo":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.caption="";c.title="";c.type=null;return c}m(c,a);e([h.property({type:String,json:{write:!0}})],c.prototype,"caption",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);e([h.property({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e([h.subclass("esri.popup.content.mixins.MediaInfo")],c)}(h.declared(l.JSONSupport))})},
    "esri/popup/content/support/ChartMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/lang ../../../core/accessorSupport/decorators ./ChartMediaInfoValueSeries".split(" "),function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.fields=[];b.normalizeField=null;b.series=[];b.tooltipField=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({fields:h.clone(this.fields),
    normalizeField:this.normalizeField,tooltipField:this.tooltipField})};var c;e([g.property({type:[String],json:{write:!0}})],b.prototype,"fields",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"normalizeField",void 0);e([g.property({type:[d],json:{read:!1}})],b.prototype,"series",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"tooltipField",void 0);return b=c=e([g.subclass("esri.popup.content.support.ChartMediaInfoValue")],b)}(g.declared(l.JSONSupport))})},"esri/popup/content/support/ChartMediaInfoValueSeries":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.tooltip=null;b.x=null;b.y=null;return b}m(c,a);n=c;c.prototype.clone=function(){return new n({tooltip:this.tooltip,x:this.x,y:this.y})};var n;e([h.property()],c.prototype,"tooltip",void 0);e([h.property()],c.prototype,"x",void 0);e([h.property()],c.prototype,"y",void 0);return c=n=e([h.subclass("esri.popup.content.support.ChartMediaInfoValueSeries")],c)}(h.declared(l))})},"esri/popup/content/support/chartMediaInfoUtils":function(){define(["require",
    "exports","../../../core/jsonMap"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.chartTypeKebabDict=m.strict()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"})})},"esri/popup/content/ColumnChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),function(c,a,
    m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="column-chart";return b}m(c,a);b=c;c.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;e([l.property({type:["column-chart"],readOnly:!0,json:{read:!1,write:g.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=b=e([l.subclass("esri.popup.content.ColumnChartMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/ImageMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/MediaInfo ./support/ImageMediaInfoValue".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.refreshInterval=null;b.type="image";b.value=null;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})};var b;e([l.property({type:Number,json:{write:!0}})],c.prototype,"refreshInterval",void 0);e([l.property({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);e([l.property({type:g,
    json:{write:!0}})],c.prototype,"value",void 0);return c=b=e([l.subclass("esri.popup.content.ImageMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/support/ImageMediaInfoValue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.linkURL=null;b.sourceURL=null;return b}m(c,
    a);g=c;c.prototype.clone=function(){return new g({linkURL:this.linkURL,sourceURL:this.sourceURL})};var g;e([h.property({type:String,json:{write:!0}})],c.prototype,"linkURL",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"sourceURL",void 0);return c=g=e([h.subclass("esri.popup.content.support.ImageMediaInfoValue")],c)}(h.declared(l.JSONSupport))})},"esri/popup/content/LineChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="line-chart";return b}m(c,a);b=c;c.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;e([l.property({type:["line-chart"],readOnly:!0,json:{read:!1,write:g.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=b=e([l.subclass("esri.popup.content.LineChartMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/PieChartMediaInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./mixins/ChartMediaInfo ./support/chartMediaInfoUtils".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="pie-chart";return b}m(c,a);b=c;c.prototype.clone=function(){return new b({title:this.title,caption:this.caption,value:this.value?this.value.clone():null})};var b;e([l.property({type:["pie-chart"],readOnly:!0,json:{read:!1,write:g.chartTypeKebabDict.write}})],c.prototype,"type",void 0);return c=b=e([l.subclass("esri.popup.content.PieChartMediaInfo")],c)}(l.declared(h))})},"esri/popup/content/support/mediaInfoTypes":function(){define("require exports ../BarChartMediaInfo ../ColumnChartMediaInfo ../ImageMediaInfo ../LineChartMediaInfo ../PieChartMediaInfo ../mixins/MediaInfo".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:d,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":m,"column-chart":e,"line-chart":h,"pie-chart":g,image:l}};a.default=a.types})},"esri/popup/content/TextContent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Content".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,
    b)||this;b.text=null;b.type="text";return b}m(c,a);g=c;c.prototype.clone=function(){return new g({text:this.text})};var g;e([l.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);e([l.property({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=g=e([l.subclass("esri.popup.content.TextContent")],c)}(l.declared(h))})},"esri/popup/ExpressionInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.name=null;b.title=null;b.expression=null;b.returnType=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})};var g;e([h.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,
    "expression",void 0);e([h.property({type:["string","number"],json:{write:!0}})],c.prototype,"returnType",void 0);return c=g=e([h.subclass("esri.popup.ExpressionInfo")],c)}(h.declared(l.JSONSupport))})},"esri/popup/LayerOptions":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.returnTopmostRaster=
    null;b.showNoDataRecords=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})};var g;e([h.property({type:Boolean,json:{write:!0}})],c.prototype,"returnTopmostRaster",void 0);e([h.property({type:Boolean,json:{write:!0}})],c.prototype,"showNoDataRecords",void 0);return c=g=e([h.subclass("esri.popup.LayerOptions")],c)}(h.declared(l.JSONSupport))})},"esri/popup/RelatedRecordsInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/RelatedRecordsInfoFieldOrder".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.showRelatedRecords=null;b.orderByFields=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?h.clone(this.orderByFields):null})};var c;e([g.property({type:Boolean,json:{write:!0}})],b.prototype,"showRelatedRecords",void 0);e([g.property({type:[d],json:{write:!0}})],b.prototype,"orderByFields",void 0);return b=c=e([g.subclass("esri.popup.RelatedRecordsInfo")],
    b)}(g.declared(l.JSONSupport))})},"esri/popup/support/RelatedRecordsInfoFieldOrder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.field=null;b.order=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({field:this.field,order:this.order})};var g;e([h.property({type:String,
    json:{write:!0}})],c.prototype,"field",void 0);e([h.property({type:["asc","desc"],json:{write:!0}})],c.prototype,"order",void 0);return c=g=e([h.subclass("esri.popup.support.RelatedRecordsInfoFieldOrder")],c)}(h.declared(l.JSONSupport))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,
    g){return function(a){function c(b){b=a.call(this,b)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var b;e([g.property()],c.prototype,"active",void 0);e([g.property()],c.prototype,"className",void 0);e([g.property()],c.prototype,
    "disabled",void 0);e([g.property()],c.prototype,"id",void 0);e([g.property()],c.prototype,"indicator",void 0);e([g.property()],c.prototype,"title",void 0);e([g.property()],c.prototype,"type",void 0);e([g.property()],c.prototype,"visible",void 0);return c=b=e([g.subclass("esri.support.actions.ActionBase")],c)}(g.declared(h.IdentifiableMixin(l)))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.image=null;b.type="button";return b}m(c,a);g=c;c.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var g;e([l.property()],c.prototype,"image",void 0);return c=g=e([l.subclass("esri.support.Action.ActionButton")],c)}(l.declared(h))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.image=null;b.type="toggle";b.value=!1;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var g;e([l.property()],c.prototype,"image",void 0);e([l.property()],c.prototype,"value",void 0);return c=g=e([l.subclass("esri.support.Action.ActionToggle")],
    c)}(l.declared(h))})},"esri/renderers":function(){define("require exports ./renderers/ClassBreaksRenderer ./renderers/DictionaryRenderer ./renderers/DotDensityRenderer ./renderers/HeatmapRenderer ./renderers/Renderer ./renderers/SimpleRenderer ./renderers/UniqueValueRenderer ./renderers/support/jsonUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});a.ClassBreaksRenderer=m;a.DictionaryRenderer=e;a.DotDensityRenderer=l;a.HeatmapRenderer=h;a.BaseRenderer=
    g;a.SimpleRenderer=d;a.UniqueValueRenderer=n;a.isRenderer=function(b){return b instanceof a.BaseRenderer};a.read=b.read;a.write=b.write;a.fromJSON=b.fromJSON;a.rendererTypes={key:"type",base:a.BaseRenderer,typeMap:{heatmap:a.HeatmapRenderer,simple:a.SimpleRenderer,"unique-value":a.UniqueValueRenderer,"class-breaks":a.ClassBreaksRenderer,"dot-density":a.DotDensityRenderer,dictionary:a.DictionaryRenderer}};a.webSceneRendererTypes={key:"type",base:a.BaseRenderer,typeMap:{simple:a.SimpleRenderer,"unique-value":a.UniqueValueRenderer,
    "class-breaks":a.ClassBreaksRenderer}}})},"esri/renderers/ClassBreaksRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/jsonMap ../core/lang ../core/Logger ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/ClassBreakInfo ./support/LegendOptions ../support/arcadeOnDemand ../symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B){var D=q.getLogger("esri.renderers.ClassBreaksRenderer"),E=new p.default({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),C=u.ensureType(z.ClassBreakInfo);return function(a){function c(b){b=a.call(this,b)||this;b.backgroundFillSymbol=null;b.classBreakInfos=null;b.defaultLabel=null;b.defaultSymbol=null;b.field=null;b.isMaxInclusive=!0;b.legendOptions=null;b.normalizationField=null;b.normalizationTotal=
    null;b.type="class-breaks";b.valueExpression=null;b.valueExpressionTitle=null;b._set("classBreakInfos",[]);return b}m(c,a);p=c;Object.defineProperty(c.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0});c.prototype.readClassBreakInfos=function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new z.ClassBreakInfo;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}};c.prototype.writeClassBreakInfos=
    function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){return delete a.classMinValue});b[c]=a};c.prototype.readDefaultSymbol=function(a,b,c){return B.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){B.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=function(a,b,c,d){B.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a?a:"function"===typeof a?(D.error(".field: field must be a string value"),
    null):u.ensureString(a)};Object.defineProperty(c.prototype,"minValue",{get:function(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"normalizationType",{get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total"||null,b&&c&&D.warn("warning: both normalizationField and normalizationTotal are set!");
    else if("field"===a||"percent-of-total"===a)a=null;return a},set:function(a){this._set("normalizationType",a)},enumerable:!0,configurable:!0});c.prototype.addClassBreakInfo=function(a,c,d){var e=null,e="number"===typeof a?new z.ClassBreakInfo({minValue:a,maxValue:c,symbol:b.ensureType(d)}):C(k.clone(a));this.classBreakInfos.push(e);1===this.classBreakInfos.length&&this.notifyChange("minValue")};c.prototype.removeClassBreakInfo=function(a,b){for(var c=this.classBreakInfos.length,d=0;d<c;d++){var e=
    [this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue];if(e[0]===a&&e[1]===b){this.classBreakInfos.splice(d,1);break}}};c.prototype.getBreakIndex=function(a,b){this.valueExpression&&(f.isNone(b)||f.isNone(b.arcade))&&D.warn("");return this.valueExpression?this._getBreakIndexForExpression(a,b):this._getBreakIndexForField(a)};c.prototype.getClassBreakInfo=function(a,b){return g(this,void 0,void 0,function(){var c,e,k,g;return h(this,function(n){switch(n.label){case 0:c=b;if(!this.valueExpression||
    !f.isNone(b)&&!f.isNone(b.arcade))return[3,2];e=[{},c];k={};return[4,y.loadArcade()];case 1:c=d.apply(void 0,e.concat([(k.arcade=n.sent(),k)])),n.label=2;case 2:return g=this.getBreakIndex(a,c),[2,-1!==g?this.classBreakInfos[g]:null]}})})};c.prototype.getSymbol=function(a,b){if(this.valueExpression&&(f.isNone(b)||f.isNone(b.arcade)))D.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return a=this.getBreakIndex(a,b),-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol};
    c.prototype.getSymbolAsync=function(a,b){return g(this,void 0,void 0,function(){var c,e,k,g;return h(this,function(n){switch(n.label){case 0:c=b;if(!this.valueExpression||!f.isNone(b)&&!f.isNone(b.arcade))return[3,2];e=[{},c];k={};return[4,y.loadArcade()];case 1:c=d.apply(void 0,e.concat([(k.arcade=n.sent(),k)])),n.label=2;case 2:return g=this.getBreakIndex(a,c),[2,-1<g?this.classBreakInfos[g].symbol:this.defaultSymbol]}})})};c.prototype.getSymbols=function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&
    a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};c.prototype.getMeshHash=function(){var a=JSON.stringify(this.backgroundFillSymbol),b=JSON.stringify(this.defaultSymbol),c=this.normalizationField+"."+this.normalizationType+"."+this.normalizationTotal,d=this.classBreakInfos.reduce(function(a,b){return a+b.getMeshHash()},"");return a+
    "."+b+"."+d+"."+c+"."+this.field+"."+this.valueExpression};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new p({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,
    classBreakInfos:k.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:k.clone(this.visualVariables),legendOptions:k.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};c.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c;return h(this,function(d){switch(d.label){case 0:return c=
    [this.collectVVRequiredFields(a,b),this.collectSymbolFields(a,b)],[4,r.all(c)];case 1:return d.sent(),[2]}})})};c.prototype.collectSymbolFields=function(a,b){return g(this,void 0,void 0,function(){var c;return h(this,function(d){switch(d.label){case 0:return c=this.getSymbols().map(function(c){return c.collectRequiredFields(a,b)}).concat([w.collectArcadeFieldNames(a,b,this.valueExpression)]),w.collectField(a,b,this.field),w.collectField(a,b,this.normalizationField),[4,r.all(c)];case 1:return d.sent(),
    [2]}})})};c.prototype._getBreakIndexForExpression=function(a,b){var c=f.unwrapOr(b,{});b=c.viewingMode;var d=c.scale,e=c.spatialReference,k=this._cache.compiledFunc,c=f.expect(c.arcade).arcadeUtils;k||(k=c.createSyntaxTree(this.valueExpression),k=c.createFunction(k),this._cache.compiledFunc=k);a=c.executeFunction(k,c.createExecContext(a,c.getViewInfo({viewingMode:b,scale:d,spatialReference:e})));return this._getBreakIndexfromInfos(a)};c.prototype._getBreakIndexForField=function(a){var b=a.attributes;
    a=this.normalizationType;var c=parseFloat(b[this.field]);if(a){var d=this.normalizationTotal,b=parseFloat(b[this.normalizationField]);if("log"===a)c=Math.log(c)*Math.LOG10E;else if("percent-of-total"===a&&!isNaN(d))c=c/d*100;else if("field"===a&&!isNaN(b)){if(isNaN(c)||isNaN(b))return-1;c/=b}}return this._getBreakIndexfromInfos(c)};c.prototype._getBreakIndexfromInfos=function(a){var b=this.isMaxInclusive;if(null!=a&&"number"===typeof a&&!isNaN(a))for(var c=0;c<this.classBreakInfos.length;c++){var d=
    [this.classBreakInfos[c].minValue,this.classBreakInfos[c].maxValue];if(d[0]<=a&&(b?a<=d[1]:a<d[1]))return c}return-1};c.prototype._areClassBreaksConsecutive=function(){for(var a=this.classBreakInfos,b=a.length,c=1;c<b;c++)if(a[c-1].maxValue!==a[c].minValue)return!1;return!0};var p;e([t.property({readOnly:!0,dependsOn:["valueExpression"]})],c.prototype,"_cache",null);e([t.property({types:{base:n.BaseSymbol,key:"type",typeMap:{"simple-fill":b.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":b.symbolTypesRenderer.typeMap["picture-fill"],
    "polygon-3d":b.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{origins:{"web-scene":{type:n.PolygonSymbol3D,read:B.read,write:B.writeTarget}},read:B.read,write:B.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);e([t.property({type:[z.ClassBreakInfo]})],c.prototype,"classBreakInfos",void 0);e([t.reader("classBreakInfos")],c.prototype,"readClassBreakInfos",null);e([t.writer("classBreakInfos")],c.prototype,"writeClassBreakInfos",null);e([t.property({type:String,json:{write:!0}})],c.prototype,
    "defaultLabel",void 0);e([t.property({types:b.symbolTypesRenderer})],c.prototype,"defaultSymbol",void 0);e([t.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);e([t.writer("web-scene","defaultSymbol",{defaultSymbol:{types:b.symbolTypesRenderer3D}})],c.prototype,"writeDefaultSymbolWebScene",null);e([t.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);e([t.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);e([t.cast("field")],c.prototype,"castField",null);
    e([t.property({type:Boolean})],c.prototype,"isMaxInclusive",void 0);e([t.property({type:A.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);e([t.property({type:Number,readOnly:!0,value:null,dependsOn:["classBreakInfos"],json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],c.prototype,"minValue",null);e([t.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);
    e([t.property({type:Number,cast:function(a){return u.ensureNumber(a)},json:{write:!0}})],c.prototype,"normalizationTotal",void 0);e([t.property({type:E.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],json:{type:E.jsonValues,read:E.read,write:E.write}})],c.prototype,"normalizationType",null);e([t.enumeration.serializable()({classBreaks:"class-breaks"})],c.prototype,"type",void 0);e([t.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);e([t.property({type:String,
    json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);return c=p=e([t.subclass("esri.renderers.ClassBreaksRenderer")],c)}(t.declared(x.VisualVariablesMixin(v)))})},"esri/symbols":function(){define("require exports ./core/accessorSupport/ensureType ./symbols/CIMSymbol ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WaterSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D,E,C,F,I,G,J,H,N,L){Object.defineProperty(a,"__esModule",{value:!0});a.CIMSymbol=e;a.ExtrudeSymbol3DLayer=l;a.BaseFillSymbol=h;a.FillSymbol3DLayer=g;a.Font=d;a.IconSymbol3DLayer=n;a.LabelSymbol3D=b;a.LineSymbol3D=p;a.LineSymbol3DLayer=k;a.BaseMarkerSymbol=q;a.MeshSymbol3D=f;a.ObjectSymbol3DLayer=r;a.PathSymbol3DLayer=t;a.PictureFillSymbol=u;a.PictureMarkerSymbol=w;a.PointSymbol3D=v;a.PolygonSymbol3D=x;a.SimpleFillSymbol=z;a.SimpleLineSymbol=
    A;a.SimpleMarkerSymbol=y;a.BaseSymbol=B;a.BaseSymbol3D=D;a.BaseSymbol3DLayer=E;a.TextSymbol=C;a.TextSymbol3DLayer=F;a.WaterSymbol3DLayer=I;a.WebStyleSymbol=G;a.LineCallout3D=J;a.LineCallout3DBorder=H;a.Symbol3DVerticalOffset=N.Symbol3DVerticalOffset;a.fromJSON=L.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":case "cim":return!0;
    default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}};a.symbolTypes={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,
    "point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};a.symbolTypesRenderer={base:a.BaseSymbol,key:"type",typeMap:{"simple-fill":a.SimpleFillSymbol,"picture-fill":a.PictureFillSymbol,"picture-marker":a.PictureMarkerSymbol,"simple-line":a.SimpleLineSymbol,"simple-marker":a.SimpleMarkerSymbol,text:a.TextSymbol,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol,cim:a.CIMSymbol}};
    a.symbolTypesLabel={base:a.BaseSymbol,key:"type",typeMap:{text:a.TextSymbol,"label-3d":a.LabelSymbol3D}};a.symbolTypes3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D,"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};a.symbolTypesRenderer3D={base:a.BaseSymbol,key:"type",typeMap:{"line-3d":a.LineSymbol3D,"mesh-3d":a.MeshSymbol3D,"point-3d":a.PointSymbol3D,"polygon-3d":a.PolygonSymbol3D,"web-style":a.WebStyleSymbol}};
    a.symbolTypesLabel3D={base:a.BaseSymbol,key:"type",typeMap:{"label-3d":a.LabelSymbol3D}};a.ensureType=m.ensureOneOfType(a.symbolTypes)})},"esri/symbols/CIMSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ../portal/Portal ./Symbol ./support/cimSymbolUtils".split(" "),function(c,
    a,m,e,l,h,g,d,n,b,p,k,q){return function(a){function c(b){b=a.call(this,b)||this;b.data=null;b.portal=null;b.styleUrl="";b.type="cim";return b}m(c,a);f=c;c.prototype.readData=function(a,b){return b.symbol};c.prototype.writeData=function(a,b){a&&(b.symbol=a)};c.prototype.readStyleUrl=function(a,b){return b.symbolUrl?b.symbolUrl:a};c.prototype.writeStyleUrl=function(a,b){a&&(b.symbolUrl=a)};c.prototype.collectRequiredFields=function(a,c){return h(this,void 0,void 0,function(){var e,f,k,g,n,h,p;return l(this,
    function(l){switch(l.label){case 0:return[4,q.expandSymbol(this)];case 1:l.sent(),f=(e="object"===typeof this.data&&this.data.length)?this.data:[this.data],k=0,g=f,l.label=2;case 2:if(!(k<g.length))return[3,5];n=g[k];h=n.primitiveOverrides;if(!h)return[3,4];p=h.map(function(d){return b.collectArcadeFieldNames(a,c,d.valueExpressionInfo.expression)});return[4,d.all(p)];case 3:l.sent(),l.label=4;case 4:return k++,[3,2];case 5:return[2]}})})};c.prototype.clone=function(){return new f({color:this.color.clone(),
    data:g.clone(this.data),portal:this.portal,styleName:this.styleName,styleUrl:this.styleUrl})};var f;e([n.property({json:{write:!1}})],c.prototype,"color",void 0);e([n.property({json:{write:!0}})],c.prototype,"data",void 0);e([n.reader("data",["data","symbol"])],c.prototype,"readData",null);e([n.writer("data")],c.prototype,"writeData",null);e([n.property({type:p,json:{write:!1}})],c.prototype,"portal",void 0);e([n.property({json:{write:!0}})],c.prototype,"styleName",void 0);e([n.property({type:String,
    json:{write:!0}})],c.prototype,"styleUrl",void 0);e([n.reader("styleUrl",["styleUrl","symbolUrl"])],c.prototype,"readStyleUrl",null);e([n.writer("styleUrl")],c.prototype,"writeStyleUrl",null);e([n.enumeration.serializable()({CIMSymbolReference:"cim"})],c.prototype,"type",void 0);return c=f=e([n.subclass("esri.symbols.CIMSymbol")],c)}(n.declared(k))})},"esri/symbols/Symbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){var p=new d.default({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"}),k=0;return function(a){function c(b){b=a.call(this,b)||this;b.id="sym"+k++;b.type=null;return b}m(c,a);Object.defineProperty(c.prototype,
    "color",{set:function(a){this._set("color",a)},enumerable:!0,configurable:!0});c.prototype.readColor=function(a){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a};c.prototype.collectRequiredFields=function(a,b){return h(this,void 0,void 0,function(){return l(this,function(a){return[2]})})};c.prototype.clone=function(){};e([b.property({type:p.apiValues,json:{read:p.read,write:{ignoreOrigin:!0,writer:p.write}}})],c.prototype,"type",void 0);e([b.property({type:g,value:new g([0,0,0,1]),json:{write:{allowNull:!0}}})],
    c.prototype,"color",null);e([b.reader("color")],c.prototype,"readColor",null);return c=e([b.subclass("esri.symbols.Symbol")],c)}(b.declared(n.JSONSupport))})},"esri/symbols/support/cimSymbolUtils":function(){define("require exports ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/assignHelper ../../request ../../core/Logger ../../core/promiseUtils".split(" "),function(c,a,m,e,l,h,g,d){function n(a,c){return m(this,void 0,void 0,function(){var d,f;return e(this,
    function(e){switch(e.label){case 0:if(a.data||!a.styleUrl||!a.styleName)return[2,a];d=a.styleName;f=a;return[4,b(d,a.styleUrl,c)];case 1:return f.data=e.sent(),[2,a]}})})}function b(b,c,d){return m(this,void 0,void 0,function(){var f,g;return e(this,function(e){if(q.has(b))return[2,q.get(b).then(function(b){return a.makeSymbolRef(b.data)})];try{return f=c+"/resources/styles/cim/"+b+".json",g=h(f,l({responseType:"json",query:{f:"json"}},d)),q.set(b,g),[2,g.then(function(b){return a.makeSymbolRef(b.data)})]}catch(x){return k.error("error requesting "+
    b+", reason is "+x.message),q.has(b)&&q.delete(b),[2,null]}})})}var p=this;Object.defineProperty(a,"__esModule",{value:!0});var k=g.getLogger("esri/symbols/support/cimSymbolUtils");a.expandSymbols=function(b,c){return m(p,void 0,void 0,function(){return e(this,function(e){return[2,d.all(b.map(function(b){return a.expandSymbol(b,c)}))]})})};a.expandSymbol=function(a,b){return m(p,void 0,void 0,function(){return e(this,function(c){return a?"cim"===a.type?[2,n(a,b)]:"web-style"===a.type?[2,a.fetchCIMSymbol(b)]:
    [2,a]:[2,null]})})};a.makeSymbolRef=function(a,b){return null===a?null:"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a,primitiveOverrides:b}};var q=new Map})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DMaterial".split(" "),function(c,a,m,e,l,h,g,d,n){return function(a){function b(b){b=
    a.call(this,b)||this;b.type="extrude";b.size=void 0;b.material=null;b.castShadows=!0;b.edges=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:l.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})};var c;e([h.enumeration.serializable()({Extrude:"extrude"})],b.prototype,"type",void 0);e([h.property({type:Number,json:{write:!0}})],b.prototype,"size",void 0);e([h.property({type:n.default,
    json:{write:!0}})],b.prototype,"material",void 0);e([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],b.prototype,"castShadows",void 0);e([h.property(d.symbol3dEdgesProperty)],b.prototype,"edges",void 0);return b=c=e([h.subclass("esri.symbols.ExtrudeSymbol3DLayer")],b)}(h.declared(g))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){var d=l.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text",Water:"water"});c=function(a){function b(b){b=a.call(this,b)||this;b.enabled=!0;b.type=null;return b}m(b,a);b.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};e([g.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],b.prototype,"enabled",void 0);e([g.writer("enabled")],b.prototype,"writeEnabled",null);e([g.property({type:d.apiValues,
    readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:d.write}}})],b.prototype,"type",void 0);return b=e([g.subclass("esri.symbols.Symbol3DLayer")],b)}(g.declared(h.JSONSupport));(c||(c={})).typeJSONDictionary=d;return c})},"esri/symbols/edges/utils":function(){define(["require","exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(c,a,m,e,l){function h(a,c,n){if(!a)return a;switch(a.type){case "solid":return c=new l,c.read(a,n),c;case "sketch":return c=new e,c.read(a,n),c}}Object.defineProperty(a,
    "__esModule",{value:!0});a.read=h;a.symbol3dEdgesProperty={types:{key:"type",base:m,typeMap:{solid:l,sketch:e}},json:{read:h,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b,p){return function(a){function c(b){b=
    a.call(this,b)||this;b.color=new h([0,0,0,1]);b.extensionLength=0;b.size=n.px2pt(1);return b}m(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=l({},a),delete a.type);return a};c.prototype.clone=function(){};c.prototype.cloneProperties=function(){return{color:d.clone(this.color),size:this.size,extensionLength:this.extensionLength}};e([b.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);e([b.property(p.colorAndTransparencyProperty)],
    c.prototype,"color",void 0);e([b.property(l({},p.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],c.prototype,"extensionLength",void 0);e([b.property(p.screenSizeProperty)],c.prototype,"size",void 0);return c=e([b.subclass("esri.symbols.edges.Edges3D")],c)}(b.declared(g.JSONSupport))})},"esri/core/screenUtils":function(){define(["require","exports","./compilerUtils"],function(c,a,m){function e(a){return a?72*a/96:0}function l(a,b){void 0===a&&(a=0);void 0===b&&
    (b=0);return{x:a,y:b}}function h(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return[a,b]}function g(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return{x:a,y:b}}function d(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return[a,b]}function n(a,b){return b?(b[0]=a.x,b[1]=a.y,2<b.length&&(b[2]=0),b):[a.x,a.y]}function b(a){return l(a.x,a.y)}function p(a,b){a=(a instanceof HTMLElement?a:a.surface).getBoundingClientRect();return l(b.clientX-a.left,b.clientY-a.top)}Object.defineProperty(a,"__esModule",{value:!0});
    var k=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.pt2px=function(a){return a?a/72*96:0};a.px2pt=e;a.toPt=function(a){if("string"===typeof a){if(k.test(a)){var b=a.match(k),c=Number(b[1]),b=b[3]&&b[3].toLowerCase();a="-"===a.charAt(0);c="px"===b?e(c):c;return a?-c:c}console.warn("screenUtils.toPt: input not recognized!");return null}return a};a.createScreenPoint=l;a.createScreenPointArray=h;a.createRenderScreenPoint=g;a.createRenderScreenPointArray=d;a.createRenderScreenPointArray3=function(a,b,c){void 0===
    a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return[a,b,c]};a.castRenderScreenPointArray=function(a){return a};a.castRenderScreenPointArray3=function(a){return a};a.castScreenPointArray=function(a){return a};a.screenToRender=function(a,b,c){var d,e;switch(a.type){case "2d":a=window.devicePixelRatio||1;d=b.x*a;e=b.y*a;break;case "3d":n(b,f),a.state.camera.screenToRender(f,q),d=q[0],e=q[1]}return c?(c.x=d,c.y=e,c):g(d,e)};a.renderToScreen=function(a,b,c){var d,e;switch(a.type){case "2d":a=window.devicePixelRatio||
    1;d=b.x/a;e=b.y/a;break;case "3d":n(b,q),a.state.camera.renderToScreen(q,f),d=f[0],e=f[1]}return c?(c.x=d,c.y=e,c):l(d,e)};a.screenArrayToRender=function(a,b,c){var e,f;switch(a.type){case "2d":a=window.devicePixelRatio||1;e=b[0]*a;f=b[1]*a;break;case "3d":a.state.camera.screenToRender(b,q),e=q[0],f=q[1]}return c?(c[0]=e,c[1]=f,2<c.length&&(c[2]=0),c):d(e,f)};a.renderArrayToScreen=function(a,b,c){var d,e;switch(a.type){case "2d":a=window.devicePixelRatio||1;d=b[0]/a;e=b[0]/a;break;case "3d":a.state.camera.renderToScreen(b,
    f),d=f[0],e=f[1]}return c?(c[0]=d,c[1]=e,c):h(d,e)};a.screenPointArrayToObject=function(a,b){return b?(b.x=a[0],b.y=a[1],b):{x:a[0],y:a[1]}};a.screenPointObjectToArray=n;a.createScreenPointFromEvent=b;a.createScreenPointFromNativeEvent=p;a.createScreenPointFromSupportedEvent=function(a,c){return c instanceof Event?p(a,c):b(c)};a.isSupportedScreenPointEvent=function(a){if(a instanceof Event)return!0;if("object"===typeof a&&"type"in a)switch(a=a.type,a){case "click":case "double-click":case "pointer-down":case "pointer-drag":case "pointer-enter":case "pointer-leave":case "pointer-up":case "pointer-move":case "immediate-click":case "hold":case "drag":case "mouse-wheel":return!0;
    case "key-down":case "key-up":case "gamepad":case "focus":case "blur":break;default:m.neverReachedSilent(a)}return!1};var q=d(),f=h()})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});a.colorAndTransparencyProperty={type:m,json:{type:[l.Integer],default:null,read:{source:["color","transparency"],
    reader:function(a,c){a=null!=c.transparency?h.transparencyToOpacity(c.transparency):1;return(c=c.color)&&Array.isArray(c)?new m([c[0]||0,c[1]||0,c[2]||0,a]):null}},write:{target:{color:{type:[l.Integer]},transparency:{type:l.Integer}},writer:function(a,c){c.color=a.toJSON().slice(0,3);a=h.opacityToTransparency(a.a);0!==a&&(c.transparency=a)}}}};a.screenSizeProperty={type:Number,cast:e.toPt,json:{write:!0}};a.stipplePatternProperty={type:[Number],cast:function(a){return null!=a?a:Array.isArray(a)?
    a.map(e.toPt):null},json:{read:!1,write:!1}}})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.type="sketch";return b}m(c,a);g=c;c.prototype.clone=function(){return new g(this.cloneProperties())};var g;e([l.property({type:["sketch"]})],c.prototype,"type",void 0);
    return c=g=e([l.subclass("esri.symbols.edges.SketchEdges3D")],c)}(l.declared(h))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.type="solid";return b}m(c,a);g=c;c.prototype.clone=function(){return new g(this.cloneProperties())};var g;e([l.property({type:["solid"]})],
    c.prototype,"type",void 0);return c=g=e([l.subclass("esri.symbols.support.SolidEdges3D")],c)}(l.declared(h))})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(){var b=null!==a&&a.apply(this,
    arguments)||this;b.color=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({color:h.isSome(this.color)?this.color.clone():null})};var c;e([g.property(d.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=c=e([g.subclass("esri.symbols.support.Symbol3DMaterial")],b)}(g.declared(l.JSONSupport));a.Symbol3DMaterial=c;a.default=c})},"esri/symbols/FillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/accessorSupport/decorators ./SimpleLineSymbol ./Symbol".split(" "),
    function(c,a,m,e,l,h,g,d){var n=new l.default({esriSFS:"simple-fill",esriPFS:"picture-fill"});return function(a){function b(b){b=a.call(this,b)||this;b.outline=null;b.type=null;return b}m(b,a);e([h.property({type:g,json:{default:null,write:!0}})],b.prototype,"outline",void 0);e([h.property({type:n.apiValues,readOnly:!0,json:{type:n.jsonValues}})],b.prototype,"type",void 0);return b=e([h.subclass("esri.symbols.FillSymbol")],b)}(h.declared(d))})},"esri/symbols/SimpleLineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./LineSymbol".split(" "),
    function(c,a,m,e,l,h,g,d,n){var b=new l.default({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});return function(a){function c(b,c,d,e,k,g){b=a.call(this,b)||this;b.type="simple-line";
    b.style="solid";b.cap="round";b.join="round";b.miterLimit=2;return b}m(c,a);n=c;c.prototype.normalizeCtorArgs=function(a,b,c,d,e,k){if(a&&"string"!==typeof a)return a;var f={};null!=a&&(f.style=a);null!=b&&(f.color=b);null!=c&&(f.width=g.toPt(c));null!=d&&(f.cap=d);null!=e&&(f.join=e);null!=k&&(f.miterLimit=g.toPt(k));return f};c.prototype.clone=function(){return new n({color:h.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})};var n;e([d.enumeration.serializable()({esriSLS:"simple-line"})],
    c.prototype,"type",void 0);e([d.property({type:b.apiValues,json:{read:b.read,write:b.write}})],c.prototype,"style",void 0);e([d.property({type:["butt","round","square"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],c.prototype,"cap",void 0);e([d.property({type:["miter","round","bevel"],json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}})],c.prototype,"join",void 0);e([d.property({type:Number,
    json:{read:!1,write:!1}})],c.prototype,"miterLimit",void 0);return c=n=e([d.subclass("esri.symbols.SimpleLineSymbol")],c)}(d.declared(n))})},"esri/symbols/LineSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="simple-line";b.width=.75;return b}m(c,a);e([h.enumeration.serializable()({esriSLS:"simple-line"})],
    c.prototype,"type",void 0);e([h.property({type:Number,cast:l.toPt,json:{write:!0}})],c.prototype,"width",void 0);return c=e([h.subclass("esri.symbols.LineSymbol")],c)}(h.declared(g))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/colors ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),function(c,
    a,m,e,l,h,g,d,n,b,p){return function(a){function c(b){b=a.call(this,b)||this;b.type="fill";b.material=null;b.castShadows=!0;b.outline=null;b.edges=null;return b}m(c,a);f=c;c.prototype.clone=function(){return new f({edges:l.isSome(this.edges)?this.edges.clone():null,enabled:this.enabled,material:l.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,outline:l.isSome(this.outline)?this.outline.clone():null})};c.fromSimpleFillSymbol=function(a){return new f({material:{color:(a.color||
    n.transparentWhite).clone()},outline:a.outline?new p.default({size:a.outline.width||0,color:(a.outline.color||n.white).clone()}):null})};var f;e([h.enumeration.serializable()({Fill:"fill"})],c.prototype,"type",void 0);e([h.property({type:b.default,json:{write:!0}})],c.prototype,"material",void 0);e([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,"castShadows",void 0);e([h.property({type:p.default,json:{write:!0}})],c.prototype,"outline",void 0);e([h.property(d.symbol3dEdgesProperty)],
    c.prototype,"edges",void 0);return c=f=e([h.subclass("esri.symbols.FillSymbol3DLayer")],c)}(h.declared(g))})},"esri/symbols/support/colors":function(){define(["require","exports","../../Color"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.white=new m("white");a.black=new m("black");a.transparentWhite=new m([255,255,255,0]);a.isBlack=function(a){return 0===a.r&&0===a.g&&0===a.b}})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/maybe ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),
    function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);b=c;c.prototype.clone=function(){return new b({color:l.isSome(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode})};var b;e([h.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],c.prototype,"colorMixMode",void 0);return c=b=e([h.subclass("esri.symbols.support.Symbol3DFillMaterial")],c)}(h.declared(g.default));
    a.Symbol3DFillMaterial=c;a.default=c})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new l([0,
    0,0,1]);b.size=d.px2pt(1);b.stipplePattern=null;b.stippleOffColor=null;return b}m(c,a);h=c;c.prototype.clone=function(){return new h({color:g.isSome(this.color)?this.color.clone():null,size:this.size,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?this.stippleOffColor.clone():null})};var h;e([n.property(b.colorAndTransparencyProperty)],c.prototype,"color",void 0);e([n.property(b.screenSizeProperty)],c.prototype,"size",void 0);e([n.property(b.stipplePatternProperty)],
    c.prototype,"stipplePattern",void 0);e([n.property({type:l})],c.prototype,"stippleOffColor",void 0);return c=h=e([n.subclass("esri.symbols.support.Symbol3DOutline")],c)}(n.declared(h.JSONSupport));a.Symbol3DOutline=c;a.default=c})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(b){b=
    a.call(this,b)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}m(c,a);b=c;c.prototype.castSize=function(a){return h.toPt(a)};c.prototype.clone=function(){return new b({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var b;e([g.property({type:["underline","line-through","none"],json:{default:"none",write:!0}})],c.prototype,"decoration",void 0);e([g.property({type:String,json:{write:!0}})],c.prototype,
    "family",void 0);e([g.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],c.prototype,"size",void 0);e([g.cast("size")],c.prototype,"castSize",null);e([g.property({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],c.prototype,"style",void 0);e([g.property({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],c.prototype,"weight",void 0);return c=b=e([g.subclass("esri.symbols.Font")],c)}(g.declared(l.JSONSupport))})},
    "esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/maybe ../core/urlUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DAnchorPosition2D ./support/Symbol3DMaterial ./support/Symbol3DOutline".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r){function t(a){var b="width"in a?a.width:a.size,
    c="height"in a?a.height:a.size,d=u(a.xoffset);a=u(a.yoffset);return(d||a)&&b&&c?{x:-d/b,y:a/c}:null}function u(a){return isFinite(a)?a:0}var w=l.getLogger("esri.symbols.IconSymbol3DLayer"),v={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};return function(a){function c(b){b=a.call(this,b)||this;b.material=null;b.resource=null;b.type="icon";b.size=12;b.anchor="center";b.anchorPosition=void 0;b.outline=void 0;return b}m(c,a);n=c;c.prototype.clone=function(){return new n({anchor:this.anchor,
    anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:h.isSome(this.material)?this.material.clone():null,outline:h.isSome(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})};c.fromSimpleMarkerSymbol=function(a){var c=a.color||b.white,d=t(a),e=a.outline&&0<a.outline.width?{size:a.outline.width,color:(a.outline.color||b.white).clone()}:null,f=n,k=a.size;a=a.style;var g=v[a];g?a=g:(w.warn(a+' cannot be mapped to Icon symbol. Fallback to "circle"'),
    a="circle");return new f({size:k,resource:{primitive:a},material:{color:c},outline:e,anchor:d?"relative":void 0,anchorPosition:d})};c.fromPictureMarkerSymbol=function(a){var c=!a.color||b.isBlack(a.color)?b.white:a.color,d=t(a);return new n({size:a.width<=a.height?a.height:a.width,resource:{href:a.url},material:{color:c.clone()},anchor:d?"relative":void 0,anchorPosition:d})};c.fromCIMSymbol=function(a){return new n({resource:{href:g.makeData({mediaType:"application/json",data:JSON.stringify(a.data)})}})};
    var n;e([d.property({type:f.default,json:{write:!0}})],c.prototype,"material",void 0);e([d.property({type:p.default,json:{write:!0}})],c.prototype,"resource",void 0);e([d.enumeration.serializable()({Icon:"icon"})],c.prototype,"type",void 0);e([d.property(k.screenSizeProperty)],c.prototype,"size",void 0);e([d.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),
    d.property({json:{default:"center"}})],c.prototype,"anchor",void 0);e([d.property({type:q.Symbol3DAnchorPosition2D,json:{type:[Number],read:{reader:function(a){return new q.Symbol3DAnchorPosition2D({x:a[0],y:a[1]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],c.prototype,"anchorPosition",void 0);e([d.property({type:r.default,json:{write:!0}})],c.prototype,"outline",void 0);return c=n=e([d.subclass("esri.symbols.IconSymbol3DLayer")],
    c)}(d.declared(n))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});var n=l.strict()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});c=function(a){function b(b){return a.call(this,
    b)||this}m(b,a);c=b;b.prototype.readHref=function(a,b,c){return a?g.fromJSON(a,c):b.dataURI};b.prototype.writeHref=function(a,b,c,d){a&&(g.isDataProtocol(a)?b.dataURI=a:(b.href=g.toJSON(a,d),g.isAbsolute(b.href)&&(b.href=g.normalize(b.href))))};b.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};var c;e([d.property({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],b.prototype,"href",void 0);e([d.reader("href")],b.prototype,"readHref",null);e([d.writer("href",
    {href:{type:String},dataURI:{type:String}})],b.prototype,"writeHref",null);e([d.enumeration.serializable()(n)],b.prototype,"primitive",void 0);return b=c=e([d.subclass("esri.symbols.support.IconSymbol3DLayerResource")],b)}(d.declared(h.JSONSupport));a.IconSymbol3DLayerResource=c;a.defaultPrimitive="circle";a.default=c})},"esri/symbols/support/Symbol3DAnchorPosition2D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.x=0;b.y=0;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({x:this.x,y:this.y})};var g;e([h.property({type:Number})],c.prototype,"x",void 0);e([h.property({type:Number})],c.prototype,"y",void 0);return c=g=e([h.subclass("esri.symbols.support.Symbol3DAnchorPosition2D")],c)}(h.declared(l));a.Symbol3DAnchorPosition2D=c;a.default=c})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){var k=l.ofType({base:null,key:"type",typeMap:{text:n}});return function(a){function c(b){b=a.call(this,b)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new k;b.type="label-3d";return b}m(c,a);d=c;c.prototype.supportsCallout=function(){return!0};c.prototype.hasVisibleCallout=function(){return b.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return b.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new d({styleOrigin:h.clone(this.styleOrigin),
    symbolLayers:h.clone(this.symbolLayers),thumbnail:h.clone(this.thumbnail),callout:h.clone(this.callout),verticalOffset:h.clone(this.verticalOffset)})};c.fromTextSymbol=function(a){return new d({symbolLayers:[n.fromTextSymbol(a)]})};var d;e([g.property({type:p.default,json:{write:!0}})],c.prototype,"verticalOffset",void 0);e([g.property(b.calloutProperty)],c.prototype,"callout",void 0);e([g.property({json:{read:!1,write:!1}})],c.prototype,"styleOrigin",void 0);e([g.property({type:k})],c.prototype,
    "symbolLayers",void 0);e([g.enumeration.serializable()({LabelSymbol3D:"label-3d"})],c.prototype,"type",void 0);return c=d=e([g.subclass("esri.symbols.LabelSymbol3D")],c)}(g.declared(d))})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/jsonMap ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./WaterSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B){var D={icon:r,object:u,line:t,path:w,fill:f,extrude:q,text:z,water:A},E=l.ofType({base:x,key:"type",typeMap:D}),C=g.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),F=d.getLogger("esri.symbols.Symbol3D");return function(a){function c(b){b=a.call(this,b)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&
    b.__accessor__.metadatas.symbolLayers;b._set("symbolLayers",new (c&&c.type||l));return b}m(c,a);Object.defineProperty(c.prototype,"color",{get:function(){return null},set:function(a){F.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"symbolLayers",{set:function(a){h.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});c.prototype.readSymbolLayers=
    function(a,c,d){c=[];for(var e=0;e<a.length;e++){var f=a[e],k=x.typeJSONDictionary.read(f.type),g=k&&D[k];g?(f=new g,f.read(a[e],d),c.push(f)):(F.warn("Unknown symbol layer type: "+k),d&&d.messages&&d.messages.push(new b("symbol-layer:unsupported","Symbol layers of type '"+(k||f.type||"unknown")+"' are not supported",{definition:f,context:d})))}return c};c.prototype.readStyleOrigin=function(a,c,d){if(a.styleUrl&&a.name)return c=n.fromJSON(a.styleUrl,d),new y({styleUrl:c,name:a.name});if(a.styleName&&
    a.name)return new y({portal:d&&d.portal||k.getDefault(),styleName:a.styleName,name:a.name});d&&d.messages&&d.messages.push(new b("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:d,definition:a}))};c.prototype.writeStyleOrigin=function(a,c,d,e){a.styleUrl&&a.name?(d=n.toJSON(a.styleUrl,e),n.isAbsolute(d)&&(d=n.normalize(d)),c.styleOrigin={styleUrl:d,name:a.name}):a.styleName&&a.name&&(a.portal&&e&&e.portal&&!n.hasSamePortal(a.portal.restUrl,
    e.portal.restUrl)?e&&e.messages&&e.messages.push(new b("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):c.styleOrigin={styleName:a.styleName,name:a.name})};c.prototype.normalizeCtorArgs=function(a){return a instanceof x||a&&D[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};e([p.property({json:{read:!1,write:!1}})],c.prototype,"color",null);e([p.property({type:E,nonNullable:!0,
    json:{write:!0}}),p.cast(h.castForReferenceSetter)],c.prototype,"symbolLayers",null);e([p.reader("symbolLayers")],c.prototype,"readSymbolLayers",null);e([p.property({type:y})],c.prototype,"styleOrigin",void 0);e([p.reader("styleOrigin")],c.prototype,"readStyleOrigin",null);e([p.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],c.prototype,"writeStyleOrigin",null);e([p.property({type:B.default,json:{read:!1}})],c.prototype,
    "thumbnail",void 0);e([p.property({type:C.apiValues,readOnly:!0,json:{type:C.jsonValues,read:!1}})],c.prototype,"type",void 0);return c=e([p.subclass("esri.symbols.Symbol3D")],c)}(p.declared(v))})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/maybe ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/colors ./support/materialUtils ./support/Symbol3DMaterial".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){return function(a){function c(b){b=a.call(this,b)||this;b.material=null;b.type="line";b.join="miter";b.cap="butt";b.size=g.px2pt(1);b.stipplePattern=null;b.stippleOffColor=null;return b}m(c,a);n=c;c.prototype.clone=function(){return new n({enabled:this.enabled,material:h.isSome(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,stipplePattern:this.stipplePattern?this.stipplePattern.slice():null,stippleOffColor:this.stippleOffColor?
    this.stippleOffColor.clone():null})};c.fromSimpleLineSymbol=function(a){return new n({size:a.width||1,cap:a.cap||"butt",join:a.join||"miter",material:{color:(a.color||b.white).clone()}})};var n;e([d.property({type:k.default,json:{write:!0}})],c.prototype,"material",void 0);e([d.enumeration.serializable()({Line:"line"})],c.prototype,"type",void 0);e([d.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],c.prototype,"join",void 0);e([d.property({type:["butt","square","round"],
    json:{write:!0,default:"butt"}})],c.prototype,"cap",void 0);e([d.property(p.screenSizeProperty)],c.prototype,"size",void 0);e([d.property(p.stipplePatternProperty)],c.prototype,"stipplePattern",void 0);e([d.property({type:l})],c.prototype,"stippleOffColor",void 0);return c=n=e([d.subclass("esri.symbols.LineSymbol3DLayer")],c)}(d.declared(n))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DAnchorPosition3D ./support/Symbol3DMaterial".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b){b=a.call(this,b)||this;b.material=null;b.castShadows=!0;b.resource=null;b.type="object";b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.anchorPosition=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,
    height:this.height,material:l.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(c.prototype,"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var g;e([h.property({type:b.default,json:{write:!0}})],c.prototype,"material",void 0);e([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],c.prototype,
    "castShadows",void 0);e([h.property({type:d.default,json:{write:!0}})],c.prototype,"resource",void 0);e([h.enumeration.serializable()({Object:"object"})],c.prototype,"type",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"width",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"height",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"depth",void 0);e([h.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),
    h.property({json:{default:"origin"}})],c.prototype,"anchor",void 0);e([h.property({type:n.Symbol3DAnchorPosition3D,json:{type:[Number],read:{reader:function(a){return new n.Symbol3DAnchorPosition3D({x:a[0],y:a[1],z:a[2]})}},write:{writer:function(a,b){b.anchorPosition=[a.x,a.y,a.z]},overridePolicy:function(){return{enabled:"relative"===this.anchor}}}}})],c.prototype,"anchorPosition",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"heading",void 0);e([h.property({type:Number,json:{write:!0}})],
    c.prototype,"tilt",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"roll",void 0);e([h.property({readOnly:!0,dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);return c=g=e([h.subclass("esri.symbols.ObjectSymbol3DLayer")],c)}(h.declared(g))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});var n=l.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);c=b;b.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};var c;e([d.property({type:String,json:{read:g.read,write:g.write}})],b.prototype,"href",void 0);e([d.enumeration.serializable()(n)],
    b.prototype,"primitive",void 0);return b=c=e([d.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],b)}(d.declared(h.JSONSupport));a.ObjectSymbol3DLayerResource=c;a.defaultPrimitive="sphere";a.default=c})},"esri/symbols/support/Symbol3DAnchorPosition3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",
    {value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.x=0;b.y=0;b.z=0;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({x:this.x,y:this.y,z:this.z})};var g;e([h.property({type:Number})],c.prototype,"x",void 0);e([h.property({type:Number})],c.prototype,"y",void 0);e([h.property({type:Number})],c.prototype,"z",void 0);return c=g=e([h.subclass("esri.symbols.support.Symbol3DAnchorPosition3D")],c)}(h.declared(l));a.Symbol3DAnchorPosition3D=c;a.default=c})},
    "esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/maybe ../core/accessorSupport/decorators ./Symbol3DLayer ./support/Symbol3DMaterial".split(" "),function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.material=null;b.castShadows=!0;b.type="path";b.profile="circle";b.join="miter";b.cap="butt";b.width=void 0;b.height=void 0;b.anchor="center";b.profileRotation="all";return b}
    m(b,a);c=b;Object.defineProperty(b.prototype,"size",{get:function(){if(this.width&&this.height){if(this.width===this.height)return this.width}else{if(this.width)return this.width;if(this.height)return this.height}},set:function(a){this.height=this.width=a},enumerable:!0,configurable:!0});b.prototype.readSize=function(a,b){return b.height||b.width?a:b.size};b.prototype.clone=function(){return new c({enabled:this.enabled,material:l.isSome(this.material)?this.material.clone():null,castShadows:this.castShadows,
    size:this.size,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})};var c;e([h.property({type:d.default,json:{write:!0}})],b.prototype,"material",void 0);e([h.property({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],b.prototype,"castShadows",void 0);e([h.enumeration.serializable()({Path:"path"})],b.prototype,"type",void 0);e([h.property({type:Number})],b.prototype,"size",null);e([h.reader("size")],
    b.prototype,"readSize",null);e([h.property({type:["circle","quad"],json:{write:!0,default:"circle"}})],b.prototype,"profile",void 0);e([h.property({type:["miter","bevel","round"],json:{write:!0,default:"miter"}})],b.prototype,"join",void 0);e([h.property({type:["none","butt","square","round"],json:{write:!0,default:"butt"}})],b.prototype,"cap",void 0);e([h.property({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],b.prototype,"width",void 0);e([h.property({type:Number,
    json:{write:!0}})],b.prototype,"height",void 0);e([h.property({type:["center","bottom","top"],json:{write:!0,default:"center"}})],b.prototype,"anchor",void 0);e([h.property({type:["heading","all"],json:{write:!0,default:"all"}})],b.prototype,"profileRotation",void 0);return b=c=e([h.subclass("esri.symbols.PathSymbol3DLayer")],b)}(h.declared(g))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/maybe ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo ./support/Symbol3DMaterial".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q){return function(a){function b(b){b=a.call(this,b)||this;b._userSize=void 0;b.halo=null;b.material=null;b.text=void 0;b.type="text";return b}m(b,a);c=b;Object.defineProperty(b.prototype,"font",{get:function(){return this._get("font")||null},set:function(a){a&&this._userSize&&(a.size=this._userSize);this._set("font",a)},enumerable:!0,configurable:!0});b.prototype.writeFont=function(a,b,c,d){c=l({},d,{textSymbol3D:!0});b.font=a.write({},c);delete b.font.size};Object.defineProperty(b.prototype,
    "size",{get:function(){return null!=this._userSize?this._userSize:this.font&&null!=this.font.size?this.font.size:9},set:function(a){this._userSize=a;this.font&&(this.font.size=this._userSize);this.notifyChange("size")},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new c({enabled:this.enabled,font:this.font&&h.clone(this.font),halo:this.halo&&h.clone(this.halo),material:g.isSome(this.material)?this.material.clone():null,size:this.size,text:this.text})};b.fromTextSymbol=function(a){var b;
    b=a.haloColor;var d=a.haloSize;b=b&&0<d?{color:h.clone(b),size:d}:null;d=a.font?a.font.clone():new n;return new c({size:d.size,font:d,halo:b,material:a.color?{color:a.color.clone()}:null,text:a.text})};var c;e([d.property({type:n,json:{write:!0}})],b.prototype,"font",null);e([d.writer("font")],b.prototype,"writeFont",null);e([d.property({type:k.default,json:{write:!0}})],b.prototype,"halo",void 0);e([d.property({type:q.default,json:{write:!0}})],b.prototype,"material",void 0);e([d.property(p.screenSizeProperty),
    d.property({dependsOn:["font.size"]})],b.prototype,"size",null);e([d.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);e([d.enumeration.serializable()({Text:"text"})],b.prototype,"type",void 0);return b=c=e([d.subclass("esri.symbols.TextSymbol3DLayer")],b)}(d.declared(b))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new l([0,0,0,1]);b.size=0;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({color:g.clone(this.color),size:this.size})};var c;e([d.property(n.colorAndTransparencyProperty)],b.prototype,"color",void 0);e([d.property(n.screenSizeProperty)],b.prototype,"size",void 0);return b=c=e([d.subclass("esri.symbols.support.Symbol3DHalo")],b)}(d.declared(h.JSONSupport));
    a.Symbol3DHalo=c;a.default=c})},"esri/symbols/WaterSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ./Symbol3DLayer".split(" "),function(c,a,m,e,l,h,g,d,n){return function(a){function b(b){b=a.call(this,b)||this;b.color=new l("#0077BE");b.type="water";b.waterbodySize="medium";b.waveDirection=null;b.waveStrength="moderate";return b}m(b,
    a);c=b;b.prototype.clone=function(){return new c({color:h.clone(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})};var c;e([g.property({type:l,json:{type:[d.Integer],write:!0,default:null}})],b.prototype,"color",void 0);e([g.enumeration.serializable()({Water:"water"})],b.prototype,"type",void 0);e([g.property({type:["small","medium","large"],json:{write:!0,default:"medium"}})],b.prototype,"waterbodySize",void 0);e([g.property({type:Number,
    json:{write:!0,default:null}})],b.prototype,"waveDirection",void 0);e([g.property({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],b.prototype,"waveStrength",void 0);return b=c=e([g.subclass("esri.symbols.WaterSymbol3DLayer")],b)}(g.declared(n))})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var b;e([h.property({type:String})],c.prototype,"name",void 0);e([h.property({type:String})],c.prototype,"styleUrl",void 0);e([h.property({type:String})],c.prototype,"styleName",void 0);e([h.property({type:g})],c.prototype,"portal",void 0);
    return c=b=e([h.subclass("esri.symbols.support.StyleOrigin")],c)}(h.declared(l))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}m(c,a);g=c;c.prototype.clone=function(){return new g({url:this.url})};
    var g;e([h.property({type:String})],c.prototype,"url",void 0);return c=g=e([h.subclass("esri.symbols.support.Thumbnail")],c)}(h.declared(l));a.Thumbnail=c;a.default=c})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(c,a,m,e){function l(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function h(a,c,h){if(!a)return a;switch(a.type){case "line":return c=new e,c.read(a,h),c}}Object.defineProperty(a,
    "__esModule",{value:!0});a.hasVisibleVerticalOffset=l;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var c=a.callout;return c&&c.visible?l(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=h;a.calloutProperty={types:{key:"type",base:m,typeMap:{line:e}},json:{read:h,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.visible=!0;return b}e(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=m({},a),delete a.type);return a};c.prototype.clone=function(){};l([g.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);l([g.property({readOnly:!0})],c.prototype,"visible",void 0);return c=l([g.subclass("esri.symbols.callouts.Callout3D")],c)}(g.declared(h.JSONSupport))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/maybe ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){return function(a){function b(b){b=a.call(this,b)||this;b.type="line";b.color=new l([0,0,0,1]);b.size=d.px2pt(1);b.border=null;return b}m(b,a);c=b;Object.defineProperty(b.prototype,"visible",{get:function(){return 0<this.size&&g.isSome(this.color)&&0<this.color.a},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new c({color:h.clone(this.color),size:this.size,border:h.clone(this.border)})};var c;e([n.property({type:["line"]})],b.prototype,"type",
    void 0);e([n.property(k.colorAndTransparencyProperty)],b.prototype,"color",void 0);e([n.property(k.screenSizeProperty)],b.prototype,"size",void 0);e([n.property({type:p.default,json:{write:!0}})],b.prototype,"border",void 0);e([n.property({dependsOn:["size","color"],readOnly:!0})],b.prototype,"visible",null);return b=c=e([n.subclass("esri.symbols.callouts.LineCallout3D")],b)}(n.declared(b))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new l("white");return b}m(b,a);c=b;b.prototype.clone=function(){return new c({color:g.clone(this.color)})};var c;e([d.property(n.colorAndTransparencyProperty)],b.prototype,"color",void 0);return b=c=e([d.subclass("esri.symbols.callouts.LineCallout3DBorder")],b)}(d.declared(h.JSONSupport));a.LineCallout3DBorder=c;a.default=c})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
    function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var b;e([h.property(g.screenSizeProperty)],c.prototype,"screenLength",void 0);e([h.property({type:Number,json:{write:!0,default:0}})],c.prototype,"minWorldLength",
    void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"maxWorldLength",void 0);return c=b=e([h.subclass("esri.symbols.support.Symbol3DVerticalOffset")],c)}(h.declared(l.JSONSupport));a.Symbol3DVerticalOffset=c;a.default=c})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){var p=l.ofType({base:null,key:"type",typeMap:{line:d,path:n}}),k=l.ofType({base:null,key:"type",typeMap:{line:d,path:n}});return function(a){function b(b){b=a.call(this,b)||this;b.symbolLayers=new p;b.type="line-3d";return b}m(b,a);c=b;b.prototype.clone=function(){return new c({styleOrigin:h.clone(this.styleOrigin),symbolLayers:h.clone(this.symbolLayers),thumbnail:h.clone(this.thumbnail)})};b.fromSimpleLineSymbol=function(a){return new c({symbolLayers:[d.fromSimpleLineSymbol(a)]})};
    var c;e([g.property({type:p,json:{type:k}})],b.prototype,"symbolLayers",void 0);e([g.enumeration.serializable()({LineSymbol3D:"line-3d"})],b.prototype,"type",void 0);return b=c=e([g.subclass("esri.symbols.LineSymbol3D")],b)}(g.declared(b))})},"esri/symbols/MarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/jsonMap ../core/screenUtils ../core/accessorSupport/decorators ./Symbol".split(" "),function(c,a,m,e,l,h,g,d){var n=
    new l.default({esriSMS:"simple-marker",esriPMS:"picture-marker"});return function(a){function b(b){b=a.call(this,b)||this;b.angle=0;b.type=null;b.xoffset=0;b.yoffset=0;b.size=9;return b}m(b,a);e([g.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);e([g.property({type:n.apiValues,readOnly:!0,json:{type:n.jsonValues}})],b.prototype,"type",void 0);e([g.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,
    "xoffset",void 0);e([g.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);e([g.property({type:Number,cast:function(a){return"auto"===a?a:h.toPt(a)},json:{write:!0}})],b.prototype,"size",void 0);return b=e([g.subclass("esri.symbols.MarkerSymbol")],b)}(g.declared(d))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),
    function(c,a,m,e,l,h,g,d,n){var b=l.ofType({base:null,key:"type",typeMap:{fill:d}});return function(a){function c(c){c=a.call(this,c)||this;c.symbolLayers=new b;c.type="mesh-3d";return c}m(c,a);d=c;c.prototype.clone=function(){return new d({styleOrigin:h.clone(this.styleOrigin),symbolLayers:h.clone(this.symbolLayers),thumbnail:h.clone(this.thumbnail)})};var d;e([g.property({type:b})],c.prototype,"symbolLayers",void 0);e([g.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],c.prototype,"type",void 0);
    return c=d=e([g.subclass("esri.symbols.MeshSymbol3D")],c)}(g.declared(n))})},"esri/symbols/PictureFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./FillSymbol ./support/urlUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b,c,d,e){b=a.call(this,b)||this;b.type="picture-fill";b.url=null;b.xscale=1;b.yscale=
    1;b.width=12;b.height=12;b.xoffset=0;b.yoffset=0;b.source=null;return b}m(c,a);n=c;c.prototype.normalizeCtorArgs=function(a,b,c,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);b&&(e.outline=b);null!=c&&(e.width=g.toPt(c));null!=d&&(e.height=g.toPt(d));return e};c.prototype.clone=function(){var a=new n({color:h.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,
    yscale:this.yscale});a._set("source",h.clone(this.source));return a};var n;e([d.enumeration.serializable()({esriPFS:"picture-fill"})],c.prototype,"type",void 0);e([d.property(b.urlPropertyDefinition)],c.prototype,"url",void 0);e([d.property({type:Number,json:{write:!0}})],c.prototype,"xscale",void 0);e([d.property({type:Number,json:{write:!0}})],c.prototype,"yscale",void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],c.prototype,"width",void 0);e([d.property({type:Number,cast:g.toPt,
    json:{write:!0}})],c.prototype,"height",void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],c.prototype,"xoffset",void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],c.prototype,"yoffset",void 0);e([d.property(b.sourcePropertyDefinition)],c.prototype,"source",void 0);return c=n=e([d.subclass("esri.symbols.PictureFillSymbol")],c)}(d.declared(n))})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(c,a,m){function e(a,
    c,e){return c.imageData?m.makeData({mediaType:c.contentType||"image/png",isBase64:!0,data:c.imageData}):l(c.url,e)}function l(a,c){return!c||"service"!==c.origin&&"portal-item"!==c.origin||!c.layer||"feature"!==c.layer.type&&"stream"!==c.layer.type||m.isAbsolute(a)||!c.layer.parsedUrl?m.fromJSON(a,c):m.join(c.layer.parsedUrl.path,"images",a)}function h(a,c,e,b){m.isDataProtocol(a)?(a=m.dataComponents(a),c.contentType=a.mediaType,c.imageData=a.data,e&&e.imageData===c.imageData&&e.url&&m.write(e.url,
    c,"url",b)):m.write(a,c,"url",b)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=e;a.read=l;a.writeImageDataAndUrl=h;a.urlPropertyDefinition={json:{read:{source:["imageData","url"],reader:e},write:{writer:function(a,c,e,b){h(a,c,this.source,b)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,c,e){a={};c.imageData&&(a.imageData=c.imageData);c.contentType&&(a.contentType=c.contentType);c.url&&(a.url=l(c.url,e));return a}}}}})},
    "esri/symbols/PictureMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./support/urlUtils".split(" "),function(c,a,m,e,l,h,g,d,n){return function(a){function b(b,c,d){b=a.call(this,b)||this;b.color=null;b.type="picture-marker";b.url=null;b.source=null;b.height=12;b.width=12;b.size=null;return b}m(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,
    b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var d={};a&&(d.url=a);null!=b&&(d.width=h.toPt(b));null!=c&&(d.height=h.toPt(c));return d};b.prototype.readHeight=function(a,b){return b.size||a};b.prototype.readWidth=function(a,b){return b.size||a};b.prototype.clone=function(){var a=new c({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});a._set("source",l.clone(this.source));return a};var c;e([g.property({json:{write:!1}})],b.prototype,
    "color",void 0);e([g.enumeration.serializable()({esriPMS:"picture-marker"})],b.prototype,"type",void 0);e([g.property(n.urlPropertyDefinition)],b.prototype,"url",void 0);e([g.property(n.sourcePropertyDefinition)],b.prototype,"source",void 0);e([g.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"height",void 0);e([g.reader("height",["height","size"])],b.prototype,"readHeight",null);e([g.property({type:Number,cast:h.toPt,json:{write:!0}})],b.prototype,"width",void 0);e([g.property({json:{write:!1}})],
    b.prototype,"size",void 0);return b=c=e([g.subclass("esri.symbols.PictureMarkerSymbol")],b)}(g.declared(d))})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,
    k,q,f){var r=l.ofType({base:null,key:"type",typeMap:{icon:n,object:b,text:k}}),t=l.ofType({base:null,key:"type",typeMap:{icon:n,object:b}});return function(a){function b(b){b=a.call(this,b)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new r;b.type="point-3d";return b}m(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new h("symbol-layer:unsupported",
    "Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.supportsCallout=function(){if(1>(this.symbolLayers?this.symbolLayers.length:0))return!1;for(var a=0,b=this.symbolLayers.items;a<b.length;a++)switch(b[a].type){case "icon":case "text":case "object":continue;default:return!1}return!0};b.prototype.hasVisibleCallout=function(){return q.hasVisibleCallout(this)};b.prototype.hasVisibleVerticalOffset=
    function(){return q.hasVisibleVerticalOffset(this)};b.prototype.clone=function(){return new c({verticalOffset:g.clone(this.verticalOffset),callout:g.clone(this.callout),styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail)})};b.fromSimpleMarkerSymbol=function(a){return new c({symbolLayers:[n.fromSimpleMarkerSymbol(a)]})};b.fromPictureMarkerSymbol=function(a){return new c({symbolLayers:[n.fromPictureMarkerSymbol(a)]})};b.fromCIMSymbol=function(a){return new c({symbolLayers:[n.fromCIMSymbol(a)],
    callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}})};b.fromTextSymbol=function(a){return new c({symbolLayers:[k.fromTextSymbol(a)]})};var c;e([d.property({type:f.default,json:{write:!0}})],b.prototype,"verticalOffset",void 0);e([d.property(q.calloutProperty)],b.prototype,"callout",void 0);e([d.property({type:r,json:{type:t,origins:{"web-scene":{type:t}}}})],b.prototype,"symbolLayers",void 0);e([d.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);
    e([d.enumeration.serializable()({PointSymbol3D:"point-3d"})],b.prototype,"type",void 0);return b=c=e([d.subclass("esri.symbols.PointSymbol3D")],b)}(d.declared(p))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/maybe ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./WaterSymbol3DLayer".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){var w=l.ofType({base:null,key:"type",typeMap:{extrude:b,fill:p,icon:k,line:q,object:f,text:t,water:u}}),v=l.ofType({base:null,key:"type",typeMap:{extrude:b,fill:p,icon:k,line:q,object:f,water:u}});return function(a){function b(b){b=a.call(this,b)||this;b.type="polygon-3d";return b}m(b,a);c=b;b.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===
    a.type}),d.messages.push(new h("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};b.prototype.clone=function(){return new c({styleOrigin:g.clone(this.styleOrigin),symbolLayers:g.clone(this.symbolLayers),thumbnail:g.clone(this.thumbnail)})};b.fromJSON=function(a){var b=new c;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var e=
    b.symbolLayers.getItemAt(0),f=b.symbolLayers.getItemAt(1);!f.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||(e.outline={size:f.size,color:d.isSome(f.material)?f.material.color:null});b.symbolLayers.removeAt(1)}return b};b.fromSimpleFillSymbol=function(a){return new c({symbolLayers:[p.fromSimpleFillSymbol(a)]})};var c;e([n.property({type:w,json:{type:v}})],b.prototype,"symbolLayers",void 0);e([n.writer("web-scene","symbolLayers")],b.prototype,"writeSymbolLayers",null);e([n.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],
    b.prototype,"type",void 0);return b=c=e([n.subclass("esri.symbols.PolygonSymbol3D")],b)}(n.declared(r))})},"esri/symbols/SimpleFillSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../Color ../core/jsonMap ../core/lang ../core/accessorSupport/decorators ./FillSymbol ./SimpleLineSymbol".split(" "),function(c,a,m,e,l,h,g,d,n,b,p){var k=new g.default({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",
    esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});return function(a){function b(b,c,d){b=a.call(this,b)||this;b.color=new h([0,0,0,.25]);b.outline=new p;b.type="simple-fill";b.style="solid";return b}m(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d};b.prototype.clone=function(){return new c({color:d.clone(this.color),
    outline:this.outline&&this.outline.clone(),style:this.style})};var c;e([n.property()],b.prototype,"color",void 0);e([n.property()],b.prototype,"outline",void 0);e([n.enumeration.serializable()({esriSFS:"simple-fill"})],b.prototype,"type",void 0);e([n.property({type:k.apiValues,json:{read:k.read,write:k.write}})],b.prototype,"style",void 0);return b=c=e([n.subclass("esri.symbols.SimpleFillSymbol")],b)}(n.declared(b))})},"esri/symbols/SimpleMarkerSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/jsonMap ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./MarkerSymbol ./SimpleLineSymbol".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){var k=new h.default({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});return function(a){function b(b,c,d,e){b=a.call(this,b)||this;b.color=new l([255,255,255,.25]);b.type="simple-marker";b.size=12;b.style="circle";b.outline=new p;return b}m(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c,e){if(a&&"string"!==typeof a)return a;var f={};a&&(f.style=a);null!=b&&
    (f.size=d.toPt(b));c&&(f.outline=c);e&&(f.color=e);return f};b.prototype.writeColor=function(a,b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON());null===a&&(b.color=null)};Object.defineProperty(b.prototype,"path",{set:function(a){this.style="path";this._set("path",a)},enumerable:!0,configurable:!0});b.prototype.clone=function(){return new c({angle:this.angle,color:g.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,
    yoffset:this.yoffset})};var c;e([n.property()],b.prototype,"color",void 0);e([n.writer("color")],b.prototype,"writeColor",null);e([n.enumeration.serializable()({esriSMS:"simple-marker"})],b.prototype,"type",void 0);e([n.property()],b.prototype,"size",void 0);e([n.property({type:k.apiValues,json:{read:k.read,write:k.write}})],b.prototype,"style",void 0);e([n.property({type:String,json:{write:!0}})],b.prototype,"path",null);e([n.property({type:p,json:{default:null,write:!0}})],b.prototype,"outline",
    void 0);return b=c=e([n.subclass("esri.symbols.SimpleMarkerSymbol")],b)}(n.declared(b))})},"esri/symbols/TextSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/screenUtils ../core/accessorSupport/decorators ./Font ./Symbol".split(" "),function(c,a,m,e,l,h,g,d,n,b){return function(a){function b(b,c,d){b=a.call(this,b)||this;b.backgroundColor=null;b.borderLineColor=null;b.borderLineSize=null;b.font=new n;b.horizontalAlignment=
    "center";b.kerning=!0;b.haloColor=null;b.haloSize=null;b.rightToLeft=null;b.rotated=!1;b.text="";b.type="text";b.verticalAlignment=null;b.xoffset=0;b.yoffset=0;b.angle=0;b.width=null;return b}m(b,a);c=b;b.prototype.normalizeCtorArgs=function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d};b.prototype.clone=function(){return new c({angle:this.angle,backgroundColor:h.clone(this.backgroundColor),borderLineColor:h.clone(this.borderLineColor),borderLineSize:this.borderLineSize,
    color:h.clone(this.color),font:this.font&&this.font.clone(),haloColor:h.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})};var c;e([d.property({type:l,json:{write:!0}})],b.prototype,"backgroundColor",void 0);e([d.property({type:l,json:{write:!0}})],b.prototype,"borderLineColor",
    void 0);e([d.property({type:Number,json:{write:!0}})],b.prototype,"borderLineSize",void 0);e([d.property({type:n,json:{write:!0}})],b.prototype,"font",void 0);e([d.property({type:["left","right","center","justify"],json:{write:!0}})],b.prototype,"horizontalAlignment",void 0);e([d.property({type:Boolean,json:{write:!0}})],b.prototype,"kerning",void 0);e([d.property({type:l,json:{write:!0}})],b.prototype,"haloColor",void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"haloSize",
    void 0);e([d.property({type:Boolean,json:{write:!0}})],b.prototype,"rightToLeft",void 0);e([d.property({type:Boolean,json:{write:!0}})],b.prototype,"rotated",void 0);e([d.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);e([d.property({type:String,readOnly:!0})],b.prototype,"type",void 0);e([d.property({type:["baseline","top","middle","bottom"],json:{write:!0}})],b.prototype,"verticalAlignment",void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"xoffset",
    void 0);e([d.property({type:Number,cast:g.toPt,json:{write:!0}})],b.prototype,"yoffset",void 0);e([d.property({type:Number,json:{read:function(a){return a&&-1*a},write:function(a,b){return b.angle=a&&-1*a}}})],b.prototype,"angle",void 0);e([d.property({type:Number,json:{write:!0}})],b.prototype,"width",void 0);return b=c=e([d.subclass("esri.symbols.TextSymbol")],b)}(d.declared(b))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/jsonMap ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){function r(){return h(this,void 0,void 0,function(){return l(this,function(a){return[2,n.create(function(a){return c(["./support/styleUtils"],a)})]})})}var t=d.getLogger("esri.symbols.WebStyleSymbol"),u=g.strict()({styleSymbolReference:"web-style"});return function(a){function c(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}m(c,a);d=c;c.prototype.read=function(a,b){this.portal=
    b?b.portal:void 0;this.inherited(arguments,[a,b])};c.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};c.prototype.fetchSymbol=function(a){return this._fetchSymbol("webRef",a)};c.prototype.fetchCIMSymbol=function(a){return this._fetchSymbol("cimRef",a)};c.prototype._fetchSymbol=function(a,b){return h(this,void 0,void 0,function(){var c,d;return l(this,function(e){switch(e.label){case 0:return[4,r()];case 1:return c=e.sent(),
    n.throwIfAborted(b),d=c.resolveWebStyleSymbol(this,{portal:this.portal},a,b),d.catch(function(a){t.error("#fetchSymbol()","Failed to create symbol from style",a)}),[2,d]}})})};var d;e([p.property({json:{write:!1}})],c.prototype,"color",void 0);e([p.property({type:String,json:{write:!0}})],c.prototype,"styleName",void 0);e([p.property({type:k,json:{write:!1}})],c.prototype,"portal",void 0);e([p.property({type:String,json:{read:b.read,write:b.write}})],c.prototype,"styleUrl",void 0);e([p.property({type:f.default,
    json:{read:!1}})],c.prototype,"thumbnail",void 0);e([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);e([p.property({type:u.apiValues,readOnly:!0,json:{type:u.jsonValues,read:!1,write:u.write}})],c.prototype,"type",void 0);return c=d=e([p.subclass("esri.symbols.WebStyleSymbol")],c)}(p.declared(q))})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../CIMSymbol ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x){function z(a,b,c){b=a?y[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new e("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null}function A(a,b,c){if(!a)return null;if(!(!c||"web-scene"!==c.origin||a instanceof t||a instanceof w)){var d="cim"!==a.type?x.to3D(a):{symbol:null,error:new m("symbol-conversion:unsupported-cim-symbol","CIM symbol is unsupported in web scenes",
    {symbol:a})};if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new m("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:d.error}));return null}return a.write(b,c)}Object.defineProperty(a,"__esModule",{value:!0});var y={esriSMS:r,esriPMS:b,esriTS:u,esriSLS:f,esriSFS:q,esriPFS:n,PointSymbol3D:p,LineSymbol3D:g,PolygonSymbol3D:k,MeshSymbol3D:d,LabelSymbol3D:h,
    styleSymbolReference:w,CIMSymbolReference:l};a.read=z;a.writeTarget=function(a,b,c,d){(a=A(a,{},d))&&(b[c]=a)};a.write=A;a.fromJSON=function(a,b){return z(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new v}c&&c.read(a,b);return c}})},"esri/symbols/support/symbolConversion":function(){define(["require","exports","../../symbols","../../core/Error"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});a.to3D=function(a,c,g,
    d){void 0===c&&(c=!1);void 0===g&&(g=!1);void 0===d&&(d=!0);if(!a)return{symbol:null};if(m.isSymbol3D(a)||a instanceof m.WebStyleSymbol)d=a.clone();else if("cim"===a.type)d=m.PointSymbol3D.fromCIMSymbol(a);else if(a instanceof m.SimpleLineSymbol)d=m.LineSymbol3D.fromSimpleLineSymbol(a);else if(a instanceof m.SimpleMarkerSymbol)d=m.PointSymbol3D.fromSimpleMarkerSymbol(a);else if(a instanceof m.PictureMarkerSymbol)d=m.PointSymbol3D.fromPictureMarkerSymbol(a);else if(a instanceof m.SimpleFillSymbol)d=
    m.PolygonSymbol3D.fromSimpleFillSymbol(a);else if(a instanceof m.TextSymbol)d=d?m.LabelSymbol3D.fromTextSymbol(a):m.PointSymbol3D.fromTextSymbol(a);else return{error:new e("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};c&&(d.id=a.id);if(g&&m.isSymbol3D(d))for(a=0;a<d.symbolLayers.length;++a)d.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:d}}})},"esri/renderers/Renderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/iteratorUtils ../core/jsonMap ../core/JSONSupport ../core/accessorSupport/decorators ./support/AuthoringInfo".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){var k=new d.default({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});return function(a){function c(b){b=a.call(this,b)||this;b.authoringInfo=null;b.type=null;return b}m(c,a);c.prototype.getRequiredFields=function(a){return h(this,void 0,void 0,function(){var b;return l(this,function(c){switch(c.label){case 0:if(!this.collectRequiredFields)return[2,[]];b=new Set;
    return[4,this.collectRequiredFields(b,a)];case 1:return c.sent(),[2,g.valuesOfSet(b).sort()]}})})};c.prototype.getSymbol=function(a,b){};c.prototype.getSymbolAsync=function(a,b){return h(this,void 0,void 0,function(){return l(this,function(a){return[2]})})};c.prototype.getSymbols=function(){return[]};c.prototype.getAttributeHash=function(){return JSON.stringify(this)};c.prototype.getMeshHash=function(){return JSON.stringify(this)};e([b.property({type:p,json:{write:!0}})],c.prototype,"authoringInfo",
    void 0);e([b.property({type:k.apiValues,readOnly:!0,json:{type:k.jsonValues,read:!1,write:{writer:k.write,ignoreOrigin:!0}}})],c.prototype,"type",void 0);return c=e([b.subclass("esri.renderers.Renderer")],c)}(b.declared(n.JSONSupport))})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./AuthoringInfoFieldInfo ./AuthoringInfoVisualVariable ../../tasks/support/colorRamps".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){var q=new l.default({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),f=new l.default({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),
    r="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");return function(a){function c(b){b=a.call(this,b)||this;b.colorRamp=null;b.lengthUnit=null;b.maxSliderValue=null;b.minSliderValue=null;b.visualVariables=null;return b}m(c,a);h=c;Object.defineProperty(c.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===
    b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});c.prototype.readColorRamp=function(a){if(a)return k.fromJSON(a)};Object.defineProperty(c.prototype,"fields",{get:function(){return this.type&&"predominance"!==this.type?null:this._get("fields")},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},
    set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"standardDeviationInterval",{get:function(){var a=this.type;return a&&"relationship"!==a&&"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",
    a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",b)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new h({classificationMethod:this.classificationMethod,colorRamp:g.clone(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:g.clone(this.field1),field2:g.clone(this.field2),
    focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var h;e([d.property({type:q.apiValues,value:null,dependsOn:["type"],json:{type:q.jsonValues,read:q.read,write:q.write,origins:{"web-document":{default:"manual",type:q.jsonValues,read:q.read,write:q.write}}}})],
    c.prototype,"classificationMethod",null);e([d.property({types:k.types,json:{write:!0}})],c.prototype,"colorRamp",void 0);e([d.reader("colorRamp")],c.prototype,"readColorRamp",null);e([d.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"fields",null);e([d.property({type:b.default,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field1",null);e([d.property({type:b.default,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field2",null);e([d.property({type:["HH",
    "HL","LH","LL"],value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"focus",null);e([d.property({type:Number,value:null,dependsOn:["type"],json:{type:n.Integer,write:!0}})],c.prototype,"numClasses",null);e([d.property({type:r,json:{type:r,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],c.prototype,"lengthUnit",void 0);e([d.property({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],c.prototype,"maxSliderValue",void 0);e([d.property({type:Number,json:{write:!0,
    origins:{"web-scene":{write:!1,read:!1}}}})],c.prototype,"minSliderValue",void 0);e([d.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],c.prototype,"standardDeviationInterval",null);e([d.property({type:String,value:null,json:{type:f.jsonValues,read:f.read,write:f.write,origins:{"web-scene":{type:f.jsonValues.filter(function(a){return"dotDensity"!==a}),read:f.read,write:f.write}}}})],c.prototype,"type",null);e([d.property({type:[p],
    json:{write:!0}})],c.prototype,"visualVariables",void 0);return c=h=e([d.subclass("esri.renderers.support.AuthoringInfo")],c)}(d.declared(h.JSONSupport))})},"esri/renderers/support/AuthoringInfoFieldInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoClassBreakInfo".split(" "),function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});
    c=function(a){function b(b){b=a.call(this,b)||this;b.field="";b.normalizationField="";b.classBreakInfos=[];return b}m(b,a);c=b;b.prototype.clone=function(){return new c({field:this.field,normalizationField:this.normalizationField,classBreakInfos:h.clone(this.classBreakInfos)})};var c;e([g.property({type:String,json:{write:!0}})],b.prototype,"field",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"normalizationField",void 0);e([g.property({type:[d.default],json:{write:!0}})],b.prototype,
    "classBreakInfos",void 0);return b=c=e([g.subclass("esri.renderers.support.AuthoringInfoFieldInfo")],b)}(g.declared(l.JSONSupport));a.AuthoringInfoFieldInfo=c;a.default=c})},"esri/renderers/support/AuthoringInfoClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=
    a.call(this,b)||this;b.minValue=0;b.maxValue=0;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({minValue:this.minValue,maxValue:this.maxValue})};var g;e([h.property({type:Number,json:{write:!0}})],c.prototype,"minValue",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"maxValue",void 0);return c=g=e([h.subclass("esri.renderer.support.AuthoringInfoClassBreakInfo")],c)}(h.declared(l.JSONSupport));a.AuthoringInfoClassBreakInfo=c;a.default=c})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
    function(c,a,m,e,l,h,g,d){var n=new l.default({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),b=new l.default({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),p={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},k=["high-to-low","above-and-below","centered-on","extremes"],q="seconds minutes hours days months years".split(" ");return function(a){function c(b){b=a.call(this,b)||this;
    b.endTime=null;b.field=null;b.maxSliderValue=null;b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}m(c,a);f=c;c.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};c.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(c.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "theme",{get:function(){return"color"===this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new f({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var f;e([g.property({types:p,json:{write:!0}})],c.prototype,"endTime",void 0);e([d.cast("endTime")],
    c.prototype,"castEndTime",null);e([g.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);e([g.property({type:Number,json:{write:!0}})],c.prototype,"maxSliderValue",void 0);e([g.property({type:Number,json:{write:!0}})],c.prototype,"minSliderValue",void 0);e([g.property({types:p,json:{write:!0}})],c.prototype,"startTime",void 0);e([d.cast("startTime")],c.prototype,"castStartTime",null);e([g.property({type:n.apiValues,value:null,dependsOn:["type"],json:{type:n.jsonValues,read:n.read,
    write:n.write}})],c.prototype,"style",null);e([g.property({type:k,value:null,dependsOn:["type"],json:{type:k,write:!0}})],c.prototype,"theme",null);e([g.property({type:b.apiValues,json:{type:b.jsonValues,read:b.read,write:b.write}})],c.prototype,"type",void 0);e([g.property({type:q,json:{type:q,write:!0}})],c.prototype,"units",void 0);return c=f=e([g.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],c)}(g.declared(h.JSONSupport))})},"esri/tasks/support/colorRamps":function(){define(["require",
    "exports","./AlgorithmicColorRamp","./ColorRamp","./MultipartColorRamp"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.types={key:"type",base:e,typeMap:{algorithmic:m,multipart:l}};a.fromJSON=function(a){return a&&a.type?"algorithmic"===a.type?m.fromJSON(a):"multipart"===a.type?l.fromJSON(a):null:null}})},"esri/tasks/support/AlgorithmicColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ColorRamp".split(" "),
    function(c,a,m,e,l,h,g,d,n){return function(a){function b(b){b=a.call(this,b)||this;b.algorithm=null;b.fromColor=null;b.toColor=null;b.type="algorithmic";return b}e(b,a);c=b;b.prototype.clone=function(){return new c({fromColor:h.clone(this.fromColor),toColor:h.clone(this.toColor),algorithm:this.algorithm})};var c;m([g.enumeration.serializable()({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],b.prototype,"algorithm",void 0);m([g.property({type:l,json:{type:[d.Integer],
    write:!0}})],b.prototype,"fromColor",void 0);m([g.property({type:l,json:{type:[d.Integer],write:!0}})],b.prototype,"toColor",void 0);m([g.property({type:["algorithmic"]})],b.prototype,"type",void 0);return b=c=m([g.subclass("esri.tasks.support.AlgorithmicColorRamp")],b)}(g.declared(n))})},"esri/tasks/support/ColorRamp":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.type=null;return c}m(c,a);e([h.property({readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e([h.subclass("esri.tasks.support.ColorRamp")],c)}(h.declared(l.JSONSupport))})},"esri/tasks/support/MultipartColorRamp":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/lang ../../core/accessorSupport/decorators ./AlgorithmicColorRamp ./ColorRamp".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.colorRamps=null;b.type="multipart";return b}e(b,a);c=b;b.prototype.clone=function(){return new c({colorRamps:l.clone(this.colorRamps)})};var c;m([h.property({type:[g],json:{write:!0}})],b.prototype,"colorRamps",void 0);m([h.property({type:["multipart"]})],b.prototype,"type",void 0);return b=c=m([h.subclass("esri.tasks.support.MultipartColorRamp")],b)}(h.declared(d))})},"esri/renderers/mixins/VisualVariablesMixin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/accessorSupport/decorators ../../layers/support/fieldUtils ../visualVariables/ColorVariable ../visualVariables/OpacityVariable ../visualVariables/RotationVariable ../visualVariables/SizeVariable ../visualVariables/VisualVariable ../visualVariables/VisualVariableFactory".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){Object.defineProperty(a,"__esModule",{value:!0});var r={base:q,key:"type",typeMap:{opacity:b,color:n,rotation:p,size:k}};a.VisualVariablesMixin=function(a){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._vvFactory=new f;return b}m(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._vvFactory.visualVariables=a;this._set("visualVariables",this._vvFactory.visualVariables)},enumerable:!0,configurable:!0});
    b.prototype.readVisualVariables=function(a,b,c){return this._vvFactory.readVariables(a,b,c)};b.prototype.writeVisualVariables=function(a,b,c,d){b[c]=this._vvFactory.writeVariables(a,d)};Object.defineProperty(b.prototype,"arcadeRequiredForVisualVariables",{get:function(){if(!this.visualVariables)return!1;for(var a=0,b=this.visualVariables;a<b.length;a++)if(b[a].arcadeRequired)return!0;return!1},enumerable:!0,configurable:!0});b.prototype.hasVisualVariables=function(a,b){return a?!!this.getVisualVariablesForType(a,
    b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))};b.prototype.getVisualVariablesForType=function(a,b){var c=this.visualVariables;if(c&&(c=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}),!c||0!==c.length))return c};b.prototype.collectVVRequiredFields=function(a,b){return h(this,void 0,void 0,function(){var c,e,f,k;return l(this,
    function(g){switch(g.label){case 0:c=[],this.visualVariables&&(c=c.concat(this.visualVariables)),e=0,f=c,g.label=1;case 1:if(!(e<f.length))return[3,4];k=f[e];if(!k)return[3,3];k.field&&d.collectField(a,b,k.field);k.normalizationField&&d.collectField(a,b,k.normalizationField);return k.valueExpression?[4,d.collectArcadeFieldNames(a,b,k.valueExpression)]:[3,3];case 2:g.sent(),g.label=3;case 3:return e++,[3,1];case 4:return[2]}})})};e([g.property({types:[r],value:null,json:{write:!0}})],b.prototype,"visualVariables",
    null);e([g.reader("visualVariables",["visualVariables","rotationType","rotationExpression"])],b.prototype,"readVisualVariables",null);e([g.writer("visualVariables")],b.prototype,"writeVisualVariables",null);return b=e([g.subclass("esri.renderers.mixins.VisualVariablesMixin")],b)}(g.declared(a))}})},"esri/renderers/visualVariables/ColorVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/ColorStop".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="color";b.normalizationField=null;return b}m(c,a);b=c;Object.defineProperty(c.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value}));this._set("stops",
    a)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField};c.prototype._interpolateData=function(){return this.stops&&
    this.stops.map(function(a){return a.value||0})};var b;e([l.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"cache",null);e([l.property({type:["color"],json:{type:["colorInfo"]}})],c.prototype,"type",void 0);e([l.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);e([l.property({type:[g],json:{write:!0}})],c.prototype,"stops",null);return c=b=e([l.subclass("esri.renderers.visualVariables.ColorVariable")],c)}(l.declared(h))})},"esri/renderers/visualVariables/VisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./support/VisualVariableLegendOptions".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){var p=g.getLogger("esri.renderers.visualVariables.VisualVariable"),k=new l.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});return function(a){function c(b){b=a.call(this,b)||this;b.index=null;b.type=null;b.field=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;return b}m(c,a);c.prototype.castField=function(a){return null==a?a:"function"===typeof a?(p.error(".field: field must be a string value"),
    null):n.ensureString(a)};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return!!this.valueExpression},enumerable:!0,configurable:!0});c.prototype.clone=function(){};c.prototype.getAttributeHash=function(){return this.type+"-"+this.field+"-"+this.valueExpression};e([d.property()],c.prototype,"index",void 0);e([d.property({type:k.apiValues,readOnly:!0,json:{read:k.read,write:k.write}})],c.prototype,"type",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"field",
    void 0);e([d.cast("field")],c.prototype,"castField",null);e([d.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);e([d.property({readOnly:!0,dependsOn:["valueExpression"]})],c.prototype,"arcadeRequired",null);e([d.property({type:b,json:{write:!0}})],c.prototype,"legendOptions",void 0);return c=e([d.subclass("esri.renderers.visualVariables.VisualVariable")],c)}(d.declared(h.JSONSupport))})},
    "esri/renderers/visualVariables/support/VisualVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ../../support/LegendOptions".split(" "),function(c,a,m,e,l,h){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.showLegend=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({title:this.title,showLegend:this.showLegend})};var g;
    e([l.property({type:Boolean,json:{write:!0}})],c.prototype,"showLegend",void 0);return c=g=e([l.subclass("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],c)}(l.declared(h.default))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});
    c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({title:this.title})};var g;e([h.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=g=e([h.subclass("esri.renderers.support.LegendOptions")],c)}(h.declared(l.JSONSupport));a.LegendOptions=c;a.default=c})},"esri/renderers/visualVariables/OpacityVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./VisualVariable ./support/OpacityStop".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.type="opacity";b.normalizationField=null;return b}m(c,a);b=c;Object.defineProperty(c.prototype,"cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"stops",{set:function(a){a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value}));this._set("stops",
    a)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new b({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(function(a){return a.clone()}),legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.normalizationField};c.prototype._interpolateData=function(){return this.stops&&
    this.stops.map(function(a){return a.value||0})};var b;e([l.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"cache",null);e([l.property({type:["opacity"],json:{type:["transparencyInfo"]}})],c.prototype,"type",void 0);e([l.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",void 0);e([l.property({type:[g],json:{write:!0}})],c.prototype,"stops",null);return c=b=e([l.subclass("esri.renderers.visualVariables.OpacityVariable")],c)}(l.declared(h))})},"esri/renderers/visualVariables/support/OpacityStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../webdoc/support/opacityUtils".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(b){b=a.call(this,b)||this;b.label=null;b.opacity=null;b.value=null;return b}m(b,a);c=b;b.prototype.readOpacity=function(a,b){return d.transparencyToOpacity(b.transparency)};b.prototype.writeOpacity=function(a,b,c){b[c]=d.opacityToTransparency(a)};b.prototype.clone=function(){return new c({label:this.label,opacity:this.opacity,value:this.value})};var c;e([h.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);e([h.property({type:Number,
    json:{type:g.Integer,write:{target:"transparency"}}})],b.prototype,"opacity",void 0);e([h.reader("opacity",["transparency"])],b.prototype,"readOpacity",null);e([h.writer("opacity")],b.prototype,"writeOpacity",null);e([h.property({type:Number,json:{write:!0}})],b.prototype,"value",void 0);return b=c=e([h.subclass("esri.renderers.visualVariables.support.OpacityStop")],b)}(h.declared(l.JSONSupport))})},"esri/renderers/visualVariables/RotationVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Error ../../core/accessorSupport/decorators ./VisualVariable".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.axis=null;b.type="rotation";b.rotationType="geographic";b.valueExpressionTitle=null;return b}m(c,a);b=c;Object.defineProperty(c.prototype,"cache",{get:function(){return{hasExpression:!!this.valueExpression,compiledFunc:null}},enumerable:!0,configurable:!0});c.prototype.writeValueExpressionTitleWebScene=function(a,b,c,d){d&&d.messages&&d.messages.push(new l("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",
    {instance:this,propertyName:"visualVariables["+this.index+"].valueExpressionTitle",context:d}))};c.prototype.clone=function(){return new b({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})};var b;e([h.property({readOnly:!0,dependsOn:["valueExpression"]})],c.prototype,"cache",null);e([h.property({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",
    write:!0}}}})],c.prototype,"axis",void 0);e([h.property({type:["rotation"],json:{type:["rotationInfo"]}})],c.prototype,"type",void 0);e([h.property({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],c.prototype,"rotationType",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);e([h.writer("web-scene","valueExpressionTitle")],c.prototype,"writeValueExpressionTitleWebScene",null);return c=b=e([h.subclass("esri.renderers.visualVariables.RotationVariable")],
    c)}(h.declared(g))})},"esri/renderers/visualVariables/SizeVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/Error ../../core/jsonMap ../../core/Logger ../../core/screenUtils ../../core/accessorSupport/decorators ./VisualVariable ./support/SizeStop ./support/SizeVariableLegendOptions ./support/sizeVariableUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){function r(a){if(null!=
    a){if("string"===typeof a||"number"===typeof a)return n.toPt(a);if("size"===a.type){if(f.isSizeVariable(a))return a;a=l({},a);delete a.type;return new z(a)}}}function t(a,b,c){if("object"!==typeof a)return a;b=new z;b.read(a,c);return b}var u=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,w=d.getLogger("esri.renderers.visualVariables.SizeVariable"),v=new g.default({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),x=new g.default({unknown:"unknown",inch:"inches",
    foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"}),z=function(a){function c(b){b=a.call(this,b)||this;b.axis=null;b.legendOptions=null;b.normalizationField=null;b.scaleBy=null;b.target=null;b.type="size";b.useSymbolValue=null;b.valueExpression=null;b.valueRepresentation=null;b.valueUnit=null;return b}m(c,a);d=c;Object.defineProperty(c.prototype,
    "cache",{get:function(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:u.test(this.valueExpression)}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"expression",{set:function(a){w.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'.");"view.scale"===a?(this.valueExpression="$view.scale",this._set("expression",a)):this._set("expression",null)},
    enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"index",{set:function(a){f.isSizeVariable(this.maxSize)&&(this.maxSize.index="visualVariables["+a+"].maxSize");f.isSizeVariable(this.minSize)&&(this.minSize.index="visualVariables["+a+"].minSize");this._set("index",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"inputValueType",{get:function(){return f.getInputValueType(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxDataValue",{set:function(a){a&&
    this.stops&&(w.warn("cannot set maxDataValue when stops is not null."),a=null);this._set("maxDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxSize",{set:function(a){a&&this.stops&&(w.warn("cannot set maxSize when stops is not null."),a=null);this._set("maxSize",a)},enumerable:!0,configurable:!0});c.prototype.castMaxSize=function(a){return r(a)};c.prototype.readMaxSize=function(a,b,c){return t(a,b,c)};Object.defineProperty(c.prototype,"minDataValue",{set:function(a){a&&
    this.stops&&(w.warn("cannot set minDataValue when stops is not null."),a=null);this._set("minDataValue",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"minSize",{set:function(a){a&&this.stops&&(w.warn("cannot set minSize when stops is not null."),a=null);this._set("minSize",a)},enumerable:!0,configurable:!0});c.prototype.castMinSize=function(a){return r(a)};c.prototype.readMinSize=function(a,b,c){return t(a,b,c)};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return this.valueExpression?
    !0:this.minSize&&"object"===typeof this.minSize&&this.minSize.arcadeRequired||this.maxSize&&"object"===typeof this.maxSize&&this.maxSize.arcadeRequired},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"stops",{set:function(a){null==this.minDataValue&&null==this.maxDataValue&&null==this.minSize&&null==this.maxSize?a&&Array.isArray(a)&&(a=a.filter(function(a){return!!a}),a.sort(function(a,b){return a.value-b.value})):a&&(w.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),
    a=null);this._set("stops",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transformationType",{get:function(){return f.getTransformationType(this,this.inputValueType)},enumerable:!0,configurable:!0});c.prototype.readValueExpression=function(a,b){return a||b.expression&&"$view.scale"};c.prototype.writeValueExpressionWebScene=function(a,b,c,d){"$view.scale"===a?d&&d.messages&&(a=this.index,d.messages.push(new h("property:unsupported",this.type+"VisualVariable.valueExpression \x3d '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",
    {instance:this,propertyName:("string"===typeof a?a:"visualVariables["+a+"]")+".valueExpression",context:d}))):b[c]=a};c.prototype.readValueUnit=function(a){return a?x.read(a):null};c.prototype.clone=function(){return new d({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:f.isSizeVariable(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:f.isSizeVariable(this.minSize)?
    this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(function(a){return a.clone()}),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})};c.prototype.flipSizes=function(){if("clamped-linear"===this.transformationType){var a=this.minSize;this.minSize=this.maxSize;this.maxSize=a;return this}if("stops"===this.transformationType)for(var a=
    this.stops,b=a.map(function(a){return a.size}).reverse(),c=a.length,d=0;d<c;d++)a[d].size=b[d];return this};c.prototype.getAttributeHash=function(){return this.inherited(arguments)+"-"+this.target+"-"+this.normalizationField};c.prototype._interpolateData=function(){return this.stops&&this.stops.map(function(a){return a.value||0})};var d;e([b.property({readOnly:!0,dependsOn:["valueExpression","stops"]})],c.prototype,"cache",null);e([b.property({type:v.apiValues,json:{type:v.jsonValues,origins:{"web-map":{read:!1}},
    read:v.read,write:v.write}})],c.prototype,"axis",void 0);e([b.property({type:String,value:null,json:{read:!1}})],c.prototype,"expression",null);e([b.property()],c.prototype,"index",null);e([b.property({type:String,readOnly:!0,dependsOn:["field","valueExpression"]})],c.prototype,"inputValueType",null);e([b.property({type:q,json:{write:!0}})],c.prototype,"legendOptions",void 0);e([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"maxDataValue",null);e([b.property({type:Number,value:null,
    json:{write:!0}})],c.prototype,"maxSize",null);e([b.cast("maxSize")],c.prototype,"castMaxSize",null);e([b.reader("maxSize")],c.prototype,"readMaxSize",null);e([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minDataValue",null);e([b.property({type:Number,value:null,json:{write:!0}})],c.prototype,"minSize",null);e([b.cast("minSize")],c.prototype,"castMinSize",null);e([b.reader("minSize")],c.prototype,"readMinSize",null);e([b.property({type:String,json:{write:!0}})],c.prototype,"normalizationField",
    void 0);e([b.property({readOnly:!0,dependsOn:["valueExpression","minSize.arcadeRequired","maxSize.arcadeRequired"]})],c.prototype,"arcadeRequired",null);e([b.property({type:String})],c.prototype,"scaleBy",void 0);e([b.property({type:[k],value:null,json:{write:!0}})],c.prototype,"stops",null);e([b.property({type:["outline"],json:{write:!0}})],c.prototype,"target",void 0);e([b.property({type:String,readOnly:!0,dependsOn:"minDataValue maxDataValue minSize maxSize valueUnit inputValueType stops".split(" ")})],
    c.prototype,"transformationType",null);e([b.property({type:["size"],json:{type:["sizeInfo"]}})],c.prototype,"type",void 0);e([b.property({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],c.prototype,"useSymbolValue",void 0);e([b.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);e([b.reader("valueExpression",["valueExpression","expression"])],c.prototype,"readValueExpression",null);e([b.writer("web-scene","valueExpression")],c.prototype,"writeValueExpressionWebScene",
    null);e([b.property({type:["radius","diameter","area","width","distance"],json:{write:!0}})],c.prototype,"valueRepresentation",void 0);e([b.property({type:x.apiValues,json:{write:x.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],c.prototype,"valueUnit",void 0);e([b.reader("valueUnit")],c.prototype,"readValueUnit",null);return c=d=e([b.subclass("esri.renderers.visualVariables.SizeVariable")],c)}(b.declared(p));return z})},"esri/renderers/visualVariables/support/SizeStop":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/JSONSupport ../../../core/screenUtils ../../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.label=null;b.size=null;b.value=null;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({label:this.label,size:this.size,value:this.value})};var b;e([g.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);e([g.property({type:Number,cast:h.toPt,json:{write:!0}})],c.prototype,"size",void 0);e([g.property({type:Number,json:{write:!0}})],c.prototype,"value",void 0);return c=b=e([g.subclass("esri.renderers.visualVariables.support.SizeStop")],
    c)}(g.declared(l.JSONSupport))})},"esri/renderers/visualVariables/support/SizeVariableLegendOptions":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/accessorSupport/decorators ./VisualVariableLegendOptions".split(" "),function(c,a,m,e,l,h){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.customValues=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({title:this.title,
    showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})};var g;e([l.property({type:[Number],json:{write:!0}})],c.prototype,"customValues",void 0);return c=g=e([l.subclass("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],c)}(l.declared(h))})},"esri/renderers/visualVariables/support/sizeVariableUtils":function(){define(["require","exports"],function(c,a){function m(a){return a.valueExpression?"expression":a.field&&"string"===typeof a.field?"field":
    "unknown"}Object.defineProperty(a,"__esModule",{value:!0});a.isSizeVariable=function(a){return a&&"esri.renderers.visualVariables.SizeVariable"===a.declaredClass};a.isValidNumber=function(a){return null!=a&&!isNaN(a)&&isFinite(a)};a.getInputValueType=m;a.getTransformationType=function(a,c){return"unknown"===(c||m(a))?"constant":a.stops?"stops":null!=a.minSize&&null!=a.maxSize&&null!=a.minDataValue&&null!=a.maxDataValue?"clamped-linear":"unknown"===(a.valueUnit||"unknown")?null!=a.minSize&&null!=a.minDataValue?
    a.minSize&&a.minDataValue?"proportional":"additive":"identity":"real-world-size"}})},"esri/renderers/visualVariables/VisualVariableFactory":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/jsonMap ../../core/Logger ../../core/Warning ../../core/accessorSupport/decorators ./ColorVariable ./OpacityVariable ./RotationVariable ./SizeVariable".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q){var f=g.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),
    r={color:b,size:q,opacity:p,rotation:k},t=new h.default({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),u=/^\[([^\]]+)\]$/i;return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.colorVariables=null;b.opacityVariables=null;b.rotationVariables=null;b.sizeVariables=null;return b}m(b,a);Object.defineProperty(b.prototype,"visualVariables",{set:function(a){this._resetVariables();if((a=a&&a.filter(function(a){return!!a}))&&a.length){for(var b=
    0,c=a;b<c.length;b++){var d=c[b];switch(d.type){case "color":this.colorVariables.push(d);break;case "opacity":this.opacityVariables.push(d);break;case "rotation":this.rotationVariables.push(d);break;case "size":this.sizeVariables.push(d)}}this.sizeVariables.length&&this.sizeVariables.some(function(a){return!!a.target})&&a.sort(function(a,b){var c=null;return c=a.target===b.target?0:a.target?1:-1});for(b=0;b<a.length;b++)d=a[b],d.index=b}this._set("visualVariables",a)},enumerable:!0,configurable:!0});
    b.prototype.readVariables=function(a,b,c){var e=b.rotationExpression;b=b.rotationType;if(e=(e=e&&e.match(u))&&e[1])a||(a=[]),a.push({type:"rotationInfo",rotationType:b,field:e});if(a)return a.map(function(a){var b=t.read(a.type),e=r[b];e||(f.warn("Unknown variable type: "+b),c&&c.messages&&c.messages.push(new d("visual-variable:unsupported","visualVariable of type '"+b+"' is not supported",{definition:a,context:c})));b=new e;b.read(a,c);return b})};b.prototype.writeVariables=function(a,b){for(var c=
    [],d=0;d<a.length;d++){var e=a[d].toJSON(b);e&&c.push(e)}return c};b.prototype._resetVariables=function(){this.colorVariables=[];this.opacityVariables=[];this.rotationVariables=[];this.sizeVariables=[]};e([n.property()],b.prototype,"visualVariables",null);return b=e([n.subclass("esri.renderers.visualVariables.VisualVariableFactory")],b)}(n.declared(l))})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(b){b=a.call(this,b)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};b.prototype.getMeshHash=function(){var a=JSON.stringify(this.symbol);return this.minValue+"."+this.maxValue+
    "."+a};var c;e([g.property({type:String,json:{write:!0}})],b.prototype,"description",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);e([g.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],b.prototype,"minValue",void 0);e([g.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],b.prototype,"maxValue",void 0);e([g.property({types:l.symbolTypesRenderer,json:{origins:{"web-scene":{types:l.symbolTypesRenderer3D,
    read:d.read,write:d.writeTarget}},read:d.read,write:d.writeTarget}})],b.prototype,"symbol",void 0);return b=c=e([g.subclass("esri.renderers.support.ClassBreakInfo")],b)}(g.declared(h.JSONSupport));a.ClassBreakInfo=c;a.default=c})},"esri/renderers/DictionaryRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../request ../core/Error ../core/iteratorUtils ../core/lang ../core/Logger ../core/LRUCache ../core/maybe ../core/promiseUtils ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ../support/arcadeOnDemand ../symbols/CIMSymbol".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A){var y=q.getLogger("esri.renderers.DictionaryRenderer");return function(a){function c(b){b=a.call(this,b)||this;b._ongoingRequests=new Map;b._symbolCache=new f(100);b.config=null;b.description=null;b.fieldMap=null;b.label=null;b.scaleExpression=null;b.url=null;b.type="dictionary";return b}m(c,a);q=c;c.prototype.clone=function(){return new q({config:k.clone(this.config),scaleExpression:k.clone(this.scaleExpression),description:k.clone(this.description),
    fieldMap:k.clone(this.fieldMap),label:k.clone(this.label),url:k.clone(this.url),visualVariables:k.clone(this.visualVariables)})};c.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c,d;return h(this,function(e){switch(e.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:return e.sent(),this.scaleExpression?[4,w.collectArcadeFieldNames(a,b,this.scaleExpression)]:[3,3];case 2:e.sent(),e.label=3;case 3:c=b.map(function(a){return a.name});for(d in this.fieldMap)0>
    c.indexOf(this.fieldMap[d])||a.add(this.fieldMap[d]);return[2]}})})};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return!0},enumerable:!0,configurable:!0});c.prototype.fetchResources=function(a){return g(this,void 0,void 0,function(){var c,d,e,f,k,g,q,m,u,v,w,x,A,C,B,D,E;return h(this,function(h){switch(h.label){case 0:if(!this.url)return y.error("no valid URL!"),[2,void 0];c=r.isSome(a)?a.abortOptions:null;d=n(this.url+"/resources/styles/dictionary-info.json",l({responseType:"json",
    query:{f:"json"}},c));return[4,t.all([d,z.loadArcade()])];case 1:e=h.sent()[0].data;if(!e)throw new b("esri.renderers.DictionaryRenderer","Bad dictionary data!");f=e.expression;k=e.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+e.cimRefTemplateUrl;this._itemNames=p.createSetFromValues(e.itemsNames);this._symbolAttributes=k.symbol;g={};if(this.config)for(m in q=this.config,q)g[m]=q[m];u=0;for(v=k.configuration;u<v.length;u++)m=v[u],g.hasOwnProperty(m.name)||(g[m.name]=m.value);w=[];if(r.isSome(a)&&
    a.fields)for(x=function(b){var c=A.fieldMap[b],d=a.fields.filter(function(a){return a.name===c});0<d.length&&w.push(l({},d[0],{name:b}))},A=this,C=0,B=this._symbolAttributes;C<B.length;C++)m=B[C],x(m);return[4,z.createDictionaryExpression(f,r.isSome(a)?a.spatialReference:null,w,g)];case 2:return D=h.sent(),E={scale:0},[2,function(a,b){a=D.repurposeFeature({geometry:null,attributes:a});E.scale=r.isSome(b)?b.scale:void 0;return D.evaluate({$feature:a,$view:E})}]}})})};c.prototype.getSymbol=function(){return null};
    c.prototype.getSymbolAsync=function(a,b){return g(this,void 0,void 0,function(){var c,e,f,k,g,n,l,p,q,m,r,u,t,v,w,x,F,z,y,A,C,B,D,E,S;return h(this,function(h){switch(h.label){case 0:return this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(b)),[4,this._dictionaryPromise];case 1:c=h.sent();e={};f=0;for(k=this._symbolAttributes;f<k.length;f++)g=k[f],(n=this.fieldMap[g])&&null!==a.attributes[n]&&void 0!==a.attributes[n]?(l=""+a.attributes[n],e[g]=l):e[g]="";p=c(e,b);if(!p||"string"!==
    typeof p)return[2,null];q=p.split(";");m=[];r=[];u=0;for(t=q;u<t.length;u++)if((v=t[u])&&0!==v.length)if(-1!==v.indexOf("po:"))w=v.substr(3).split("|"),3===w.length&&(x=w[0],F=w[1],z=w[2],"DashTemplate"===F?z=z.split(" ").map(function(a){return Number(a)}):"Color"===F?(y=(new d(z)).toRgba(),z=[y[0],y[1],y[2],255*y[3]]):z=Number(z),r.push({primitiveName:x,propertyName:F,value:z}));else if(-1!==v.indexOf("|"))for(A=0,C=v.split("|");A<C.length;A++)B=C[A],this._itemNames.has(B)&&m.push(B);else this._itemNames.has(v)&&
    m.push(v);D=m.join(";")+r.map(function(a){return a.primitiveName+";"+a.propertyName+";"+a.value});if(E=this._symbolCache.get(D))return[2,E];S=this._cimPartsToCIMSymbol(m,r,b);this._symbolCache.put(D,S,1);return[2,S]}})})};c.prototype.getSymbols=function(){return[]};c.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};c.prototype.getMeshHash=function(){return this.url+"-"+JSON.stringify(this.fieldMap)};c.prototype._getSymbolPart=
    function(a,b){return g(this,void 0,void 0,function(){var c,d,e;return h(this,function(f){switch(f.label){case 0:if(this._ongoingRequests.has(a))return[2,this._ongoingRequests.get(a).then(function(a){return a.data})];c=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,a);d=n(c,l({responseType:"json",query:{f:"json"}},b));this._ongoingRequests.set(a,d);return[4,d];case 1:return e=f.sent(),[2,e.data]}})})};c.prototype._combineSymbolParts=function(a,b){var c;if(!a||0===a.length)return null;if(1===a.length)return{type:"CIMSymbolReference",
    symbol:a[0],primitiveOverrides:b};var d=l({},a[0]);d.symbolLayers=[];for(var e=0;e<a.length;e++){var f=a[e];(c=d.symbolLayers).unshift.apply(c,f.symbolLayers)}return{type:"CIMSymbolReference",symbol:d,primitiveOverrides:b}};c.prototype._cimPartsToCIMSymbol=function(a,b,c){return g(this,void 0,void 0,function(){var d,e,f;return h(this,function(k){switch(k.label){case 0:d=Array(a.length);for(e=0;e<a.length;e++)d[e]=this._getSymbolPart(a[e],c);return[4,t.eachAlwaysValues(d)];case 1:return f=k.sent(),
    [2,new A({data:this._combineSymbolParts(f,b)})]}})})};var q;e([u.property({type:Object,json:{write:!0}})],c.prototype,"config",void 0);e([u.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);e([u.property({type:Object,json:{write:!0}})],c.prototype,"fieldMap",void 0);e([u.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);e([u.property({type:String,json:{write:!0}})],c.prototype,"scaleExpression",void 0);e([u.property({type:String,json:{write:!0}})],c.prototype,
    "url",void 0);return c=q=e([u.subclass("esri.renderers.DictionaryRenderer")],c)}(u.declared(x.VisualVariablesMixin(v)))})},"esri/core/LRUCache":function(){define(["require","exports","./MemCache"],function(c,a,m){return function(){function a(a,c){this._storage=new m.MemCacheStorage;this._storage.maxSize=a;c&&this._storage.registerRemoveFunc("",c)}a.prototype.put=function(a,c,e){this._storage.put(a,c,e,1)};a.prototype.pop=function(a){return this._storage.pop(a)};a.prototype.get=function(a){return this._storage.get(a)};
    a.prototype.clear=function(){this._storage.clearAll()};a.prototype.destroy=function(){this._storage.clearAll()};Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._storage.maxSize},set:function(a){this._storage.maxSize=a},enumerable:!0,configurable:!0});return a}()})},"esri/core/MemCache":function(){define(["require","exports","./iteratorUtils","./PooledArray","./string"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.MIN_PRIORITY=-3;c=function(){function a(a,
    c,e){this._namespace=a;this._storage=c;this._removeFunc=!1;this._miss=this._hit=0;this._storage.register(this);this._namespace+=":";e&&(this._storage.registerRemoveFunc(this._namespace,e),this._removeFunc=!0)}Object.defineProperty(a.prototype,"namespace",{get:function(){return this._namespace.slice(0,-1)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hitRate",{get:function(){return this._hit/(this._hit+this._miss)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
    "size",{get:function(){return this._storage.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"maxSize",{get:function(){return this._storage.maxSize},enumerable:!0,configurable:!0});a.prototype.resetHitRate=function(){this._hit=this._miss=0};a.prototype.destroy=function(){this._storage.clear(this._namespace);this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace);this._storage.deregister(this)};a.prototype.put=function(a,c,e,b){void 0===b&&(b=0);this._storage.put(this._namespace+
    a,c,e,b)};a.prototype.get=function(a){a=this._storage.get(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.pop=function(a){a=this._storage.pop(this._namespace+a);void 0===a?++this._miss:++this._hit;return a};a.prototype.updateSize=function(a,c,e){this._storage.updateSize(this._namespace+a,c,e)};a.prototype.clear=function(){this._storage.clear(this._namespace)};a.prototype.clearAll=function(){this._storage.clearAll()};a.prototype.getStats=function(){return this._storage.getStats()};
    a.prototype.resetStats=function(){this._storage.resetStats()};return a}();a.MemCache=c;c=function(){function c(a){void 0===a&&(a=10485760);this._maxSize=a;this._db=new Map;this._miss=this._hit=this._size=0;this._removeFuncs=[];this._users=new e}c.prototype.register=function(a){this._users.push(a)};c.prototype.deregister=function(a){this._users.removeUnordered(a)};c.prototype.registerRemoveFunc=function(a,c){this._removeFuncs.push([a,c])};c.prototype.deregisterRemoveFunc=function(a){this._removeFuncs=
    this._removeFuncs.filter(function(c){return c[0]!==a})};Object.defineProperty(c.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"maxSize",{get:function(){return this._maxSize},set:function(a){this._maxSize=Math.max(a,0);this._checkSizeLimit()},enumerable:!0,configurable:!0});c.prototype.put=function(c,d,e,b){var g=this._db.get(c);g&&(this._size-=g.size,this._db.delete(c),g.entry!==d&&this._notifyRemoved(c,g.entry));e>this._maxSize?
    this._notifyRemoved(c,d):void 0===d?console.warn("Refusing to cache undefined entry "):!e||0>e?console.warn("Refusing to cache entry with invalid size "+e):(b=1+Math.max(b,a.MIN_PRIORITY)-a.MIN_PRIORITY,this._db.set(c,{entry:d,size:e,lifetime:b,lives:b}),this._size+=e,this._checkSizeLimit())};c.prototype.updateSize=function(a,c,e){var b=this._db.get(a);b&&b.entry===c&&(this._size-=b.size,e>this._maxSize?this._notifyRemoved(a,c):(b.size=e,this._size+=e,this._checkSizeLimit()))};c.prototype.pop=function(a){var c=
    this._db.get(a);if(c)return this._size-=c.size,this._db.delete(a),++this._hit,c.entry;++this._miss};c.prototype.get=function(a){var c=this._db.get(a);if(void 0===c)++this._miss;else return this._db.delete(a),c.lives=c.lifetime,this._db.set(a,c),++this._hit,c.entry};c.prototype.getStats=function(){var c=this,d={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},e={},b=[];this._db.forEach(function(a,
    d){var f=a.lifetime;b[f]=(b[f]||0)+a.size;c._users.forEach(function(b){b=b.namespace;l.startsWith(d,b)&&(e[b]=(e[b]||0)+a.size)})});var h={};this._users.forEach(function(a){var b=a.namespace;!isNaN(a.hitRate)&&0<a.hitRate?(e[b]=e[b]||0,h[b]=Math.round(100*a.hitRate)+"%"):h[b]="0%"});var k=Object.keys(e);k.forEach(function(a){return e[a]=e[a]/c._size*100});k.sort(function(a,b){return e[b]-e[a]});k.forEach(function(a){return d[a]=Math.round(e[a])+"% / "+h[a]});for(k=b.length-1;0<=k;--k){var q=b[k];
    q&&(d["Priority "+(k+a.MIN_PRIORITY-1)]=Math.round(q/this.size*100)+"%")}return d};c.prototype.resetStats=function(){this._hit=this._miss=0;this._users.forEach(function(a){return a.resetHitRate()})};c.prototype.clear=function(a){var c=this;this._db.forEach(function(d,b){l.startsWith(b,a)&&(c._size-=d.size,c._db.delete(b),c._notifyRemoved(b,d.entry))})};c.prototype.clearAll=function(){var a=this;this._db.forEach(function(c,e){a._notifyRemoved(e,c.entry)});this._size=0;this._db.clear()};c.prototype._getHitRate=
    function(){return this._hit/(this._hit+this._miss)};c.prototype._notifyRemoved=function(a,c){this._removeFuncs.forEach(function(d){if(l.startsWith(a,d[0]))d[1](c)})};c.prototype._checkSizeLimit=function(){var a=this;this._size<=this._maxSize||m.someMap(this._db,function(c,e){a._db.delete(e);1>=c.lives?(a._size-=c.size,a._notifyRemoved(e,c.entry)):(--c.lives,a._db.set(e,c));return a._size<=.9*a.maxSize})};return c}();a.MemCacheStorage=c})},"esri/renderers/DotDensityRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./mixins/VisualVariablesMixin ./support/AttributeColorInfo ./support/DotDensityLegendOptions ../symbols/SimpleFillSymbol ../symbols/SimpleLineSymbol".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){return function(a){function c(b){b=a.call(this,b)||this;b.attributes=null;b.backgroundColor=new d([0,0,0,0]);b.blendDots=!0;b.dotBlendingEnabled=!0;b.dotShape="square";b.dotSize=1;b.legendOptions=null;b.outline=new u;b.dotValue=null;b.referenceDotValue=null;b.referenceScale=null;b.seed=1;b.type="dot-density";return b}m(c,a);k=c;c.prototype.calculateDotValue=function(a){if(null==this.referenceScale)return this.dotValue;a=a/this.referenceScale*this.dotValue;
    return 1>a?1:a};c.prototype.getSymbol=function(){return new t({outline:this.outline})};c.prototype.getSymbolAsync=function(){return g(this,void 0,void 0,function(){return h(this,function(a){return[2,this.getSymbol()]})})};c.prototype.getSymbols=function(){return[this.getSymbol()]};c.prototype.getAttributeHash=function(){return this.attributes&&this.attributes.reduce(function(a,b){return a+b.getAttributeHash()},"")};c.prototype.getMeshHash=function(){return JSON.stringify(this.outline)};c.prototype.clone=
    function(){return new k({attributes:n.clone(this.attributes),backgroundColor:n.clone(this.backgroundColor),dotBlendingEnabled:n.clone(this.dotBlendingEnabled),dotShape:n.clone(this.dotShape),dotSize:n.clone(this.dotSize),dotValue:n.clone(this.dotValue),legendOptions:n.clone(this.legendOptions),outline:n.clone(this.outline),referenceScale:n.clone(this.referenceScale),visualVariables:n.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};c.prototype.getControllerHash=
    function(){var a=this.attributes.map(function(a){return a.field||a.valueExpression||""}),b=this.outline&&JSON.stringify(this.outline.toJSON())||"";return a+"-"+b};c.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c,d,e;return h(this,function(f){switch(f.label){case 0:return[4,this.collectVVRequiredFields(a,b)];case 1:f.sent(),c=0,d=this.attributes,f.label=2;case 2:if(!(c<d.length))return[3,6];e=d[c];return e.valueExpression?[4,p.collectArcadeFieldNames(a,b,
    e.valueExpression)]:[3,4];case 3:f.sent(),f.label=4;case 4:e.field&&a.add(e.field),f.label=5;case 5:return c++,[3,2];case 6:return[2]}})})};var k;e([b.property({type:[f],json:{write:!0}})],c.prototype,"attributes",void 0);e([b.property({type:d,json:{write:!0}})],c.prototype,"backgroundColor",void 0);e([b.property({type:Boolean}),b.aliasOf("dotBlendingEnabled")],c.prototype,"blendDots",void 0);e([b.property({type:Boolean,json:{write:!0}})],c.prototype,"dotBlendingEnabled",void 0);e([b.property({type:String,
    json:{write:!0}})],c.prototype,"dotShape",void 0);e([b.property({type:Number,json:{write:!0}})],c.prototype,"dotSize",void 0);e([b.property({type:r,json:{write:!0}})],c.prototype,"legendOptions",void 0);e([b.property({type:u,json:{default:null,write:!0}})],c.prototype,"outline",void 0);e([b.property({type:Number,json:{write:!0}})],c.prototype,"dotValue",void 0);e([b.property({type:Number}),b.aliasOf("dotValue")],c.prototype,"referenceDotValue",void 0);e([b.property({type:Number,json:{write:!0}})],
    c.prototype,"referenceScale",void 0);e([b.property({type:Number,json:{write:!0}})],c.prototype,"seed",void 0);e([b.enumeration.serializable()({dotDensity:"dot-density"})],c.prototype,"type",void 0);return c=k=e([b.subclass("esri.renderers.DotDensityRenderer")],c)}(b.declared(q.VisualVariablesMixin(k)))})},"esri/renderers/support/AttributeColorInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
    function(c,a,m,e,l,h,g,d,n){var b=g.getLogger("esri.renderers.support.AttributeColorInfo");return function(a){function c(b){b=a.call(this,b)||this;b.color=null;b.field=null;b.label=null;b.valueExpression=null;b.valueExpressionTitle=null;return b}m(c,a);g=c;c.prototype.castField=function(a){return null==a?a:"function"===typeof a?(b.error(".field: field must be a string value"),null):n.ensureString(a)};c.prototype.getAttributeHash=function(){return this.field+"-"+this.valueExpression};c.prototype.clone=
    function(){return new g({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})};var g;e([d.property({type:l,json:{type:[Number],write:!0}})],c.prototype,"color",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);e([d.cast("field")],c.prototype,"castField",null);e([d.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);e([d.property({type:String,json:{write:!0}})],
    c.prototype,"valueExpression",void 0);e([d.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);return c=g=e([d.subclass("esri.renderers.support.AttributeColorInfo")],c)}(d.declared(h.JSONSupport))})},"esri/renderers/support/DotDensityLegendOptions":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return function(a){function c(){var b=
    null!==a&&a.apply(this,arguments)||this;b.unit=null;return b}e(c,a);g=c;c.prototype.clone=function(){return new g({unit:this.unit})};var g;m([h.property({type:String,json:{write:!0}})],c.prototype,"unit",void 0);return c=g=m([h.subclass("esri.renderers.support.DotDensityLegendOptions")],c)}(h.declared(l.JSONSupport))})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../Color ../core/lang ../core/accessorSupport/decorators ../layers/support/fieldUtils ./Renderer ./support/HeatmapColorStop".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){return function(a){function c(b){b=a.call(this,b)||this;b.blurRadius=10;b.colorStops=[new k.HeatmapColorStop({ratio:0,color:new g("rgba(255, 140, 0, 0)")}),new k.HeatmapColorStop({ratio:.75,color:new g("rgba(255, 140, 0, 1)")}),new k.HeatmapColorStop({ratio:.9,color:new g("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}m(c,a);p=c;c.prototype.collectRequiredFields=function(a,c){return h(this,
    void 0,void 0,function(){var d;return l(this,function(e){(d=this.field)&&"string"===typeof d&&b.collectField(a,c,d);return[2]})})};c.prototype.getAttributeHash=function(){return null};c.prototype.getMeshHash=function(){return JSON.stringify(this.colorStops)+"."+this.blurRadius};c.prototype.clone=function(){return new p({blurRadius:this.blurRadius,colorStops:d.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})};var p;e([n.property({type:Number,
    json:{write:!0}})],c.prototype,"blurRadius",void 0);e([n.property({type:[k.HeatmapColorStop],json:{write:!0}})],c.prototype,"colorStops",void 0);e([n.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);e([n.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],c.prototype,"fieldOffset",void 0);e([n.property({type:Number,json:{write:!0}})],c.prototype,"maxPixelIntensity",void 0);e([n.property({type:Number,json:{write:!0}})],c.prototype,"minPixelIntensity",
    void 0);e([n.enumeration.serializable()({heatmap:"heatmap"})],c.prototype,"type",void 0);return c=p=e([n.subclass("esri.renderers.HeatmapRenderer")],c)}(n.declared(p))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=
    a.call(this,b)||this;b.color=null;b.ratio=null;return b}m(c,a);b=c;c.prototype.clone=function(){return new b({color:this.color,ratio:this.ratio})};var b;e([g.property({type:l,json:{write:!0}})],c.prototype,"color",void 0);e([g.property({type:Number,json:{write:!0}})],c.prototype,"ratio",void 0);return c=b=e([g.subclass("esri.renderers.support.HeatmapColorStop")],c)}(g.declared(h.JSONSupport));a.HeatmapColorStop=c;a.default=c})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../symbols ../core/lang ../core/promiseUtils ../core/accessorSupport/decorators ./Renderer ./mixins/VisualVariablesMixin ../symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q){return function(a){function c(b){b=a.call(this,b)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}m(c,a);f=c;c.prototype.writeSymbolWebScene=function(a,b,c,d){q.writeTarget(a,b,c,d)};c.prototype.writeSymbol=function(a,b,c,d){q.writeTarget(a,b,c,d)};c.prototype.readSymbol=function(a,b,c){return q.read(a,b,c)};c.prototype.collectRequiredFields=function(a,b){return h(this,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:return[4,
    n.all([this.collectSymbolFields(a,b),this.collectVVRequiredFields(a,b)])];case 1:return c.sent(),[2]}})})};c.prototype.collectSymbolFields=function(a,b){return h(this,void 0,void 0,function(){return l(this,function(c){switch(c.label){case 0:return[4,n.all(this.getSymbols().map(function(c){return c.collectRequiredFields(a,b)}))];case 1:return c.sent(),[2]}})})};c.prototype.getSymbol=function(a,b){return this.symbol};c.prototype.getSymbolAsync=function(a,b){return h(this,void 0,void 0,function(){return l(this,
    function(a){return[2,this.symbol]})})};c.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};c.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};c.prototype.getMeshHash=function(){return this.getSymbols().reduce(function(a,b){return a+=JSON.stringify(b)},"")};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables},enumerable:!0,configurable:!0});
    c.prototype.clone=function(){return new f({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:d.clone(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})};var f;e([b.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);e([b.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);e([b.property({types:g.symbolTypesRenderer})],c.prototype,"symbol",void 0);e([b.writer("web-scene","symbol",
    {symbol:{types:g.symbolTypesRenderer3D}})],c.prototype,"writeSymbolWebScene",null);e([b.writer("symbol")],c.prototype,"writeSymbol",null);e([b.reader("symbol")],c.prototype,"readSymbol",null);e([b.enumeration.serializable()({simple:"simple"})],c.prototype,"type",void 0);return c=f=e([b.subclass("esri.renderers.SimpleRenderer")],c)}(b.declared(k.VisualVariablesMixin(p)))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../symbols ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/maybe ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/diffUtils ../core/accessorSupport/ensureType ../layers/support/fieldUtils ../portal/Portal ./Renderer ./mixins/VisualVariablesMixin ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeOnDemand ../symbols/support/jsonUtils ../symbols/support/styleUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D,E,C,F,I){var G=f.getLogger("esri.renderers.UniqueValueRenderer"),J=x.ensureType(E.default);return function(a){function c(b){b=a.call(this,b)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
    b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=p.find(a,function(a){return a.value===b[e].value});f?v.diff(f,b[e])?(d.changed.push({type:"complete",oldValue:f,newValue:b[e]}),c=!0):d.unchanged.push({oldValue:f,newValue:b[e]}):(d.added.push(b[e]),c=!0)},f=0;f<b.length;f++)e(f);e=function(e){p.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<
    a.length;f++)e(f);return c?d:void 0}}};b._set("uniqueValueInfos",[]);return b}m(c,a);f=c;Object.defineProperty(c.prototype,"_cache",{get:function(){return{compiledFunc:null}},enumerable:!0,configurable:!0});c.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){F.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a||"function"===typeof a?a:x.ensureString(a)};c.prototype.writeField=function(a,b,c,d){"string"===typeof a?b[c]=a:d&&d.messages?d.messages.push(new k("property:unsupported",
    "UniqueValueRenderer.field set to a function cannot be written to JSON")):G.error(".field: cannot write field to JSON since it's not a string value")};Object.defineProperty(c.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});c.prototype.readDefaultSymbol=function(a,b,c){return F.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=
    function(a,b,c,d){this._isDefaultSymbolDerived||F.writeTarget(a,b,c,d)};c.prototype.readPortal=function(a,b,c){return c.portal||A.getDefault()};c.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=u.fromJSON(b.styleUrl,c),Object.freeze({styleUrl:a})};c.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=u.toJSON(a.styleUrl,d))};Object.defineProperty(c.prototype,"uniqueValueInfos",
    {set:function(a){this.styleOrigin?G.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});c.prototype.addUniqueValueInfo=function(a,c){this.styleOrigin?G.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?J(a):new E.default({value:a,symbol:b.ensureType(c)}),
    this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};c.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)G.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};c.prototype.getUniqueValueInfo=function(a,b){return g(this,void 0,void 0,function(){var c,
    e,f;return h(this,function(k){switch(k.label){case 0:c=b;if(!this.valueExpression||!r.isNone(b)&&!r.isNone(b.arcade))return[3,2];e=[{},c];f={};return[4,C.loadArcade()];case 1:c=d.apply(void 0,e.concat([(f.arcade=k.sent(),f)])),k.label=2;case 2:return[2,this._getUniqueValueInfo(a,c)]}})})};c.prototype.getSymbol=function(a,b){if(this.valueExpression&&(r.isNone(b)||r.isNone(b.arcade)))G.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");else return(a=this._getUniqueValueInfo(a,
    b))&&a.symbol||this.defaultSymbol};c.prototype.getSymbolAsync=function(a,b){return g(this,void 0,void 0,function(){var c,e,f,k;return h(this,function(g){switch(g.label){case 0:c=b;if(!this.valueExpression||!r.isNone(c)&&!r.isNone(c.arcade))return[3,2];e=[{},c];f={};return[4,C.loadArcade()];case 1:c=d.apply(void 0,e.concat([(f.arcade=g.sent(),f)])),g.label=2;case 2:return k=this._getUniqueValueInfo(a,c),[2,k&&k.symbol||this.defaultSymbol]}})})};c.prototype.getSymbols=function(){for(var a=[],b=0,c=
    this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.getAttributeHash=function(){return this.visualVariables&&this.visualVariables.reduce(function(a,b){return a+b.getAttributeHash()},"")};c.prototype.getMeshHash=function(){var a=JSON.stringify(this.backgroundFillSymbol),b=JSON.stringify(this.defaultSymbol),c=this.uniqueValueInfos.reduce(function(a,b){return a+b.getMeshHash()},"");return a+"."+b+"."+c+"."+(this.field+
    "."+this.field2+"."+this.field3+"."+this.fieldDelimiter)+"."+this.valueExpression};c.prototype.clone=function(){var a=new f({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:q.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:q.clone(this.visualVariables),legendOptions:q.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),
    backgroundFillSymbol:q.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=q.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(q.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};Object.defineProperty(c.prototype,"arcadeRequired",{get:function(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression},enumerable:!0,configurable:!0});
    c.prototype.collectRequiredFields=function(a,b){return g(this,void 0,void 0,function(){var c;return h(this,function(d){switch(d.label){case 0:return c=[this.collectVVRequiredFields(a,b),this.collectSymbolFields(a,b)],[4,t.all(c)];case 1:return d.sent(),[2]}})})};c.prototype.collectSymbolFields=function(a,b){return g(this,void 0,void 0,function(){var c;return h(this,function(d){switch(d.label){case 0:return c=this.getSymbols().map(function(c){return c.collectRequiredFields(a,b)}).concat([z.collectArcadeFieldNames(a,
    b,this.valueExpression)]),z.collectField(a,b,this.field),z.collectField(a,b,this.field2),z.collectField(a,b,this.field3),[4,t.all(c)];case 1:return d.sent(),[2]}})})};c.prototype.populateFromStyle=function(){var a=this;return I.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new n.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
    d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new E.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};c.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};c.prototype._getUniqueValueInfo=
    function(a,b){return this.valueExpression?this._getUnqiueValueInfoForExpression(a,b):this._getUnqiueValueInfoForFields(a)};c.prototype._getUnqiueValueInfoForExpression=function(a,b){var c=r.unwrapOr(b,{});b=c.viewingMode;var d=c.scale,e=c.spatialReference,f=this._cache.compiledFunc,c=r.expect(c.arcade).arcadeUtils;f||(f=c.createSyntaxTree(this.valueExpression),f=c.createFunction(f),this._cache.compiledFunc=f);a=c.executeFunction(f,c.createExecContext(a,c.getViewInfo({viewingMode:b,scale:d,spatialReference:e})));
    return this._valueInfoMap[a+""]};c.prototype._getUnqiueValueInfoForFields=function(a){var b=this.field,c=a.attributes,d;if("function"!==typeof b&&this.field2){a=this.field2;d=this.field3;var e=[];b&&e.push(c[b]);a&&e.push(c[a]);d&&e.push(c[d]);d=e.join(this.fieldDelimiter||"")}else"function"===typeof b?d=b(a):b&&(d=c[b]);return this._valueInfoMap[d+""]};c.fromPortalStyle=function(a,b){var c=new f(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||A.getDefault());
    b=c.populateFromStyle();b.catch(function(b){G.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};c.fromStyleUrl=function(a,b){b=new f(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){G.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",b)});return b};var f;e([w.property({readOnly:!0,dependsOn:["valueExpression"]})],c.prototype,"_cache",
    null);e([w.enumeration.serializable()({uniqueValue:"unique-value"})],c.prototype,"type",void 0);e([w.property({types:{base:n.BaseSymbol,key:"type",typeMap:{"simple-fill":b.symbolTypesRenderer.typeMap["simple-fill"],"picture-fill":b.symbolTypesRenderer.typeMap["picture-fill"],"polygon-3d":b.symbolTypesRenderer.typeMap["polygon-3d"]}},json:{read:F.read,write:F.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);e([w.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:n.PolygonSymbol3D}})],
    c.prototype,"writeBackgroundFillSymbolWebScene",null);e([w.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],c.prototype,"field",void 0);e([w.cast("field")],c.prototype,"castField",null);e([w.writer("field")],c.prototype,"writeField",null);e([w.property({type:String,json:{write:!0}})],c.prototype,"field2",void 0);e([w.property({type:String,json:{write:!0}})],c.prototype,"field3",void 0);e([w.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);
    e([w.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);e([w.property({type:D.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);e([w.property({type:String,json:{write:!0}})],c.prototype,"defaultLabel",void 0);e([w.property({types:b.symbolTypesRenderer})],c.prototype,"defaultSymbol",null);e([w.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);e([w.writer("web-scene","defaultSymbol",{defaultSymbol:{types:b.symbolTypesRenderer3D}})],c.prototype,
    "writeDefaultSymbolWebScene",null);e([w.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);e([w.property({type:String,json:{write:!0}})],c.prototype,"fieldDelimiter",void 0);e([w.property({type:A,readOnly:!0})],c.prototype,"portal",void 0);e([w.reader("portal",["styleName"])],c.prototype,"readPortal",null);e([w.property({readOnly:!0,json:{write:{enabled:!1,overridePolicy:function(){return{enabled:!0}}}}})],c.prototype,"styleOrigin",void 0);e([w.reader("styleOrigin",["styleName","styleUrl"])],
    c.prototype,"readStyleOrigin",null);e([w.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],c.prototype,"writeStyleOrigin",null);e([w.property({type:[E.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],c.prototype,"uniqueValueInfos",null);return c=f=e([w.subclass("esri.renderers.UniqueValueRenderer")],c)}(w.declared(B.VisualVariablesMixin(y)))})},"esri/core/accessorSupport/diffUtils":function(){define("require exports ../Accessor ../Collection ../maybe ./utils".split(" "),
    function(c,a,m,e,l,h){function g(a){return a instanceof e?Object.keys(a.items):a instanceof m?h.getProperties(a).keys():a?Object.keys(a):[]}function d(a,b){return a instanceof e?a.items[b]:a[b]}function n(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function b(a){return a?a.declaredClass:null}function p(a,c){var e,f=a.diff;if(f&&"function"===typeof f)return f(a,c);var k=g(a),h=g(c);if(0!==k.length||0!==h.length){if(!k.length||!h.length||n(a,c))return{type:"complete",oldValue:a,
    newValue:c};var r=h.filter(function(a){return-1===k.indexOf(a)}),z=k.filter(function(a){return-1===h.indexOf(a)}),r=k.filter(function(b){return-1<h.indexOf(b)&&d(a,b)!==d(c,b)}).concat(r,z).sort();if((z=b(a))&&-1<q.indexOf(z)&&r.length)return{type:"complete",oldValue:a,newValue:c};for(var A,z=a instanceof m&&c instanceof m,y=0;y<r.length;y++){var B=r[y],D=d(a,B),E=d(c,B),C=void 0;!(z||"function"!==typeof D&&"function"!==typeof E)||D===E||null==D&&null==E||(C=f&&f[B]&&"function"===typeof f[B]?f[B](D,
    E):"object"===typeof D&&"object"===typeof E&&b(D)===b(E)?p(D,E):{type:"complete",oldValue:D,newValue:E},l.isSome(C)&&(l.isSome(A)?A.diff[B]=C:A={type:"partial",diff:(e={},e[B]=C,e)}))}return A}}function k(a){if(l.isNone(a))return!0;switch(a.type){case "complete":return!1;case "collection":for(var b=0,c=a.added;b<c.length;b++){var d=c[b];if(!k(d))return!1}b=0;for(c=a.removed;b<c.length;b++)if(d=c[b],!k(d))return!1;b=0;for(a=a.changed;b<a.length;b++)if(d=a[b],!k(d))return!1;return!0;case "partial":for(b in a.diff)if(d=
    a.diff[b],!k(d))return!1;return!0}}Object.defineProperty(a,"__esModule",{value:!0});var q=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];a.diff=function(a,c){if("function"!==typeof a&&"function"!==typeof c&&(a||c))return!a||!c||"object"===typeof a&&"object"===typeof c&&b(a)!==b(c)?{type:"complete",oldValue:a,newValue:c}:p(a,c)};a.isEmpty=k})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../symbols ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(b){b=a.call(this,b)||this;b.description=null;b.label=null;b.symbol=null;b.value=null;return b}m(b,a);c=b;b.prototype.clone=function(){return new c({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};b.prototype.getMeshHash=function(){var a=JSON.stringify(this.symbol&&this.symbol.toJSON());return this.value+"."+a};var c;e([g.property({type:String,
    json:{write:!0}})],b.prototype,"description",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"label",void 0);e([g.property({types:l.symbolTypesRenderer,json:{origins:{"web-scene":{types:l.symbolTypesRenderer3D,read:d.read,write:d.writeTarget}},read:d.read,write:d.writeTarget}})],b.prototype,"symbol",void 0);e([g.property({type:String,json:{write:!0}})],b.prototype,"value",void 0);return b=c=e([g.subclass("esri.renderers.support.UniqueValueInfo")],b)}(g.declared(h.JSONSupport));a.UniqueValueInfo=
    c;a.default=c})},"esri/symbols/support/styleUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../symbols ../../core/devEnvironmentUtils ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ../../support/featureFlags ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r){function t(a,b){return B(a,b).then(function(b){return{data:b.data,baseUrl:n.removeFile(a),styleUrl:a}})}
    function u(a,c,d){c=c.portal||b.getDefault();var e,f=c.url+" - "+(c.user&&c.user.username)+" - "+a;D[f]||(D[f]=w(a,c,d).then(function(a){e=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:e.itemUrl,styleName:a}}));return D[f]}function w(a,b,c){return b.load(c).then(function(){var d=new p({disableExtraQuery:!0,query:"owner:"+E+" AND type:"+C+' AND typekeywords:"'+a+'"'});return b.queryItems(d,c)}).then(function(b){b=b.results;var d=null,e=a.toLowerCase();if(b&&Array.isArray(b))for(var f=
    0;f<b.length;f++){var k=b[f];if(k.typeKeywords.some(function(a){return a.toLowerCase()===e})&&k.type===C&&k.owner===E){d=k;break}}if(!d)throw new g("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});return d.load(c)})}function v(a,b,c){return a.styleUrl?t(a.styleUrl,c):a.styleName?u(a.styleName,b,c):d.reject(new g("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function x(a,b,c,e,k){for(var p=a.data,
    m={portal:c.portal,url:n.urlToObject(a.baseUrl),origin:"portal-item"},u=function(d){if(d.name!==b)return"continue";var g=n.fromJSON(A(d,e),m),p=d.thumbnail&&d.thumbnail.href,u=d.thumbnail&&d.thumbnail.imageData;h.isDevEnvironment()&&(g=h.adjustStaticAGOUrl(g),p=h.adjustStaticAGOUrl(p));var t={portal:c.portal,url:n.urlToObject(n.removeFile(g)),origin:"portal-item"};return{value:B(g,k).then(function(d){d="cimRef"===e?z(d.data):d.data;if((d=q.fromJSON(d,t))&&l.isSymbol3D(d)){if(p){var k=n.fromJSON(p,
    m);d.thumbnail=new r.default({url:k})}else u&&(d.thumbnail=new r.default({url:"data:image/png;base64,"+u}));a.styleUrl?d.styleOrigin=new f({portal:c.portal,styleUrl:a.styleUrl,name:b}):a.styleName&&(d.styleOrigin=new f({portal:c.portal,styleName:a.styleName,name:b}))}return d})}},t=0,p=p.items;t<p.length;t++){var w=u(p[t]);if("object"===typeof w)return w.value}return d.reject(new g("symbolstyleutils:symbol-name-not-found","The symbol name '"+b+"' could not be found",{symbolName:b}))}function z(a){return null===
    a||"CIMSymbolReference"===a.type?a:{type:"CIMSymbolReference",symbol:a}}function A(a,b){if("cimRef"===b)return a.cimRef;if(a.formatInfos&&!k.enableWebStyleForceWOSR()){b=0;for(var c=a.formatInfos;b<c.length;b++){var d=c[b];if("gltf"===d.type)return d.href}}return a.webRef}function y(a,b,c){var d=F.replace(/\{SymbolName\}/gi,a.name);return B(d,c).then(function(a){a=z(a.data);return q.fromJSON(a,{portal:b.portal,url:n.urlToObject(n.removeFile(d)),origin:"portal-item"})})}function B(a,b){b=m({responseType:"json",
    query:{f:"json"}},b);return e(n.normalize(a),b)}Object.defineProperty(a,"__esModule",{value:!0});var D={};a.fetchStyle=v;a.resolveWebStyleSymbol=function(a,b,c,e){return a.name?a.styleName&&"Esri2DPointSymbolsStyle"===a.styleName?y(a,b,e):v(a,b,e).then(function(d){return x(d,a.name,b,c,e)}):d.reject(new g("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};a.fetchSymbolFromStyle=x;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=
    a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var E="esri_en",C="Style",F="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f\x3djson"})},"esri/core/devEnvironmentUtils":function(){define(["require","exports","./global"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.isDevEnvironment=function(a){a=a||m.location.hostname;return d.some(function(b){return null!=a.match(b)})};a.adjustStaticAGOUrl=
    function(a,b){if(!a)return a;b=b||m.location.hostname;return null!=b.match(e)||null!=b.match(h)?a.replace("static.arcgis.com","staticdev.arcgis.com"):null!=b.match(l)||null!=b.match(g)?a.replace("static.arcgis.com","staticqa.arcgis.com"):a};a.isTelemetryDevEnvironment=function(a){a=a||m.location.hostname;return[/^zrh-.+?\.esri\.com$/].concat(d).some(function(b){return null!=a.match(b)})};var e=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,h=/^[\w-]*\.mapsdevext.arcgis.com$/,g=/^[\w-]*\.mapsqa.arcgis.com$/,
    d=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,e,l,/^jsapps.esri.com$/,h,g]})},"esri/support/featureFlags":function(){define(["require","exports","../core/has"],function(c,a,m){function e(a,c){return!!m("enable-feature:"+a+"/"+c)}Object.defineProperty(a,"__esModule",{value:!0});a.hasEnableFeature=e;a.enableWebStyleForceWOSR=function(){return e("jschmid","force-wosr")};a.enableEditing3D=function(){return e("editing","3d")}})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/compilerUtils ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../DictionaryRenderer ../DotDensityRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k){function q(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new h("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:c})),null;b=a?t[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new h("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,
    context:c}));return null}function f(a,b){if(!b||"web-scene"!==b.origin)return!0;switch(a.type){case "simple":case "unique-value":case "class-breaks":return!0;case "heatmap":case "dictionary":case "dot-density":return!1;default:return m.neverReached(a),!1}}function r(a,b,c){return a?f(a,c)?a.write(b,c):(c.messages&&c.messages.push(new e("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):null}Object.defineProperty(a,"__esModule",
    {value:!0});var t={simple:p,uniqueValue:k,classBreaks:g,heatmap:b,dotDensity:n,dictionary:d};a.read=q;a.writeTarget=function(a,b,c,d){(a=r(a,{},d))&&l.setDeepValue(c,a,b)};a.write=r;a.fromJSON=function(a,b){return q(a,null,b)}})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin ./accessorSupport/read ./accessorSupport/utils ./accessorSupport/write".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){function k(a){return b.getProperties(a).store}Object.defineProperty(a,"__esModule",{value:!0});a.MultiOriginJSONMixin=function(a){return function(a){function c(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];var c=a.apply(this,c)||this,e=b.getProperties(c),d=e.metadatas,f=e.store,k=new g.default;e.store=k;f.keys().forEach(function(a){k.set(a,f.get(a),0)});Object.keys(d).forEach(function(a){e.internalGet(a)&&k.set(a,e.internalGet(a),0)});return c}m(c,a);
    c.prototype.clear=function(a,b){void 0===b&&(b="user");return k(this).delete(a,d.nameToId(b))};c.prototype.read=function(a,b){n.default(this,a,b)};c.prototype.write=function(a,b){a=a||{};p.default(this,a,b);return a};c.prototype.getAtOrigin=function(a,b){var c=k(this),e=d.nameToId(b);if("string"===typeof a)return c.get(a,e);var f={};a.forEach(function(a){f[a]=c.get(a,e)});return f};c.prototype.originOf=function(a){var b=k(this);if("string"===typeof a)return d.idToName(b.originOf(a));a.forEach(function(a){d.idToName(b.originOf(a))})};
    c.prototype.revert=function(a,c){var e=k(this),f=d.nameToId(c),g=b.getProperties(this);("string"===typeof a?"*"===a?e.keys(f):[a]:a).forEach(function(a){g.propertyInvalidated(a);e.revert(a,f);g.propertyCommitted(a)})};c.prototype.removeOrigin=function(a){var b=k(this);a=d.nameToId(a);for(var c=0,e=b.keys(a);c<e.length;c++){var f=e[c];b.originOf(f)===a&&b.set(f,b.get(f,a),6)}};c.prototype.updateOrigin=function(a,b){var c=k(this);b=d.nameToId(b);var e=this.get(a);c.delete(a);c.set(a,e,b)};return c=
    e([h.subclass("esri.core.MultiOriginJSONSupport")],c)}(h.declared(a))};c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b=e([h.subclass("esri.core.MultiOriginJSONSupport")],b)}(h.declared(a.MultiOriginJSONMixin(l)));a.MultiOriginJSONSupport=c;a.isMultiOriginJSONMixin=function(a){return a&&"getAtOrigin"in a&&"originOf"in a}})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","../arrayUtils"],function(c,a,m){Object.defineProperty(a,
    "__esModule",{value:!0});c=function(){function a(){this._propertyOriginMap=new Map;this._originStores=Array(7);this._values=new Map}a.prototype.get=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?c.get(a):void 0};a.prototype.keys=function(a){return(a=null==a?this._values:this._originStores[a])?m.keysOfMap(a):[]};a.prototype.set=function(a,c,e){void 0===e&&(e=6);var d=this._originStores[e];d||(d=new Map,this._originStores[e]=d);d.set(a,c);return!this._values.has(a)||this._propertyOriginMap.get(a)<=
    e?(d=this._values.get(a),this._values.set(a,c),this._propertyOriginMap.set(a,e),d!==c):!1};a.prototype.delete=function(a,c){void 0===c&&(c=6);var e=this._originStores[c];if(e){var d=e.get(a);e.delete(a);if(this._values.has(a)&&this._propertyOriginMap.get(a)===c)for(this._values.delete(a),--c;0<=c;c--)if((e=this._originStores[c])&&e.has(a)){this._values.set(a,e.get(a));this._propertyOriginMap.set(a,c);break}return d}};a.prototype.has=function(a,c){return(c=void 0===c?this._values:this._originStores[c])?
    c.has(a):!1};a.prototype.revert=function(a,c){for(;0<c&&!this.has(a,c);)--c;var e=this._originStores[c],e=e&&e.get(a),d=this._values.get(a);this._values.set(a,e);this._propertyOriginMap.set(a,c);return d!==e};a.prototype.originOf=function(a){return this._propertyOriginMap.get(a)||0};a.prototype.forEach=function(a){this._values.forEach(a)};return a}();a.default=c})},"esri/geometry/HeightModelInfo":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/arrayUtils ../core/jsonMap ../core/JSONSupport ../core/unitUtils ../core/Warning ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){function k(a,c){return new b("height-unit:unsupported","Height unit of value '"+a+"' is not supported",c)}function q(a,c){return new b("height-model:unsupported","Height model of value '"+a+"' is not supported",c)}var f=g.strict()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),r=f.jsonValues.slice();h.removeUnordered(r,"orthometric");var t=g.strict()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet",
    "clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});return function(a){function b(b){b=a.call(this,b)||this;b.heightModel="gravity-related-height";
    b.heightUnit="meters";b.vertCRS=null;return b}e(b,a);c=b;b.prototype.writeHeightModel=function(a,b,c){return f.write(a,b,c)};b.prototype.readHeightModel=function(a,b,c){if(b=f.read(a))return b;c&&c.messages&&c.messages.push(q(a,{context:c}));return null};b.prototype.readHeightUnit=function(a,b,c){if(b=t.read(a))return b;c&&c.messages&&c.messages.push(k(a,{context:c}));return null};b.prototype.readHeightUnitService=function(a,b,c){if(b=n.unitFromRESTJSON(a)||t.read(a))return b;c&&c.messages&&c.messages.push(k(a,
    {context:c}));return null};b.prototype.readVertCRS=function(a,b){return b.vertCRS||b.ellipsoid||b.geoid};b.prototype.clone=function(){return new c({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})};b.prototype.equals=function(a){return a?this===a?!0:this.heightModel===a.heightModel&&this.heightUnit===a.heightUnit&&this.vertCRS===a.vertCRS:!1};b.deriveUnitFromSR=function(a,b){b=n.getVerticalUnitStringForSR(b);return new c({heightModel:a.heightModel,heightUnit:b,vertCRS:a.vertCRS})};
    b.prototype.write=function(a,b){b=m({origin:"web-scene"},b);return this.inherited(arguments,[a,b])};b.fromJSON=function(a){if(!a)return null;var b=new c;b.read(a,{origin:"web-scene"});return b};var c;l([p.property({type:f.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:r,default:"ellipsoidal"}}}})],b.prototype,"heightModel",void 0);l([p.writer("web-scene","heightModel")],b.prototype,"writeHeightModel",null);l([p.reader(["web-scene","service"],"heightModel")],b.prototype,"readHeightModel",
    null);l([p.property({type:t.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:t.jsonValues,write:t.write}}}})],b.prototype,"heightUnit",void 0);l([p.reader("web-scene","heightUnit")],b.prototype,"readHeightUnit",null);l([p.reader("service","heightUnit")],b.prototype,"readHeightUnitService",null);l([p.property({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],b.prototype,"vertCRS",void 0);l([p.reader("service","vertCRS",["vertCRS","ellipsoid","geoid"])],b.prototype,
    "readVertCRS",null);return b=c=l([p.subclass("esri.geometry.HeightModelInfo")],b)}(p.declared(d.JSONSupport))})},"esri/layers/graphics/sources/MemorySource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../geometry ../../../Graphic ../../../core/Collection ../../../core/Error ../../../core/has ../../../core/Loadable ../../../core/Logger ../../../core/maybe ../../../core/Promise ../../../core/promiseUtils ../../../core/requireUtils ../../../core/workers ../../../core/accessorSupport/decorators ../../../core/accessorSupport/ensureType ../../../tasks/support/FeatureSet module".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y){Object.defineProperty(a,"__esModule",{value:!0});var B=0,D=f.getLogger("esri.layers.graphics.sources.MemorySource");l=function(a){function b(b){b=a.call(this,b)||this;b._idToClientGraphic=null;b.type="memory";return b}m(b,a);b.prototype.load=function(a){a=r.isSome(a)?a.signal:null;this.addResolvingPromise(this._startWorker(a));return this.when()};Object.defineProperty(b.prototype,"workerGeometryType",{get:function(){var a=this.layer&&this.layer.geometryType;
    return a?this._geometryTypeRequiresClientGraphicMapping(a)?"polygon":a:null},enumerable:!0,configurable:!0});b.prototype.applyEdits=function(a){var b=this;return this.load().then(function(){return b._applyEdits(a)})};b.prototype.openPorts=function(){var a=this;return this.load().then(function(){return a._connection.openPorts()})};b.prototype.queryFeatures=function(a,b){var c=this;void 0===b&&(b={});return this.load(b).then(function(){return c._connection.invoke("queryFeatures",a?a.toJSON():null,b)}).then(function(a){a=
    A.fromJSON(a);if(!c._requiresClientGraphicMapping())return a;for(var b=c.layer.objectIdField,d=0,e=a.features;d<e.length;d++){var f=e[d],k=c._idToClientGraphic.get(f.attributes[b]);k&&(f.geometry=k.geometry)}a.geometryType=c.layer.geometryType;return a})};b.prototype.queryFeaturesJSON=function(a,b){var c=this;void 0===b&&(b={});return this._requiresClientGraphicMapping()?u.reject(new p("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)")):
    this.load(b).then(function(){return c._connection.invoke("queryFeatures",a?a.toJSON():null,b)})};b.prototype.queryFeatureCount=function(a,b){var c=this;void 0===b&&(b={});return this.load(b).then(function(){return c._connection.invoke("queryFeatureCount",a?a.toJSON():null,b)})};b.prototype.queryObjectIds=function(a,b){var c=this;void 0===b&&(b={});return this.load(b).then(function(){return c._connection.invoke("queryObjectIds",a?a.toJSON():null,b)})};b.prototype.queryExtent=function(a,b){var c=this;
    void 0===b&&(b={});return this.load(b).then(function(){return c._connection.invoke("queryExtent",a?a.toJSON():null,b)}).then(function(a){return{count:a.count,extent:d.Extent.fromJSON(a.extent)}})};b.prototype._applyEdits=function(a){var b=this;if(!this._connection)throw new p("feature-layer-source:edit-failure","Memory source not loaded");var c=this.layer.objectIdField,d=null,e=[],f=[];a.addFeatures&&(d=this._prepareAddFeatures(a.addFeatures));if(a.deleteFeatures)for(var k=0,g=a.deleteFeatures;k<
    g.length;k++){var h=g[k];"objectId"in h&&null!=h.objectId?e.push(h.objectId):"attributes"in h&&null!=h.attributes[c]&&e.push(h.attributes[c])}if(a.updateFeatures)for(c=0,a=a.updateFeatures;c<a.length;c++)h=a[c],f.push(this._serializeFeature(h));return this._connection.invoke("applyEdits",{adds:d?d.features:[],updates:f,deletes:e}).then(function(a){var c=a.featureEditResults;b.fullExtent=a.fullExtent;d&&d.finish(c.uidToObjectId);if(b._idToClientGraphic){a=0;for(var e=c.deleteResults;a<e.length;a++){var f=
    e[a];f.success&&b._idToClientGraphic.delete(f.objectId)}}return b._createEditsResult(c)})};b.prototype._createEditsResult=function(a){return{addFeatureResults:a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}};b.prototype._createFeatureEditResult=
    function(a){var b=!0===a.success?null:a.error||{code:void 0,description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new p("feature-layer-source:edit-failure",b.description,{code:b.code}):null}};b.prototype._prepareAddFeatures=function(a){for(var b=new Map,c=Array(a.length),d=null,e=0;e<a.length;e++){var f=a[e],k=this._serializeFeature(f);!d&&r.isSome(f.geometry)&&(d=f.geometry.type);c[e]=k;b.set(""+k.uid,f)}var g=this;return{features:c,inferredGeometryType:d,finish:function(a){var c=
    g.sourceJSON.objectIdField,d;for(d in a){var e=a[d],f=b.get(d);f&&(f.attributes||(f.attributes={}),-1===e?delete f.attributes[c]:f.attributes[c]=e,g._addIdToClientGraphic(f))}}}};b.prototype._addIdToClientGraphic=function(a){if(this._idToClientGraphic){var b=this.sourceJSON.objectIdField,b=a.attributes&&a.attributes[b];null!=b&&this._idToClientGraphic.set(b,a)}};b.prototype._requiresClientGraphicMapping=function(){return this._geometryTypeRequiresClientGraphicMapping(this.layer.geometryType||this.sourceJSON.geometryType)};
    b.prototype._geometryRequiresClientGraphicMapping=function(a){return this._geometryTypeRequiresClientGraphicMapping(a.type)};b.prototype._geometryTypeRequiresClientGraphicMapping=function(a){return"mesh"===a||"multipatch"===a||"extent"===a};b.prototype._serializeFeature=function(a){var b=a.attributes;a=this._geometryForSerialization(a);var c=(B++).toString();return a?{uid:c,geometry:a.toJSON(),attributes:b}:{uid:c,attributes:b}};b.prototype._geometryForSerialization=function(a){a=a.geometry;return r.isNone(a)?
    null:this._geometryRequiresClientGraphicMapping(a)?d.Polygon.fromExtent(a.extent):a};b.prototype._startWorker=function(a){return g(this,void 0,void 0,function(){var b,e,f,g,n,l,p,q,m,r,u,t,x,z,F,A;return h(this,function(h){switch(h.label){case 0:return[3,2];case 1:h.sent(),h.label=2;case 2:return b=this,[4,v.open(w.getAbsMid("./support/MemorySourceWorker",c,y),{strategy:k("esri-workers-for-memory-layers")?"dedicated":"local",signal:a})];case 3:return b._connection=h.sent(),e=this.layer,f=e.fields,
    g=e.spatialReference,n=e.objectIdField,l=e.hasM,p=e.hasZ,q=e.timeInfo,m="defaults"===this.layer.originOf("spatialReference"),r=this._prepareAddFeatures(this.items),this.on("before-changes",function(a){D.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead");a.preventDefault()}),u={features:r.features,fields:f&&f.map(function(a){return a.toJSON()}),geometryType:d.typeKebabDictionary.toJSON(this.workerGeometryType),hasM:l,hasZ:p,objectIdField:n,
    spatialReference:m?null:g&&g.toJSON(),timeInfo:q?q.toJSON():null},[4,this._connection.invoke("load",u,{signal:a})];case 4:t=h.sent();x=0;for(z=t.warnings;x<z.length;x++)F=z[x],D.warn(F.message,{layer:this.layer,warning:F});t.featureErrors.length&&D.warn("Encountered "+t.featureErrors.length+" validation errors while loading features",t.featureErrors);A=t.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(r.inferredGeometryType)&&(A.geometryType=d.typeKebabDictionary.toJSON(r.inferredGeometryType));
    this.sourceJSON=A;this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map);r.finish(t.assignedObjectIds);return[2]}})})};e([x.shared({Type:n,ensureType:z.ensureType(n)})],b.prototype,"itemType",void 0);e([x.property()],b.prototype,"type",void 0);e([x.property({constructOnly:!0})],b.prototype,"layer",void 0);e([x.property({readOnly:!0,dependsOn:["layer.geometryType"]})],b.prototype,"workerGeometryType",null);e([x.property()],b.prototype,"sourceJSON",void 0);return b=e([x.subclass("esri.layers.graphics.sources.MemorySource")],
    b)}(x.declared(q.LoadableMixin(t.EsriPromiseMixin(b))));a.MemorySource=l;a.default=l})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./symbols ./core/JSONSupport ./core/lang ./core/maybe ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){c=function(a){function c(b,c,d,e){b=a.call(this,
    b,c,d,e)||this;b.layer=null;b.popupTemplate=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:n.generateUID()});return b}e(c,a);n=c;c.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(c.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,
    configurable:!0});c.prototype.getEffectivePopupTemplate=function(a){void 0===a&&(a=!1);return this.popupTemplate?this.popupTemplate:this.sourceLayer?this.sourceLayer.popupTemplate?this.sourceLayer.popupTemplate:a&&p.isSome(this.sourceLayer.defaultPopupTemplate)?this.sourceLayer.defaultPopupTemplate:null:null};c.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};c.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",
    c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a))};c.prototype.getObjectId=function(){return this.sourceLayer?"type"in this.sourceLayer&&"stream"===this.sourceLayer.type?this.getAttribute("__esri_stream_id__"):this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null:null};c.prototype.toJSON=function(){return{geometry:p.isSome(this.geometry)?this.geometry.toJSON():null,symbol:p.isSome(this.symbol)?this.symbol.toJSON():null,attributes:m({},
    this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};c.prototype.clone=function(){return new n(this.cloneProperties())};c.prototype.cloneProperties=function(){return{attributes:b.clone(this.attributes),geometry:b.clone(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:b.clone(this.symbol),visible:this.visible}};c.prototype._notifyLayer=function(a,b,c,d){this.layer&&this.layer.graphicChanged&&
    (b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=d),this.layer.graphicChanged(b))};var n;l([k.property({value:null})],c.prototype,"attributes",null);l([k.property({value:null,types:h.geometryTypes,json:{read:q.fromJSON}})],c.prototype,"geometry",null);l([k.property()],c.prototype,"layer",void 0);l([k.property({type:g})],c.prototype,"popupTemplate",void 0);l([k.property()],c.prototype,"sourceLayer",void 0);l([k.property({value:null,types:d.symbolTypes,json:{read:f.read}})],
    c.prototype,"symbol",null);l([k.property({type:Boolean,value:!0,set:function(a){}})],c.prototype,"visible",null);return c=n=l([k.subclass("esri.Graphic")],c)}(k.declared(n.JSONSupport));var r=0;(function(a){a.generateUID=function(){return r++}})(c||(c={}));return c})},"esri/core/requireUtils":function(){define(["require","exports","./deprecate","./Logger","./promiseUtils"],function(c,a,m,e,l){function h(a,c){m.deprecatedFunction(g,"when",{moduleName:"requireUtils",replacement:"Use `promiseUtils.create()` instead.",
    version:"4.10",warnOnce:!0});return Array.isArray(c)?l.create(function(b){a(c,function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];b(a)})}):h(a,[c]).then(function(a){return a[0]})}Object.defineProperty(a,"__esModule",{value:!0});var g=e.getLogger("esri.core.requireUtils");a.when=h;a.getAbsMid=function(a,c,b){return c.toAbsMid?c.toAbsMid(a):b.id.replace(/\/[^\/]*$/gi,"/")+a}})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(c,a,m){Object.defineProperty(a,
    "__esModule",{value:!0});for(var e in m)a.hasOwnProperty(e)||(a[e]=m[e])})},"esri/core/workers/workers":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../Error ../has ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),function(c,a,m,e,l,h,g,d,n,b){function p(){return e(this,void 0,void 0,function(){var a,c,d;return m(this,function(e){if(r)return[2,r];t=g.createAbortController();a=[];c=function(c){var d=b.create(c).then(function(a){return f[c]=
    a});a.push(d)};for(d=0;d<k;d++)c(d);r=g.all(a);return[2,r]})})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=d;a.RemoteClient=n;var k=h("esri-workers-debug")?1:h("host-browser")?navigator.hardwareConcurrency-1:0;k||(k=h("safari")&&h("mac")||h("trident")?7:2);var q=0,f=[];a.initialize=function(){p()};a.openWithPorts=function(b,c){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,c,{})}))};a.open=function(b,d){void 0===d&&(d={});return e(this,void 0,void 0,function(){var e,
    n,r,t,u,w,D;return m(this,function(m){switch(m.label){case 0:if("string"!==typeof b)throw new l("workers:undefined-module","modulePath is missing");e=d.signal;n=d.strategy||"distributed";h("host-webworker")&&!h("esri-workers")&&(n="local");return"local"!==n?[3,2]:[4,g.create(function(a){return c([b],a)})];case 1:return r=m.sent(),g.throwIfAborted(e),t=d.client||r,u=a.RemoteClient.connect(r),[2,new a.Connection([new a.RemoteClient(u,t,d)])];case 2:return[4,p()];case 3:m.sent();g.throwIfAborted(e);
    if("dedicated"!==n)return[3,5];w=q++;q%=k;return[4,f[w].open(b,d)];case 4:return u=m.sent(),[2,new a.Connection([new a.RemoteClient(u,d.client,d)])];case 5:return[4,g.all(f.map(function(a){return a.open(b,d)}))];case 6:return D=m.sent(),[2,new a.Connection(D.map(function(b){return new a.RemoteClient(b,d.client,d)}))]}})})};a.terminate=function(){r&&(t.abort(),r=null);for(var a=0;a<f.length;a++)f[a]&&f[a].terminate();f.length=0};var r=null,t})},"esri/core/workers/Connection":function(){define(["require",
    "exports","../Logger","../promiseUtils","../accessorSupport/utils"],function(c,a,m,e,l){var h=m.getLogger("esri.core.workers.Connection");return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,c,b){for(var d=[],e=0,g=this._clients;e<g.length;e++)d.push(g[e].invoke(a,c,b));return d};a.prototype.close=function(){for(var a=0,c=this._clients;a<c.length;a++)c[a].close();this._clients=[]};a.prototype.getAvailableClient=function(){var a;this._clients.some(function(c){return c.isBusy()?
    !1:(a=c,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,a=this._clients[this._clientIdx]);return a};a.prototype.invoke=function(a,c,b){var d=null;Array.isArray(b)?(h.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),d={transferList:b}):d=b;return this._clients&&this._clients.length?this.getAvailableClient().invoke(a,c,d):e.reject(Error("Connection closed"))};a.prototype.on=function(a,c){var b=this._clients.map(function(b){return b.on(a,c)});
    return l.handlesGroup(b)};a.prototype.openPorts=function(){return this._clients.map(function(a){return a.openPort()})};return a}()})},"esri/core/workers/RemoteClient":function(){define("require exports ../Error ../events ../promiseUtils ./utils ../../views/support/Scheduler".split(" "),function(c,a,m,e,l,h,g){var d=h.MessageType.CLOSE,n=h.MessageType.ABORT,b=h.MessageType.INVOKE,p=h.MessageType.RESPONSE,k=h.MessageType.OPEN_PORT,q=h.MessageType.ON,f=function(){function a(a){this._timer=null;this._cancelledJobIds=
    new Set;this._invokeMessages=[];this._invoke=a;this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a){a.type===h.MessageType.ABORT?this._cancelledJobIds.add(a.jobId):(this._invokeMessages.push(a),null===this._timer&&(this._timer=setTimeout(this._process,0)))};a.prototype.clear=function(){this._invokeMessages.length=0;this._cancelledJobIds.clear();this._timer=null};a.prototype._process=function(){this._timer=null;for(var a=0,b=this._invokeMessages;a<b.length;a++){var c=
    b[a];this._cancelledJobIds.has(c.jobId)||this._invoke(c)}this._cancelledJobIds.clear();this._invokeMessages.length=0};return a}();return function(){function a(a,b,c){var d=this;this._port=a;this._client=b;this._outJobs=new Map;this._inJobs=new Map;this._invokeQueue=new f(function(a){return d._onInvokeMessage(a)});this._responseQueue=[];this._onMessage=this._onMessage.bind(this);this._channel=c.channel;c.scheduler&&(this._frameTask=c.scheduler.registerTask(g.Task.REMOTE_CLIENT,function(a){return d._update(a)},
    function(){return 0<d._responseQueue.length}));this._port.addEventListener("message",this._onMessage);this._port.start()}a.connect=function(b){var c=new MessageChannel;b="function"===typeof b?new b:"default"in b&&"function"===typeof b.default?new b.default:b;b.remoteClient=new a(c.port1,b,{channel:c});return c.port2};a.prototype.close=function(){this._post({type:d});this._close()};a.prototype.isBusy=function(){return 0<this._outJobs.size};a.prototype.invoke=function(a,c,d){var e=this,f=d&&d.signal,
    k=d&&d.transferList;if(!this._port)return l.reject(new m("remote-client:port-closed","Can't invoke(), port is closed"));var g=h.newJobId(),p=function(){var a=e._outJobs.get(g);a&&(e._outJobs["delete"](g),e._post({type:n,jobId:g}),a.reject(l.createAbortError()))};return l.create(function(d,h){l.onAbortOrThrow(f,function(){p();h(l.createAbortError())});e._outJobs.set(g,{resolve:d,reject:h});e._post({type:b,jobId:g,methodName:a,abortable:!0},c,k)},p)};a.prototype.on=function(a,b){function c(a){b(a.data)}
    var d=new MessageChannel;this._port.postMessage({type:h.MessageType.ON,eventType:a,port:d.port2},[d.port2]);d.port1.addEventListener("message",c);d.port1.start();return{remove:function(){d.port1.postMessage({type:h.MessageType.CLOSE});d.port1.close();d.port1.removeEventListener("message",c)}}};a.prototype.openPort=function(){var a=new MessageChannel;this._post({type:k,port:a.port2});return a.port1};a.prototype._close=function(){this._channel&&(this._channel=null);this._port.removeEventListener("message",
    this._onMessage);this._port.close();this._outJobs.forEach(function(a){return a.reject(l.createAbortError("Abort job: worker closing"))});this._inJobs.clear();this._outJobs.clear();this._invokeQueue.clear();this._port=this._client=null;this._frameTask&&this._frameTask.remove();this._responseQueue=this._frameTask=null};a.prototype._onMessage=function(a){if(a=h.receiveMessage(a))switch(a.type){case p:this._onResponseMessage(a);break;case b:this._invokeQueue.push(a);break;case n:this._onAbortMessage(a);
    break;case d:this._onCloseMessage();break;case k:this._onOpenPortMessage(a);break;case q:this._onOnMessage(a)}};a.prototype._onAbortMessage=function(a){var b=this._inJobs,c=a.jobId,d=b.get(c);this._invokeQueue.push(a);d&&(d.controller&&d.controller.abort(),b["delete"](c))};a.prototype._onCloseMessage=function(){var a=this._client;this._close();a&&a.remoteClient===this&&"destroy"in a&&a.destroy();a.remoteClient=null};a.prototype._onInvokeMessage=function(a){var b=this,c=a.methodName,d=a.jobId,e=a.data;
    a=a.abortable?l.createAbortController():null;var f=this._inJobs,k=this._client,g=k[c],n;try{if(!g&&c&&-1!==c.indexOf("."))for(var q=c.split("."),m=0;m<q.length-1;m++)k=k[q[m]],g=k[q[m+1]];if("function"!==typeof g)throw new TypeError(c+" is not a function");n=g.call(k,e,{client:this,signal:a?a.signal:null})}catch(C){this._post({type:p,jobId:d,error:h.toInvokeError(C)});return}if(l.isPromiseLike(n)){f.set(d,{controller:a,promise:n});if(a&&"cancel"in n)l.onAbort(a.signal,function(){return n.cancel()});
    n.then(function(a){f.has(d)&&(f["delete"](d),b._post({type:p,jobId:d},a))},function(a){f.has(d)&&(f["delete"](d),l.isAbortError(a)||b._post({type:p,jobId:d,error:h.toInvokeError(a||{message:"Error encountered at method "+c})}))})}else this._post({type:p,jobId:d},n)};a.prototype._onOpenPortMessage=function(b){new a(b.port,this._client,{})};a.prototype._onOnMessage=function(a){var b=a.port,c=this._client.on(a.eventType,function(a){delete a.target;b.postMessage(a)}),d=e.on(a.port,"message",function(a){h.receiveMessage(a).type===
    h.MessageType.CLOSE&&(d.remove(),c.remove(),b.close())})};a.prototype._onResponseMessage=function(a){this._frameTask?this._responseQueue.push(a):this._handleResponse(a)};a.prototype._update=function(a){for(;!a.done&&0<this._responseQueue.length;)this._handleResponse(this._responseQueue.shift()),a.madeProgress()};a.prototype._handleResponse=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs;if(d.has(b)){var e=d.get(b);d["delete"](b);c?e.reject(m.fromJSON(JSON.parse(c))):e.resolve(a)}};
    a.prototype._post=function(a,b,c){return h.postMessage(this._port,a,b,c)};return a}()})},"esri/core/workers/utils":function(){define(["require","exports","../has"],function(c,a,m){function e(a){return a&&"object"===typeof a&&("result"in a||"transferList"in a)}function l(a){if(!a||!a.length)return null;if(m("esri-workers-arraybuffer-transfer"))return a;a=a.filter(function(a){return!(a instanceof ArrayBuffer||a&&a.constructor&&"ArrayBuffer"===a.constructor.name)});return a.length?a:null}Object.defineProperty(a,
    "__esModule",{value:!0});var h;(function(a){a[a.HANDSHAKE=0]="HANDSHAKE";a[a.CONFIGURE=1]="CONFIGURE";a[a.CONFIGURED=2]="CONFIGURED";a[a.OPEN=3]="OPEN";a[a.OPENED=4]="OPENED";a[a.RESPONSE=5]="RESPONSE";a[a.INVOKE=6]="INVOKE";a[a.ABORT=7]="ABORT";a[a.CLOSE=8]="CLOSE";a[a.OPEN_PORT=9]="OPEN_PORT";a[a.ON=10]="ON"})(h=a.MessageType||(a.MessageType={}));var g=0;a.newJobId=function(){return g++};a.isTranferableResult=e;a.toInvokeError=function(a){return a?a.toJSON?JSON.stringify(a):JSON.stringify({name:a.name,
    message:a.message,details:a.details,stack:a.stack}):null};a.postMessage=function(a,c,b,g){c.type===h.OPEN_PORT?a.postMessage(c,[c.port]):c.type!==h.INVOKE&&c.type!==h.RESPONSE?a.postMessage(c):(e(b)?(g=l(b.transferList),c.data=b.result):(g=l(g),c.data=b),g?a.postMessage(c,g):a.postMessage(c))};a.receiveMessage=function(a){return a?(a=a.data)?"string"===typeof a?JSON.parse(a):a:null:null}})},"esri/views/support/Scheduler":function(){define("require exports @dojo/framework/shim/number ../../core/maybe ../../core/now ../../core/PooledArray ../../core/watchUtils ./debugFlags".split(" "),
    function(c,a,m,e,l,h,g,d){function n(b){return b in a.taskPriorities?a.taskPriorities[b]:"number"===typeof b?b:1}Object.defineProperty(a,"__esModule",{value:!0});var b;a.newScheduler=function(a){return new p.Scheduler(a)};(function(a){a.REMOTE_CLIENT="remote client";a.STREAM_DATA_LOADER="stream data loader";a.TERRAIN_SURFACE="terrain surface";a.SURFACE_GEOMETRY_UPDATES="surface geometry updates";a.I3S_CONTROLLER="I3s controller";a.POINT_CLOUD_LAYER="point cloud";a.FEATURE_TILE_FETCHER="feature fetcher";
    a.DECONFLICTOR_IMMEDIATE="fast deconflictor";a.DECONFLICTOR_DELAYED="delayed deconflictor";a.GRAPHICS_CORE="Graphics3D";a.FILTER_VISIBILITY="Graphics3D filter visibility";a.FEATURE_QUERY_ENGINE="feature query";a.SCALE_VISIBILITY="Graphics3D scale visibility";a.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";a.POINT_OF_INTEREST_FREQUENT="POI frequent";a.POINT_OF_INTEREST_INFREQUENT="POI infrequent";a.LABELER="labeler";a.FEATURE_TILE_TREE="feature tile tree";a.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";
    a.ELEVATION_ALIGNMENT="elevation alignment";a.TEXT_TEXTURE_ATLAS="text texture atlas";a.OVERLAY_MANAGER="overlay manager";a.INTERACTIVE_TOOL="interactive tool";a[a.TEST_PRIO=1]="TEST_PRIO"})(c=a.Task||(a.Task={}));a.taskPriorities=(b={},b[c.REMOTE_CLIENT]=1,b[c.STREAM_DATA_LOADER]=1,b[c.TERRAIN_SURFACE]=1,b[c.SURFACE_GEOMETRY_UPDATES]=1,b[c.I3S_CONTROLLER]=2,b[c.POINT_CLOUD_LAYER]=2,b[c.FEATURE_TILE_FETCHER]=2,b[c.DECONFLICTOR_IMMEDIATE]=2,b[c.DECONFLICTOR_DELAYED]=12,b[c.GRAPHICS_CORE]=3,b[c.FILTER_VISIBILITY]=
    4,b[c.FEATURE_QUERY_ENGINE]=4,b[c.SCALE_VISIBILITY]=6,b[c.FRUSTUM_VISIBILITY]=6,b[c.POINT_OF_INTEREST_FREQUENT]=6,b[c.POINT_OF_INTEREST_INFREQUENT]=30,b[c.LABELER]=8,b[c.FEATURE_TILE_TREE]=12,b[c.FEATURE_TILE_TREE_ACTIVE]=1,b[c.ELEVATION_ALIGNMENT]=12,b[c.TEXT_TEXTURE_ATLAS]=12,b[c.OVERLAY_MANAGER]=12,b[c.INTERACTIVE_TOOL]=16,b);a.getTaskPriority=n;var p;(function(a){var b=function(){function b(b){var c=this;this._now=b;this._budget=null;this._state=1;this._tasks=new h;this._runQueue=new h;this._load=
    0;this._idleStateCallbacks=new h;this._idleUpdatesStartFired=!1;this._maxReschedule=q;this._forceTask=!1;this._safetyBudget=0;this._debug=!1;this._debugHandle=g.init(d,"SCHEDULER_LOG_SLOW_TASKS",function(a){return c._debug=a});this._budget=new a.Budget(b);var e=this;this._test={state:void 0,FRAME_SAFETY_BUDGET:1,idleBudget:100,get budget(){return e._budget.budget},usedBudget:0,startTime:0,updateTask:function(a){return c._updateTask(a)},getState:function(a){return c._getState(a)},getRuntime:function(a){return c._getRuntime(a)}}}
    b.prototype.destroy=function(){this._debugHandle&&this._debugHandle.remove()};b.prototype.registerTask=function(a,b,d){var e=this,f=n(a),k=new c(a,b,d,f);this._tasks.push(k);return{remove:function(){return e._removeTask(k)},set task(a){k.setPriority(a)}}};b.prototype.registerIdleStateCallbacks=function(a,b){var c=this,d={idleBegin:a,idleEnd:b};this._idleStateCallbacks.push(d);2===this.state&&this._idleUpdatesStartFired&&d.idleBegin();var e=this;return{remove:function(){return c._removeIdleStateCallbacks(d)},
    set idleBegin(a){e._idleUpdatesStartFired&&(d.idleEnd(),2===e._state&&a());d.idleBegin=a},set idleEnd(a){d.idleEnd=a}}};Object.defineProperty(b.prototype,"now",{get:function(){return this._now()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"load",{get:function(){return this._load},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"state",{get:function(){return e.isNone(this._test.state)?this._state:this._test.state},set:function(a){this._state!==a&&(this._state=
    a,2!==this.state&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forEach(function(a){return a.idleEnd()})))},enumerable:!0,configurable:!0});b.prototype.updateBudget=function(a){var b=2===this.state,c=a.frameDuration;switch(this.state){case 2:c=100;break;case 1:c=Math.max(33,a.frameDuration);break;case 0:c=a.frameDuration}this._safetyBudget=b?0:1;c-=a.elapsedFrameTime+this._safetyBudget;this._test.usedBudget=0;this._test.startTime=a.elapsedFrameTime;if(!b&&0>
    c&&!this._forceTask)return this._forceTask=!0,!1;c=Math.max(c,5);this._budget.reset(c,b);this._maxReschedule=q;this._updateLoad();return this._schedule()};b.prototype.frame=function(){this._forceTask=!1;switch(this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forEach(function(a){return a.idleBegin()}));this._runIdle();break;case 1:this._runMoving();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed};b.prototype._removeIdleStateCallbacks=
    function(a){this._idleUpdatesStartFired&&a.idleEnd();this._idleStateCallbacks.removeUnordered(a)};b.prototype._removeTask=function(a){this._tasks.removeUnordered(a);this._runQueue.removeUnordered(a)};b.prototype._updateTask=function(a){this._tasks.forEach(function(b){b.name===a&&b.setPriority(a)})};b.prototype._getState=function(a){if(this._runQueue.some(function(b){return b.name===a}))return k.SCHEDULED;var b=k.IDLE;this._tasks.forEach(function(c){c.name===a&&c.needsUpdate()&&(1>=c.schedule?b=k.READY:
    b!==k.READY&&(b=k.WAITING))});return b};b.prototype._getRuntime=function(a){var b=0;this._tasks.forEach(function(c){c.name===a&&(b+=c.runtime)});return b};b.prototype._runIdle=function(){this._run()};b.prototype._runMoving=function(){this._run()};b.prototype._runAnimating=function(){this._run()};b.prototype._updateLoad=function(){var a=0;this._tasks.forEach(function(b){return b.needsUpdate()?++a:a});this._load=.9*this._load+a*(1-.9)};b.prototype._schedule=function(){var a=this;if(0>=this._maxReschedule)return!1;
    this._runQueue.filterInPlace(function(a){if(a.needsUpdate())return!0;a.schedule=a.priority;return!1});for(var b=function(){var b=!1,d=0;c._tasks.forEach(function(c){if(c.needsUpdate())switch(b=!0,d=Math.max(d,c.priority),c.schedule){case 0:break;case 1:c.schedule=0;a._runQueue.push(c);break;default:--c.schedule}});if(!b)return{value:!1};c._maxReschedule===q&&(c._maxReschedule=d);--c._maxReschedule},c=this;0===this._runQueue.length;){var d=b();if("object"===typeof d)return d.value}return!0};b.prototype._run=
    function(){do for(;0<this._runQueue.length;){var a=this._runQueue.pop();this._budget.resetProgress();var b=this._budget.now();a.update(this._budget);a.schedule=a.priority;a.runtime+=this._budget.now()-b;this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",a.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms");if(0>=this._budget.remaining)return}while(this._schedule())};Object.defineProperty(b.prototype,"test",{get:function(){return this._test},enumerable:!0,configurable:!0});
    return b}();a.Scheduler=b;var c=function(){function a(a,b,c,d){this.name=a;this.update=b;this.needsUpdate=c;this._priority=d;this.runtime=0;this.schedule=this._priority}Object.defineProperty(a.prototype,"priority",{get:function(){return this._priority},enumerable:!0,configurable:!0});a.prototype.setPriority=function(a){var b=n(a);this.name=a;this._priority=b;0!==this.schedule&&(this.schedule=b)};return a}(),b=function(){function a(a){this.now=a;this._budget=this._begin=0;this._didWork=this._idle=
    !1;this._enabled=!0}a.prototype.run=function(a){if(this.done)return!1;!0===a()&&(this._didWork=!0);return!0};Object.defineProperty(a.prototype,"done",{get:function(){return this._didWork&&this.elapsed>=this._budget&&this._enabled},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"budget",{get:function(){return this._budget},enumerable:!0,configurable:!0});a.prototype.madeProgress=function(){this._didWork=!0};Object.defineProperty(a.prototype,"idleFrame",{get:function(){return this._idle},
    enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"enabled",{get:function(){return this._enabled},set:function(a){this._enabled=a},enumerable:!0,configurable:!0});a.prototype.reset=function(a,b){this._begin=this.now();this._budget=a;this._idle=b;this._didWork=!1};Object.defineProperty(a.prototype,"remaining",{get:function(){return Math.max(this._budget-this.elapsed,0)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"elapsed",{get:function(){return this.now()-this._begin},
    enumerable:!0,configurable:!0});a.prototype.resetProgress=function(){this._didWork=!1};Object.defineProperty(a.prototype,"hasProgressed",{get:function(){return this._didWork},enumerable:!0,configurable:!0});return a}();a.Budget=b})(p||(p={}));var k;(function(a){a.SCHEDULED="s";a.READY="r";a.WAITING="w";a.IDLE="i"})(k=a.TaskState||(a.TaskState={}));a.noBudget=function(){var a=new p.Budget(l);a.enabled=!1;return a}();var q=m.MAX_SAFE_INTEGER})},"esri/core/watchUtils":function(){define("require exports ./events ./has ./lang ./promiseUtils".split(" "),
    function(c,a,m,e,l,h){function g(a,b,c,d,e){e=a.watch(b,function(b,e,f,k){c&&!c(b)||d.call(a,b,e,f,k)},e);if(Array.isArray(b))for(var f=0;f<b.length;f++){var k=a.get(b[f]);c&&c(k)&&d.call(a,k,k,b,a)}else k=a.get(b),c&&c(k)&&d.call(a,k,k,b,a);return e}function d(a,b,c,d,f){function k(){q&&(q.remove(),q=null)}var n="function"===typeof d?d:null,l="object"===typeof d?d:null;"boolean"===typeof d&&(f=d);var p=!1,q,m=h.createDeferred(k);h.onAbort(l,function(){k();m.reject(h.createAbortError())});d=e("esri-native-promise")?
    {then:m.promise.then.bind(m.promise),catch:m.promise.catch.bind(m.promise),remove:k}:{cancel:m.cancel,then:m.promise.then.bind(m.promise),catch:m.promise.catch.bind(m.promise),remove:k};Object.freeze(d);q=g(a,b,c,function(b,c,d,e){p=!0;k();n&&n.call(a,b,c,d,e);m.resolve({value:b,oldValue:c,propertyName:d,target:e})},f);p&&k();return d}function n(a){return!!a}function b(a){return!a}function p(a){return!0===a}function k(a){return!1===a}function q(a){return void 0!==a}function f(a){return void 0===a}
    function r(a,b,c,d){var e=Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b];b=a.watch(b,c,d);for(d=0;d<e.length;d++){var f=e[d].trim().replace(t,"$1"),k=a.get(f);c.call(a,k,k,f,a)}return b}Object.defineProperty(a,"__esModule",{value:!0});a.whenValidOnce=d;var t=/\?(\.|$)/g;a.init=r;a.watch=function(a,b,c,d){return a.watch(b,c,d)};a.once=function(a,b,c,e){return d(a,b,null,c,e)};a.when=function(a,b,c,d){return g(a,b,n,c,d)};a.whenOnce=function(a,b,c,e){return d(a,b,n,c,e)};a.whenNot=function(a,
    c,d,e){return g(a,c,b,d,e)};a.whenNotOnce=function(a,c,e,f){return d(a,c,b,e,f)};a.whenTrue=function(a,b,c,d){return g(a,b,p,c,d)};a.whenTrueOnce=function(a,b,c,e){return d(a,b,p,c,e)};a.whenFalse=function(a,b,c,d){return g(a,b,k,c,d)};a.whenFalseOnce=function(a,b,c,e){return d(a,b,k,c,e)};a.whenDefined=function(a,b,c,d){return g(a,b,q,c,d)};a.whenDefinedOnce=function(a,b,c,e){return d(a,b,q,c,e)};a.whenUndefined=function(a,b,c,d){return g(a,b,f,c,d)};a.whenUndefinedOnce=function(a,b,c,e){return d(a,
    b,f,c,e)};a.whenEqual=function(a,b,c,d,e){return g(a,b,function(a){return l.equals(c,a)},d,e)};a.whenEqualOnce=function(a,b,c,e,f){return d(a,b,function(a){return l.equals(c,a)},e,f)};a.pausable=function(a,b,c,d){var e=!1,f=a.watch(b,function(b,d,f,k){e||c.call(a,b,d,f,k)},d);return{remove:function(){f.remove()},pause:function(){e=!0},resume:function(){e=!1}}};a.on=function(a,b,c,d,e,f,k){function g(b){var d=h[b];d&&(f&&f(d.target,b,a,c),d.handle.remove(),delete h[b])}var h={},n=r(a,b,function(b,
    f,k){g(k);m.isEventTarget(b)&&(h[k]={handle:m.on(b,c,d),target:b},e&&e(b,k,a,c))},k);return{remove:function(){n.remove();for(var a in h)g(a)}}}})},"esri/views/support/debugFlags":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){return new (function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.SCHEDULER_LOG_SLOW_TASKS=!1;return c}
    e(c,a);m([h.property()],c.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);return c=m([h.subclass("esri.views.support.DebugFlags")],c)}(h.declared(l)))})},"esri/core/workers/WorkerOwner":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(c,a,m,e,l,h,g,d,n,b){function p(a,b){a["delete"](b)}var k=g.getLogger("esri.core.workers"),q=n.MessageType.ABORT,f=n.MessageType.INVOKE,
    r=n.MessageType.OPEN,t=n.MessageType.OPENED,u=n.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();k.error(a)})}a.create=function(c){return e(this,void 0,void 0,function(){var d;return m(this,function(e){switch(e.label){case 0:return[4,b.createWorker()];case 1:return d=e.sent(),[2,new a(d,c)]}})})};a.prototype.terminate=
    function(){this.worker.terminate()};a.prototype.open=function(a,b){void 0===b&&(b={});return e(this,void 0,void 0,function(){var c,e,f=this;return m(this,function(k){c=b.signal;e=n.newJobId();return[2,d.create(function(b,k){b={resolve:b,reject:k};d.onAbortOrThrow(c,function(){p(f._outJobs,e);f._post({type:q,jobId:e})});f._outJobs.set(e,b);f._post({type:r,jobId:e,modulePath:a})})]})})};a.prototype._onMessage=function(a){if(a=n.receiveMessage(a))switch(a.type){case t:this._onOpenedMessage(a);break;
    case u:this._onResponseMessage(a);break;case q:this._onAbortMessage(a);break;case f:this._onInvokeMessage(a)}};a.prototype._onAbortMessage=function(a){var b=this._inJobs;a=a.jobId;var c=b.get(a);c&&(c.controller&&c.controller.abort(),p(b,a))};a.prototype._onInvokeMessage=function(a){var b=this,c=a.methodName,e=a.jobId,f=a.data;a=a.abortable?d.createAbortController():null;var k=this._inJobs,g=l.workerMessages[c],h;try{if("function"!==typeof g)throw new TypeError(c+" is not a function");h=g.call(null,
    f,{signal:a?a.signal:null})}catch(C){this._post({type:u,jobId:e,error:n.toInvokeError(C)});return}if(d.isPromiseLike(h)){k.set(e,{controller:a,promise:h});if(a&&"cancel"in h)d.onAbort(a.signal,function(){return h.cancel()});h.then(function(a){k.has(e)&&(p(k,e),b._post({type:u,jobId:e},a))},function(a){k.has(e)&&(p(k,e),a||(a={message:"Error encountered at method"+c}),d.isAbortError(a)||b._post({type:u,jobId:e,error:n.toInvokeError(a||{message:"Error encountered at method "+c})}))})}else this._post({type:u,
    jobId:e},h)};a.prototype._onOpenedMessage=function(a){var b=a.jobId;a=a.data;var c=this._outJobs.get(b);c&&(p(this._outJobs,b),c.resolve(a))};a.prototype._onResponseMessage=function(a){var b=a.jobId,c=a.error;a=a.data;var d=this._outJobs.get(b);d&&(p(this._outJobs,b),c?d.reject(h.fromJSON(JSON.parse(c))):d.resolve(a))};a.prototype._post=function(a,b,c){return n.postMessage(this.worker,a,b,c)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper ../tsSupport/generatorHelper ../tsSupport/awaiterHelper dojo/_base/kernel ../../config ../has ../Logger ../promiseUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q){function f(a){return l(this,void 0,void 0,function(){return e(this,function(c){return[2,b.create(function(b){function c(f){if(f=k.receiveMessage(f))switch(f.type){case w:f=a;var n=g.workers.loaderUrl||p.DEFAULT_LOADER_URL,l;null!=g["default"]?(l=m({},g),delete l["default"],l=JSON.parse(JSON.stringify(l))):l=JSON.parse(JSON.stringify(g));var q=g.workers.loaderConfig,q=p.default({baseUrl:q.baseUrl,locale:h.locale,has:m({"config-deferredInstrumentation":0,"csp-restrictions":d("csp-restrictions"),
    "dojo-test-sniff":0,"esri-native-promise":d("esri-native-promise"),"esri-secure-context":d("esri-secure-context"),"esri-workers-arraybuffer-transfer":d("esri-workers-arraybuffer-transfer"),"events-keypress-typed":0,"host-webworker":1,"esri-webgl-texture-float":d("esri-webgl-texture-float"),"esri-shared-array-buffer":d("esri-shared-array-buffer"),"esri-atomics":d("esri-atomics"),"esri-2d-debug":0,"esri-webgl-max-texture-size":d("esri-webgl-max-texture-size")},q.has),map:m({},q.map),paths:m({},q.paths),
    packages:q.packages||[]});f.postMessage({type:u,configure:{esriConfig:l,loaderUrl:n,loaderConfig:q}});break;case t:a.removeEventListener("message",c),a.removeEventListener("error",e),b(a)}}function e(b){b.preventDefault();a.removeEventListener("message",c);a.removeEventListener("error",e);r.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new q;a.addEventListener("message",c);a.addEventListener("error",e)}a.addEventListener("message",c);a.addEventListener("error",e)})]})})}
    Object.defineProperty(a,"__esModule",{value:!0});var r=n.getLogger("esri.core.workers");d.add("esri-workers-arraybuffer-transfer",!d("safari")||12<=d("safari"));var t=k.MessageType.CONFIGURED,u=k.MessageType.CONFIGURE,w=k.MessageType.HANDSHAKE,v;try{v=URL.createObjectURL(new Blob(['var globalId\x3d0;var outgoing\x3dnew Map;var configured\x3dfalse;var HANDSHAKE\x3d0;var CONFIGURE\x3d1;var CONFIGURED\x3d2;var OPEN\x3d3;var OPENED\x3d4;var RESPONSE\x3d5;var INVOKE\x3d6;var ABORT\x3d7;function mapDelete(map,key){map["delete"](key)}function createAbortError(){var error\x3dnew Error("AbortError");error.dojoType\x3d"cancel";return error}function receiveMessage(event){if(!event||!event.data){return null}if(typeof event.data\x3d\x3d\x3d"string"){return JSON.parse(event.data)}return event.data}function invokeStaticMessage(methodName,data,options){var signal\x3doptions\x26\x26options.signal;var Deferred\x3drequire("dojo/Deferred");var jobId\x3dglobalId++;var abort\x3dfunction(){var outJob\x3doutgoing.get(jobId);if(!outJob){return}mapDelete(outgoing,jobId);self.postMessage({type:ABORT,jobId:jobId});outJob.reject(createAbortError())};var deferred\x3dnew Deferred(abort);if(signal){if(signal.aborted){return deferred.reject(createAbortError())}signal.addEventListener("abort",function(){abort();deferred.reject(createAbortError())})}outgoing.set(jobId,deferred);self.postMessage({type:INVOKE,jobId:jobId,methodName:methodName,abortable:true,data:data});return deferred.promise}function messageHandler(event){var message\x3dreceiveMessage(event);if(!message){return}var jobId\x3dmessage.jobId;switch(message.type){case CONFIGURE:var configuration\x3dmessage.configure;if(configured){return}self.dojoConfig\x3dconfiguration.loaderConfig;self.importScripts(configuration.loaderUrl);if(typeof require.config\x3d\x3d\x3d"function"){require.config(configuration.loaderConfig)}require(["esri/config"],function(esriConfig){for(var name in configuration.esriConfig){if(Object.prototype.hasOwnProperty.call(configuration.esriConfig,name)){esriConfig[name]\x3dconfiguration.esriConfig[name]}}self.postMessage({type:CONFIGURED})});break;case OPEN:var modulePath\x3dmessage.modulePath;require(["esri/core/workers/RemoteClient",modulePath],function(RemoteClient,Module){var port\x3dRemoteClient.connect(Module);self.postMessage({type:OPENED,jobId:jobId,data:port},[port])});break;case RESPONSE:if(outgoing.has(jobId)){var deferred\x3doutgoing.get(jobId);mapDelete(outgoing,jobId);if(message.error){deferred.reject(JSON.parse(message.error))}else{deferred.resolve(message.data)}}break}}self.addEventListener("message",messageHandler);self.postMessage({type:HANDSHAKE});'],
    {type:"text/javascript"}))}catch(x){}a.createWorker=function(){return l(this,void 0,void 0,function(){var a;return e(this,function(b){if(!d("esri-workers"))return[2,f(new q)];if(v)try{a=new Worker(v)}catch(A){r.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new q}else r.warn("Failed to create Worker. Fallback to execute module in main thread",event),a=new q;return[2,f(a)]})})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper",
    "../has","../urlUtils"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});e=e("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=l.makeAbsolute(l.removeQueryParameters(c.toUrl(e)));a.DEFAULT_CONFIG={baseUrl:function(){var a=l.removeQueryParameters(c.toUrl("dojo/x.js"));return l.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},
    {name:"globalize",main:"dist/globalize"},{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(e){var g={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:m({},e.has),map:m({},e.map),
    packages:e.packages&&e.packages.concat()||[],paths:m({},e.paths)};e.hasOwnProperty("async")||(g.async=!0);e.hasOwnProperty("isDebug")||(g.isDebug=!1);e.baseUrl||(g.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var b=g.packages,d=0;d<b.length;d++)if(b[d].name===a.name)break a;a=m({},a);d=l.removeQueryParameters(c.toUrl(a.name+"/x.js"));d=d.slice(0,d.length-5);a.location=l.makeAbsolute(d);b.push(a)}});e=g.map=g.map||{};for(var d=0,h=Object.keys(a.DEFAULT_CONFIG.map);d<
    h.length;d++){var b=h[d];e[b]||(e[b]=a.DEFAULT_CONFIG.map[b])}return g}})},"esri/core/workers/WorkerFallback":function(){define("require exports ../tsSupport/generatorHelper ../tsSupport/awaiterHelper ../global ../has ../promiseUtils ./utils @dojo/framework/shim/Promise".split(" "),function(c,a,m,e,l,h,g,d){var n=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=
    0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),b=l.MutationObserver||l.WebKitMutationObserver,p=function(){var a;if(l.process&&l.process.nextTick)a=function(a){l.process.nextTick(a)};else if(l.Promise)a=function(a){l.Promise.resolve().then(a)};else if(b){var c=[],d=document.createElement("div");(new b(function(){for(;0<c.length;)c.shift()()})).observe(d,{attributes:!0});a=function(a){c.push(a);d.setAttribute("queueStatus","1")}}return a}(),k=function(){var a=l.MessageEvent;
    try{new a("message",{data:null})}catch(f){return function(a,b){void 0===b&&(b={});var c=b.data,d=b.bubbles,d=void 0===d?!1:d;b=b.cancelable;b=void 0===b?!1:b;var e=document.createEvent("Event");e.initEvent(a,d,b);e.data=c;return e}}return function(b,c){return new a(b,c)}}();return function(){function a(){this._dispatcher=new n;this._isInitialized=!1;this._workerPostMessage({type:d.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,"onmessage",{get:function(){return this._onmessageHandler},
    set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,configurable:!0});a.prototype.postMessage=function(a){var b=
    this;p(function(){b._workerMessageHandler(k("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a){var b=this;p(function(){b.dispatchEvent(k("message",{data:a}))})};a.prototype._workerMessageHandler=function(a){return e(this,void 0,
    void 0,function(){var b,e,f,k,h,n,l,p,q=this;return m(this,function(m){switch(m.label){case 0:b=d.receiveMessage(a);if(!b)return[2];e=b.type;switch(e){case d.MessageType.CONFIGURE:return[3,1];case d.MessageType.OPEN:return[3,2]}return[3,27];case 1:return this._isInitialized||this._workerPostMessage({type:d.MessageType.CONFIGURED}),[3,27];case 2:return f=b.modulePath,k=b.jobId,[3,25];case 3:n=m.sent();l=f;switch(l){case "esri/tasks/operations/PBFWorker":return[3,4];case "esri/views/2d/engine/vectorTiles/WorkerTileHandler":return[3,
    6];case "esri/views/2d/layers/features/Pipeline":return[3,8];case "esri/views/3d/layers/PointCloudWorker":return[3,10];case "esri/views/3d/layers/SceneLayerWorker":return[3,12];case "esri/layers/graphics/sources/support/CSVSourceWorker":return[3,14];case "esri/layers/support/LercWorker":return[3,16];case "esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker":return[3,18];case "esri/geometry/support/meshUtils/ElevationSamplerWorker":return[3,20]}return[3,22];case 4:return[4,new Promise(function(a,
    b){c(["esri/tasks/operations/PBFWorker"],a,b)})];case 5:return h=m.sent(),[3,24];case 6:return[4,new Promise(function(a,b){c(["esri/views/2d/engine/vectorTiles/WorkerTileHandler"],a,b)})];case 7:return h=m.sent(),[3,24];case 8:return[4,new Promise(function(a,b){c(["esri/views/2d/layers/features/Pipeline"],a,b)})];case 9:return h=m.sent(),[3,24];case 10:return[4,new Promise(function(a,b){c(["esri/views/3d/layers/PointCloudWorker"],a,b)})];case 11:return h=m.sent(),[3,24];case 12:return[4,new Promise(function(a,
    b){c(["esri/views/3d/layers/SceneLayerWorker"],a,b)})];case 13:return h=m.sent(),[3,24];case 14:return[4,new Promise(function(a,b){c(["esri/layers/graphics/sources/support/CSVSourceWorker"],a,b)})];case 15:return h=m.sent(),[3,24];case 16:return[4,new Promise(function(a,b){c(["esri/layers/support/LercWorker"],a,b)})];case 17:return h=m.sent(),[3,24];case 18:return[4,new Promise(function(a,b){c(["esri/views/3d/webgl-engine/lib/edgeRendering/EdgeProcessingWorker"],a,b)})];case 19:return h=m.sent(),
    [3,24];case 20:return[4,new Promise(function(a,b){c(["esri/geometry/support/meshUtils/ElevationSamplerWorker"],a,b)})];case 21:return h=m.sent(),[3,24];case 22:return[4,g.create(function(a){return c([f],a)})];case 23:h=m.sent(),m.label=24;case 24:return p=n.connect(h),this._workerPostMessage({type:d.MessageType.OPENED,jobId:k,data:p}),[3,26];case 25:c(["esri/core/workers/RemoteClient",f],function(a,b){a=a.connect(b);q._workerPostMessage({type:d.MessageType.OPENED,jobId:k,data:a})}),m.label=26;case 26:return[3,
    27];case 27:return[2]}})})};return a}()})},"esri/tasks/support/FeatureSet":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../geometry ../../Graphic ../../core/jsonMap ../../core/JSONSupport ../../core/maybe ../../core/accessorSupport/decorators ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../layers/support/Field".split(" "),function(c,a,m,e,l,h,g,d,n,b,p,k,q){var f=new g.default({esriGeometryPoint:"point",
    esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});c=function(a){function c(b){b=a.call(this,b)||this;b.displayFieldName=null;b.exceededTransferLimit=!1;b.features=[];b.fields=null;b.geometryType=null;b.hasM=!1;b.hasZ=!1;b.queryGeometry=null;b.spatialReference=null;return b}e(c,a);c.prototype.readFeatures=function(a,b){b=p.fromJSON(b.spatialReference);for(var c=[],d=0;d<a.length;d++){var e=a[d],f=h.fromJSON(e),e=e.geometry&&
    e.geometry.spatialReference;n.isSome(f.geometry)&&!e&&(f.geometry.spatialReference=b);c.push(f)}return c};c.prototype.writeGeometryType=function(a,b,c,d){if(a)f.write(a,b,c,d);else if(a=this.features)for(var e=0;e<a.length;e++){var k=a[e];if(k&&n.isSome(k.geometry)){f.write(k.geometry.type,b,c,d);break}}};c.prototype.writeSpatialReference=function(a,b){if(a)b.spatialReference=a.toJSON();else if(a=this.features)for(var c=0;c<a.length;c++){var d=a[c];d&&n.isSome(d.geometry)&&d.geometry.spatialReference&&
    (b.spatialReference=d.geometry.spatialReference.toJSON())}};c.prototype.toJSON=function(a){var b=this.write(null);if(b.features&&Array.isArray(a)&&0<a.length)for(var c=0;c<b.features.length;c++){var d=b.features[c];if(d.geometry){var e=a&&a[c];d.geometry=e&&e.toJSON()||d.geometry}}return b};c.prototype.quantize=function(a){for(var b=a.scale,c=b[0],d=b[1],b=a.translate,e=b[0],f=b[1],b=this.features,k=this._getQuantizationFunction(this.geometryType,function(a){return Math.round((a-e)/c)},function(a){return Math.round((f-
    a)/d)}),g=0,h=b.length;g<h;g++)k(n.expect(b[g].geometry))||(b.splice(g,1),g--,h--);this.transform=a;return this};c.prototype.unquantize=function(){var a=this.features,b=this.transform;if(!b)return this;for(var c=b.translate,d=c[0],e=c[1],b=b.scale,f=b[0],k=b[1],b=this._getHydrationFunction(this.geometryType,function(a){return a*f+d},function(a){return e-a*k}),c=0;c<a.length;c++){var g=a[c].geometry;n.isSome(g)&&b(g)}return this};c.prototype._quantizePoints=function(a,b,c){for(var d,e,f=[],k=0,g=a.length;k<
    g;k++){var h=a[k];if(0<k){var n=b(h[0]),h=c(h[1]);if(n!==d||h!==e)f.push([n-d,h-e]),d=n,e=h}else d=b(h[0]),e=c(h[1]),f.push([d,e])}return 0<f.length?f:null};c.prototype._getQuantizationFunction=function(a,b,c){var d=this;return"point"===a?function(a){a.x=b(a.x);a.y=c(a.y);return a}:"polyline"===a||"polygon"===a?function(a){for(var e=k.isPolygon(a)?a.rings:a.paths,f=[],g=0,h=e.length;g<h;g++){var n=d._quantizePoints(e[g],b,c);n&&f.push(n)}return 0<f.length?(k.isPolygon(a)?a.rings=f:a.paths=f,a):null}:
    "multipoint"===a?function(a){var e;e=d._quantizePoints(a.points,b,c);return 0<e.length?(a.points=e,a):null}:"extent"===a?function(a){return a}:null};c.prototype._getHydrationFunction=function(a,b,c){if("point"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("polyline"===a||"polygon"===a)return function(a){a=k.isPolygon(a)?a.rings:a.paths;for(var d,e,f=0,g=a.length;f<g;f++)for(var h=a[f],n=0,l=h.length;n<l;n++){var p=h[n];0<n?(d+=p[0],e+=p[1]):(d=p[0],e=p[1]);p[0]=b(d);p[1]=c(e)}};if("extent"===a)return function(a){a.xmin=
    b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("multipoint"===a)return function(a){a=a.points;for(var d,e,f=0,k=a.length;f<k;f++){var g=a[f];0<f?(d+=g[0],e+=g[1]):(d=g[0],e=g[1]);g[0]=b(d);g[1]=c(e)}}};m([b.property({type:String,json:{write:!0}})],c.prototype,"displayFieldName",void 0);m([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"exceededTransferLimit",void 0);m([b.property({type:[h],json:{write:!0}})],c.prototype,"features",
    void 0);m([b.reader("features")],c.prototype,"readFeatures",null);m([b.property({type:[q],json:{write:!0}})],c.prototype,"fields",void 0);m([b.property({type:"point multipoint polyline polygon extent mesh".split(" "),json:{read:{reader:f.read}}})],c.prototype,"geometryType",void 0);m([b.writer("geometryType")],c.prototype,"writeGeometryType",null);m([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"hasM",void 0);m([b.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],
    c.prototype,"hasZ",void 0);m([b.property({types:l.geometryTypes,json:{read:k.fromJSON,write:!0}})],c.prototype,"queryGeometry",void 0);m([b.property({type:p,json:{write:!0}})],c.prototype,"spatialReference",void 0);m([b.writer("spatialReference")],c.prototype,"writeSpatialReference",null);m([b.property({json:{write:!0}})],c.prototype,"transform",void 0);return c=m([b.subclass("esri.tasks.support.FeatureSet")],c)}(b.declared(d.JSONSupport));c.prototype.toJSON.isDefaultToJSON=!0;(function(a){})(c||
    (c={}));return c})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./domains ./fieldType".split(" "),function(c,a,m,e,l,h,g,d,n,b){var p=new l.default({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",
    measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});return function(a){function c(b){b=a.call(this,b)||this;b.alias=null;b.defaultValue=void 0;b.description=null;b.domain=null;b.editable=!0;b.length=-1;b.name=null;b.nullable=!0;b.type=null;b.valueType=null;return b}m(c,a);f=c;c.prototype.readDescription=function(a,b){a=b.description;var c;
    try{c=JSON.parse(a)}catch(w){}return c?c.value:null};c.prototype.readValueType=function(a,b){a=b.description;var c;try{c=JSON.parse(a)}catch(w){}return c?p.fromJSON(c.fieldValueType):null};c.prototype.clone=function(){return new f({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})};var f;e([g.property({type:String,
    json:{write:!0}})],c.prototype,"alias",void 0);e([g.property({type:[String,Number],json:{write:{allowNull:!0}}})],c.prototype,"defaultValue",void 0);e([g.property()],c.prototype,"description",void 0);e([g.reader("description")],c.prototype,"readDescription",null);e([g.property({types:n.types,json:{read:{reader:n.fromJSON},write:!0}})],c.prototype,"domain",void 0);e([g.property({type:Boolean,json:{write:!0}})],c.prototype,"editable",void 0);e([g.property({type:d.Integer,json:{write:!0}})],c.prototype,
    "length",void 0);e([g.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);e([g.property({type:Boolean,json:{write:!0}})],c.prototype,"nullable",void 0);e([g.enumeration.serializable()(b.kebabDict)],c.prototype,"type",void 0);e([g.property()],c.prototype,"valueType",void 0);e([g.reader("valueType",["description"])],c.prototype,"readValueType",null);return c=f=e([g.subclass("esri.layers.support.Field")],c)}(g.declared(h.JSONSupport))})},"esri/layers/support/fieldType":function(){define(["require",
    "exports","../../core/jsonMap"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=new m.default({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",
    esriFieldTypeXML:"xml"})})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Logger ../../core/accessorSupport/decorators ../support/arcgisLayerUrl".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});var d=l.getLogger("esri.layers.mixins.ArcGISService");a.ArcGISService=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}
    m(b,a);Object.defineProperty(b.prototype,"title",{get:function(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){var a=g.parse(this.url);if(a&&a.title)return a.title}return this._get("title")||""},set:function(a){this._set("title",a)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"url",{set:function(a){this._set("url",g.sanitizeUrl(a,d))},enumerable:!0,configurable:!0});e([h.property({dependsOn:["url"]})],b.prototype,"title",null);
    e([h.property({type:String})],b.prototype,"url",null);return b=e([h.subclass("esri.layers.mixins.ArcGISService")],b)}(h.declared(a))}})},"esri/layers/support/arcgisLayerUrl":function(){define(["require","exports","../../core/urlUtils"],function(c,a,m){function e(a){a=m.urlToObject(a);var c=a.path.match(h)||a.path.match(g);if(!c)return null;a=c[1];var b=c[2],d=c[3],c=c[4],e=b.indexOf("/");return{title:l(-1!==e?b.slice(e+1):b),serverType:d,sublayer:null!=c&&""!==c?parseInt(c,10):null,url:{path:a}}}
    function l(a){a=a.replace(/\s*[/_]+\s*/g," ");return a[0].toUpperCase()+a.slice(1)}Object.defineProperty(a,"__esModule",{value:!0});a.serverTypes="MapServer ImageServer FeatureServer SceneServer StreamServer VectorTileServer".split(" ");var h=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+a.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i"),g=new RegExp("^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/("+a.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");a.isArcGISUrl=
    function(a){return!!h.test(a)};a.parse=e;a.cleanTitle=l;a.titleFromUrlAndName=function(a,c){var b=[];a&&(a=e(a))&&a.title&&b.push(a.title);c&&(c=l(c),b.push(c));if(2===b.length){if(-1!==b[0].toLowerCase().indexOf(b[1].toLowerCase()))return b[0];if(-1!==b[1].toLowerCase().indexOf(b[0].toLowerCase()))return b[1]}return b.join(" - ")};a.isHostedAgolService=function(a){if(!a)return!1;a=a.toLowerCase();var c=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==
    a.indexOf("//features");return c&&a};a.isHostedSecuredProxyService=function(a,c){return c&&a&&-1!==a.toLowerCase().indexOf(c.toLowerCase())};a.sanitizeUrl=function(a,c){return a?m.removeTrailingSlash(m.removeQueryParameters(a,c)):a};a.sanitizeUrlWithLayerId=function(a,c,b){if(!c)return{url:c};c=m.removeQueryParameters(c,b);b=m.urlToObject(c);b=e(b.path);var d;b&&null!=b.sublayer&&(null==a.layerId&&(d=b.sublayer),c=b.url.path);return{url:m.removeTrailingSlash(c),layerId:d}};a.writeUrlWithLayerId=function(a,
    c,b,e,k){m.write(c,e,"url",k);e.url&&null!=a.layerId&&(e.url=m.join(e.url,b,a.layerId.toString()))};a.isWmsServer=function(a){if(!a)return!1;var c=a.toLowerCase();a=-1!==c.indexOf("/services/");var b=-1!==c.indexOf("/mapserver/wmsserver"),d=-1!==c.indexOf("/imageserver/wmsserver"),c=-1!==c.indexOf("/wmsserver");return a&&(b||d||c)};a.isServerOrServicesAGOLUrl=function(a){if(!a)return!1;a=(new m.Url(m.makeAbsolute(a))).authority.toLowerCase();return"server.arcgisonline.com"===a||"services.arcgisonline.com"===
    a}})},"esri/layers/mixins/TemporalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../TimeExtent ../../TimeInterval ../../core/accessorSupport/decorators ../../layers/support/TimeInfo ../support/fieldUtils ../support/timeUtils".split(" "),function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});a.TemporalLayer=function(a){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.timeExtent=
    null;b.timeOffset=null;b.useViewTime=!0;return b}m(c,a);c.prototype.readOffset=function(a,c){c=c.timeInfo.exportOptions;if(!c)return null;a=c.timeOffset;c=b.timeUnitKebabDictionary.fromJSON(c.timeOffsetUnits);return a&&c?new h({value:a,unit:c}):null};Object.defineProperty(c.prototype,"timeInfo",{set:function(a){n.fixTimeInfoFields(a,this.fields);this._set("timeInfo",a)},enumerable:!0,configurable:!0});e([g.property({type:l,json:{write:!1}})],c.prototype,"timeExtent",void 0);e([g.property({type:h})],
    c.prototype,"timeOffset",void 0);e([g.reader("service","timeOffset",["timeInfo.exportOptions"])],c.prototype,"readOffset",null);e([g.property({value:null,type:d,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],c.prototype,"timeInfo",null);e([g.property({type:Boolean,json:{write:!1}})],c.prototype,"useViewTime",void 0);return c=e([g.subclass("esri.layers.mixins.TemporalLayer")],c)}(g.declared(a))}})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./layers/support/timeUtils".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.end=null;b.start=null;return b}m(c,a);b=c;c.prototype.readEnd=function(a,b){return null!=b.end?new Date(b.end):null};c.prototype.writeEnd=function(a,b,c){b.end=a?a.getTime():null};c.prototype.readStart=function(a,b){return null!=b.start?new Date(b.start):null};c.prototype.writeStart=function(a,b,c){b.start=a?a.getTime():null};c.prototype.clone=function(){return new b({end:this.end,start:this.start})};c.prototype.intersection=
    function(a){if(!a)return null;var c=this.start?this.start.getTime():-Infinity,d=this.end?this.end.getTime():Infinity,e=a.start?a.start.getTime():-Infinity;a=a.end?a.end.getTime():Infinity;var g,h;e>=c&&e<=d?g=e:c>=e&&c<=a&&(g=c);d>=e&&d<=a?h=d:a>=c&&a<=d&&(h=a);return isNaN(g)||isNaN(h)?null:(c=new b,c.start=-Infinity===g?null:new Date(g),c.end=Infinity===h?null:new Date(h),c)};c.prototype.offset=function(a,c){var d=new b,e=this.start,k=this.end;e&&(d.start=g.offsetDate(e,a,c));k&&(d.end=g.offsetDate(k,
    a,c));return d};c.prototype.equals=function(a){if(!a)return!1;var b=this.start?this.start.getTime():null,c=this.end?this.end.getTime():null,d=a.start?a.start.getTime():null;a=a.end?a.end.getTime():null;return b===d&&c===a};var b;e([h.property({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"end",void 0);e([h.reader("end")],c.prototype,"readEnd",null);e([h.writer("end")],c.prototype,"writeEnd",null);e([h.property({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"start",void 0);e([h.reader("start")],
    c.prototype,"readStart",null);e([h.writer("start")],c.prototype,"writeStart",null);return c=b=e([h.subclass("esri.TimeExtent")],c)}(h.declared(l.JSONSupport))})},"esri/layers/support/timeUtils":function(){define(["require","exports","../../TimeExtent","../../core/compilerUtils","../../core/jsonMap"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.Milliseconds=function(a){return a};var h={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",
    setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",
    setter:"setUTCFullYear",multiplier:100}};a.timeUnitKebabDictionary=l.strict()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:null});a.offsetDate=function(a,c,e){a=new Date(a.getTime());if(c&&e){e=h[e];var b=e.multiplier;a[e.setter](a[e.getter]()+
    c*b)}return a};a.combinedViewLayerTimeExtentProperty={type:m,dependsOn:"view.timeExtent layer.timeExtent layer.timeInfo layer.timeOffset layer.timeOffset.value layer.timeOffset.unit layer.useViewTime".split(" "),readOnly:!0,get:function(){if(!this.layer||!this.layer.timeInfo)return null;var a=this.view?this.view.timeExtent:null,a=this.layer.useViewTime?a:this.layer.timeExtent;if(!a)return null;var c=this.layer.timeOffset,a=c?a.offset(-c.value,c.unit):a,c=this._get("timeExtent");return a.equals(c)?
    c:a}};a.millisecondsPerTimeUnit={milliseconds:1,seconds:1E3,minutes:6E4,hours:36E5,days:864E5,weeks:6048E5,months:26784E5,years:31536E6,decades:31536E7,centuries:31536E8};a.truncateDate=function(a,c){switch(c){case "milliseconds":return new Date(a.getTime());case "seconds":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());case "minutes":return new Date(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes());case "hours":return new Date(a.getFullYear(),
    a.getMonth(),a.getDate(),a.getHours());case "days":return new Date(a.getFullYear(),a.getMonth(),a.getDate());case "weeks":return new Date(a.getFullYear(),a.getMonth(),a.getDate()-a.getDay());case "months":return new Date(a.getFullYear(),a.getMonth(),1);case "years":return new Date(a.getFullYear(),0,1);case "decades":return new Date(a.getFullYear()-a.getFullYear()%10,0,1);case "centuries":return new Date(a.getFullYear()-a.getFullYear()%100,0,1);default:return e.neverReached(c),null}}})},"esri/TimeInterval":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./layers/support/timeUtils".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.value=0;b.unit="milliseconds";return b}m(c,a);b=c;c.prototype.toMilliseconds=function(){return this.value*g.millisecondsPerTimeUnit[this.unit]};c.prototype.clone=function(){return new b({value:this.value,unit:this.unit})};var b;e([h.property({type:Number,json:{write:!0},nonNullable:!0})],c.prototype,"value",void 0);e([h.property({type:g.timeUnitKebabDictionary.apiValues,json:{type:g.timeUnitKebabDictionary.jsonValues,
    read:g.timeUnitKebabDictionary.read,write:g.timeUnitKebabDictionary.write},nonNullable:!0})],c.prototype,"unit",void 0);return c=b=e([h.subclass("esri.TimeInterval")],c)}(h.declared(l.JSONSupport))})},"esri/layers/support/TimeInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../TimeExtent ../../TimeInterval ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./TimeReference ./timeUtils".split(" "),function(c,
    a,m,e,l,h,g,d,n,b,p){return function(a){function c(b){b=a.call(this,b)||this;b.cumulative=!1;b.endField=null;b.fullTimeExtent=null;b.hasLiveData=!1;b.interval=null;b.startField=null;b.timeReference=null;b.trackIdField=null;b.useTime=!0;return b}m(c,a);f=c;c.prototype.readFullTimeExtent=function(a,b){return b.timeExtent&&Array.isArray(b.timeExtent)&&2===b.timeExtent.length?new l({start:b.timeExtent[0],end:b.timeExtent[1]}):null};c.prototype.writeFullTimeExtent=function(a,b){b.timeExtent=a&&a.start&&
    a.end?[a.start.getTime(),a.end.getTime()]:null};c.prototype.readInterval=function(a,b){return b.timeInterval&&b.timeIntervalUnits?new h({value:b.timeInterval,unit:p.timeUnitKebabDictionary.fromJSON(b.timeIntervalUnits)}):b.defaultTimeInterval&&b.defaultTimeIntervalUnits?new h({value:b.defaultTimeInterval,unit:p.timeUnitKebabDictionary.fromJSON(b.defaultTimeIntervalUnits)}):null};c.prototype.writeInterval=function(a,b){a?(a=a.toJSON(),b.timeInterval=a.value,b.timeIntervalUnits=a.unit):(b.timeInterval=
    null,b.timeIntervalUnits=null)};c.prototype.clone=function(){var a=this.fullTimeExtent,b=this.trackIdField,c=this.useTime;return new f({cumulative:this.cumulative,endField:this.endField,hasLiveData:this.hasLiveData,interval:this.interval,startField:this.startField,timeReference:d.clone(this.timeReference),fullTimeExtent:d.clone(a),trackIdField:b,useTime:c})};var f;e([n.property({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],
    c.prototype,"cumulative",void 0);e([n.property({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],c.prototype,"endField",void 0);e([n.property({type:l,json:{write:{enabled:!0,allowNull:!0}}})],c.prototype,"fullTimeExtent",void 0);e([n.reader("fullTimeExtent",["timeExtent"])],c.prototype,"readFullTimeExtent",null);e([n.writer("fullTimeExtent")],c.prototype,"writeFullTimeExtent",null);e([n.property({type:Boolean,json:{write:!0}})],c.prototype,"hasLiveData",
    void 0);e([n.property({type:h,json:{write:{enabled:!0,allowNull:!0}}})],c.prototype,"interval",void 0);e([n.reader("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],c.prototype,"readInterval",null);e([n.writer("interval")],c.prototype,"writeInterval",null);e([n.property({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],c.prototype,"startField",void 0);e([n.property({type:b,json:{write:{enabled:!0,allowNull:!0}}})],
    c.prototype,"timeReference",void 0);e([n.property({type:String,json:{write:{enabled:!0,allowNull:!0}}})],c.prototype,"trackIdField",void 0);e([n.property({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],c.prototype,"useTime",void 0);return c=f=e([n.subclass("esri.layers.support.TimeInfo")],c)}(n.declared(g.JSONSupport))})},"esri/layers/support/TimeReference":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.respectsDaylightSaving=!1;b.timezone=null;return b}m(c,a);g=c;c.prototype.readRespectsDaylightSaving=function(a,c){return void 0!==c.respectsDaylightSaving?c.respectsDaylightSaving:void 0!==c.respectDaylightSaving?c.respectDaylightSaving:!1};c.prototype.clone=function(){return new g({respectsDaylightSaving:this.respectsDaylightSaving,timezone:this.timezone})};var g;e([h.property({type:Boolean,json:{write:!0}})],c.prototype,
    "respectsDaylightSaving",void 0);e([h.reader("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],c.prototype,"readRespectsDaylightSaving",null);e([h.property({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],c.prototype,"timezone",void 0);return c=g=e([h.subclass("esri.layers.support.TimeReference")],c)}(h.declared(l.JSONSupport))})},"esri/layers/support/FeatureIndex":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){return a.call(this,b)||this}m(c,a);g=c;c.prototype.clone=function(){return new g({name:this.name,fields:this.fields,isAscending:this.isAscending,isUnique:this.isUnique,description:this.description})};var g;e([h.property({constructOnly:!0})],c.prototype,"name",void 0);e([h.property({constructOnly:!0})],c.prototype,"fields",void 0);e([h.property({constructOnly:!0})],c.prototype,"isAscending",void 0);e([h.property({constructOnly:!0})],
    c.prototype,"isUnique",void 0);e([h.property({constructOnly:!0})],c.prototype,"description",void 0);return c=g=e([h.subclass("esri.layers.support.FeatureIndex")],c)}(h.declared(l.JSONSupport));a.FeatureIndex=c;a.default=c})},"esri/layers/support/FeatureReduction":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",
    {value:!0});c=function(a){function c(){var c=null!==a&&a.apply(this,arguments)||this;c.type=null;return c}m(c,a);e([h.property({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],c.prototype,"type",void 0);return c=e([h.subclass("esri.layers.support.FeatureReduction")],c)}(h.declared(l.JSONSupport));a.FeatureReduction=c;a.default=c})},"esri/layers/support/FeatureReductionCluster":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../PopupTemplate ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(b){b=a.call(this,b)||this;b.type="cluster";b.clusterRadius=g.toPt("80px");b.popupTemplate=null;return b}m(b,a);e([d.property({type:["cluster"],readOnly:!0,json:{write:!0}})],b.prototype,"type",void 0);e([d.property({type:Number,cast:function(a){return"auto"===a?a:g.toPt(a)},json:{write:!0}})],b.prototype,"clusterRadius",void 0);e([d.property({type:l,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],
    b.prototype,"popupTemplate",void 0);return b=e([d.subclass("esri.layers.support.FeatureReductionCluster")],b)}(d.declared(h.JSONSupport));a.FeatureReductionCluster=c;a.default=c})},"esri/layers/support/FeatureReductionSelection":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./FeatureReduction".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(c){c=
    a.call(this,c)||this;c.type="selection";return c}m(c,a);e([l.property({type:["selection"]})],c.prototype,"type",void 0);return c=e([l.subclass("esri.layers.support.FeatureReductionSelection")],c)}(l.declared(h.default));a.FeatureReductionSelection=c;a.default=c})},"esri/layers/support/featureReductionUtils":function(){define("require exports ../../core/Error ../../core/object ./FeatureReduction ./FeatureReductionCluster ./FeatureReductionSelection".split(" "),function(c,a,m,e,l,h,g){function d(a,
    b,c){return a?"selection"!==a.type?(c.messages&&c.messages.push(new m("featureReduction:unsupported","FeatureReduction of type '"+a.declaredClass+"' are not supported in scenes.",{featureReduction:a,context:c})),null):a.write(b,c):null}Object.defineProperty(a,"__esModule",{value:!0});a.webSceneFeatureReductionTypes={key:"type",base:l.default,typeMap:{selection:g.default}};a.read=function(a,b,c){b=b.layerDefinition||b;if(a=b.featureReduction)switch(a.type){case "selection":return g.default.fromJSON(a);
    case "cluster":return h.default.fromJSON(a)}return null};a.writeTarget=function(a,b,c,k){(a=d(a,{},k))&&e.setDeepValue(c,a,b)};a.write=d})},"esri/layers/support/FeatureTemplate":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(c,a,m,e,l,h,g,d){var n=new l.default({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",
    esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});
    return function(a){function b(b){b=a.call(this,b)||this;b.name=null;b.description=null;b.drawingTool=null;b.prototype=null;b.thumbnail=null;return b}m(b,a);b.prototype.writeDrawingTool=function(a,b){b.drawingTool=n.toJSON(a)};b.prototype.writePrototype=function(a,b){b.prototype=g.fixJson(g.clone(a),!0)};b.prototype.writeThumbnail=function(a,b){b.thumbnail=g.fixJson(g.clone(a))};e([d.property({json:{write:!0}})],b.prototype,"name",void 0);e([d.property({json:{write:!0}})],b.prototype,"description",
    void 0);e([d.property({json:{read:n.read,write:n.write}})],b.prototype,"drawingTool",void 0);e([d.writer("drawingTool")],b.prototype,"writeDrawingTool",null);e([d.property({json:{write:!0}})],b.prototype,"prototype",void 0);e([d.writer("prototype")],b.prototype,"writePrototype",null);e([d.property({json:{write:!0}})],b.prototype,"thumbnail",void 0);e([d.writer("thumbnail")],b.prototype,"writeThumbnail",null);return b=e([d.subclass("esri.layers.support.FeatureTemplate")],b)}(d.declared(h.JSONSupport))})},
    "esri/layers/support/FeatureType":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./domains ./FeatureTemplate".split(" "),function(c,a,m,e,l,h,g,d,n){return function(a){function b(b){b=a.call(this,b)||this;b.id=null;b.name=null;b.domains=null;b.templates=null;return b}m(b,a);b.prototype.readDomains=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var e=
    a[c];switch(e.type){case "range":b[c]=d.RangeDomain.fromJSON(e);break;case "codedValue":b[c]=d.CodedValueDomain.fromJSON(e);break;case "inherited":b[c]=d.InheritedDomain.fromJSON(e)}}return b};b.prototype.writeDomains=function(a,b){var c={},d;for(d in a)a.hasOwnProperty(d)&&(c[d]=a[d]&&a[d].toJSON());h.fixJson(c);b.domains=c};b.prototype.readTemplates=function(a){return a&&a.map(function(a){return new n(a)})};b.prototype.writeTemplates=function(a,b){b.templates=a&&a.map(function(a){return a.toJSON()})};
    e([g.property({json:{write:!0}})],b.prototype,"id",void 0);e([g.property({json:{write:!0}})],b.prototype,"name",void 0);e([g.property({json:{write:!0}})],b.prototype,"domains",void 0);e([g.reader("domains")],b.prototype,"readDomains",null);e([g.writer("domains")],b.prototype,"writeDomains",null);e([g.property({json:{write:!0}})],b.prototype,"templates",void 0);e([g.reader("templates")],b.prototype,"readTemplates",null);e([g.writer("templates")],b.prototype,"writeTemplates",null);return b=e([g.subclass("esri.layers.support.FeatureType")],
    b)}(g.declared(l.JSONSupport))})},"esri/layers/support/fieldProperties":function(){define("require exports @dojo/framework/shim/array ../../core/Logger ./Field ./fieldUtils".split(" "),function(c,a,m,e,l,h){Object.defineProperty(a,"__esModule",{value:!0});var g=e.getLogger("esri.layers.support.fieldProperties");a.defineFieldProperties=function(){return{fields:{type:[l],value:null},outFields:{type:[String],dependsOn:["fields"],json:{read:!1},set:function(a){this._userOutFields=a;this.notifyChange("outFields")},
    get:function(){var a=this._userOutFields;if(!a||!a.length)return null;if(m.includes(a,"*"))return["*"];if(!this.fields)return a;for(var c=0;c<a.length;c++){var b=a[c];h.hasField(this.fields,b)||g.error("field-attributes-layer:invalid-field","Invalid field "+b+" found in outFields",{layer:this,outFields:a})}return h.fixFields(this.fields,a)}}}}})},"esri/layers/support/FieldsIndex":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(c,a,m){return function(){function a(a){this.fields=
    a;this._fieldsMap=new Map;this._dateFieldsSet=new Set;this.dateFields=[];if(a){for(var c=[],e=0;e<a.length;e++){var d=a[e],l=d&&d.name;if(l){var b=l.toLowerCase().trim();this._fieldsMap.set(l,d);this._fieldsMap.set(b,d);c.push(b);if("date"===d.type||"esriFieldTypeDate"===d.type)this.dateFields.push(d),this._dateFieldsSet.add(d)}}c.sort();this.uid=c.join(",")}}a.prototype.destroy=function(){this._fieldsMap.clear()};a.prototype.has=function(a){return null!=this.get(a)};a.prototype.get=function(a){return null!=
    a?this._fieldsMap.get(a)||this._fieldsMap.get(a.toLowerCase().trim()):void 0};a.prototype.isDateField=function(a){return this._dateFieldsSet.has(this.get(a))};a.prototype.normalizeFieldName=function(a){if(a=this.get(a))return a.name};return a}()})},"esri/layers/support/LabelClass":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../symbols ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./LabelExpressionInfo ./labelUtils ./types ../../symbols/support/defaults ../../symbols/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){function u(a){return a?"service"===a.origin?!1:!a.layer||!f.isOfType(a.layer,"map-image"):!0}function w(a){return a?(a=z.exec(a))&&(a[1]||a[3])||null:null}var v=new d.default({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",
    esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",
    esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0}),x=/^\s*\{([^}]+)\}\s*$/i,z=
    /^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]))\s*$/i;return function(a){function c(b){b=a.call(this,b)||this;b.name=null;b.labelExpression=null;b.labelExpressionInfo=null;b.labelPlacement=null;b.maxScale=0;b.minScale=0;b.symbol=r.defaultTextSymbol2D;b.useCodedValues=void 0;b.where=null;return b}e(c,a);d=c;c.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=
    c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],k=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&k;case "OR":return e||k}}return!1}catch(H){console.log("Error.: can't parse \x3d "+a)}};c.prototype.readLabelExpression=function(a,b){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a};c.prototype.writeLabelExpression=
    function(a,b,c,d){this.labelExpressionInfo&&u(d)&&(null!=this.labelExpressionInfo.value?a=this.labelExpressionInfo.value.replace(/\{/g,"[").replace(/\}/g,"]"):null!=this.labelExpressionInfo.expression&&(d=w(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)};c.prototype.writeLabelExpressionInfo=function(a,b,c,d){if(null==a&&null!=this.labelExpression&&u(d))a=new k({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)};c.prototype.writeMaxScale=
    function(a,b){if(a||this.minScale)b.maxScale=a};c.prototype.writeMinScale=function(a,b){if(a||this.maxScale)b.minScale=a};c.prototype.getLabelExpression=function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):null!=this.labelExpression&&(a.expression=this.labelExpression.replace(/\[/g,
    "{").replace(/\]/g,"}"),a.type="conventional");return a};c.prototype.getLabelExpressionArcade=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return q.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null};c.prototype.getLabelExpressionSingleField=function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(x))&&a[1].trim()||null;case "arcade":return w(a.expression)}return null};
    c.prototype.clone=function(){return new d({labelExpression:this.labelExpression,labelExpressionInfo:b.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:b.clone(this.symbol),where:this.where,useCodedValues:this.useCodedValues})};var d;m([p.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);m([p.property({type:String,json:{write:{allowNull:!0}}})],c.prototype,"labelExpression",void 0);m([p.reader("labelExpression")],
    c.prototype,"readLabelExpression",null);m([p.writer("labelExpression")],c.prototype,"writeLabelExpression",null);m([p.property({type:k,json:{write:{overridePolicy:function(a,b,c){return u(c)?{allowNull:!0}:{enabled:!1}}}}})],c.prototype,"labelExpressionInfo",void 0);m([p.writer("labelExpressionInfo")],c.prototype,"writeLabelExpressionInfo",null);m([p.property({type:v.apiValues,json:{type:v.jsonValues,read:v.read,write:v.write}})],c.prototype,"labelPlacement",void 0);m([p.property({type:Number})],
    c.prototype,"maxScale",void 0);m([p.writer("maxScale")],c.prototype,"writeMaxScale",null);m([p.property({type:Number})],c.prototype,"minScale",void 0);m([p.writer("minScale")],c.prototype,"writeMinScale",null);m([p.property({types:g.symbolTypesLabel,json:{origins:{"web-scene":{types:g.symbolTypesLabel3D,read:t.read,write:t.writeTarget,default:null}},read:t.read,write:t.writeTarget,default:null}})],c.prototype,"symbol",void 0);m([p.property({type:Boolean,json:{write:!0}})],c.prototype,"useCodedValues",
    void 0);m([p.property({type:String,json:{write:!0}})],c.prototype,"where",void 0);return c=d=m([p.subclass("esri.layers.support.LabelClass")],c)}(p.declared(n.JSONSupport))})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(){var b=null!==a&&a.apply(this,
    arguments)||this;b.value=null;b.expression=null;return b}m(c,a);b=c;c.prototype.readExpression=function(a,b){return b.value?g.convertTemplatedStringToArcade(b.value):a};c.prototype.writeExpression=function(a,b,c){null!=this.value&&(a=g.convertTemplatedStringToArcade(this.value));b[c]=a};c.prototype.clone=function(){return new b({value:this.value,expression:this.expression})};var b;e([h.property({json:{read:!1,write:!1}})],c.prototype,"value",void 0);e([h.property({type:String,json:{write:{allowNull:!0}}})],
    c.prototype,"expression",void 0);e([h.reader("expression",["expression","value"])],c.prototype,"readExpression",null);e([h.writer("expression")],c.prototype,"writeExpression",null);return c=b=e([h.subclass("esri.layers.support.LabelExpressionInfo")],c)}(h.declared(l.JSONSupport))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});var e=/__begin__/ig,l=/__end__/ig,h=/^__begin__/i,g=/__end__$/i;
    a.convertTemplatedStringToArcade=function(a){a?(a=m.replace(a,function(a){return'__begin__$feature["'+a+'"]__end__'}),a=h.test(a)?a.replace(h,""):'"'+a,a=g.test(a)?a.replace(g,""):a+'"',a=a.replace(e,'" + ').replace(l,' + "')):a='""';return a}})},"esri/symbols/support/defaults":function(){define("require exports ../../core/compilerUtils ../../core/maybe ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../TextSymbol ./defaultsJSON".split(" "),function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,
    "__esModule",{value:!0});a.defaultPointSymbol2D=g.fromJSON(n.defaultPointSymbolJSON);a.defaultPolylineSymbol2D=h.fromJSON(n.defaultPolylineSymbolJSON);a.defaultPolygonSymbol2D=l.fromJSON(n.defaultPolygonSymbolJSON);a.defaultTextSymbol2D=d.fromJSON(n.defaultTextSymbolJSON);a.getDefaultSymbol2D=function(b){if(e.isNone(b))return null;switch(b.type){case "mesh":break;case "point":case "multipoint":return a.defaultPointSymbol2D;case "polyline":return a.defaultPolylineSymbol2D;case "polygon":case "extent":return a.defaultPolygonSymbol2D;
    default:m.neverReached(b)}return null};a.errorPointSymbol2D=g.fromJSON(n.errorPointSymbolJSON);a.errorPolylineSymbol2D=h.fromJSON(n.errorPolylineSymbolJSON);a.errorPolygonSymbol2D=l.fromJSON(n.errorPolygonSymbolJSON)})},"esri/symbols/support/defaultsJSON":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.defaultColor=[252,146,31,255];a.defaultOutlineColor=[153,153,153,255];a.defaultPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",size:6,
    color:a.defaultColor,outline:{width:.75,color:[153,153,153,255]}};a.defaultPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",width:.75,color:a.defaultColor};a.defaultPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{width:.75,color:[255,255,255,191]}};a.defaultTextSymbolJSON={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",
    xoffset:0,yoffset:0,angle:0};a.errorPointSymbolJSON={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5};a.errorPolylineSymbolJSON={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5};a.errorPolygonSymbolJSON={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null}})},"esri/layers/support/labelingInfo":function(){define(["require","exports","./LabelClass"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});var e=/\[([^\[\]]+)\]/gi;
    a.reader=function(a,c,g){var d=this;return a?a.map(function(a){var b=new m;b.read(a,g);if(b.labelExpression){var h=c.fields||c.layerDefinition&&c.layerDefinition.fields||d.fields;b.labelExpression=b.labelExpression.replace(e,function(a,b){a:if(h){a=b.toLowerCase();for(var c=0;c<h.length;c++){var d=h[c].name;if(d.toLowerCase()===a){b=d;break a}}}return"["+b+"]"})}return b}):null}})},"esri/layers/support/layerSourceUtils":function(){define(["require","exports","../../core/jsonMap","../../core/lang"],
    function(c,a,m,e){function l(a){return null!=a&&a.hasOwnProperty("mapLayerId")}function h(a){return null!=a&&a.hasOwnProperty("dataSource")}function g(b){if(!b)return b;l(b)&&(b.type=a.MAPLAYER);if(h(b)&&(b.type=a.DATALAYER,!b.dataSource.type)){var c=b.dataSource;c.workspaceId?c.type=c.gdbVersion?"table":c.query||c.oidFields?"query-table":"raster":c.leftTableKey&&c.rightTableKey&&c.leftTableSource&&c.rightTableSource&&(c.type="join-table",c.leftTableSource=g(c.leftTableSource),c.rightTableSource=
    g(c.rightTableSource))}return b}function d(c){var f={};if(c.type===a.MAPLAYER)f.mapLayerId=c.mapLayerId,c.gdbVersion&&(f.gdbVersion=c.gdbVersion);else if(c.type===a.DATALAYER){c.fields&&(f.fields=c.fields);var g;g=c.dataSource;var h;switch(g.type){case "table":h={dataSourceName:g.dataSourceName,workspaceId:g.workspaceId,gdbVersion:g.gdbVersion};break;case "query-table":h={geometryType:b.toJSON(g.geometryType),workspaceId:g.workspaceId,query:g.query,oidFields:g.oidFields,spatialReference:g.spatialReference};
    break;case "join-table":h={leftTableSource:d(g.leftTableSource),rightTableSource:d(g.rightTableSource),leftTableKey:g.leftTableKey,rightTableKey:g.rightTableKey,joinType:q.toJSON(g.joinType)};break;case "raster":h={workspaceId:g.workspaceId,dataSourceName:g.dataSourceName}}h.type=k.toJSON(g.type);g=e.fixJson(h);f.dataSource=g}f.type=p.toJSON(c.type);return e.fixJson(f)}function n(c){var d={};if(p.fromJSON(c.type)===a.MAPLAYER)d.mapLayerId=c.mapLayerId,c.gdbVersion&&(d.gdbVersion=c.gdbVersion);else if(p.fromJSON(c.type)===
    a.DATALAYER){c.fields&&(d.fields=c.fields);var f;f=c.dataSource;var g;switch(f.type){case "table":g={dataSourceName:f.dataSourceName,workspaceId:f.workspaceId,gdbVersion:f.gdbVersion};break;case "queryTable":g={geometryType:b.fromJSON(f.geometryType),workspaceId:f.workspaceId,query:f.query,oidFields:f.oidFields,spatialReference:f.spatialReference};break;case "joinTable":g={leftTableSource:n(f.leftTableSource),rightTableSource:n(f.rightTableSource),leftTableKey:f.leftTableKey,rightTableKey:f.rightTableKey,
    joinType:q.fromJSON(f.joinType)};break;case "raster":g={workspaceId:f.workspaceId,dataSourceName:f.dataSourceName}}g.type=k.fromJSON(f.type);f=e.fixJson(g);d.dataSource=f}d.type=p.fromJSON(c.type);return e.fixJson(d)}Object.defineProperty(a,"__esModule",{value:!0});a.MAPLAYER="map-layer";a.DATALAYER="data-layer";var b=new m.default({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),p=new m.default({mapLayer:a.MAPLAYER,
    dataLayer:a.DATALAYER}),k=new m.default({joinTable:"join-table",queryTable:"query-table"}),q=new m.default({esriLeftOuterJoin:"left-outer-join",esriLeftInnerJoin:"left-inner-join"});a.isMapLayerSource=l;a.isDataLayerSource=h;a.castSource=g;a.sourceToJSON=d;a.sourceFromJSON=n})},"esri/layers/support/Relationship":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g){var d=new l.default({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"});return function(a){function b(b){b=a.call(this,b)||this;b.cardinality=null;b.id=null;b.keyField=null;b.name=null;b.relatedTableId=null;return b}m(b,a);e([g.property({json:{read:d.read,write:d.write}})],b.prototype,"cardinality",void 0);e([g.property({json:{read:!0,write:!0}})],b.prototype,"id",void 0);e([g.property({json:{read:!0,
    write:!0}})],b.prototype,"keyField",void 0);e([g.property({json:{read:!0,write:!0}})],b.prototype,"name",void 0);e([g.property({json:{read:!0,write:!0}})],b.prototype,"relatedTableId",void 0);return b=e([g.subclass("esri.layers.support.Relationship")],b)}(g.declared(h.JSONSupport))})},"esri/support/popupUtils":function(){define("require exports ../core/tsSupport/assignHelper dojo/i18n!../widgets/Popup/nls/Popup ../PopupTemplate ../popup/content ../popup/FieldInfo ../popup/support/FieldInfoFormat".split(" "),
    function(c,a,m,e,l,h,g,d){function n(a,c){var d=a;c.ignoreFieldTypes&&(a=a.filter(function(a){return-1===c.ignoreFieldTypes.indexOf(a.type)}));if(0===a.length)return null;var e=c.maximumFields&&a.length>c.maximumFields;e&&(a=a.slice(0,c.maximumFields));a===d&&(a=a.slice());a.sort(b);return{fields:a,limitExceeded:e}}function b(a,b){return"oid"===a.type?-1:"oid"===b.type?1:f(a)?-1:f(b)?1:(a.alias||a.name).toLocaleLowerCase().localeCompare((b.alias||b.name).toLocaleLowerCase())}function p(a){var b=a.visibleFieldNames,
    c=a.editFieldsInfo;return a.fields.map(function(a){var d=a.name,e;if(e=a.editable&&-1===r.indexOf(a.type)){if((e=a.name)&&c){var f=c.creationDateField,h=c.creatorField,l=c.editDateField,n=c.editorField;e=-1!==[f&&f.toLowerCase(),h&&h.toLowerCase(),l&&l.toLowerCase(),n&&n.toLowerCase()].indexOf(e.toLowerCase())}else e=!1;e=!e}return new g({fieldName:d,isEditable:e,label:a.alias,format:k(a),visible:b?b.has(a.name):!0})})}function k(a){switch(a.type){case "small-integer":case "integer":case "single":return new d({digitSeparator:!0,
    places:0});case "double":return new d({digitSeparator:!0,places:2});case "date":return new d({dateFormat:"long-month-day-year"});default:return null}}function q(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d&&d.valueType&&d.valueType===b)return d.name}return null}function f(a){if("name"===(a.name&&a.name.toLowerCase())||"name"===(a.alias&&a.alias.toLowerCase()))return!0}Object.defineProperty(a,"__esModule",{value:!0});var r=["oid","global-id","guid"];a.createPopupTemplate=function(a,b){var c=a.displayField,
    d=a.fields,f=a.title,k=a.visibleFieldNames;a=a.editFieldsInfo;if(!d)return null;b=m({},t,b);d=n(d,b);if(!d)return null;b=d.fields;if(!c){if(b&&b.length){if(!(c=q(b,"name-or-title")||q(b,"unique-identifier")||q(b,"type-or-category")))a:{for(c=0;c<b.length;c++){var g=b[c];if(g&&g.name){var r=g.name.toLowerCase();if(-1<r.indexOf("name")||-1<r.indexOf("title")){c=g.name;break a}}}c=null}b=c}else b=null;c=b}f=(b=c)?f+": {"+b.trim()+"}":f;c=d.limitExceeded;b=[new h.FieldsContent,new h.AttachmentsContent];
    c&&b.push(new h.TextContent({text:"\x3csmall\x3e"+e.tooManyFields+"\x3c/small\x3e"}));k=p({fields:d.fields,visibleFieldNames:k,editFieldsInfo:a});return new l({title:f,content:b,fieldInfos:k})};var t={ignoreFieldTypes:["geometry","blob","raster","guid","xml"],maximumFields:75}})},"esri/tasks/support/AttachmentQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),
    function(c,a,m,e,l,h,g,d){c=function(a){function b(b){b=a.call(this,b)||this;b.attachmentTypes=null;b.attachmentsWhere=null;b.keywords=null;b.globalIds=null;b.name=null;b.num=null;b.objectIds=null;b.returnMetadata=!1;b.size=null;b.start=null;b.where=null;return b}m(b,a);c=b;b.prototype.writeStart=function(a,b){b.resultOffset=this.start;b.resultRecordCount=this.num||10};b.prototype.clone=function(){return new c(h.clone({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,
    where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))};var c;e([g.property({type:[String],json:{write:!0}})],b.prototype,"attachmentTypes",void 0);e([g.property({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],b.prototype,"attachmentsWhere",void 0);e([g.property({type:[String],json:{write:!0}})],b.prototype,"keywords",
    void 0);e([g.property({type:[Number],json:{write:!0}})],b.prototype,"globalIds",void 0);e([g.property({json:{write:!0}})],b.prototype,"name",void 0);e([g.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);e([g.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);e([g.property({type:Boolean,json:{default:!1,write:!0}})],b.prototype,"returnMetadata",void 0);e([g.property({type:[Number],json:{write:!0}})],b.prototype,"size",void 0);e([g.property({type:Number,
    json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);e([g.writer("start"),g.writer("num")],b.prototype,"writeStart",null);e([g.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],b.prototype,"where",void 0);return b=c=e([g.subclass("esri.tasks.support.AttachmentQuery")],b)}(g.declared(l.JSONSupport));c.from=d.default(c);return c})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../geometry ../../symbols ../../TimeExtent ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../../symbols/support/jsonUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u){var w=new n.default({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),v=new n.default({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",
    esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function b(b){b=a.call(this,b)||this;b.cacheHint=!1;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=
    null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnCentroid=!1;b.returnDistinctValues=!1;b.returnExceededLimitFeatures=!0;b.returnGeometry=!1;b.returnQueryGeometry=!1;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units=null;b.where=null;return b}
    m(b,a);c=b;b.from=function(a){return q.ensureClass(c,a)};b.prototype.castDatumTransformation=function(a){return"number"===typeof a||"object"===typeof a?a:null};b.prototype.writeHistoricMoment=function(a,b){b.historicMoment=a&&a.getTime()};b.prototype.writeParameterValues=function(a,b){if(a){var c={},d;for(d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};b.prototype.writeStart=function(a,b){b.resultOffset=
    this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};b.prototype.writeWhere=function(a,b){b.where=a||"1\x3d1"};b.prototype.clone=function(){return new c(p.clone({cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):
    null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,
    returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var c;b.MAX_MAX_RECORD_COUNT_FACTOR=5;e([k.property({type:Boolean,
    json:{write:!0,default:!1}})],b.prototype,"cacheHint",void 0);e([k.property({json:{write:!0}})],b.prototype,"datumTransformation",void 0);e([k.cast("datumTransformation")],b.prototype,"castDatumTransformation",null);e([k.property({type:Number,json:{write:{overridePolicy:function(a){return{enabled:0<a}}}}})],b.prototype,"distance",void 0);e([k.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);e([k.property({types:h.geometryTypes,json:{read:f.fromJSON,write:!0}})],b.prototype,
    "geometry",void 0);e([k.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);e([k.property({type:[String],json:{write:!0}})],b.prototype,"groupByFieldsForStatistics",void 0);e([k.property({type:String,json:{write:!0}})],b.prototype,"having",void 0);e([k.property({type:Date})],b.prototype,"historicMoment",void 0);e([k.writer("historicMoment")],b.prototype,"writeHistoricMoment",null);e([k.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);e([k.property({type:Number,
    cast:function(a){return 1>a?1:a>c.MAX_MAX_RECORD_COUNT_FACTOR?c.MAX_MAX_RECORD_COUNT_FACTOR:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],b.prototype,"maxRecordCountFactor",void 0);e([k.property({type:String,json:{write:!0}})],b.prototype,"multipatchOption",void 0);e([k.property({type:Number,json:{read:{source:"resultRecordCount"}}})],b.prototype,"num",void 0);e([k.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);e([k.property({type:[String],json:{write:!0}})],
    b.prototype,"orderByFields",void 0);e([k.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);e([k.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);e([k.property({type:[u],json:{write:!0}})],b.prototype,"outStatistics",void 0);e([k.property({json:{write:!0}})],b.prototype,"parameterValues",void 0);e([k.writer("parameterValues")],b.prototype,"writeParameterValues",null);e([k.property({types:g.symbolTypes,
    json:{read:r.read,write:!0}})],b.prototype,"pixelSize",void 0);e([k.property({type:t.default,json:{write:!0}})],b.prototype,"quantizationParameters",void 0);e([k.property({type:[Object],json:{write:!0}})],b.prototype,"rangeValues",void 0);e([k.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(){return{enabled:"relation"===this.spatialRelationship}}}}})],b.prototype,"relationParameter",void 0);e([k.property({type:String,json:{write:!0}})],
    b.prototype,"resultType",void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnCentroid",void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnDistinctValues",void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],b.prototype,"returnExceededLimitFeatures",void 0);e([k.property({type:Boolean,json:{write:!0}})],b.prototype,"returnGeometry",
    void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnQueryGeometry",void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnM",void 0);e([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"returnZ",void 0);e([k.property({json:{write:!0}})],b.prototype,"source",void 0);e([k.property({type:String,json:{read:{source:"spatialRel",
    reader:w.read},write:{target:"spatialRel",writer:w.write}}})],b.prototype,"spatialRelationship",void 0);e([k.property({type:Number,json:{read:{source:"resultOffset"}}})],b.prototype,"start",void 0);e([k.writer("start"),k.writer("num")],b.prototype,"writeStart",null);e([k.property({type:String,json:{write:!0}})],b.prototype,"sqlFormat",void 0);e([k.property({type:String,json:{write:!0}})],b.prototype,"text",void 0);e([k.property({type:d,json:{write:!0}})],b.prototype,"timeExtent",void 0);e([k.property({type:String,
    json:{read:v.read,write:{writer:v.write,overridePolicy:function(a){return{enabled:a&&0<this.distance}}}}})],b.prototype,"units",void 0);e([k.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],b.prototype,"where",void 0);e([k.writer("where")],b.prototype,"writeWhere",null);return b=c=e([k.subclass("esri.tasks.support.Query")],b)}(k.declared(b.JSONSupport))})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/jsonMap ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});var b=new h.default({upperLeft:"upper-left",lowerLeft:"lower-left"});c=function(a){function c(b){b=a.call(this,b)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";b.tolerance=1;return b}m(c,a);g=c;c.prototype.clone=function(){return new g(d.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var g;e([n.property({type:l.Extent,json:{write:!0}})],c.prototype,
    "extent",void 0);e([n.property({type:["view","edit"],json:{write:!0}})],c.prototype,"mode",void 0);e([n.property({type:String,json:{read:b.read,write:b.write}})],c.prototype,"originPosition",void 0);e([n.property({type:Number,json:{write:!0}})],c.prototype,"tolerance",void 0);return c=g=e([n.subclass("esri.tasks.support.QuantizationParameters")],c)}(n.declared(g.JSONSupport));a.default=c})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(b){b=a.call(this,b)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}m(c,a);g=c;c.prototype.clone=function(){return new g({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
    var g;e([h.property({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"maxRecordCount",void 0);e([h.property({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0);e([h.property({type:String,json:{write:!0}})],c.prototype,"statisticType",
    void 0);return c=g=e([h.subclass("esri.tasks.support.StatisticDefinition")],c)}(h.declared(l.JSONSupport))})},"esri/tasks/support/RelationshipQuery":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(c,a,m,e,l,h,g,d,n){c=function(a){function b(b){b=a.call(this,b)||this;b.gdbVersion=null;
    b.geometryPrecision=void 0;b.historicMoment=null;b.maxAllowableOffset=void 0;b.objectIds=null;b.outFields=null;b.outSpatialReference=null;b.relationshipId=void 0;b.returnGeometry=!1;b.source=null;b.where=null;return b}m(b,a);c=b;b.prototype._writeHistoricMoment=function(a,b){b.historicMoment=a&&a.getTime()};b.prototype.clone=function(){return new c(g.clone({gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&this.historicMoment.getTime(),maxAllowableOffset:this.maxAllowableOffset,
    objectIds:this.objectIds,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,source:this.source,where:this.where}))};var c;e([d.property({type:String,json:{write:!0}})],b.prototype,"gdbVersion",void 0);e([d.property({type:Number,json:{write:!0}})],b.prototype,"geometryPrecision",void 0);e([d.property({type:Date})],b.prototype,"historicMoment",void 0);e([d.writer("historicMoment")],b.prototype,"_writeHistoricMoment",
    null);e([d.property({type:Number,json:{write:!0}})],b.prototype,"maxAllowableOffset",void 0);e([d.property({type:[Number],json:{write:!0}})],b.prototype,"objectIds",void 0);e([d.property({type:[String],json:{write:!0}})],b.prototype,"outFields",void 0);e([d.property({type:l.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],b.prototype,"outSpatialReference",void 0);e([d.property({json:{write:!0}})],b.prototype,"relationshipId",void 0);e([d.property({json:{write:!0}})],b.prototype,
    "returnGeometry",void 0);e([d.property({json:{write:!0}})],b.prototype,"source",void 0);e([d.property({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],b.prototype,"where",void 0);return b=c=e([d.subclass("esri.tasks.support.RelationshipQuery")],b)}(d.declared(h.JSONSupport));c.from=n.default(c);return c})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/tsSupport/assignHelper ../../../core/tsSupport/generatorHelper ../../../core/tsSupport/awaiterHelper ../../../request ../../../core/Error ../../../core/Loadable ../../../core/maybe ../../../core/promiseUtils ../../../core/urlUtils ../../../core/accessorSupport/decorators ../../../tasks/QueryTask ../../../tasks/operations/queryAttachments".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){function u(a){return g(this,void 0,void 0,function(){var b;return h(this,function(c){return"string"===typeof a?(b=q.dataComponents(a),[2,b?b:{data:a}]):[2,k.create(function(b,c){var d=new FileReader;d.readAsDataURL(a);d.onload=function(){return b(q.dataComponents(d.result))};d.onerror=function(a){return c(a)}})]})})}Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.type="feature-layer";
    return b}m(b,a);b.prototype.load=function(a){a=p.isSome(a)?a.signal:null;this.addResolvingPromise(this._fetchService(a));return this.when()};Object.defineProperty(b.prototype,"queryTask",{get:function(){var a=this.layer,b=a.parsedUrl,c=a.gdbVersion;return new r({url:null!=a.dynamicDataSource?b.path+"?"+q.objectToQuery(b.query):b.path,gdbVersion:c})},enumerable:!0,configurable:!0});b.prototype.addAttachment=function(a,b){var c=this;return this.load().then(function(){var e=a.attributes[c.layer.objectIdField],
    f=c.layer.parsedUrl.path+"/"+e+"/addAttachment",k=l({f:"json"},c.layer.parsedUrl.query),k=c._getFormDataForAttachment(b,k);return d(f,{body:k}).then(function(a){return c._createFeatureEditResult(a.data.addAttachmentResult)}).catch(function(a){throw c._createAttachmentErrorResult(e,a);})})};b.prototype.updateAttachment=function(a,b,c){var e=this;return this.load().then(function(){var f=a.attributes[e.layer.objectIdField],k=e.layer.parsedUrl.path+"/"+f+"/updateAttachment",g=l({f:"json"},e.layer.parsedUrl.query,
    {attachmentId:b}),g=e._getFormDataForAttachment(c,g);return d(k,{body:g}).then(function(a){return e._createFeatureEditResult(a.data.updateAttachmentResult)}).catch(function(a){throw e._createAttachmentErrorResult(f,a);})})};b.prototype.applyEdits=function(a,b){return g(this,void 0,void 0,function(){var c,e,f,k,g,l,n,m,p,q,r,t,u,w,v,x,z;return h(this,function(h){switch(h.label){case 0:return[4,this.load()];case 1:h.sent(),c=a.addFeatures.map(this._serializeFeature,this),e=a.updateFeatures.map(this._serializeFeature,
    this),f=this._getFeatureIds(a.deleteFeatures),k=[],g=[],l=0,n=a.addAttachments,h.label=2;case 2:if(!(l<n.length))return[3,5];m=n[l];q=(p=k).push;return[4,this._serializeAttachment(m)];case 3:q.apply(p,[h.sent()]),h.label=4;case 4:return l++,[3,2];case 5:r=0,t=a.updateAttachments,h.label=6;case 6:if(!(r<t.length))return[3,9];m=t[r];w=(u=g).push;return[4,this._serializeAttachment(m)];case 7:w.apply(u,[h.sent()]),h.label=8;case 8:return r++,[3,6];case 9:return v={adds:k,updates:g,deletes:a.deleteAttachments.slice()},
    x={f:"json",adds:c.length?JSON.stringify(c):null,updates:e.length?JSON.stringify(e):null,deletes:f.length?f.join(","):null,gdbVersion:b&&b.gdbVersion,rollbackOnFailure:b&&b.rollbackOnFailureEnabled,useGlobalIds:b&&b.globalIdUsed,attachments:JSON.stringify(v)},[4,d(this.layer.parsedUrl.path+"/applyEdits",{query:x,method:"post",responseType:"json"})];case 10:return z=h.sent(),[2,this._createEditsResult(z)]}})})};b.prototype.deleteAttachments=function(a,b){var c=this;return this.load().then(function(){var e=
    a.attributes[c.layer.objectIdField];return d(c.layer.parsedUrl.path+"/"+e+"/deleteAttachments",{query:l({f:"json"},c.layer.parsedUrl.query,{attachmentIds:b.join(",")}),method:"post",responseType:"json"}).then(function(a){return a.data.deleteAttachmentResults.map(c._createFeatureEditResult)}).catch(function(a){throw c._createAttachmentErrorResult(e,a);})})};b.prototype.queryAttachments=function(a,b){var c=this;void 0===b&&(b={});var e=this.layer.parsedUrl,f=e.path;return this.load().then(function(){var g=
    l({},b,{query:l({},e.query,{f:"json"}),responseType:"json"});if(!c.layer.get("capabilities.operations.supportsQueryAttachments")){for(var h=a.objectIds,n=[],m=0;m<h.length;m++)n.push(d(f+"/"+h[m]+"/attachments",g));return k.all(n).then(function(a){return h.map(function(b,c){return{parentObjectId:b,attachmentInfos:a[c].data.attachmentInfos}})}).then(function(a){return t.processAttachmentQueryResult(a,f)})}return c.queryTask.executeAttachmentQuery(a,g)})};b.prototype.queryFeatures=function(a,b){var c=
    this;return this.load().then(function(){return c.queryTask.execute(a,b)})};b.prototype.queryFeaturesJSON=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeJSON(a,b)})};b.prototype.queryObjectIds=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForIds(a,b)})};b.prototype.queryFeatureCount=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeForCount(a,b)})};b.prototype.queryExtent=function(a,b){var c=
    this;return this.load().then(function(){return c.queryTask.executeForExtent(a,b)})};b.prototype.queryRelatedFeatures=function(a,b){var c=this;return this.load().then(function(){return c.queryTask.executeRelationshipQuery(a,b)})};b.prototype._fetchService=function(a){return g(this,void 0,void 0,function(){var b,c;return h(this,function(e){switch(e.label){case 0:return(b=this.layer.sourceJSON)?(this.sourceJSON=b,[2]):[4,d(this.layer.parsedUrl.path,{query:l({f:"json"},this.layer.parsedUrl.query),responseType:"json",
    signal:a})];case 1:return this.sourceJSON=c=e.sent().data,[2]}})})};b.prototype._serializeFeature=function(a){var b=a.geometry;a=a.attributes;return p.isNone(b)?{attributes:a}:"mesh"===b.type||"extent"===b.type?null:{geometry:b.toJSON(),attributes:a}};b.prototype._serializeAttachment=function(a){return g(this,void 0,void 0,function(){var b,c,d,e,f,k,g,l,n;return h(this,function(h){switch(h.label){case 0:b=a.feature;c=a.attachment;d=c.globalId;e=c.name;f=c.contentType;k=c.data;g=c.uploadId;l={globalId:d,
    parentGlobalId:null,contentType:null,name:null,uploadId:null,data:null};b&&(l.parentGlobalId="attributes"in b?b.attributes&&b.attributes[this.layer.globalIdField]:b.globalId);if(!g)return[3,1];l.uploadId=g;return[3,3];case 1:return k?[4,u(k)]:[3,3];case 2:n=h.sent(),l.contentType=n.mediaType,l.data=n.data,k instanceof File&&(l.name=k.name),h.label=3;case 3:return e&&(l.name=e),f&&(l.contentType=f),[2,l]}})})};b.prototype._getFeatureIds=function(a){var b=a[0];return b?"objectId"in b?this._getIdsFromFeatureIdentifier(a):
    this._getIdsFromFeatures(a):[]};b.prototype._getIdsFromFeatures=function(a){var b=this.layer.objectIdField;return a.map(function(a){return a.attributes&&a.attributes[b]})};b.prototype._getIdsFromFeatureIdentifier=function(a){return a.map(function(a){return a.objectId})};b.prototype._createEditsResult=function(a){var b=a.data;a=a.data&&a.data.attachments;return{addFeatureResults:b.addResults?b.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:b.updateResults?b.updateResults.map(this._createFeatureEditResult,
    this):[],deleteFeatureResults:b.deleteResults?b.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:a&&a.addResults?a.addResults.map(this._createFeatureEditResult,this):[],updateAttachmentResults:a&&a.updateResults?a.updateResults.map(this._createFeatureEditResult,this):[],deleteAttachmentResults:a&&a.deleteResults?a.deleteResults.map(this._createFeatureEditResult,this):[]}};b.prototype._createFeatureEditResult=function(a){var b=!0===a.success?null:a.error||{code:void 0,
    description:void 0};return{objectId:a.objectId,globalId:a.globalId,error:b?new n("feature-layer-source:edit-failure",b.description,{code:b.code}):null}};b.prototype._createAttachmentErrorResult=function(a,b){return{objectId:a,globalId:null,error:new n("feature-layer-source:attachment-failure",b.details.messages&&b.details.messages[0]||b.message,{code:b.details.httpStatus||b.details.messageCode})}};b.prototype._getFormDataForAttachment=function(a,b){if(a=a instanceof FormData?a:a&&a.elements?new FormData(a):
    null)for(var c in b){var d=b[c];null!=d&&(a.set?a.set(c,d):a.append(c,d))}return a};e([f.property()],b.prototype,"type",void 0);e([f.property({constructOnly:!0})],b.prototype,"layer",void 0);e([f.property({readOnly:!0,dependsOn:["layer.parsedUrl","layer.gdbVersion","layer.dynamicDataSource"]})],b.prototype,"queryTask",null);return b=e([f.subclass("esri.layers.graphics.sources.FeatureLayerSource")],b)}(f.declared(b));a.default=c})},"esri/tasks/QueryTask":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../geometry ../core/accessorSupport/decorators ./Task ./operations/query ./operations/queryAttachments ./operations/queryRelatedRecords ./support/AttachmentQuery ./support/FeatureSet ./support/Query ./support/RelationshipQuery".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){return function(a){function c(b){b=a.call(this,b)||this;b.gdbVersion=null;b.source=null;return b}m(c,a);c.prototype.execute=function(a,b){return this.executeJSON(a,b).then(function(a){return f.fromJSON(a)})};c.prototype.executeJSON=function(a,c){return b.executeQuery(this.parsedUrl,this._normalizeQuery(a),h({},this.requestOptions,c)).then(function(a){return a.data})};c.prototype.executeForCount=function(a,c){return b.executeQueryForCount(this.parsedUrl,this._normalizeQuery(a),
    h({},this.requestOptions,c)).then(function(a){return a.data.count})};c.prototype.executeForExtent=function(a,c){return b.executeQueryForExtent(this.parsedUrl,this._normalizeQuery(a),h({},this.requestOptions,c)).then(function(a){return{count:a.data.count,extent:g.Extent.fromJSON(a.data.extent)}})};c.prototype.executeForIds=function(a,c){return b.executeQueryForIds(this.parsedUrl,this._normalizeQuery(a),h({},this.requestOptions,c)).then(function(a){return a.data.objectIds})};c.prototype.executeRelationshipQuery=
    function(a,b){a=t.from(a);if(this.gdbVersion||this.source)a=a.clone().set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source});return k.executeRelationshipQuery(this.parsedUrl,a,h({},this.requestOptions,b)).then(function(a){var b=a.data,c={};Object.keys(b).forEach(function(a){return c[a]=f.fromJSON(b[a])});return c})};c.prototype.executeAttachmentQuery=function(a,b){var c=this;return p.executeAttachmentQuery(this.parsedUrl,q.from(a),h({},this.requestOptions,b)).then(function(a){return p.processAttachmentQueryResult(a.data.attachmentGroups,
    c.parsedUrl.path)})};c.prototype._normalizeQuery=function(a){var b=r.from(a);return this.gdbVersion||this.source?(b===a?b.clone():b).set({gdbVersion:this.gdbVersion||a.gdbVersion,source:this.source||a.source}):b};e([d.property()],c.prototype,"gdbVersion",void 0);e([d.property()],c.prototype,"source",void 0);return c=e([d.subclass("esri.tasks.QueryTask")],c)}(d.declared(n))})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n){return function(a){function b(b){b=a.call(this,b)||this;b.requestOptions=null;b.url=null;return b}m(b,a);b.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:h({url:a},b)};Object.defineProperty(b.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});b.prototype._parseUrl=function(a){return a?d.urlToObject(a):null};b.prototype._encode=function(a,b,c){var d={},e;for(e in a)if("declaredClass"!==e){var f=a[e];
    if(null!=f&&"function"!==typeof f)if(Array.isArray(f)){d[e]=[];for(var g=0;g<f.length;g++)d[e][g]=this._encode(f[g])}else"object"===typeof f?(f.toJSON&&(f=f.toJSON(c&&c[e])),d[e]=b?f:JSON.stringify(f)):d[e]=f}return d};e([n.property({readOnly:!0,dependsOn:["url"]})],b.prototype,"parsedUrl",null);e([n.property()],b.prototype,"requestOptions",void 0);e([n.property({type:String})],b.prototype,"url",void 0);return b=e([n.subclass("esri.tasks.Task")],b)}(n.declared(g))})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/maybe ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./PBFWorker ./urlUtils @dojo/framework/shim/Promise".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){function k(a,b){var c=a.geometry;a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=g.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:
    -1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),
    delete a.source);if(a.timeExtent){c=a.timeExtent;b=c.start;c=c.end;if(null!=b||null!=c)a.time=b===c?b:(null==b?"null":b)+","+(null==c?"null":c);delete a.timeExtent}return a}function q(a,b,c,f,g){void 0===f&&(f={});var n="string"===typeof a?h.urlToObject(a):a;a=b.geometry?[b.geometry]:[];f.responseType="pbf"===c?"array-buffer":"json";return d.normalizeCentralMeridian(a,null,f).then(function(a){a=a&&a[0];l.isSome(a)&&(b=b.clone(),b.geometry=a);a=p.mapParameters(m({},n.query,{f:c},g,k(b,g)));return e(n.path+
    "/query",m({},f,{query:a}))})}Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=k;a.executeQuery=function(a,b,c){return q(a,b,"json",c)};a.executeQueryPBF=function(a,c,d,e){var g;d.useWorker?(null==f&&(f=new b.PBFWorker),g=f):g=null;var k=g;return q(a,c,"pbf",e).then(function(a){var b=function(b){a.data=b;return a};return d.useWorker?k.parseFeatureQuery(a.data,d).then(function(a){return b(a)}):b(n.parsePBFFeatureQuery(a.data,d))})};a.executeQueryForIds=function(a,b,c){return q(a,
    b,"json",c,{returnIdsOnly:!0})};a.executeQueryForCount=function(a,b,c){return q(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,c){return q(a,b,"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(b.hasOwnProperty("extent"))return a;if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");return a})};var f})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../config ../../core/Error ../../core/Logger ../../core/maybe ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/geometry/cut ../../tasks/geometry/simplify".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){function u(a){return"polygon"===a.type?a.rings:a.paths}function w(a,b){return Math.ceil((a-b)/(2*b))}function v(a,b){for(var c=0,d=u(a);c<d.length;c++)for(var e=0,f=d[c];e<f.length;e++)f[e][0]+=b;return a}function x(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var f=a[e],g=null,k=0;k<f.length;k++)g=f[k],b.push(g),0===k?d=c=g[0]:(c=Math.min(c,g[0]),d=Math.max(d,g[0]));g&&b.push([(c+d)/2,0])}return b}function z(a,c){if(!(a instanceof p||a instanceof b))throw E.error("straightLineDensify: the input geometry is neither polyline nor polygon"),
    new h("straightLineDensify: the input geometry is neither polyline nor polygon");for(var d=[],e=0,f=u(a);e<f.length;e++){var g=f[e],k=[];d.push(k);k.push([g[0][0],g[0][1]]);for(var l=0;l<g.length-1;l++){var n=g[l][0],m=g[l][1],q=g[l+1][0],r=g[l+1][1],t=Math.sqrt((q-n)*(q-n)+(r-m)*(r-m)),w=(r-m)/t,v=(q-n)/t,F=t/c;if(1<F){for(var x=1;x<=F-1;x++){var I=x*c;k.push([v*I+n,w*I+m])}t=(t+Math.floor(F-1)*c)/2;k.push([v*t+n,w*t+m])}k.push([q,r])}}return"polygon"===a.type?new b({rings:d,spatialReference:a.spatialReference}):
    new p({paths:d,spatialReference:a.spatialReference})}function A(a,b,c){b&&(a=z(a,1E6),a=f.webMercatorToGeographic(a,!0));c&&(a=v(a,c));return a}function y(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=w(d,b);a[0]=d+-2*e*b}else d<c&&(e=w(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=w(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=w(d,c),a=a.clone().offset(-2*e*c,0));return a}function B(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],f=b.geometries[d],g=u(f);d=function(a){var b=g[a];b.some(function(c){if(180>
    c[0])return!0;for(var d=c=0;d<b.length;d++){var e=b[d][0];c=e>c?e:c}c=Number(c.toFixed(9));c=-360*w(c,180);for(d=0;d<b.length;d++)e=f.getPoint(a,d),f.setPoint(a,d,e.clone().offset(c,0));return!0})};for(var k=0;k<g.length;k++)d(k);if(e===c)if("polygon"===a[0].type)for(d=0,k=u(f);d<k.length;d++)a[e]=a[e].addRing(k[d]);else{if("polyline"===a[0].type)for(d=0,k=u(f);d<k.length;d++)a[e]=a[e].addPath(k[d])}else c=e,a[e]=f},e=0;e<b.cutIndexes.length;e++)d(e);return a}function D(a,c,g){return e(this,void 0,
    void 0,function(){var e,k,h,u,F,x,I,G,z,E,ca,U,aa,ma,P,V,X,ja,da,Y,ba,Q,S,W,fa,Z,oa,ga,ha,K,R,ea,na,pa,ka,qa,ra;return m(this,function(m){switch(m.label){case 0:if(!Array.isArray(a))return[2,D([a],c)];e=c?c.url:l.geometryServiceUrl;E=0;ca=[];U=[];aa=0;for(ma=a;aa<ma.length;aa++)P=ma[aa],d.isNone(P)?U.push(P):(k||(k=P.spatialReference,h=q.getInfo(k),I=(u=k.isWebMercator)?102100:4326,F=C[I].maxX,x=C[I].minX,G=C[I].plus180Line,z=C[I].minus180Line),h?"mesh"===P.type?U.push(P):"point"===P.type?U.push(y(P.clone(),
    F,x)):"multipoint"===P.type?(V=P.clone(),V.points=V.points.map(function(a){return y(a,F,x)}),U.push(V)):"extent"===P.type?(X=P.clone(),ja=X._normalize(!1,!1,h),U.push(ja.rings?new b(ja):ja)):P.extent?(X=P.extent,da=w(X.xmin,x),Y=2*da*F,ba=0===Y?P.clone():v(P.clone(),Y),X.offset(Y,0),X.intersects(G)&&X.xmax!==F?(E=X.xmax>E?X.xmax:E,ba=A(ba,u),ca.push(ba),U.push("cut")):X.intersects(z)&&X.xmin!==x?(E=2*X.xmax*F>E?2*X.xmax*F:E,ba=A(ba,u,360),ca.push(ba),U.push("cut")):U.push(ba)):U.push(P.clone()):U.push(P));
    Q=w(E,F);S=-90;W=Q;for(fa=new p;0<Q;)Z=-180+360*Q,fa.addPath([[Z,S],[Z,-1*S]]),S*=-1,Q--;return 0<ca.length&&0<W?[4,r.cut(e,ca,fa,g)]:[3,3];case 1:oa=m.sent();ga=B(ca,oa);ha=[];K=[];for(R=0;R<U.length;R++)ea=U[R],"cut"!==ea?K.push(ea):(na=ga.shift(),pa=a[R],d.isSome(pa)&&"polygon"===pa.type&&pa.rings&&1<pa.rings.length&&na.rings.length>=pa.rings.length?(ha.push(na),K.push("simplify")):K.push(u?f.geographicToWebMercator(na):na));return ha.length?[4,t.simplify(e,ha,g)]:[2,K];case 2:ka=m.sent();qa=[];
    for(R=0;R<K.length;R++)ea=K[R],"simplify"!==ea?qa.push(ea):qa.push(u?f.geographicToWebMercator(ka.shift()):ka.shift());return[2,qa];case 3:ra=[];for(R=0;R<U.length;R++)ea=U[R],"cut"!==ea?ra.push(ea):(na=ca.shift(),ra.push(!0===u?f.geographicToWebMercator(na):na));return[2,n.resolve(ra)]}})})}Object.defineProperty(a,"__esModule",{value:!0});var E=g.getLogger("esri.geometry.support.normalizeUtils"),C={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new p({paths:[[[2.0037508342788905E7,
    -2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator}),minus180Line:new p({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:k.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new p({paths:[[[180,-180],[180,180]]],spatialReference:k.WGS84}),minus180Line:new p({paths:[[[-180,-180],[-180,180]]],spatialReference:k.WGS84})}};a.straightLineDensify=z;a.normalizeCentralMeridian=D;a.getDenormalizedExtent=
    function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var d=a.spatialReference&&q.getInfo(a.spatialReference);if(!d)return c;var d=d.valid,e=d[0],d=d[1],f=c.width,g=c.xmin;b=c.xmax;b=[b,g];g=b[0];b=b[1];if("extent"===a.type||0===f||f<=d||f>2*d||g<e||b>d)return c;var k;switch(a.type){case "polygon":if(1<a.rings.length)k=x(a.rings);else return c;break;case "polyline":if(1<a.paths.length)k=x(a.paths);else return c;break;case "multipoint":k=a.points}a=c.clone();for(e=0;e<k.length;e++){var h=
    k[e][0];0>h?(h+=d,b=Math.max(h,b)):(h-=d,g=Math.min(h,g))}a.xmin=g;a.xmax=b;return a.width<f?(a.xmin-=d,a.xmax-=d,a):c};a.normalizeMapX=function(a,b){if(b=q.getInfo(b)){var c=b.valid;b=c[0];var c=c[1],d=c-b;if(a<b)for(;a<b;)a+=d;if(a>c)for(;a>c;)a-=d}return a}})},"esri/tasks/geometry/cut":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../geometry ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});a.cut=function(a,c,k,q){return e(this,void 0,void 0,function(){var b,e,p,u,w,v,x,z;return l(this,function(f){switch(f.label){case 0:return b="string"===typeof a?d.urlToObject(a):a,e=c[0].spatialReference,p=m({},q,{query:m({},b.query,{f:"json",sr:JSON.stringify(e),target:JSON.stringify({geometryType:n.getJsonType(c[0]),geometries:c}),cutter:JSON.stringify(k)})}),[4,g(b.path+"/cut",p)];case 1:return u=f.sent(),w=u.data,v=w.cutIndexes,
    x=w.geometries,z=void 0===x?[]:x,[2,{cutIndexes:v,geometries:z.map(function(a){return h.fromJSON(a).set(e)})}]}})})}})},"esri/tasks/geometry/simplify":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/awaiterHelper ../../core/tsSupport/generatorHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils".split(" "),function(c,a,m,e,l,h,g,d){function n(a){return{geometryType:d.getJsonType(a[0]),geometries:a.map(function(a){return a.toJSON()})}}
    function b(a,b,c){var e=d.getGeometryType(b);return a.map(function(a){a=e.fromJSON(a);a.spatialReference=c;return a})}Object.defineProperty(a,"__esModule",{value:!0});a.simplify=function(a,c,q){return e(this,void 0,void 0,function(){var e,k,p,u,w;return l(this,function(f){switch(f.label){case 0:return e="string"===typeof a?g.urlToObject(a):a,k=c[0].spatialReference,p=d.getJsonType(c[0]),u=m({},q,{query:m({},e.query,{f:"json",sr:k.wkid?k.wkid:JSON.stringify(k),geometries:JSON.stringify(n(c))})}),[4,
    h(e.path+"/simplify",u)];case 1:return w=f.sent(),[2,b(w.data,p,k)]}})})}})},"esri/tasks/operations/pbfQueryUtils":function(){define(["require","exports","./pbfFeatureServiceParser"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.parsePBFFeatureQuery=function(a,c){if((a=m.parseFeatureQuery(a,c).queryResult.featureResult)&&a.features&&a.features.length&&a.objectIdFieldName){c=a.objectIdFieldName;for(var e=0,g=a.features;e<g.length;e++){var d=g[e];d.attributes&&(d.objectId=d.attributes[c])}}return a}})},
    "esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/Error ../../core/Logger ../../core/pbf ./pbfDehydratedFeatureSet ./pbfOptimizedFeatureSet".split(" "),function(c,a,m,e,l,h,g){function d(a,b,c){for(c=b.createPointGeometry(c);a.next();)switch(a.tag()){case 3:for(var d=a.getUInt32(),d=a.pos()+d,e=0;a.pos()<d;)b.addCoordinatePoint(c,a.getSInt64(),0,e++);break;default:a.skip()}return c}function n(a,b,c){var d=b.createGeometry(c);for(c=2+(c.hasZ?1:0)+(c.hasM?
    1:0);a.next();)switch(a.tag()){case 2:for(var e=a.getUInt32(),e=a.pos()+e,f=0;a.pos()<e;)b.addLength(d,a.getUInt32(),f++);break;case 3:for(var e=a.getUInt32(),e=a.pos()+e,g=f=0;a.pos()<e;)b.addCoordinate(d,a.getSInt64(),g,f),f++,f===c&&(g++,f=0);break;default:a.skip()}return d}function b(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();
    case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function p(a){for(var b={type:0>=z.length?null:z[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var c=a.getEnum();b.type=c>=z.length?null:z[c];break;case 3:b.alias=a.getString();break;case 4:c=a.getEnum();c=c>=A.length?null:A[c];b.sqlType=c;break;default:a.skip()}return b}function k(a,c,e,f){for(var g=c.createFeature(e),k=0;a.next();)switch(a.tag()){case 1:var h=f[k++].name;g.attributes[h]=
    a.processMessage(b);break;case 2:g.geometry=a.processMessageWithArgs(n,c,e);break;case 4:g.centroid=a.processMessageWithArgs(d,c,e);break;default:a.skip()}return g}function q(a){for(var b=[1,1,1,1];a.next();)switch(a.tag()){case 1:b[0]=a.getDouble();break;case 2:b[1]=a.getDouble();break;case 4:b[2]=a.getDouble();break;case 3:b[3]=a.getDouble();break;default:a.skip()}return b}function f(a){for(var b=[0,0,0,0];a.next();)switch(a.tag()){case 1:b[0]=a.getDouble();break;case 2:b[1]=a.getDouble();break;
    case 4:b[2]=a.getDouble();break;case 3:b[3]=a.getDouble();break;default:a.skip()}return b}function r(a){for(var b={originPosition:0>=y.length?null:y[0]};a.next();)switch(a.tag()){case 1:var c=a.getEnum();b.originPosition=c>=y.length?null:y[c];break;case 2:b.scale=a.processMessage(q);break;case 3:b.translate=a.processMessage(f);break;default:a.skip()}return b}function t(a){for(var b={};a.next();)switch(a.tag()){case 1:b.shapeAreaFieldName=a.getString();break;case 2:b.shapeLengthFieldName=a.getString();
    break;case 3:b.units=a.getString();break;default:a.skip()}return b}function u(a,b){for(b=b.createSpatialReference();a.next();)switch(a.tag()){case 1:b.wkid=a.getUInt32();break;case 5:b.wkt=a.getString();break;default:a.skip()}return b}function w(a,b){var c=b.createFeatureResult();c.geometryType=0>=b.geometryTypes.length?null:b.geometryTypes[0];for(var d=!1;a.next();)switch(a.tag()){case 1:c.objectIdFieldName=a.getString();break;case 3:c.globalIdFieldName=a.getString();break;case 4:c.geohashFieldName=
    a.getString();break;case 5:c.geometryProperties=a.processMessage(t);break;case 7:var e=a.getEnum();c.geometryType=e>=b.geometryTypes.length?null:b.geometryTypes[e];break;case 8:c.spatialReference=a.processMessageWithArgs(u,b);break;case 10:c.hasZ=a.getBool();break;case 11:c.hasM=a.getBool();break;case 12:c.transform=a.processMessage(r);break;case 9:e=a.getBool();c.exceededTransferLimit=e;break;case 13:b.addField(c,a.processMessage(p));break;case 15:d||(b.prepareFeatures(c),d=!0);b.addFeature(c,a.processMessageWithArgs(k,
    b,c,c.fields));break;default:a.skip()}b.finishFeatureResult(c);return c}function v(a,b){for(var c={};a.next();)switch(a.tag()){case 1:c.featureResult=a.processMessageWithArgs(w,b);break;default:a.skip()}return c}Object.defineProperty(a,"__esModule",{value:!0});var x=e.getLogger("esri.tasks.operations.pbfFeatureServiceParser"),z="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
    A="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),y=["upperLeft","lowerLeft"];a.parseFeatureQuery=function(a,b){b=b&&"dehydrated"===b.type?new h.Context(b):
    new g.Context;try{var c=new l(new Uint8Array(a),new DataView(a));for(a={};c.next();)switch(c.tag()){case 2:a.queryResult=c.processMessageWithArgs(v,b);break;default:c.skip()}return a}catch(C){return c=new m("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:C}),x.error(c),{queryResult:{featureResult:b.createFeatureResult()}}}}})},"esri/core/pbf":function(){define(["require","exports","./has","./ObjectPool"],function(c,a,m,e){var l=m("esri-text-decoder")?new TextDecoder("utf-8"):
    null,h=m("safari")||m("ios")?6:m("ff")?12:32;return function(){function a(a,c,b,e){void 0===b&&(b=0);void 0===e&&(e=a?a.byteLength:0);this._tag=0;this._dataType=99;this.init(a,c,b,e)}a.prototype.init=function(a,c,b,e){this._data=a;this._dataView=c;this._pos=b;this._end=e};a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var c=this._decodeVarint();
    this._tag=c>>3;this._dataType=c&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;
    a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];
    this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*a.getUint32(c+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*a.getInt32(c+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=
    this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),c=this._pos,c=this._toString(this._data,c,c+a);this._skip(a);return c};a.prototype.getBytes=function(){var a=this._getLength(),c=this._pos,c=this._toBytes(this._data,c,c+a);this._skip(a);
    return c};a.prototype.processMessageWithArgs=function(a,c,b,e){var d=this.getMessage();a=a(d,c,b,e);d.release();return a};a.prototype.processMessage=function(a){var c=this.getMessage();a=a(c);c.release();return a};a.prototype.getMessage=function(){var c=this._getLength(),e=a.pool.acquire();e.init(this._data,this._dataView,this._pos,this._pos+c);this._skip(c);return e};a.prototype.release=function(){a.pool.release(this)};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
    break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,c=this._pos,b=0,e;if(10<=this._end-c){if(e=a[c++],b|=e&127,0!==(e&128)&&(e=a[c++],b|=(e&127)<<7,0!==(e&128)&&(e=a[c++],b|=(e&127)<<14,0!==(e&128)&&(e=a[c++],b|=(e&127)<<21,0!==
    (e&128)&&(e=a[c++],b+=268435456*(e&127),0!==(e&128)&&(e=a[c++],b+=34359738368*(e&127),0!==(e&128)&&(e=a[c++],b+=4398046511104*(e&127),0!==(e&128)&&(e=a[c++],b+=562949953421312*(e&127),0!==(e&128)&&(e=a[c++],b+=72057594037927936*(e&127),0!==(e&128)&&(e=a[c++],b+=0x7fffffffffffffff*(e&127),0!==(e&128)))))))))))throw Error("Varint too long!");}else{for(var k=1;c!==this._end;){e=a[c];if(0===(e&128))break;++c;b+=(e&127)*k;k*=128}if(c===this._end)throw Error("Varint overrun!");++c;b+=e*k}this._pos=c;return b};
    a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,c,b){b=Math.min(this._end,b);if(b-c>h&&l)return a=a.subarray(c,b),l.decode(a);for(var d="",e="";c<b;++c){var g=a[c];g&128?e+="%"+g.toString(16):(d+=decodeURIComponent(e)+String.fromCharCode(g),e="")}e.length&&(d+=decodeURIComponent(e));return d};a.prototype._toBytes=
    function(a,c,b){b=Math.min(this._end,b);return new Uint8Array(a.buffer,c,b-c)};a.pool=new e(a,!1,function(a){a._data=null;a._dataView=null});return a}()})},"esri/tasks/operations/pbfDehydratedFeatureSet":function(){define("require exports ../../Graphic ../../core/compilerUtils ../../geometry/SpatialReference ../../layers/graphics/dehydratedFeatures ../../layers/support/Field".split(" "),function(c,a,m,e,l,h,g){function d(a,b){return b}function n(a,b,c,d){switch(c){case 0:return q(a,b+d,0);case 1:return("lowerLeft"===
    a.originPosition?q:f)(a,b+d,1)}}function b(a,b,c,d){switch(c){case 0:return q(a,b+d,0);case 1:return("lowerLeft"===a.originPosition?q:f)(a,b+d,1);case 2:return q(a,b,2)}}function p(a,b,c,d){switch(c){case 0:return q(a,b+d,0);case 1:return("lowerLeft"===a.originPosition?q:f)(a,b+d,1);case 2:return q(a,b,3)}}function k(a,b,c,d){switch(c){case 0:return q(a,b+d,0);case 1:return("lowerLeft"===a.originPosition?q:f)(a,b+d,1);case 2:return q(a,b,2);case 3:return q(a,b,3)}}function q(a,b,c){return a.translate[c]+
    b*a.scale[c]}function f(a,b,c){return a.translate[c]-b*a.scale[c]}Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a){this.options=a;this.geometryTypes=["point","multipoint","polyline","polygon"];this.previousCoordinate=[0,0];this.transform=null;this.applyTransform=d;this.lengths=[];this.vertexDimension=this.toAddInCurrentPath=this.currentLengthIndex=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;this.AttributesConstructor=function(){}}a.prototype.createFeatureResult=
    function(){return new h.DehydratedFeatureSetClass};a.prototype.finishFeatureResult=function(a){this.options.applyTransform&&(a.transform=null);this.AttributesConstructor=function(){};this.coordinateBuffer=null;this.lengths.length=0};a.prototype.createSpatialReference=function(){return new l};a.prototype.addField=function(a,b){a.fields.push(g.fromJSON(b));var c=a.fields.map(function(a){return a.name});this.AttributesConstructor=function(){for(var a=0;a<c.length;a++)this[c[a]]=null}};a.prototype.addFeature=
    function(a,b){var c=this.options.maxStringAttributeLength?this.options.maxStringAttributeLength:0;if(0<c)for(var d in b.attributes){var e=b.attributes[d];"string"===typeof e&&e.length>c&&(b.attributes[d]="")}a.features.push(b)};a.prototype.prepareFeatures=function(a){var b=this;this.options.applyTransform&&a.transform&&(this.transform=a.transform,this.applyTransform=this.deriveApplyTransform(a));this.vertexDimension=2;a.hasZ&&this.vertexDimension++;a.hasM&&this.vertexDimension++;switch(a.geometryType){case "point":this.addCoordinate=
    function(a,c,d,e){return b.addCoordinatePoint(a,c,e)};this.createGeometry=function(a){return b.createPointGeometry(a)};break;case "polygon":this.addCoordinate=function(a,c,d,e){return b.addCoordinatePolygon(a,c,e)};this.createGeometry=function(a){return b.createPolygonGeometry(a)};break;case "polyline":this.addCoordinate=function(a,c,d,e){return b.addCoordinatePolyline(a,c,e)};this.createGeometry=function(a){return b.createPolylineGeometry(a)};break;case "multipoint":this.addCoordinate=function(a,
    c,d,e){return b.addCoordinateMultipoint(a,c,e)};this.createGeometry=function(a){return b.createMultipointGeometry(a)};break;default:e.neverReached(a.geometryType)}};a.prototype.createFeature=function(){this.currentLengthIndex=this.lengths.length=0;this.previousCoordinate[0]=0;this.previousCoordinate[1]=0;this.coordinateBuffer=null;this.coordinateBufferPtr=0;return new h.DehydratedFeatureClass(m.generateUID(),null,new this.AttributesConstructor)};a.prototype.addLength=function(a,b,c){0===this.lengths.length&&
    (this.toAddInCurrentPath=b);this.lengths.push(b)};a.prototype.createPointGeometry=function(a){a={type:"point",x:0,y:0,spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM};a.hasZ&&(a.z=0);a.hasM&&(a.m=0);return a};a.prototype.addCoordinatePoint=function(a,b,c){b=this.applyTransform(this.transform,b,c,0);switch(c){case 0:a.x=b;break;case 1:a.y=b;break;case 2:a.hasZ?a.z=b:a.m=b;break;case 3:a.m=b}};a.prototype.transformPathLikeValue=function(a,b){var c=0;1>=b&&(c=this.previousCoordinate[b],
    this.previousCoordinate[b]+=a);return this.applyTransform(this.transform,a,b,c)};a.prototype.addCoordinatePolyline=function(a,b,c){this.dehydratedAddPointsCoordinate(a.paths,b,c)};a.prototype.addCoordinatePolygon=function(a,b,c){this.dehydratedAddPointsCoordinate(a.rings,b,c)};a.prototype.addCoordinateMultipoint=function(a,b,c){0===c&&a.points.push([]);b=this.transformPathLikeValue(b,c);a.points[a.points.length-1].push(b)};a.prototype.createPolygonGeometry=function(a){return{type:"polygon",rings:[[]],
    spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createPolylineGeometry=function(a){return{type:"polyline",paths:[[]],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.createMultipointGeometry=function(a){return{type:"multipoint",points:[],spatialReference:a.spatialReference,hasZ:!!a.hasZ,hasM:!!a.hasM}};a.prototype.dehydratedAddPointsCoordinate=function(a,b,c){if(null===this.coordinateBuffer){var d=this.lengths.reduce(function(a,b){return a+
    b},0);this.coordinateBuffer=new Float64Array(d*this.vertexDimension)}0===c&&0===this.toAddInCurrentPath--&&(a.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);b=this.transformPathLikeValue(b,c);a=a[a.length-1];0===c&&a.push(new Float64Array(this.coordinateBuffer.buffer,this.coordinateBufferPtr*Float64Array.BYTES_PER_ELEMENT,this.vertexDimension));this.coordinateBuffer[this.coordinateBufferPtr++]=b};a.prototype.deriveApplyTransform=
    function(a){var c=a.hasZ;a=a.hasM;return c&&a?k:c?b:a?p:n};return a}();a.Context=c})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../geometry ../../Graphic ../../core/compilerUtils ../../core/has ../../core/lang ../../core/maybe ../../core/typedArrayUtil ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/jsonUtils ../../geometry/support/quantizationUtils ../support/Field ./dehydratedFeatureComparison".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t){function u(a,b,c){if(!a)return null;switch(b){case "point":return a={x:a.x,y:a.y,z:a.z,m:a.m,hasZ:null!=a.z,hasM:null!=a.m,type:"point",spatialReference:c};case "polyline":return a={paths:a.paths,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polyline",spatialReference:c};case "polygon":return a={rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"polygon",spatialReference:c};case "multipoint":return a={points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:"multipoint",spatialReference:c}}}
    function w(a,b,c,d){return{x:a,y:b,z:c,hasZ:null!=c,hasM:!1,spatialReference:d,type:"point"}}function v(a){return"declaredClass"in a}function x(a){return"declaredClass"in a}function z(a){return"declaredClass"in a}function A(a){return d.isNone(a)?null:v(a)?a:q.fromJSON(D(a))}function y(a){if(!a)return 0;var b=32,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];switch(typeof d){case "string":b+=H(d);break;default:case "number":b+=16}}return b}function B(a){if(d.isNone(a))return 0;var b=32;switch(a.type){case "point":b+=
    42;break;case "polyline":case "polygon":var c=0,e=2+(a.hasZ?1:0)+(a.hasM?1:0);a="polyline"===a.type?a.paths:a.rings;for(var f=0;f<a.length;f++)c+=a[f].length;b=b+(8*c*e+64)+128*c+34;b+=32*(a.length+1);break;case "multipoint":c=a.points.length;b+=8*c*(2+(a.hasZ?1:0)+(a.hasM?1:0))+64;b+=128*c;b+=34;b+=32;break;case "extent":b+=98;a.hasM&&(b+=32);a.hasZ&&(b+=32);break;case "mesh":b+=n.estimateSize(a.vertexAttributes.position);b+=n.estimateSize(a.vertexAttributes.normal);b+=n.estimateSize(a.vertexAttributes.uv);
    b+=n.estimateSize(a.vertexAttributes.tangent);break;default:l.neverReached(a)}return b}function D(a){var b=a.spatialReference.toJSON();switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m,spatialReference:b};case "polygon":var c=a.hasZ,d=a.hasM;return{rings:E(a.rings),hasZ:c,hasM:d,spatialReference:b};case "polyline":var e=a.paths,c=a.hasZ,d=a.hasM;return{paths:E(e),hasZ:c,hasM:d,spatialReference:b};case "extent":var e=a.xmin,f=a.xmax,k=a.ymin,g=a.ymax,h=a.zmin,n=a.zmax,m=a.mmin,p=a.mmax,c=
    a.hasZ,d=a.hasM;return{xmin:e,xmax:f,ymin:k,ymax:g,zmin:h,zmax:n,mmin:m,mmax:p,hasZ:c,hasM:d,spatialReference:b};case "multipoint":return e=a.points,c=a.hasZ,d=a.hasM,{points:I(e)?C(e):e,hasZ:c,hasM:d,spatialReference:b};default:l.neverReached(a)}}function E(a){return F(a)?a.map(function(a){return C(a)}):a}function C(a){return a.map(function(a){return n.toArray(a)})}function F(a){for(var b=0;b<a.length;b++){var c=a[b];if(0!==c.length)return I(c)}return!1}function I(a){return a.length&&(n.isFloat32Array(a[0])||
    n.isFloat64Array(a[0]))}function G(a,b){p.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;a.hasZ&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=0;c<a.paths.length;c++)p.expandWithNestedArray(b,a.paths[c],a.hasZ);break;case "polygon":for(c=0;c<a.rings.length;c++)p.expandWithNestedArray(b,a.rings[c],a.hasZ);break;case "multipoint":p.expandWithNestedArray(b,a.points,a.hasZ);break;case "extent":b[0]=a.xmin;b[1]=a.ymin;b[3]=a.xmax;b[4]=a.ymax;null!=a.zmin&&
    (b[2]=a.zmin);null!=a.zmax&&(b[5]=a.zmax);break;default:l.neverReached(a)}}function J(a,b){k.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)k.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)k.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":k.expandWithNestedArray(b,a.points);break;case "extent":b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;break;
    default:l.neverReached(a)}}Object.defineProperty(a,"__esModule",{value:!0});a.equals=t.equals;c=function(){return function(a,b,c){this.uid=a;this.geometry=b;this.attributes=c;this.visible=!0;this.centroid=this.objectId=null}}();a.DehydratedFeatureClass=c;a.hasGeometry=function(a){return d.isSome(a.geometry)};a.isFeatureGeometry=function(a){return m.isFeatureGeometryType(a.type)};c=function(){return function(){this.exceededTransferLimit=!1;this.features=[];this.fields=[];this.hasZ=this.hasM=!1;this.transform=
    this.spatialReference=this.geohashFieldName=this.geometryProperties=this.globalIdFieldName=this.objectIdFieldName=this.geometryType=null}}();a.DehydratedFeatureSetClass=c;a.isPoint=function(a){return"point"===a.type};a.fromFeatureSetJSON=function(a){var c=m.featureGeometryTypeKebabDictionary.fromJSON(a.geometryType),d=b.fromJSON(a.spatialReference),k=a.transform,g=a.features.map(function(b){var g=a.objectIdFieldName;b={uid:e.generateUID(),objectId:g&&b.attributes?b.attributes[g]:null,attributes:b.attributes,
    geometry:u(b.geometry,c,d),visible:!0};if((g=b.geometry)&&k)switch(g.type){case "point":b.geometry=f.hydratePoint(k,g,g,g.hasZ,g.hasM);break;case "multipoint":b.geometry=f.hydrateMultipoint(k,g,g,g.hasZ,g.hasM);break;case "polygon":b.geometry=f.hydratePolygon(k,g,g,g.hasZ,g.hasM);break;case "polyline":b.geometry=f.hydratePolyline(k,g,g,g.hasZ,g.hasM);break;default:l.neverReached(g)}return b});return{geometryType:c,features:g,spatialReference:d,fields:a.fields?a.fields.map(function(a){return r.fromJSON(a)}):
    null,objectIdFieldName:a.objectIdFieldName,globalIdFieldName:a.globalIdFieldName,geohashFieldName:a.geohashFieldName,geometryProperties:a.geometryProperties,hasZ:a.hasZ,hasM:a.hasM,exceededTransferLimit:a.exceededTransferLimit,transform:null}};a.fromJSONGeometry=u;a.makeDehydratedPoint=w;a.isHydratedGeometry=v;a.isHydratedPoint=x;a.isHydratedGraphic=z;a.hydrateGraphic=function(a,b){if(!a||z(a))return a;b=new e({layer:b,sourceLayer:b});b.visible=a.visible;b.symbol=g.clone(a.symbol);b.attributes=g.clone(a.attributes);
    b.geometry=A(a.geometry);return b};a.hydrateGeometry=A;a.clonePoint=function(a,b){if(!a)return null;if(x(a)){if(null==b)return a.clone();if(x(b))return b.copy(a)}null!=b?(b.x=a.x,b.y=a.y,b.spatialReference=a.spatialReference,a.hasZ?(b.z=a.z,b.hasZ=a.hasZ):(b.z=null,b.hasZ=!1),a.hasM?(b.m=a.m,b.hasM=!0):(b.m=null,b.hasM=!1)):(b=w(a.x,a.y,a.z,a.spatialReference),a.hasM&&(b.m=a.m,b.hasM=!0));return b};var H=h("esri-text-decoder")?function(a){return 32+a.length}:function(a){return 32*a.length};a.estimateAttributesObjectSize=
    y;a.estimateGeometryObjectSize=B;a.estimateSize=function(a){var b;b=32+y(a.attributes);return b=b+3+(8+B(a.geometry))};a.numVertices=function(a){if(d.isNone(a))return 0;switch(a.type){case "point":return 1;case "polyline":var b=0,c=0;for(a=a.paths;c<a.length;c++)b+=a[c].length;return b;case "polygon":c=b=0;for(a=a.rings;c<a.length;c++)b+=a[c].length;return b;case "multipoint":return a.points.length;case "extent":return 2;case "mesh":return(b=a.vertexAttributes&&a.vertexAttributes.position)?b.length/
    3:0;default:l.neverReached(a)}};a.hasVertices=function(a){if(!a)return!1;switch(a.type){case "extent":case "point":return!0;case "polyline":var b=0;for(a=a.paths;b<a.length;b++)if(0<a[b].length)return!0;return!1;case "polygon":b=0;for(a=a.rings;b<a.length;b++)if(0<a[b].length)return!0;return!1;case "multipoint":return 0<a.points.length;case "mesh":return a.vertexAttributes&&a.vertexAttributes.position&&0<a.vertexAttributes.position.length;default:l.neverReached(a)}};a.computeAABB=G;a.expandAABB=function(a,
    b){G(a,N);p.expand(b,N)};a.computeAABR=J;a.expandAABR=function(a,b){J(a,L);k.expand(b,L)};a.getObjectId=function(a,b){return null!=a.objectId?a.objectId:a.attributes&&b?a.attributes[b]:null};var N=p.create(),L=k.create()})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(c,a,m,e){function l(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3],b[4],b[5]]}function h(a,b,c,d,e,g,k){void 0===k&&(k=l());k[0]=a;k[1]=b;k[2]=c;k[3]=d;k[4]=
    e;k[5]=g;return k}function g(a){return a[0]>=a[3]?0:a[3]-a[0]}function d(a){return a[1]>=a[4]?0:a[4]-a[1]}function n(a){return a[2]>=a[5]?0:a[5]-a[2]}function b(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function p(a){return 6===a.length}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.fromValues=h;a.fromExtent=function(a,b){void 0===b&&(b=l());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};a.toExtent=function(a,b){return isFinite(a[2])||
    isFinite(a[5])?new m({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new m({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};a.fromMinMax=function(a,b,c){void 0===c&&(c=l());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=b[2];return c};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};a.expand=function(a,b,c){void 0===c&&
    (c=a);p(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[3]),c[4]=Math.max(a[4],b[4]),c[5]=Math.max(a[5],b[5])):e.is(b)?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[2]),c[4]=Math.max(a[4],b[3])):2===b.length?(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[3]=Math.max(a[3],b[0]),c[4]=Math.max(a[4],b[1])):3===b.length&&(c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.min(a[2],b[2]),c[3]=Math.max(a[3],b[0]),
    c[4]=Math.max(a[4],b[1]),c[5]=Math.max(a[5],b[2]));return c};a.expandWithBuffer=function(a,b,c,d,e){void 0===e&&(e=a);var f=a[0],g=a[1],k=a[2],h=a[3],l=a[4];a=a[5];for(var n=0;n<d;n++)f=Math.min(f,b[c+3*n]),g=Math.min(g,b[c+3*n+1]),k=Math.min(k,b[c+3*n+2]),h=Math.max(h,b[c+3*n]),l=Math.max(l,b[c+3*n+1]),a=Math.max(a,b[c+3*n+2]);e[0]=f;e[1]=g;e[2]=k;e[3]=h;e[4]=l;e[5]=a;return e};a.expandWithOffset=function(a,b,c,d,e){void 0===e&&(e=a);e[0]=Math.min(a[0],a[0]+b);e[3]=Math.max(a[3],a[3]+b);e[1]=Math.min(a[1],
    a[1]+c);e[4]=Math.max(a[4],a[4]+c);e[2]=Math.min(a[2],a[2]+d);e[5]=Math.max(a[5],a[5]+d);return e};a.expandWithNestedArray=function(a,b,c,d){void 0===d&&(d=a);var e=b.length,f=a[0],g=a[1],k=a[2],h=a[3],l=a[4];a=a[5];if(c)for(c=0;c<e;c++){var n=b[c],f=Math.min(f,n[0]),g=Math.min(g,n[1]),k=Math.min(k,n[2]),h=Math.max(h,n[0]),l=Math.max(l,n[1]);a=Math.max(a,n[2])}else for(c=0;c<e;c++)n=b[c],f=Math.min(f,n[0]),g=Math.min(g,n[1]),h=Math.max(h,n[0]),l=Math.max(l,n[1]);d[0]=f;d[1]=g;d[2]=k;d[3]=h;d[4]=l;
    d[5]=a;return d};a.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=g;a.depth=d;a.height=n;a.diameter=function(a){var b=g(a),c=n(a);a=d(a);return Math.sqrt(b*b+c*c+a*a)};a.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+g(a)/2;b[1]=a[1]+d(a)/2;b[2]=a[2]+n(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=g(a);b[1]=d(a);b[2]=n(a);return b};a.maximumDimension=function(a){return Math.max(g(a),n(a),d(a))};a.containsPoint=function(a,b){return b[0]>=
    a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};a.offset=function(a,b,c,d,e){void 0===
    e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+d;e[3]=a[3]+b;e[4]=a[4]+c;e[5]=a[5]+d;return e};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=b;a.empty=function(c){return c?b(c,a.NEGATIVE_INFINITY):l(a.NEGATIVE_INFINITY)};a.toRect=function(a,b){b||(b=e.create());b[0]=a[0];b[1]=a[1];b[2]=a[3];b[3]=a[4];
    return b};a.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=Number.NEGATIVE_INFINITY;a[3]=b[2];a[4]=b[3];a[5]=Number.POSITIVE_INFINITY;return a};a.is=p;a.isPoint=function(a){return 0===g(a)&&0===d(a)&&0===n(a)};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!p(a)||!p(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.wrap=function(a,b,c,d,e,g){return h(a,b,c,d,e,g,k)};a.POSITIVE_INFINITY=[-Infinity,-Infinity,
    -Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0];var k=l()})},"esri/geometry/support/aaBoundingRect":function(){define(["require","exports","../../core/compilerUtils","../Extent"],function(c,a,m,e){function l(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function h(a){return a[0]>=a[2]?0:a[2]-a[0]}function g(a){return a[1]>=a[3]?0:a[3]-a[1]}function d(a,b,c){return b>=a[0]&&c>=a[1]&&b<=a[2]&&c<=a[3]}function n(a,
    b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function b(a){return 4===a.length}function p(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,"__esModule",{value:!0});a.create=l;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,b,c,d,e){void 0===e&&(e=l());e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e};a.fromExtent=function(a,b){void 0===b&&(b=l());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.xmax;b[3]=a.ymax;return b};a.toExtent=function(a,b){return new e({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],
    spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,c,d){void 0===d&&(d=a);if("length"in c)if(b(c))d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.max(a[2],c[2]),d[3]=Math.max(a[3],c[3]);else{if(2===c.length||3===c.length)d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.max(a[2],c[0]),d[3]=Math.max(a[3],c[1])}else switch(c.type){case "extent":d[0]=Math.min(a[0],
    c.xmin);d[1]=Math.min(a[1],c.ymin);d[2]=Math.max(a[2],c.xmax);d[3]=Math.max(a[3],c.ymax);break;case "point":d[0]=Math.min(a[0],c.x);d[1]=Math.min(a[1],c.y);d[2]=Math.max(a[2],c.x);d[3]=Math.max(a[3],c.y);break;default:m.neverReached(c)}return d};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var d=b.length,e=a[0],f=a[1],g=a[2];a=a[3];for(var h=0;h<d;h++){var k=b[h],e=Math.min(e,k[0]),f=Math.min(f,k[1]),g=Math.max(g,k[0]);a=Math.max(a,k[1])}c[0]=e;c[1]=f;c[2]=g;c[3]=a;return c};a.allFinite=
    function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=h;a.height=g;a.diameter=function(a){var b=h(a);a=g(a);return Math.sqrt(b*b+a*a)};a.area=function(a){return h(a)*g(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+h(a)/2;b[1]=a[1]+g(a)/2;return b};a.containsPoint=function(a,b){return d(a,b[0],b[1])};a.containsPointObject=function(a,b){return d(a,b.x,b.y)};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=
    function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=p(a[0],d,f);c[1]=p(a[1],e,b);c[2]=p(a[2],d,f);c[3]=p(a[3],e,b);return c};a.distance=function(a,b){var c=(a[1]+a[3])/2,d=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-h(a)/2,0);a=Math.max(Math.abs(b[1]-c)-g(a)/2,0);return Math.sqrt(d*d+a*a)};
    a.size=function(a,b){b[0]=a[2]-a[0];b[1]=a[3]-a[1]};a.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};a.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,b,c){void 0===c&&(c=a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=n;a.empty=function(b){return b?n(b,a.NEGATIVE_INFINITY):
    l(a.NEGATIVE_INFINITY)};a.is=b;a.isPoint=function(a){return(0===h(a)||!isFinite(a[0]))&&(0===g(a)||!isFinite(a[1]))};a.equals=function(a,c,d){if(null==a||null==c)return a===c;if(!b(a)||!b(c))return!1;if(d)for(var e=0;e<a.length;e++){if(!d(a[e],c[e]))return!1}else for(e=0;e<a.length;e++)if(a[e]!==c[e])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0];a.UNIT=[0,0,1,1]})},"esri/geometry/support/quantizationUtils":function(){define(["require",
    "exports","./jsonUtils"],function(c,a,m){function e(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function l(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function h(a,b,c){for(var d=[],f,g,h,k,n=0;n<c.length;n++){var m=c[n];if(0<n){if(h=e(a,m[0]),k=l(a,m[1]),h!==f||k!==g)d.push(b(m,h-f,k-g)),f=h,g=k}else f=e(a,m[0]),g=l(a,m[1]),d.push(b(m,f,g))}return 0<d.length?d:null}function g(a,b,c,d){return h(a,c?d?E:D:d?D:B,b)}function d(a,b,c,d){var e=[];c=c?d?E:D:d?D:B;for(d=0;d<b.length;d++){var f=
    h(a,c,b[d]);f&&3<=f.length&&e.push(f)}return e.length?e:null}function n(a,b,c,d){var e=[];c=c?d?E:D:d?D:B;for(d=0;d<b.length;d++){var f=h(a,c,b[d]);f&&2<=f.length&&e.push(f)}return e.length?e:null}function b(a,b){return b*a.scale[0]+a.translate[0]}function p(a,b){return a.translate[1]-b*a.scale[1]}function k(a,c,d){var e=Array(d.length);if(!d.length)return e;var f=a.scale,g=f[0],f=f[1],h=b(a,d[0][0]);a=p(a,d[0][1]);e[0]=c(d[0],h,a);for(var k=1;k<d.length;k++){var l=d[k],h=h+l[0]*g;a-=l[1]*f;e[k]=
    c(l,h,a)}return e}function q(a,b,c){for(var d=Array(c.length),e=0;e<c.length;e++)d[e]=k(a,b,c[e]);return d}function f(a,b,c,d){return k(a,c?d?E:D:d?D:B,b)}function r(a,b,c,d){return q(a,c?d?E:D:d?D:B,b)}function t(a,b,c,d){return q(a,c?d?E:D:d?D:B,b)}function u(a,b,c){var d=c[0],e=d[0],d=d[1],f=Math.min(e,b[0]),g=Math.min(d,b[1]),h=Math.max(e,b[2]);b=Math.max(d,b[3]);for(var k=1;k<c.length;k++){var l=c[k],n=l[0],l=l[1],e=e+n,d=d+l;0>n&&(f=Math.min(f,e));0<n&&(h=Math.max(h,e));0>l?g=Math.min(g,d):
    0<l&&(b=Math.max(b,d))}a[0]=f;a[1]=g;a[2]=h;a[3]=b;return a}function w(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)u(a,a,b[c]);return a}function v(a,b,c,d,f){b.xmin=e(a,c.xmin);b.ymin=l(a,c.ymin);b.xmax=e(a,c.xmax);b.ymax=l(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),f&&(b.mmin=c.mmin,b.mmax=c.mmax));return b}function x(a,b,c,d,e){b.points=g(a,c.points,d,e);return b}function z(a,b,c,d,f){b.x=e(a,c.x);b.y=l(a,
    c.y);b!==c&&(d&&(b.z=c.z),f&&(b.m=c.m));return b}function A(a,b,c,e,f){a=d(a,c.rings,e,f);if(!a)return null;b.rings=a;return b}function y(a,b,c,d,e){a=n(a,c.paths,d,e);if(!a)return null;b.paths=a;return b}Object.defineProperty(a,"__esModule",{value:!0});var B=function(a,b,c){return[b,c]},D=function(a,b,c){return[b,c,a[2]]},E=function(a,b,c){return[b,c,a[2],a[3]]};a.toQuantizationTransform=function(a){return a?{originPosition:"upper-left"===a.originPosition?"upperLeft":"lower-left"===a.originPosition?
    "lowerLeft":a.originPosition,scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,d,e,f;a&&"upperLeft"===a.originPosition?(c=a.translate[0],d=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);b&&"upperLeft"===b.originPosition?(e=b.translate[0],f=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,f=b.extent.ymax,b=b.tolerance);return c===e&&d===f&&a===b};a.quantizeX=
    e;a.quantizeY=l;a.quantizeBounds=function(a,b,c){b[0]=e(a,c[0]);b[3]=l(a,c[1]);b[2]=e(a,c[2]);b[1]=l(a,c[3]);return b};a.quantizePoints=g;a.quantizeRings=d;a.quantizePaths=n;a.hydrateX=b;a.hydrateY=p;a.hydrateCoordsArray=k;a.hydrateCoordsArrayArray=q;a.hydrateBounds=function(a,c,d){return d?(c[0]=b(a,d[0]),c[1]=p(a,d[3]),c[2]=b(a,d[2]),c[3]=p(a,d[1]),c):[b(a,c[0]),p(a,c[3]),b(a,c[2]),p(a,c[1])]};a.hydratePoints=f;a.hydratePaths=r;a.hydrateRings=t;a.getQuantizedBoundsCoordsArray=u;a.getQuantizedBoundsCoordsArrayArray=
    w;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return u(b,b,a)};a.getQuantizedBoundsPaths=function(a){return w([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return w([0,0,0,0],a)};a.quantizeExtent=v;a.quantizeMultipoint=x;a.quantizePoint=z;a.quantizePolygon=A;a.quantizePolyline=y;a.quantizeGeometry=function(a,b){return a&&b?m.isPoint(b)?z(a,{},b,!1,!1):m.isPolyline(b)?y(a,{},b,!1,!1):m.isPolygon(b)?
    A(a,{},b,!1,!1):m.isMultipoint(b)?x(a,{},b,!1,!1):m.isExtent(b)?v(a,{},b,!1,!1):null:null};a.hydrateExtent=function(a,c,d,e,f){c.xmin=b(a,d.xmin);c.ymin=p(a,d.ymin);c.xmax=b(a,d.xmax);c.ymax=p(a,d.ymax);c!==d&&(e&&(c.zmin=d.zmin,c.zmax=d.zmax),f&&(c.mmin=d.mmin,c.mmax=d.mmax));return c};a.hydrateMultipoint=function(a,b,c,d,e){b.points=f(a,c.points,d,e);return b};a.hydratePoint=function(a,c,d,e,f){c.x=b(a,d.x);c.y=p(a,d.y);c!==d&&(e&&(c.z=d.z),f&&(c.m=d.m));return c};a.hydratePolygon=function(a,b,
    c,d,e){b.rings=t(a,c.rings,d,e);return b};a.hydratePolyline=function(a,b,c,d,e){b.paths=r(a,c.paths,d,e);return b}})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports","../../core/compilerUtils","../../core/maybe"],function(c,a,m,e){function l(a,c){if(a===c)return!0;if(null==a||null==c||a.length!==c.length)return!1;for(var b=0;b<a.length;b++){var d=a[b],e=c[b];if(d.length!==e.length)return!1;for(var g=0;g<d.length;g++)if(d[g]!==e[g])return!1}return!0}function h(a,
    c){if(a===c)return!0;if(null==a||null==c||a.length!==c.length)return!1;for(var b=0;b<a.length;b++)if(!l(a[b],c[b]))return!1;return!0}function g(a,c){return a===c||a&&c&&a.equals(c)}function d(a,c){if(a===c)return!0;if(e.isNone(a)||e.isNone(c)||a.type!==c.type)return!1;switch(a.type){case "point":return a=g(a.spatialReference,c.spatialReference)?a.x===c.x&&a.y===c.y&&a.z===c.z&&a.m===c.m:!1,a;case "extent":return a=a.hasZ!==c.hasZ||a.hasM!==c.hasM?!1:g(a.spatialReference,c.spatialReference)?a.xmin===
    c.xmin&&a.ymin===c.ymin&&a.zmin===c.zmin&&a.xmax===c.xmax&&a.ymax===c.ymax&&a.zmax===c.zmax:!1,a;case "polyline":return a=a.hasZ!==c.hasZ||a.hasM!==c.hasM?!1:g(a.spatialReference,c.spatialReference)?h(a.paths,c.paths):!1,a;case "polygon":return a=a.hasZ!==c.hasZ||a.hasM!==c.hasM?!1:g(a.spatialReference,c.spatialReference)?h(a.rings,c.rings):!1,a;case "multipoint":return a=a.hasZ!==c.hasZ||a.hasM!==c.hasM?!1:g(a.spatialReference,c.spatialReference)?l(a.points,c.points):!1,a;case "mesh":return!1;default:m.neverReached(a)}}
    function n(a,c){if(a===c)return!0;if(!a||!c)return!1;var b=Object.keys(a),d=Object.keys(c);if(b.length!==d.length)return!1;for(d=0;d<b.length;d++){var e=b[d];if(a[e]!==c[e])return!1}return!0}Object.defineProperty(a,"__esModule",{value:!0});a.equals=function(a,c){return a===c?!0:null!=a&&null!=c&&a.objectId===c.objectId&&d(a.geometry,c.geometry)&&n(a.attributes,c.attributes)?!0:!1}})},"esri/tasks/operations/pbfOptimizedFeatureSet":function(){define(["require","exports","../../layers/graphics/OptimizedFeature",
    "../../layers/graphics/OptimizedFeatureSet","../../layers/graphics/OptimizedGeometry"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"]}a.prototype.createFeatureResult=function(){return new e.default};a.prototype.prepareFeatures=function(){};a.prototype.finishFeatureResult=function(){};a.prototype.addFeature=function(a,c){a.features.push(c)};
    a.prototype.createFeature=function(){return new m.default};a.prototype.createSpatialReference=function(){return{wkid:0}};a.prototype.createGeometry=function(){return new l.default};a.prototype.addField=function(a,c){a.fields.push(c)};a.prototype.addCoordinate=function(a,c){a.coords.push(c)};a.prototype.addCoordinatePoint=function(a,c){a.coords.push(c)};a.prototype.addLength=function(a,c){a.lengths.push(c)};a.prototype.createPointGeometry=function(){return new l.default};return a}();a.Context=c})},
    "esri/layers/graphics/OptimizedFeature":function(){define(["require","exports","../../core/tsSupport/extendsHelper"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(a,c,h,g){void 0===a&&(a=null);void 0===c&&(c={});this.localId=0;this.geohashIndexed=!1;this.geohashY=this.geohashX=0;this.geometry=a;c&&(this.attributes=c);h&&(this.centroid=h);null!=g&&(this.objectId=g)}}();a.default=c})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require",
    "exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=null;this.exceededTransferLimit=!1}}();a.default=c})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});
    c=function(){return function(a,c){void 0===a&&(a=[]);void 0===c&&(c=[]);this.lengths=a;this.coords=c}}();a.default=c})},"esri/tasks/operations/PBFWorker":function(){define("require exports ../../core/tsSupport/extendsHelper ../../Graphic ../../core/promiseUtils ../../core/requireUtils ../../core/workers ../../geometry/SpatialReference ../../layers/support/Field ./pbfQueryUtils module".split(" "),function(c,a,m,e,l,h,g,d,n,b,p){Object.defineProperty(a,"__esModule",{value:!0});var k=function(){function a(){}
    a.prototype._parseFeatureQuery=function(a){var c=b.parsePBFFeatureQuery(a.buffer,a.options);if(a.options&&"dehydrated"===a.options.type&&(c.spatialReference=c.spatialReference.toJSON(),c.fields))for(a=0;a<c.fields.length;a++)c.fields[a]=c.fields[a].toJSON();return l.resolve(c)};return a}(),q=function(a){function f(){var b=a.call(this)||this;b._thread=void 0;g.open(h.getAbsMid("./PBFWorker",c,p),{strategy:"dedicated"}).then(function(a){void 0===b._thread?b._thread=a:a.close()});return b}m(f,a);f.prototype.destroy=
    function(){this._thread&&this._thread.close();this._thread=null};f.prototype.parseFeatureQuery=function(a,c){return a&&0!==a.byteLength?this._thread?this._thread.invoke("_parseFeatureQuery",{buffer:a,options:c},{transferList:[a]}).then(function(a){if(c&&"dehydrated"===c.type){a.spatialReference=d.fromJSON(a.spatialReference);if(a.fields)for(var b=0;b<a.fields.length;b++)a.fields[b]=n.fromJSON(a.fields[b]);for(var b=a.spatialReference,f=0,g=a.features;f<g.length;f++){var h=g[f];h.uid=e.generateUID();
    h.geometry&&(h.geometry.spatialReference=b)}}return a}):l.resolve(b.parsePBFFeatureQuery(a,c)):l.resolve(null)};return f}(k);a.PBFWorker=q;a.default=function(){return new k}})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(c,a){function m(a){var c={},e;for(e in a)if("declaredClass"!==e){var g=a[e];if(null!=g&&"function"!==typeof g)if(Array.isArray(g)){c[e]=[];for(var d=0;d<g.length;d++)c[e][d]=m(g[d])}else"object"===typeof g?g.toJSON&&(c[e]=JSON.stringify(g)):c[e]=
    g}return c}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=m})},"esri/tasks/operations/queryAttachments":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../layers/support/AttachmentInfo ./urlUtils".split(" "),function(c,a,m,e,l,h,g){function d(a){a=a.toJSON();a.attachmentTypes&&(a.attachmentTypes=a.attachmentTypes.join(","));a.keywords&&(a.keywords=a.keywords.join(","));a.globalIds&&(a.globalIds=a.globalIds.join(","));a.objectIds&&
    (a.objectIds=a.objectIds.join(","));a.size&&(a.size=a.size.join(","));return a}Object.defineProperty(a,"__esModule",{value:!0});a.processAttachmentQueryResult=function(a,b){for(var c={},d=0;d<a.length;d++)for(var e=a[d],f=e.parentObjectId,g=e.parentGlobalId,n=0,e=e.attachmentInfos;n<e.length;n++){var m=e[n],w=l.addProxy(l.addTokenParameter(b+"/"+f+"/attachments/"+m.id)),m=h.fromJSON(m);m.set({url:w,parentObjectId:f,parentGlobalId:g});c[f]?c[f].push(m):c[f]=[m]}return c};a.executeAttachmentQuery=function(a,
    b,c){b={query:g.mapParameters(m({},a.query,{f:"json"},d(b)))};c&&(b=m({},c,b));return e(a.path+"/queryAttachments",b)}})},"esri/tasks/operations/queryRelatedRecords":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../request","./urlUtils"],function(c,a,m,e,l){function h(a){a=a.toJSON();a.objectIds&&(a.objectIds=a.objectIds.join(","));a.outFields&&(a.outFields=a.outFields.join(","));a.outSpatialReference&&(a.outSR=a.outSR.wkid||JSON.stringify(a.outSR.toJSON()),delete a.outSpatialReference);
    a.source&&(a.layer=JSON.stringify({source:a.source}),delete a.source);return a}Object.defineProperty(a,"__esModule",{value:!0});a.toQueryStringParameters=h;a.executeRelationshipQuery=function(a,c,n){c={query:l.mapParameters(m({},a.query,{f:"json"},h(c)))};n&&(c=m({},n,c));return e(a.path+"/queryRelatedRecords",c).then(function(a){for(var b=a.data,c=b.geometryType,d=b.spatialReference,e={},g=0,b=b.relatedRecordGroups;g<b.length;g++){var h=b[g],l={fields:void 0,objectIdFieldName:void 0,geometryType:c,
    spatialReference:d,features:h.relatedRecords};if(null!=h.objectId)e[h.objectId]=l;else for(var n in h)h.hasOwnProperty(n)&&"relatedRecords"!==n&&(e[h[n]]=l)}a.data=e;return a})}})},"esri/views/View":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/assignHelper ../Map ../TimeExtent ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Error ../core/Evented ../core/HandleOwner ../core/Loadable ../core/Logger ../core/maybe ../core/Promise ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/HeightModelInfo ../geometry/SpatialReference ../geometry/support/spatialReferenceUtils ../support/GraphicsCollection ./BasemapView ./LayerViewManager ./RefreshManager ./ToolViewManager ./input/Input ./input/ViewEvents ./navigation/Navigation ./support/DefaultsFromMap".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D,E,C,F,I,G,J,H,N,L){var M=r.getLogger("esri.views.View");return function(a){function c(c){var e=a.call(this,c)||this;e._userSpatialReference=null;e._cursor=null;e.allLayerViews=new b({root:e,rootCollectionNames:["basemapView.baseLayerViews","groundView?.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});e.animation=null;e.basemapView=null;e.defaultsFromMap=new L({view:e});e.fatalError=
    null;e.extent=null;e.graphics=new E.default;e.interacting=!1;e.layerViews=new n;e.padding={left:0,top:0,right:0,bottom:0};e.ready=!1;e.spatialReferenceWarningDelay=1E3;e.timeExtent=null;e.type=null;e.scale=null;e.updating=!1;e.initialExtentRequired=!0;e.renderContext=null;e.input=new J;e.navigation=new N;e.layerViewManager=null;e.refreshManager=null;e.isHeightModelInfoRequired=!1;e.width=null;e.height=null;e.resizing=!1;e.suspended=!1;e.viewEvents=new H.ViewEvents(e);e._isValid=!1;e._readyCycleForced=
    !1;e.handles.add(e.watch("preconditionsReady",function(a){a?(e._currentSpatialReference=e.spatialReference,d.views.add(e)):(e._currentSpatialReference=null,d.views.remove(e));e.notifyChange("spatialReference");!a&&e.ready?(e.layerViewManager.clear(),e.toolViewManager.detach(),e._teardown()):a&&!e.ready&&(e._startup(),e.toolViewManager.attach())},!0));return e}e(c,a);d=c;c.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.validate().then(function(){a._isValid=!0;return x.whenOnce(a,
    "ready")}));this.basemapView=new C.BasemapView({view:this});this.layerViewManager=new F.default({view:this,layerViewImporter:{importLayerView:function(b){return a.importLayerView(b)},hasLayerViewModule:function(b){return a.hasLayerViewModule(b)}}});this.refreshManager=new I({view:this});this.toolViewManager=new G({view:this});this._resetInitialViewPropertiesFromContent();var b;x.init(this.defaultsFromMap,"isSpatialReferenceDone",function(c){var d=!!(a.map&&0<a.map.allLayers.length);if((!c||a.spatialReference||
    !d)&&b)b=null;else if(c&&!a.spatialReference&&d&&!b){var e=b=w.after(a.spatialReferenceWarningDelay);b.then(function(){e===b&&M.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}).catch(function(){})}},!0)};c.prototype.destroy=function(){this.destroyed||(this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.map=null,this.graphics.destroy(),this.graphics=null,this.handles.remove("defaultsFromMap"),
    this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager.destroy(),this.toolViewManager=null,this.refreshManager.destroy(),this.refreshManager=null,this.layerViewManager.destroy(),this.layerViewManager=null,this.basemapView.destroy(),this.basemapView=null,this.invalidate(),this._emitter.clear(),this.handles.removeAll())};c.prototype._startup=function(){this._set("ready",!0)};c.prototype._teardown=function(){this._set("ready",!1)};c.prototype.whenReady=function(){return w.resolve()};
    c.prototype.toMap=function(a){M.error("#toMap()","Not implemented on this instance of View");return null};Object.defineProperty(c.prototype,"heightModelInfo",{get:function(){return this.getDefaultHeightModelInfo()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"preconditionsReady",{get:function(){return!!(!this.fatalError&&this._isValid&&!this._readyCycleForced&&this.map&&(!f.isLoadable(this.map)||this.map.loaded)&&0!==this.width&&0!==this.height&&this.spatialReference&&this.isSpatialReferenceSupported(this.spatialReference)&&
    (this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isSpatialReferenceDone)&&this.defaultsFromMap&&this.defaultsFromMap.isTileInfoDone)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"map",{set:function(a){var b=this._get("map");a!==b&&(f.isLoadable(a)&&a.load(),this.initialized&&(this.forceReadyCycle(),this._resetInitialViewPropertiesFromContent()),this._set("map",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "spatialReference",{get:function(){var a=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;a&&this.isHeightModelInfoRequired&&this.defaultsFromMap&&(a=a.clone(),a.vcsWkid=this.defaultsFromMap.vcsWkid,a.latestVcsWkid=this.defaultsFromMap.latestVcsWkid);return a},set:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"stationary",{get:function(){return!this.animation&&
    !this.interacting&&!this.resizing},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"initialExtent",{get:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"cursor",{get:function(){var a=this.toolViewManager?this.toolViewManager.cursor:null;return t.isSome(a)?a:this._cursor||"default"},set:function(a){this._cursor=a;this.notifyChange("cursor")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
    "size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});c.prototype.whenLayerView=function(a){return this.layerViewManager.whenLayerView(a)};c.prototype.getDefaultSpatialReference=function(){return this.get("defaultsFromMap.spatialReference")};c.prototype.getDefaultHeightModelInfo=function(){return this.get("map.supportsHeightModelInfo")&&this.get("map.heightModelInfo")||this.get("defaultsFromMap.heightModelInfo")||null};c.prototype.importLayerView=function(a){throw new p("importLayerView() not implemented");
    };c.prototype.hasLayerViewModule=function(a){return!1};c.prototype.validate=function(){return w.resolve()};c.prototype.invalidate=function(){this._isValid=!1};c.prototype.isSpatialReferenceSupported=function(a,b,c){return!0};c.prototype.isTileInfoRequired=function(){return!1};c.prototype.when=function(a,b){this.isResolved()&&!this.ready&&M.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.');
    return this.inherited(arguments,[a,b])};c.prototype.forceReadyCycle=function(){var a=this;this.ready&&(this._readyCycleForced=!0,x.whenFalseOnce(this,"preconditionsReady",function(){return a._readyCycleForced=!1}))};c.prototype.createTool=function(a,b,c){return this.toolViewManager.createTool(a,b,c)};c.prototype.tryFatalErrorRecovery=function(){this.fatalError=null};c.prototype._resetInitialViewPropertiesFromContent=function(){var a=this;if(this.defaultsFromMap){var b=function(){return a.defaultsFromMap&&
    a.defaultsFromMap.start()};this.defaultsFromMap.reset();this._currentSpatialReference=null;this.notifyChange("spatialReference");this.handles.remove("defaultsFromMap");this.handles.add([x.watch(this,"spatialReference",function(a,c){D.equals(a,c)||b()}),x.watch(this,"initialExtentRequired",b),v.schedule(b)],"defaultsFromMap")}};var d;c.views=new n;m([z.aliasOf("toolViewManager.activeTool")],c.prototype,"activeTool",void 0);m([z.property({readOnly:!0})],c.prototype,"allLayerViews",void 0);m([z.property()],
    c.prototype,"animation",void 0);m([z.property()],c.prototype,"basemapView",void 0);m([z.property()],c.prototype,"defaultsFromMap",void 0);m([z.property()],c.prototype,"fatalError",void 0);m([z.property({type:A})],c.prototype,"extent",void 0);m([z.property(E.graphicsCollectionProperty)],c.prototype,"graphics",void 0);m([z.property({readOnly:!0,type:y,dependsOn:["map.heightModelInfo?","defaultsFromMap.heightModelInfo"]})],c.prototype,"heightModelInfo",null);m([z.property()],c.prototype,"interacting",
    void 0);m([z.property({readOnly:!0,dependsOn:"fatalError _isValid _readyCycleForced map map.loaded? width height spatialReference _currentSpatialReference initialExtentRequired initialExtent defaultsFromMap.isSpatialReferenceDone defaultsFromMap.isTileInfoDone".split(" ")})],c.prototype,"preconditionsReady",null);m([z.property({type:n,readOnly:!0})],c.prototype,"layerViews",void 0);m([z.property({value:null,type:h})],c.prototype,"map",null);m([z.property()],c.prototype,"padding",void 0);m([z.property({readOnly:!0})],
    c.prototype,"ready",void 0);m([z.property({type:B,dependsOn:["defaultsFromMap.spatialReference","defaultsFromMap.vcsWkid","defaultsFromMap.latestVcsWkid"]})],c.prototype,"spatialReference",null);m([z.property()],c.prototype,"spatialReferenceWarningDelay",void 0);m([z.property({dependsOn:["animation","interacting","resizing"]})],c.prototype,"stationary",null);m([z.property({type:g})],c.prototype,"timeExtent",void 0);m([z.aliasOf("toolViewManager.tools")],c.prototype,"tools",void 0);m([z.property()],
    c.prototype,"toolViewManager",void 0);m([z.property({readOnly:!0})],c.prototype,"type",void 0);m([z.property({type:Number})],c.prototype,"scale",void 0);m([z.property({readOnly:!0})],c.prototype,"updating",void 0);m([z.property({readOnly:!0})],c.prototype,"initialExtentRequired",void 0);m([z.property({readOnly:!0,type:A,dependsOn:["defaultsFromMap.extent"]})],c.prototype,"initialExtent",null);m([z.property({dependsOn:["toolViewManager.cursor"]})],c.prototype,"cursor",null);m([z.property()],c.prototype,
    "renderContext",void 0);m([z.property({readOnly:!0})],c.prototype,"input",void 0);m([z.property({type:N,nonNullable:!0})],c.prototype,"navigation",void 0);m([z.property()],c.prototype,"layerViewManager",void 0);m([z.property()],c.prototype,"width",void 0);m([z.property()],c.prototype,"height",void 0);m([z.property({readOnly:!0})],c.prototype,"resizing",void 0);m([z.property({value:null,dependsOn:["width","height"],readOnly:!0})],c.prototype,"size",null);m([z.property({readOnly:!0})],c.prototype,"suspended",
    void 0);m([z.property({readOnly:!0})],c.prototype,"viewEvents",void 0);m([z.property()],c.prototype,"_isValid",void 0);m([z.property()],c.prototype,"_readyCycleForced",void 0);m([z.property()],c.prototype,"_currentSpatialReference",void 0);return c=d=m([z.subclass("esri.views.View")],c)}(z.declared(q.HandleOwnerMixin(k.EventedMixin(u.EsriPromiseMixin(d)))))})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators ../views/support/WatchUpdatingTracking".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});a.HandleOwnerMixin=function(a){return function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);b.prototype.destroy=function(){this.destroyed||(this.handles.destroy(),this.updatingHandles.destroy())};Object.defineProperty(b.prototype,"handles",{get:function(){return this._get("handles")||new h},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updatingHandles",{get:function(){return this._get("updatingHandles")||
    new d.WatchUpdatingTracking},enumerable:!0,configurable:!0});e([g.property({readOnly:!0})],b.prototype,"handles",null);e([g.property({readOnly:!0})],b.prototype,"updatingHandles",null);return b=e([g.subclass("esri.core.HandleOwner")],b)}(g.declared(a))};c=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}m(b,a);return b=e([g.subclass("esri.core.HandleOwner")],b)}(g.declared(a.HandleOwnerMixin(l)));a.HandleOwner=c})},"esri/views/support/WatchUpdatingTracking":function(){define("require exports ../../core/tsSupport/decorateHelper ../../core/tsSupport/declareExtendsHelper ../../core/Accessor ../../core/Handles ../../core/scheduling ../../core/watchUtils ../../core/accessorSupport/decorators ../../core/accessorSupport/wire".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.updating=!1;b.handleId=0;b.handles=new h;b.scheduleHandleId=0;b.pendingPromises=new Set;return b}e(c,a);c.prototype.destroy=function(){this.removeAll();this.handles.destroy()};c.prototype.add=function(a,b,c,e){var f=this;void 0===e&&(e=0);var g=0!==(e&1),h=++this.handleId;g||this.installSyncUpdatingWatch(a,b,h);a=0!==(e&2)?d.init(a,b,c,g):a.watch(b,
    c,g);this.handles.add(a,h);return{remove:function(){f.handles.remove(h)}}};c.prototype.addOnCollectionPropertyChange=function(a,b,c,e){var f=this;void 0===e&&(e=0);e=0!==(e&2);var g=++this.handleId;this.handles.add([d.on(a,b,"after-changes",this.createSyncUpdatingCallback()),d.on(a,b,"change",c,e?function(a){c({added:a.items,removed:[],moved:[],target:a})}:null)],g);return{remove:function(){f.handles.remove(g)}}};c.prototype.addOnCollectionChange=function(a,b,c){var d=this;void 0===c&&(c=0);c=0!==
    (c&2);var e=++this.handleId;this.handles.add([a.on("after-changes",this.createSyncUpdatingCallback()),a.on("change",b)],e);c&&b({added:a.items,removed:[],moved:[],target:a});return{remove:function(){d.handles.remove(e)}}};c.prototype.addPromise=function(a){var b=this;if(!a)return a;var c=++this.handleId;this.handles.add({remove:function(){b.pendingPromises.delete(a)&&(0!==b.pendingPromises.size||b.handles.has(p)||b._set("updating",!1))}},c);this.pendingPromises.add(a);this._set("updating",!0);var d=
    function(){return b.handles.remove(c)};a.then(d,d);return a};c.prototype.removeAll=function(){this.pendingPromises.clear();this.handles.removeAll();this._set("updating",!1)};c.prototype.installSyncUpdatingWatch=function(a,c,d){a=b.default(a,c,this.createSyncUpdatingCallback());this.handles.add(a,d);return a};c.prototype.createSyncUpdatingCallback=function(){var a=this;return function(){a.handles.remove(p);++a.scheduleHandleId;var b=a.scheduleHandleId;a._get("updating")||a._set("updating",!0);a.handles.add(g.schedule(function(){b===
    a.scheduleHandleId&&(a._set("updating",0<a.pendingPromises.size),a.handles.remove(p))}),p)}};m([n.property({readOnly:!0})],c.prototype,"updating",void 0);return c=m([n.subclass("esri.views.support.WatchUpdatingTracking")],c)}(n.declared(l));a.WatchUpdatingTracking=c;var p=-42})},"esri/support/GraphicsCollection":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../Graphic ../core/Collection ../core/collectionUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType".split(" "),
    function(c,a,m,e,l,h,g,d,n){Object.defineProperty(a,"__esModule",{value:!0});var b=function(a){function b(b){var c=a.call(this,b)||this;c.on("before-add",function(a){a.item||a.preventDefault()});c.on("after-add",function(a){return c._own(a.item)});c.on("after-remove",function(a){a.item.layer=null});return c}e(b,a);c=b;b.prototype.destroy=function(){this._unownAll()};Object.defineProperty(b.prototype,"owner",{get:function(){return this._get("owner")},set:function(a){a!==this._get("owner")&&(this._unownAll(),
    this._set("owner",a),this._ownAll())},enumerable:!0,configurable:!0});b.prototype._createNewInstance=function(a){return new c(a)};b.prototype._ownAll=function(){var a=this;this.items.forEach(function(b){return a._own(b)})};b.prototype._own=function(a){a.layer&&"group"!==a.layer.type&&"remove"in a.layer&&a.layer!==this.owner&&a.layer.remove(a);a.layer=this.owner};b.prototype._unownAll=function(){var a=this;this.items.forEach(function(b){return a._unown(b)})};b.prototype._unown=function(a){a.layer===
    this.owner&&(a.layer=null)};var c;m([d.property()],b.prototype,"owner",null);return b=c=m([d.subclass("esri.support.GraphicsCollection")],b)}(d.declared(h.ofType(l)));a.GraphicsCollection=b;a.castGraphicsCollection=function(a){if(a=n.default(b,a))a.owner=this;return a};a.graphicsCollectionProperty={type:b,cast:g.castForReferenceSetter,set:function(a){a=g.referenceSetter(a,this._get("graphics"),b);a.owner=this;this._set("graphics",a)}};a.default=b})},"esri/views/BasemapView":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/watchUtils ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function b(b){b=a.call(this,b)||this;b.view=null;b.baseLayerViews=new h;b.referenceLayerViews=new h;b._loadingHandle=g.init(b,"view.map.basemap",function(a){a&&a.load()});return b}m(b,a);b.prototype.destroy=function(){this._set("view",null);this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)};Object.defineProperty(b.prototype,"suspended",{get:function(){return this.view?this.view.suspended:
    !0},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return this.view&&this.view.suspended?!1:!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)},enumerable:!0,configurable:!0});e([d.property({constructOnly:!0})],b.prototype,"view",void 0);e([d.property({readOnly:!0})],b.prototype,"baseLayerViews",void 0);e([d.property({readOnly:!0})],b.prototype,"referenceLayerViews",void 0);e([d.property({readOnly:!0,dependsOn:["view.suspended"]})],
    b.prototype,"suspended",null);e([d.property({type:Boolean,readOnly:!0,dependsOn:["view.suspended","view.map.basemap.loaded"]})],b.prototype,"updating",null);return b=e([d.subclass("esri.views.BasemapView")],b)}(d.declared(l));a.BasemapView=c})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/Error ../core/HandleOwner ../core/Logger ../core/promiseUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./support/WatchUpdatingTracking".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){Object.defineProperty(a,"__esModule",{value:!0});var r=n.getLogger("esri.views.LayerViewManager"),t=new Map;t.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");t.set("view.map.ground.layers","view.groundView.layerViews");t.set("view.map.layers","view.layerViews");t.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");var u=function(){function a(a,c,d){var e=this;this.layer=a;this.view=c;this.layerViewImporter=d;this._controller=
    b.createAbortController();this._deferred=b.createDeferred();this.done=this._started=!1;b.onAbort(this._controller.signal,function(){var b=new g("cancelled:layerview-create","layerview creation cancelled",{layer:a});e._deferred.reject(b)})}Object.defineProperty(a.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!0,configurable:!0});a.prototype.destroy=function(){this._controller.abort();var a=this.layerView;if(a){var b=this.layer,c=this.view;a.destroy();b.emit("layerview-destroy",
    {view:c,layerView:a});c.emit("layerview-destroy",{layer:b,layerView:a});this.done=!0;this.layerViewImporter=this.view=this.layerView=this.layer=null;a.layer=null;a.parent=null;a.view=null}};a.prototype.start=function(){return h(this,void 0,void 0,function(){var a,c,d,e,f,h,k,n;return l(this,function(l){switch(l.label){case 0:if(this._started)return[2];this._started=!0;a=this;c=a._controller.signal;d=a.layer;e=a.view;this._map=e.map;l.label=1;case 1:return l.trys.push([1,10,,11]),[4,d.load({signal:c})];
    case 2:return l.sent(),"prefetchResources"in d?[4,d.prefetchResources({signal:c})]:[3,4];case 3:l.sent(),l.label=4;case 4:return f=void 0,d.createLayerView?[4,d.createLayerView(e,{signal:c})]:[3,6];case 5:return f=l.sent(),[3,8];case 6:if(!this.layerViewImporter.hasLayerViewModule(d))throw new g("layer:view-not-supported","No layerview implementation was found");return[4,this.layerViewImporter.importLayerView(d)];case 7:h=l.sent(),b.throwIfAborted(c),f="default"in h?new h.default({layer:d,view:e}):
    new h({layer:d,view:e}),l.label=8;case 8:return b.throwIfAborted(c),[4,f.when()];case 9:l.sent();k=this._map&&this._map.allLayers.includes(d);if(!k||c.aborted)return f.destroy(),f.layer=f.parent=f.view=null,this.done=!0,k?[2]:[2,this._deferred.reject(new g("view:no-layerview-for-layer","The layer has been removed from the map",{layer:d}))];this.layerView=f;d.emit("layerview-create",{view:e,layerView:f});e.emit("layerview-create",{layer:d,layerView:f});this.done=!0;this._deferred.resolve(f);return[3,
    11];case 10:return n=l.sent(),d.emit("layerview-create-error",{view:e,error:n}),e.emit("layerview-create-error",{layer:d,error:n}),this.done=!0,this._deferred.reject(new g("layerview:create-error","layerview creation failed",{layer:d,error:n})),[3,11];case 11:return[2]}})})};return a}();c=function(a){function c(b){var c=a.call(this,b)||this;c._layerLayerViewInfoMap=new Map;c._watchUpdatingTracking=new f.WatchUpdatingTracking;c.view=null;c._preloadLayerViewModules=function(){var a=c.view,b=c.get("view.map.allLayers");
    a&&b&&b.forEach(function(a){c.layerViewImporter.hasLayerViewModule(a)&&c.layerViewImporter.importLayerView(a)})};c._reschedule=function(){c.handles.remove("reschedule");c.handles.add(p.schedule(c._doWork),"reschedule");c.notifyChange("updating")};c._doWork=function(){var a=c.get("view.map");c._map!==a&&(c.clear(),c._map=a);if(c.handles.has("reschedule")){c.handles.remove("reschedule");c.handles.remove("collection-change");var b=a&&a.allLayers;if(b){b.forEach(c._createLayerView,c);c._refreshCollections();
    var d=[];c._layerLayerViewInfoMap.forEach(function(a,c){b.includes(c)||d.push(a)});for(a=0;a<d.length;a++){var e=d[a];c._layerLayerViewInfoMap.delete(e.layer);e.destroy()}c.handles.add(c._watchUpdatingTracking.addOnCollectionChange(b,c._reschedule),"collection-change");c.notifyChange("updating")}}};c.handles.add([k.on(c,"view.map.allLayers","change",c._preloadLayerViewModules,c._preloadLayerViewModules),c.watch(["view.map.basemap","view.map.ground","view.map.layers","view.ready"],c._reschedule,!0)]);
    return c}m(c,a);c.prototype.initialize=function(){this._preloadLayerViewModules()};c.prototype.destroy=function(){this.clear();this._watchUpdatingTracking.destroy();this._map=this.view=null};Object.defineProperty(c.prototype,"updating",{get:function(){if(this.handles.has("reschedule")||this._watchUpdatingTracking.updating)return!0;var a=!0;this._layerLayerViewInfoMap.forEach(function(b){return a=a&&b.done});return!a},enumerable:!0,configurable:!0});c.prototype.clear=function(){this.destroyed||(this._layerLayerViewInfoMap.forEach(function(a){return a.destroy()}),
    this._layerLayerViewInfoMap.clear(),this._refreshCollections())};c.prototype.whenLayerView=function(a){this._reschedule();this._doWork();return this._layerLayerViewInfoMap.has(a)?this._layerLayerViewInfoMap.get(a).promise:b.reject(new g("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a}))};c.prototype._refreshCollections=function(){var a=this;t.forEach(function(b,c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})};c.prototype._populateLayerViewsOwners=function(a,
    b,c){var d=this;if(a&&b){var e=0;a.forEach(function(a){var f=d._layerLayerViewInfoMap.get(a);f&&f.layerView&&(f=f.layerView,f.layer=a,f.parent=c,b.getItemAt(e)!==f&&b.splice(e,0,f),a.layers&&d._populateLayerViewsOwners(a.layers,f.layerViews,f),e+=1)});e<b.length&&b.splice(e,b.length)}else b&&b.removeAll()};c.prototype._createLayerView=function(a){var c=this;if(this._layerLayerViewInfoMap.has(a))this.view.ready&&this._layerLayerViewInfoMap.get(a).start();else{a.load();this.layerViewImporter.hasLayerViewModule(a)&&
    this.layerViewImporter.importLayerView(a);var d=new u(a,this.view,this.layerViewImporter);d.promise.then(function(){c._refreshCollections();c.notifyChange("updating")},function(d){d&&(b.isAbortError(d)||"cancelled:layerview-create"===d.name)||r.error("Failed to create view for layer '"+a.title+", id:"+a.id+"' of type '"+a.type+"'.",{error:d});c._refreshCollections();c.notifyChange("updating")});this._layerLayerViewInfoMap.set(a,d);this.view.ready&&d.start()}this.notifyChange("updating")};e([q.property({readOnly:!0})],
    c.prototype,"_watchUpdatingTracking",void 0);e([q.property()],c.prototype,"layerViewImporter",void 0);e([q.property({readOnly:!0,dependsOn:["_watchUpdatingTracking.updating"]})],c.prototype,"updating",null);e([q.property()],c.prototype,"view",void 0);return c=e([q.subclass("esri.views.LayerViewManager")],c)}(q.declared(d.HandleOwner));a.default=c})},"esri/views/RefreshManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Handles ../core/accessorSupport/decorators ./layers/RefreshableLayerView".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new h;b._currentTick=0;return b}m(b,a);b.prototype.initialize=function(){var a=this;this._handles.add([this.view.allLayerViews.on("after-changes",function(){a.notifyChange("tickInterval");a._handles.remove("layerViewsUpdating");a._handles.add(a._getLayerViewHandles(),"layerViewsUpdating")}),this.watch("tickInterval",function(){return a._restartTicking()}),this.watch("view.ready",function(){return a._restartTicking()})]);
    this._restartTicking()};b.prototype.destroy=function(){this._handles&&(this._handles.destroy(),this._handles=null,this._intervalID&&clearInterval(this._intervalID),this._currentTick=0)};Object.defineProperty(b.prototype,"tickInterval",{get:function(){var a=this.view.allLayerViews.filter(function(a){return d.isRefreshableLayerView(a)});return this._getCommonInterval(a)},enumerable:!0,configurable:!0});b.prototype._restartTicking=function(){var a=this;this._currentTick=0;this._intervalID&&clearInterval(this._intervalID);
    this.get("view.ready")&&this.tickInterval&&(this._intervalID=setInterval(function(){var b=Date.now();a._currentTick+=a.tickInterval;a.view.allLayerViews.forEach(function(c){if(d.isRefreshableLayerView(c)){var e=Math.round(6E4*c.refreshInterval),g=0===a._currentTick%e,h=6E3>b-c.refreshTimestamp;e&&g&&!h&&c.refresh(b)}})},this.tickInterval))};b.prototype._getLayerViewHandles=function(){var a=this,b=[],c=function(){return a.notifyChange("tickInterval")};this.view.allLayerViews.forEach(function(a){d.isRefreshableLayerView(a)&&
    a.layer&&b.push(a.watch("refreshInterval",c),a.layer.on("refresh",function(){a.refresh(Date.now())}))});return b};b.prototype._getCommonInterval=function(a){var b=function(a,c){return isNaN(a)||isNaN(c)?0:0>=c?a:b(c,a%c)};return a.toArray().reduce(function(a,c){return b(Math.round(6E4*c.refreshInterval),a)},0)};e([g.property()],b.prototype,"view",void 0);e([g.property({readOnly:!0})],b.prototype,"tickInterval",null);return b=e([g.subclass("esri.views.RefreshManager")],b)}(g.declared(l))})},"esri/views/layers/RefreshableLayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/promiseUtils ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d){Object.defineProperty(a,"__esModule",{value:!0});a.RefreshableLayerView=function(a){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.refreshTimestamp=null;b.refreshDebounced=g.debounce(function(a,c){return h(b,void 0,void 0,function(){var b;return l(this,function(d){switch(d.label){case 0:return"number"===typeof a?b=a:(b=Date.now(),c=a),this._set("refreshTimestamp",b),this.doRefresh?[4,this.doRefresh(c)]:[3,2];case 1:d.sent(),d.label=2;case 2:return[2]}})})},
    2E3);return b}m(b,a);b.prototype.refresh=function(a){void 0===a&&(a=Date.now());this._set("refreshTimestamp",a);this.doRefresh&&this.doRefresh()};e([d.property()],b.prototype,"layer",void 0);e([d.aliasOf("layer.refreshInterval")],b.prototype,"refreshInterval",void 0);e([d.property({readOnly:!0})],b.prototype,"refreshTimestamp",void 0);return b=e([d.subclass("esri.layers.mixins.RefreshableLayerView")],b)}(d.declared(a))};a.isRefreshableLayerView=function(a){return"refresh"in a}})},"esri/views/ToolViewManager":function(){define("require exports ../core/tsSupport/decorateHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/Collection ../core/Handles ../core/Logger ../core/maybe ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./input/InputManager ./input/ViewEvents ./interactive/interactiveToolUtils ./interactive/ToolViewManagerManipulatorState".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v){var x=p.getLogger("esri.views.ToolViewManager");return function(a){function c(c){var d=a.call(this,c)||this;d._handles=new b;d._creatingTool=null;d._manipulatorState=new v.default;d.tools=w.newToolCollection();d.cursor=null;d._forEachTool=function(a){if(!k.isSome(d._creatingTool)||!a(d._creatingTool))for(var b=0,c=d.tools.items;b<c.length&&!a(c[b]);b++);};return d}e(c,a);c.prototype.initialize=function(){var a=this;this._handles.add([this.view.on(u.eventTypes,
    function(b){a._handleInputEvent(b)},t.ViewEventPriorities.TOOL),this.tools.on("before-add",function(b){var c=b.item;null==c||a.tools.includes(c)?b.preventDefault():null==c.created||c.created||(x.error("tools","Tool can not be added to view before it has been created"),b.preventDefault())}),this.tools.on("before-remove",function(b){a._manipulatorState.clearPointers(b.item,a._forEachTool)}),this.tools.on("change",function(){a._refreshToolWatchers()})])};c.prototype.destroy=function(){this._forEachTool(function(a){return a.destroy()});
    this._handles.destroy();this._handles=null};Object.defineProperty(c.prototype,"activeTool",{set:function(a){var b=this;k.isSome(a)&&!this.view.ready?x.error("#activeTool\x3d","cannot set active tool while view is not ready"):(w.swap(this,a,function(c){b._set("activeTool",c);b._removeIncompleteTools(a);b._forEachTool(function(a){var c=k.isNone(b.activeTool)||a===b.activeTool;a.setEditableFlag&&a.setEditableFlag(1,c);c=w.areToolManipulatorsEditable(a);!k.isNone(b.activeTool)&&c||b._manipulatorState.clearPointers(a,
    b._forEachTool,!c)});b._updateCursor()}),this._creatingTool!==a&&this._rejectCreatingTool())},enumerable:!0,configurable:!0});c.prototype.createTool=function(a,b,c){return h(this,void 0,void 0,function(){var e,h,n,m=this;return l(this,function(l){switch(l.label){case 0:return[4,this.view.whenReady()];case 1:return l.sent(),e=w.evaluateToolConstructorArguments(b),h=new a(g({},e,{view:this.view})),n=q.onAbort(c,function(){return m.activeTool=null}),this._rejectCreatingTool("Tool creation was interrupted by another tool being created"),
    this._creatingTool=h,h.attach(),this._refreshToolWatchers(),w.setActive(h,!0),[4,h.when()];case 2:return l.sent(),k.isSome(n)&&n.remove(),this._creatingTool=null,this.tools.add(h),h instanceof d&&null!=h.completed&&f.whenOnce(h,"completed").then(function(){w.setActive(h,!1)}),[2,h]}})})};c.prototype.attach=function(){var a=this;this._forEachTool(function(a){return a.attach()});"3d"===this.view.type?this._handles.add([this.view.state.watch("camera",function(){a.forEachManipulator(function(a){if(null!=
    a.onViewChange)a.onViewChange()})}),this.view.elevationProvider.on("elevation-change",function(b){a.forEachManipulator(function(a){if(null!=a.onElevationChange)a.onElevationChange(b)})})],"manipulators"):this._handles.add(this.view.watch("extent",function(){a.forEachManipulator(function(a){if(null!=a.onViewChange)a.onViewChange()})}))};c.prototype.detach=function(){this.activeTool=null;this._forEachTool(function(a){a.detach();a.destroy()});this.tools.removeAll();this._handles.remove("manipulators")};
    c.prototype.forEachManipulator=function(a){this._forEachTool(function(b){b.manipulators&&b.manipulators.forEach(function(c){return a(c.manipulator,b)})})};c.prototype._handleInputEvent=function(a){var b=this;k.isSome(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(a):this._forEachTool(function(b){!1!==b.visible&&b.handleInputEvent&&b.handleInputEvent(a)});"key-down"===a.type&&"Escape"===a.key&&this.activeTool&&(a.stopPropagation(),this.activeTool=null);this._manipulatorState.handleInputEvent(a,
    {forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:function(a){b.activeTool=a},creatingTool:this._creatingTool,view:this.view});this._manipulatorState.handleHoverEvent(a,this._forEachTool);this._updateCursor()};c.prototype._refreshToolWatchers=function(){var a=this;this._handles.remove("tools");this._updateCursor();this._forEachTool(function(b){if(b instanceof d){var c=f.watch(b,["cursor","visible","editable"],function(){w.areToolManipulatorsEditable(b)||a._manipulatorState.clearPointers(b,
    a._forEachTool);a._updateCursor()});a._handles.add(c,"tools")}b.manipulators&&a._handles.add(b.manipulators.on("change",function(c){c.removed.forEach(function(c){a._manipulatorState.clearPointers(b,a._forEachTool,!0,c.id)});a._updateCursor()}),"tools")})};c.prototype._updateCursor=function(){var a=null;this._forEachTool(function(b){return null!=b.cursor&&!1!==b.visible?(a=b.cursor,!0):!1});a||(a=this._manipulatorState.cursor);this._get("cursor")!==a&&this._set("cursor",a)};c.prototype._rejectCreatingTool=
    function(a){var b=this._creatingTool;k.isNone(b)||(this._manipulatorState.clearPointers(b,this._forEachTool),b.rejectCreation&&b.rejectCreation(q.createAbortError(a)),b.destroy(),this._creatingTool=null,this._refreshToolWatchers())};c.prototype._removeIncompleteTools=function(a){var b=this;this.tools.filter(function(b){return(k.isNone(a)||b!==a)&&null!=b.completed&&!b.completed}).forEach(function(a){b.tools.remove(a)})};m([r.property({constructOnly:!0,nonNullable:!0})],c.prototype,"view",void 0);
    m([r.property({value:null})],c.prototype,"activeTool",null);m([r.property({readOnly:!0,type:n})],c.prototype,"tools",void 0);m([r.property({readOnly:!0})],c.prototype,"cursor",void 0);return c=m([r.subclass("esri.views.ToolViewManager")],c)}(r.declared(d))})},"esri/views/input/InputManager":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Logger ../../core/now ../../core/accessorSupport/decorators ./keys ./handlers/LatestPointerType".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){Object.defineProperty(a,"__esModule",{value:!0});var p=h.getLogger("esri.views.input.InputManager");c=function(c){function f(a){a=c.call(this,a)||this;a._pointerCaptures=new Map;a._nameToGroup={};a._handlers=[];a._currentPropagation=null;a._sourceEvents=new Set;a._keyModifiers=new Set;a._activeKeyModifiers=new Set;a._stoppedPropagationEventIds=new Set;a.primaryKey=n.primaryKey;a.latestPointerType="mouse";a.test={timestamp:void 0};return a}m(f,c);f.prototype.initialize=
    function(){this.eventSource.onEventReceived=this._onEventReceived.bind(this);this._installRecognizers()};f.prototype.destroy=function(){for(var a=0,b=Object.keys(this._nameToGroup);a<b.length;a++)this.uninstallHandlers(b[a]);this.eventSource=null};Object.defineProperty(f.prototype,"hasPendingInputs",{get:function(){return this._handlers.some(function(a){return a.handler.hasPendingInputs})},enumerable:!0,configurable:!0});f.prototype.installHandlers=function(b,c,d){var e=this;void 0===d&&(d=a.ViewEventPriorities.INTERNAL);
    if(this._nameToGroup[b])p.error("There is already an InputHandler group registered under the name `"+b+"`");else if(0===c.length)p.error("Can't register a group of zero handlers");else{var f={name:b,handlers:c.map(function(a){return{handler:a,active:!0,removed:!1,priorityIndex:0,groupPriority:d,eventCallback:null,uninstallCallback:null}})};this._nameToGroup[b]=f;b=function(a){var b=f.handlers[a];g._handlers.push(b);b.handler.onInstall({updateDependencies:function(){e.updateDependencies()},emit:function(a,
    c,d,f,g){e._emitInputEvent(b.priorityIndex,a,c,d,g,f)},setPointerCapture:function(a,c){e._setPointerCapture(f,b,a,c)},setEventCallback:function(a){b.eventCallback=a},setUninstallCallback:function(a){b.uninstallCallback=a},refreshHasPendingInputs:function(){e.notifyChange("hasPendingInputs")}})};var g=this;for(c=f.handlers.length-1;0<=c;c--)b(c);this.updateDependencies()}};f.prototype.uninstallHandlers=function(a){var b=this._nameToGroup[a];b?(b.handlers.forEach(function(a){a.removed=!0;a.uninstallCallback()}),
    delete this._nameToGroup[a],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):p.error("There is no InputHandler group registered under the name `"+a+"`")};f.prototype.hasHandlers=function(a){return void 0!==this._nameToGroup[a]};f.prototype.updateDependencies=function(){var a=new Set,b=new Set;this._handlersPriority=[];for(var c=this._handlers.length-1;0<=c;c--){var d=this._handlers[c];d.priorityIndex=c;this._handlersPriority.push(d)}this._handlersPriority=
    this._sortHandlersPriority(this._handlersPriority);for(c=this._handlersPriority.length-1;0<=c;c--){d=this._handlersPriority[c];d.priorityIndex=c;var e=d.handler.hasSideEffects;if(!e)for(var f=0,g=d.handler.outgoingEventTypes;f<g.length;f++)if(a.has(g[f])){e=!0;break}if(e)for(f=0,g=d.handler.incomingEventMatches;f<g.length;f++){var h=g[f];a.add(h.eventType);for(var k=0,h=h.keyModifiers;k<h.length;k++){var l=h[k];n.isSystemModifier(l)||b.add(l)}}d.active=e}this._sourceEvents=a;this._keyModifiers=b;
    0<this._pointerCaptures.size&&this._sourceEvents.add("pointer-capture-lost");0<this._keyModifiers.size&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up"));this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)};f.prototype._setLatestPointerType=function(a){this._set("latestPointerType",a)};f.prototype._onEventReceived=function(a,b){"pointer-capture-lost"===a&&this._pointerCaptures.delete(b.native.pointerId);this._updateKeyModifiers(a,b);this._emitInputEventFromSource(a,
    b,null!=this.test.timestamp?this.test.timestamp:b.native?b.native.timestamp:void 0,b.native?b.native.cancelable:void 0)};f.prototype._updateKeyModifiers=function(a,b){var c=this;if(b){var d=!1,e=function(){if(!d){var a=new Set;c._activeKeyModifiers.forEach(function(b){a.add(b)});c._activeKeyModifiers=a;d=!0}},f=function(a,b){b&&!c._activeKeyModifiers.has(a)?(e(),c._activeKeyModifiers.add(a)):!b&&c._activeKeyModifiers.has(a)&&(e(),c._activeKeyModifiers.delete(a))};if("key-down"===a||"key-up"===a){var g=
    b.key;this._keyModifiers.has(g)&&f(g,"key-down"===a)}a=b.native;f("Alt",!(!a||!a.altKey));f("Ctrl",!(!a||!a.ctrlKey));f("Shift",!(!a||!a.shiftKey));f("Meta",!(!a||!a.metaKey));f("Primary",this._activeKeyModifiers.has(this.primaryKey))}};f.prototype._installRecognizers=function(){var c=this;this._latestPointerTypeHandler=new b.LatestPointerType(function(a){return c._setLatestPointerType(a)});0<this.recognizers.length&&this.installHandlers("default",this.recognizers,a.ViewEventPriorities.INTERNAL);
    this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],a.ViewEventPriorities.INTERNAL)};f.prototype._setPointerCapture=function(a,b,c,d){a=a.name+"-"+b.priorityIndex;b=this._pointerCaptures.get(c.pointerId)||new Set;this._pointerCaptures.set(c.pointerId,b);d?(b.add(a),1===b.size&&this.eventSource&&this.eventSource.setPointerCapture(c,!0)):b.has(a)&&(b.delete(a),0===b.size&&(this._pointerCaptures.delete(c.pointerId),this.eventSource&&this.eventSource.setPointerCapture(c,!1)))};
    f.prototype._garbageCollectRemovedHandlers=function(){this._handlers=this._handlers.filter(function(a){return!a.removed});this.updateDependencies()};f.prototype._emitInputEventFromSource=function(a,b,c,d){this._emitInputEvent(0,a,b,c,d)};f.prototype._emitInputEvent=function(a,b,c,d,e,f){d=void 0!==d?d:this._currentPropagation?this._currentPropagation.timestamp:g();b=new k(b,c,d,f||this._activeKeyModifiers,void 0!==e?e:!1);this._currentPropagation?this._currentPropagation.addedEvents.push(b):this._doNewPropagation(a,
    b)};f.prototype._doNewPropagation=function(a,b){for(a=this._currentPropagation={events:[b],addedEvents:[],currentHandler:this._handlersPriority[a],needsHandlerGarbageCollect:!1,timestamp:b.timestamp};a.currentHandler;){if(a.currentHandler.removed)a.needsHandlerGarbageCollect=!0;else{b=a.events;var c=[];a.addedEvents=[];for(var d=0;d<b.length;d++){var e=b[d],f=e.data&&e.data.eventId;null!=f&&this._stoppedPropagationEventIds.has(f)||(a.currentHandler.active&&a.currentHandler.eventCallback(e),e.shouldStopPropagation()?
    null!=f&&this._stoppedPropagationEventIds.add(f):c.push(e))}a.events=c.concat(a.addedEvents)}a.currentHandler=this._handlersPriority[a.currentHandler.priorityIndex+1]}a.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers();this.hasPendingInputs||this._stoppedPropagationEventIds.clear();this._currentPropagation=null};f.prototype._compareHandlerPriority=function(a,b){if(a.handler.hasSideEffects!==b.handler.hasSideEffects)return a.handler.hasSideEffects?1:-1;if(a.groupPriority!==b.groupPriority)return a.groupPriority>
    b.groupPriority?-1:1;for(var c=0,d=a.handler.incomingEventMatches;c<d.length;c++)for(var e=d[c],f=function(a){if(e.eventType!==a.eventType)return"continue";var b=e.keyModifiers.filter(function(b){return-1!==a.keyModifiers.indexOf(b)});if(b.length===e.keyModifiers.length!==(b.length===a.keyModifiers.length))return{value:e.keyModifiers.length>a.keyModifiers.length?-1:1}},g=0,h=b.handler.incomingEventMatches;g<h.length;g++){var k=f(h[g]);if("object"===typeof k)return k.value}return a.priorityIndex>b.priorityIndex?
    -1:1};f.prototype._sortHandlersPriority=function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=0;e<b.length&&0<=this._compareHandlerPriority(d,b[e]);)e++;b.splice(e,0,d)}return b};Object.defineProperty(f.prototype,"debug",{get:function(){var a=this,b=function(b){var c=a._setPointerCapture;a._setPointerCapture=function(){};b();a._setPointerCapture=c};return{injectEvent:function(c,d){b(function(){a._onEventReceived(c,d)})},disablePointerCapture:b}},enumerable:!0,configurable:!0});e([d.property({readOnly:!0})],
    f.prototype,"hasPendingInputs",null);e([d.property({})],f.prototype,"eventSource",void 0);e([d.property({})],f.prototype,"recognizers",void 0);e([d.property({readOnly:!0})],f.prototype,"latestPointerType",void 0);return f=e([d.subclass("esri.views.input.InputManager")],f)}(d.declared(l));a.InputManager=c;var k=function(){function a(a,b,c,d,e){this.type=a;this.data=b;this.timestamp=c;this.modifiers=d;this.cancelable=e;this._stopPropagation=!1}a.prototype.stopPropagation=function(){this._stopPropagation=
    !0};a.prototype.shouldStopPropagation=function(){return this._stopPropagation};a.prototype.preventDefault=function(){this.data.native.preventDefault()};return a}();a.ViewEventPriorities={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3}})},"esri/views/input/keys":function(){define(["require","exports","../../core/events","../../core/has"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});a.primaryKey=e("mac")?"Meta":"Ctrl";var l={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",
    35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(c=48;58>c;c++)l[c]=String.fromCharCode(c);for(c=1;25>c;c++)l[111+c]="F"+c;for(c=65;91>c;c++)l[c]=[String.fromCharCode(c+32),String.fromCharCode(c)];a.eventKey=function(a){if(void 0!==a.key)return m.eventKey(a);var c=l[a.keyCode];return Array.isArray(c)?a.shiftKey?c[1]:c[0]:c};a.isSystemModifier=function(a){switch(a){case "Ctrl":case "Alt":case "Shift":case "Meta":case "Primary":return!0}return!1}})},
    "esri/views/input/handlers/LatestPointerType":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","../InputHandler"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(c){var d=a.call(this,!0)||this;d._onChange=c;d._value="mouse";d.registerIncoming("pointer-down",function(a){d._setValue("touch"===a.data.native.pointerType?"touch":"mouse")});d._moveHandler=d.registerIncoming("pointer-move",function(a){d._setValue("touch"===a.data.native.pointerType?
    "touch":"mouse")});d._moveHandler.pause();return d}m(c,a);c.prototype._setValue=function(a){a!==this._value&&("touch"===a?this._moveHandler.resume():this._moveHandler.pause(),this._value=a,this._onChange(a))};return c}(e.InputHandler);a.LatestPointerType=c})},"esri/views/input/InputHandler":function(){define(["require","exports","../../core/Logger","./EventMatch"],function(c,a,m,e){Object.defineProperty(a,"__esModule",{value:!0});var l=m.getLogger("esri.views.input.InputHandler");c=function(){function a(a){this._manager=
    null;this._incoming={};this._outgoing={};this._outgoingEventTypes=this._incomingEventTypes=this._incomingEventMatches=null;this._hasSideEffects=a}Object.defineProperty(a.prototype,"incomingEventMatches",{get:function(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(var a in this._incoming)for(var b=0,c=this._incoming[a];b<c.length;b++)this._incomingEventMatches.push(c[b].match)}return this._incomingEventMatches},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
    "incomingEventTypes",{get:function(){this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(function(a){return a.eventType}));return this._incomingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"outgoingEventTypes",{get:function(){this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing));return this._outgoingEventTypes},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasSideEffects",{get:function(){return this._hasSideEffects},
    enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasPendingInputs",{get:function(){return!1},enumerable:!0,configurable:!0});a.prototype.onInstall=function(a){var b=this;this._manager?l.error("This InputHandler has already been registered with an InputManager"):(a.setEventCallback(function(a){return b._handleEvent(a)}),a.setUninstallCallback(function(){return b._onUninstall()}),this._manager=a)};a.prototype.onUninstall=function(){};a.prototype.registerIncoming=function(a,b,c){var d=
    this;"function"===typeof b?(c=b,b=[]):b=b||[];a="string"===typeof a?new e.EventMatch(a,b):a;var g=function(){d._incomingEventTypes=null;d._incomingEventMatches=null};b=function(a){var b=d._incoming[a.match.eventType];b&&(a=b.indexOf(a),b.splice(a,1),g(),d._manager&&d._manager.updateDependencies())};c=new h(a,c,{onPause:b,onRemove:b,onResume:function(a){var b=d._incoming[a.match.eventType];b&&-1===b.indexOf(a)&&(b.push(a),g(),d._manager&&d._manager.updateDependencies())}});b=this._incoming[a.eventType];
    b||(b=[],this._incoming[a.eventType]=b);b.push(c);g();this._manager&&this._manager.updateDependencies();return c};a.prototype.registerOutgoing=function(a){var b=this;if(this._outgoing[a])throw Error("There is already a callback registered for this outgoing InputEvent: "+a);var c=new g(a,{onEmit:function(a,c,d,e){b._manager.emit(a.eventType,c,d,e)},onRemove:function(a){delete b._outgoing[a.eventType];b._manager.updateDependencies()}});this._outgoing[a]=c;this._outgoingEventTypes=null;this._manager&&
    this._manager.updateDependencies();return c};a.prototype.startCapturingPointer=function(a){this._manager.setPointerCapture(a,!0)};a.prototype.stopCapturingPointer=function(a){this._manager.setPointerCapture(a,!1)};a.prototype.refreshHasPendingInputs=function(){this._manager.refreshHasPendingInputs()};a.prototype._onUninstall=function(){this._manager?(this.onUninstall(),this._manager=null):l.error("This InputHandler is not registered with an InputManager")};a.prototype._handleEvent=function(a){var b=
    this._incoming[a.type];if(b)for(var c=0;c<b.length;c++){var d=b[c];if(d.match.matches(a)&&(d.callback(a),a.shouldStopPropagation()))break}};return a}();a.InputHandler=c;var h=function(){function a(a,b,c){this.match=a;this._callback=b;this._handler=c}a.prototype.pause=function(){this._handler.onPause(this)};a.prototype.resume=function(){this._handler.onResume(this)};a.prototype.remove=function(){this._handler.onRemove(this)};Object.defineProperty(a.prototype,"callback",{get:function(){return this._callback},
    enumerable:!0,configurable:!0});return a}(),g=function(){function a(a,b){this.eventType=a;this._removed=!1;this._handler=b}a.prototype.emit=function(a,b,c){if(!this._removed)this._handler.onEmit(this,a,b,c)};a.prototype.remove=function(){this._removed=!0;this._handler.onRemove(this)};return a}()})},"esri/views/input/EventMatch":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,c){void 0===c&&(c=[]);this.eventType=a;this.keyModifiers=
    c}a.prototype.matches=function(a){if(a.type!==this.eventType)return!1;if(0===this.keyModifiers.length)return!0;a=a.modifiers;for(var c=0,e=this.keyModifiers;c<e.length;c++)if(!a.has(e[c]))return!1;return!0};return a}();a.EventMatch=c})},"esri/views/input/ViewEvents":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/compilerUtils ../../core/mathUtils ../../core/screenUtils ./InputHandler ./InputManager".split(" "),function(c,a,m,e,l,h,g,d){function n(a){return!!p[a]}
    function b(a){for(var b=0;b<a.length;b++)if(!n(a[b]))return!1;return!0}Object.defineProperty(a,"__esModule",{value:!0});a.eventTypes="click double-click immediate-click hold drag key-down key-up pointer-down pointer-move pointer-up pointer-drag mouse-wheel pointer-enter pointer-leave gamepad focus blur".split(" ");var p={};a.eventTypes.forEach(function(a){p[a]=!0});c=function(){function a(a){this.handlers=new Map;this.counter=0;this.handlerCounts=new Map;this.view=a;this.inputManager=null}a.prototype.connect=
    function(a){var b=this;a&&this.disconnect();this.inputManager=a;this.handlers.forEach(function(a,c){return b.inputManager.installHandlers(c,[a.handler],a.priority)})};a.prototype.disconnect=function(){var a=this;this.inputManager&&this.handlers.forEach(function(b,c){return a.inputManager.uninstallHandlers(c)});this.inputManager=null};a.prototype.destroy=function(){this.disconnect();this.handlers.clear();this.view=null};a.prototype.on=function(a,c,e,g){var f=this,h=Array.isArray(a)?a:a.split(",");
    if(!b(h))return h.some(n)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;var l;Array.isArray(c)?a=c:(l=c,a=[]);"function"===typeof e?l=e:g=e;g=null!=g?g:d.ViewEventPriorities.DEFAULT;var m=this.createUniqueGroupName();e=new k(this.view,h,a,l);this.handlers.set(m,{handler:e,priority:g});for(l=0;l<h.length;l++)a=h[l],c=this.handlerCounts.get(a)||0,this.handlerCounts.set(a,c+1);this.inputManager&&this.inputManager.installHandlers(m,
    [e],g);return{remove:function(){return f.removeHandler(m,h)}}};a.prototype.hasHandler=function(a){return!!this.handlerCounts.get(a)};a.prototype.removeHandler=function(a,b){if(this.handlers.has(a)){this.handlers.delete(a);for(var c=0;c<b.length;c++){var d=b[c],e=this.handlerCounts.get(d);void 0===e?console.error("Trying to remove handler for event that has no handlers registered: ",d):1===e?this.handlerCounts.delete(d):this.handlerCounts.set(d,e-1)}}this.inputManager&&this.inputManager.uninstallHandlers(a)};
    a.prototype.createUniqueGroupName=function(){this.counter+=1;return"viewEvents_"+this.counter};return a}();a.ViewEvents=c;var k=function(a){function b(b,c,d,f){var g=a.call(this,!0)||this;g.view=b;for(b=0;b<c.length;b++){var h=c[b];switch(h){case "click":g.registerIncoming("click",d,function(a){return f(g.wrapClick(a))});break;case "double-click":g.registerIncoming("double-click",d,function(a){return f(g.wrapDoubleClick(a))});break;case "immediate-click":g.registerIncoming("immediate-click",d,function(a){return f(g.wrapImmediateClick(a))});
    break;case "hold":g.registerIncoming("hold",d,function(a){return f(g.wrapHold(a))});break;case "drag":g.registerIncoming("drag",d,function(a){(a=g.wrapDrag(a))&&f(a)});break;case "key-down":g.registerIncoming("key-down",d,function(a){return f(g.wrapKeyDown(a))});break;case "key-up":g.registerIncoming("key-up",d,function(a){return f(g.wrapKeyUp(a))});break;case "pointer-down":g.registerIncoming("pointer-down",d,function(a){return f(g.wrapPointer(a,"pointer-down"))});break;case "pointer-move":g.registerIncoming("pointer-move",
    d,function(a){return f(g.wrapPointer(a,"pointer-move"))});break;case "pointer-up":g.registerIncoming("pointer-up",d,function(a){return f(g.wrapPointer(a,"pointer-up"))});break;case "pointer-drag":g.registerIncoming("pointer-drag",d,function(a){return f(g.wrapPointerDrag(a))});break;case "mouse-wheel":g.registerIncoming("mouse-wheel",d,function(a){return f(g.wrapMouseWheel(a))});break;case "pointer-enter":g.registerIncoming("pointer-enter",d,function(a){return f(g.wrapPointer(a,"pointer-enter"))});
    break;case "pointer-leave":g.registerIncoming("pointer-leave",d,function(a){return f(g.wrapPointer(a,"pointer-leave"))});break;case "gamepad":g.registerIncoming("gamepad",d,function(a){f(g.wrapGamepad(a))});break;case "focus":g.registerIncoming("focus",d,function(a){f(g.wrapFocus(a))});break;case "blur":g.registerIncoming("blur",d,function(a){f(g.wrapBlur(a))});break;default:e.neverReached(h)}}return g}m(b,a);b.prototype.wrapFocus=function(a){return{type:"focus",timestamp:a.timestamp,native:a.data.native,
    cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapBlur=function(a){return{type:"blur",timestamp:a.timestamp,native:a.data.native,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapClick=function(a){var b=a.data,c=b.pointerType,d=b.button,e=b.buttons,f=b.x,g=b.y,k=b.native,b=b.eventId,l=a.cancelable,n=
    a.timestamp,m=h.createScreenPoint(f,g),p=this.view.toMap(m);return{type:"click",pointerType:c,button:d,buttons:e,x:f,y:g,native:k,timestamp:n,screenPoint:m,mapPoint:p,eventId:b,cancelable:l,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapDoubleClick=function(a){var b=a.data,c=b.x,d=b.y,e=b.eventId,f=a.cancelable;return{type:"double-click",pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:b.native,
    timestamp:a.timestamp,mapPoint:this.view.toMap(h.createScreenPoint(c,d)),eventId:e,cancelable:f,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapImmediateClick=function(a){var b=a.data,c=b.x,d=b.y,e=b.native,f=b.eventId,g=a.cancelable;return{type:"immediate-click",pointerId:e.pointerId,pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:e,timestamp:a.timestamp,mapPoint:this.view.toMap(h.createScreenPoint(c,
    d)),eventId:f,cancelable:g,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapHold=function(a){var b=a.data,c=b.x,d=b.y,e=a.cancelable;return{type:"hold",pointerType:b.pointerType,button:b.button,buttons:b.buttons,x:c,y:d,native:b.native,timestamp:a.timestamp,mapPoint:this.view.toMap(h.createScreenPoint(c,d)),cancelable:e,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};
    b.prototype.wrapDrag=function(a){var b=a.data,c=b.center,d=c.x,c=c.y,e=b.action,f=b.pointerType,g=b.button;"start"===e&&(this.latestDragStart=b);if(this.latestDragStart){var h=b.pointer.native,k=b.buttons,n=a.cancelable,m=a.timestamp,p={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};"end"===e&&(this.latestDragStart=void 0);return{type:"drag",action:e,x:d,y:c,origin:p,pointerType:f,button:g,buttons:k,radius:b.radius,angle:l.rad2deg(b.angle),native:h,timestamp:m,cancelable:n,stopPropagation:function(){return a.stopPropagation()},
    preventDefault:function(){return a.preventDefault()}}}};b.prototype.wrapKeyDown=function(a){var b=a.data;return{type:"key-down",key:b.key,repeat:b.repeat,native:b.native,timestamp:a.timestamp,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapKeyUp=function(a){var b=a.data;return{type:"key-up",key:b.key,native:b.native,timestamp:a.timestamp,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},
    preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapPointer=function(a,b){var c=a.data,d=c.native;return{type:b,x:c.x,y:c.y,pointerId:d.pointerId,pointerType:d.pointerType,button:c.button,buttons:c.buttons,native:d,timestamp:a.timestamp,eventId:c.eventId,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapPointerDrag=function(a){var b=a.data.currentEvent;return{type:"pointer-drag",
    x:b.x,y:b.y,pointerId:a.data.startEvent.native.pointerId,pointerType:a.data.startEvent.native.pointerType,button:a.data.startEvent.button,buttons:b.buttons,action:a.data.action,origin:{x:a.data.startEvent.x,y:a.data.startEvent.y},native:b.native,timestamp:a.timestamp,eventId:b.eventId,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapMouseWheel=function(a){var b=a.data;return{type:"mouse-wheel",x:b.x,
    y:b.y,deltaY:b.deltaY,native:b.native,timestamp:a.timestamp,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};b.prototype.wrapGamepad=function(a){var b=a.data,c=b.state;return{type:"gamepad",device:b.device,timestamp:a.timestamp,action:b.action,buttons:c.buttons,axes:c.axes,cancelable:a.cancelable,stopPropagation:function(){return a.stopPropagation()},preventDefault:function(){return a.preventDefault()}}};return b}(g.InputHandler)})},
    "esri/views/interactive/interactiveToolUtils":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/Collection ../../core/maybe ../DOMContainer".split(" "),function(c,a,m,e,l,h){function g(a,c){var b=a.view;b&&(c&&b.ready&&b.activeTool!==a?(b.activeTool=a,h.isDOMContainer(b)&&b.focus()):c||b.activeTool!==a||(b.activeTool=null))}Object.defineProperty(a,"__esModule",{value:!0});a.setActive=g;a.swap=function(a,c,b){a=a.activeTool;c!==a&&(l.isSome(a)&&a.deactivate&&a.deactivate(),
    b(c),l.isSome(c)&&c.activate&&c.activate())};a.newToolCollection=function(){var a=new e;a.on("after-add",function(a){a=a.item;a.view&&a.view.ready&&a.attach()});a.on("after-remove",function(a){a=a.item;g(a,!1);a.destroyed||a.detach()});return a};a.areToolManipulatorsEditable=function(a){return!1!==a.visible&&!1!==a.editable&&(null==a.hasEditableFlag||a.hasEditableFlag(1))};a.evaluateToolConstructorArguments=function(a){return l.isNone(a)?{}:"function"===typeof a?a():a}})},"esri/views/DOMContainer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/domUtils ../core/scheduling ../core/watchUtils ../core/accessorSupport/decorators ./overlay/ViewOverlay ../widgets/Popup".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){function p(a){a&&(l.empty(a),a.parentNode&&a.parentNode.removeChild(a))}Object.defineProperty(a,"__esModule",{value:!0});var k=[0,0];a.DOMContainer=function(a){return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var d=a.apply(this,b)||this;d._freqInfo={freq:16,time:750};d._overlayRenderTaskHandle=null;d.height=0;d.position=null;d.resizing=!1;d.root=null;d.surface=null;d.suspended=!0;d.ui=null;d.userContent=null;d.width=0;d.widthBreakpoint=
    null;d.handles.add([d.watch("cursor",function(a){var b=d.surface;b&&b.setAttribute("data-cursor",a)}),d.watch("interacting",function(a){var b=d.surface;b&&b.setAttribute("data-interacting",a.toString())})]);return d}m(c,a);c.prototype.initialize=function(){var a=this;this.handles.add(this.watch("ui",function(b,c){return a._handleUIChange(b,c)}));this._wireUI(this.ui);this.handles.add([this.on("focus",function(){return a.notifyChange("focused")}),this.on("blur",function(){return a.notifyChange("focused")})])};
    c.prototype.destroy=function(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)};Object.defineProperty(c.prototype,"container",{set:function(a){var b=this,c=this._get("container");if(c!==a)if(this.handles.remove("dom-size"),this._stopMeasuring(),c&&(c.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",
    null),p(this.root),this._set("root",null),l.reparent(this.userContent,c),p(this.userContent),this._set("userContent",null)),a){a.classList.add("esri-view");c=document.createElement("div");c.className="esri-view-user-storage";l.reparent(a,c);a.appendChild(c);this._set("userContent",c);c=document.createElement("div");c.className="esri-view-root";a.insertBefore(c,a.firstChild);this._set("root",c);var d=document.createElement("div");d.className="esri-view-surface";d.setAttribute("role","application");
    d.tabIndex=0;c.appendChild(d);this._set("surface",d);var e=new n;c.appendChild(e.surface);this._set("overlay",e);e.watch("needsRender",function(a){a&&!b._overlayRenderTaskHandle?b._overlayRenderTaskHandle=h.addFrameTask({render:function(){b.overlay.render()}}):b._overlayRenderTaskHandle&&(b._overlayRenderTaskHandle.remove(),b._overlayRenderTaskHandle=null)});this.forceDOMReadyCycle();this.handles.add(g.init(this,"size",function(a){var b=a[1];a[0]>=document.body.clientWidth||b>=document.body.clientHeight?
    d.classList.add("esri-view-surface--inset-outline"):d.classList.remove("esri-view-surface--inset-outline")}),"dom-size");this._set("container",a);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"focused",{get:function(){var a=document.activeElement===this.surface;return document.hasFocus()&&a},enumerable:!0,
    configurable:!0});Object.defineProperty(c.prototype,"popup",{get:function(){return this._get("popup")||new b({view:this})},set:function(a){var b=this._get("popup");b&&b!==a&&b.destroy();this._set("popup",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"size",{get:function(){return[this.width,this.height]},enumerable:!0,configurable:!0});c.prototype.blur=function(){this.surface&&this.surface.blur()};c.prototype.focus=function(){this.surface&&this.surface.focus()};c.prototype.pageToContainer=
    function(a,b,c){var d=this.position;a-=d[0];b-=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};c.prototype.containerToPage=function(a,b,c){var d=this.position;a+=d[0];b+=d[1];c?(c[0]=a,c[1]=b):c=[a,b];return c};c.prototype._handleUIChange=function(a,b){b&&(this.handles.remove("ui"),b.destroy());a&&this._wireUI(a);this._set("ui",a)};c.prototype._wireUI=function(a){this.handles.remove("ui");a&&(a.view=this,this.handles.add([g.init(this,"root",function(b){if(b){var c=document.createElement("div");b.appendChild(c);
    b=c}else b=null;a.container=b}),g.init(this,"popup",function(b,c){c&&a.remove(c,"popup");b&&(b.view=a.view,a.add(b,{key:"popup",position:"manual"}))})],"ui"))};c.prototype._stopMeasuring=function(){this.handles.remove("measuring");this._get("resizing")&&this._set("resizing",!1)};c.prototype._startMeasuring=function(){var a=this,b=this._freqInfo;b.freq=16;b.time=750;this.handles.add([function(){var a=function(){b.freq=16;b.time=750};window.addEventListener("resize",a);return{remove:function(){window.removeEventListener("resize",
    a)}}}(),h.addFrameTask({prepare:function(b){var c=a._measure(),d=a._freqInfo;d.time+=b.deltaTime;c&&(d.freq=16,a._get("resizing")||a._set("resizing",!0));d.time<d.freq||(d.time=0,a._position()||c?d.freq=16:d.freq=Math.min(750,2*d.freq),!c&&512<=d.freq&&a._get("resizing")&&a._set("resizing",!1))}})],"measuring");this._measure();this._position()};c.prototype._measure=function(){var a=this.container,b=a?a.clientWidth:0,c=a?a.clientHeight:0;if(0===b||0===c||"hidden"===window.getComputedStyle(a).visibility)return this.suspended||
    this._set("suspended",!0),!1;var a=this.width,d=this.height;if(b===a&&c===d)return this.suspended&&this._set("suspended",!1),!1;this._set("width",b);this._set("height",c);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:a,oldHeight:d,width:b,height:c});return!0};c.prototype._position=function(){var a=this.container,b=this.position,c=(a.ownerDocument||window.document).defaultView,a=a.getBoundingClientRect();k[0]=a.left+c.pageXOffset;k[1]=a.top+c.pageYOffset;return b&&k[0]===b[0]&&
    k[1]===b[1]?!1:(this._set("position",[k[0],k[1]]),!0)};c.prototype.forceDOMReadyCycle=function(){};e([d.property({value:null,cast:function(a){return l.byId(a)}})],c.prototype,"container",null);e([d.property({readOnly:!0,dependsOn:["surface"]})],c.prototype,"focused",null);e([d.property({readOnly:!0})],c.prototype,"height",void 0);e([d.property({type:b})],c.prototype,"popup",null);e([d.property({type:n})],c.prototype,"overlay",void 0);e([d.property({readOnly:!0})],c.prototype,"position",void 0);e([d.property({readOnly:!0})],
    c.prototype,"resizing",void 0);e([d.property({readOnly:!0})],c.prototype,"root",void 0);e([d.property({value:null,dependsOn:["width","height"],readOnly:!0})],c.prototype,"size",null);e([d.property({readOnly:!0})],c.prototype,"surface",void 0);e([d.property({readOnly:!0})],c.prototype,"suspended",void 0);e([d.property()],c.prototype,"ui",void 0);e([d.property({readOnly:!0})],c.prototype,"userContent",void 0);e([d.property({readOnly:!0})],c.prototype,"width",void 0);e([d.property()],c.prototype,"widthBreakpoint",
    void 0);return c=e([d.subclass("esri.views.DOMContainer")],c)}(d.declared(a))};a.isDOMContainer=function(a){return a&&"focus"in a}})},"esri/core/domUtils":function(){define(["require","exports","../widgets/support/widget"],function(c,a,m){function e(a){return m.isWidgetBase(a)?a.domNode:a}Object.defineProperty(a,"__esModule",{value:!0});a.show=function(a){if(a=e(a))a.style.display="block"};a.getNode=e;a.hide=function(a){if(a=e(a))a.style.display="none"};a.toggle=function(a){if(a=e(a))a.style.display=
    "none"===a.style.display?"block":"none"};a.byId=function(a){return"string"===typeof a?document.getElementById(a):a};a.empty=function(a){for(;a.hasChildNodes();)a.removeChild(a.firstChild)};a.insertAfter=function(a,c){var e=c.parentNode;e&&(e.lastChild===c?e.appendChild(a):e.insertBefore(a,c.nextSibling))};a.insertBefore=function(a,c){var e=c.parentNode;e&&e.insertBefore(a,c)};a.reparent=function(a,c){for(;a.hasChildNodes();)c.appendChild(a.firstChild)};a.remove=function(a){a.parentNode&&a.parentNode.removeChild(a)};
    a.closest=function(){if(Element.prototype.closest)return function(a,c){return a.closest(c)};var a=Element.prototype.matches||Element.prototype.msMatchesSelector;return function(c,e){do{if(a.call(c,e))return c;c=c.parentElement}while(null!==c&&1===c.nodeType);return null}}()})},"esri/widgets/support/widget":function(){define("require exports ./decorators ./jsxFactory ./widgetUtils ./shim/SVGElement".split(" "),function(c,a,m,e,l){function h(c){for(var d in c)a.hasOwnProperty(d)||(a[d]=c[d])}Object.defineProperty(a,
    "__esModule",{value:!0});h(m);h(e);h(l);a.isWidget=function(a){return a&&"function"===typeof a.render};a.isWidgetBase=function(a){return a&&"function"===typeof a.postMixInProperties&&"function"===typeof a.buildRendering&&"function"===typeof a.postCreate&&"function"===typeof a.startup}})},"esri/widgets/support/decorators":function(){define(["require","exports","./decorators/accessibleHandler","./decorators/renderable","./decorators/vmEvent"],function(c,a,m,e,l){function h(c){for(var d in c)a.hasOwnProperty(d)||
    (a[d]=c[d])}Object.defineProperty(a,"__esModule",{value:!0});h(m);h(e);h(l)})},"esri/widgets/support/decorators/accessibleHandler":function(){define(["require","exports"],function(c,a){function m(a){return function(c){for(var e=[],g=1;g<arguments.length;g++)e[g-1]=arguments[g];g=c.type;if(c instanceof KeyboardEvent||"keyup"===g||"keydown"===g||"keypress"===g){if("Enter"===c.key||" "===c.key)c.preventDefault(),c.stopPropagation(),c.target.click()}else a.call.apply(a,[this,c].concat(e))}}Object.defineProperty(a,
    "__esModule",{value:!0});a.accessibleHandler=function(){return function(a,c){return{value:m(a[c])}}}})},"esri/widgets/support/decorators/renderable":function(){define(["require","exports","./propUtils"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.renderable=function(a){var c="string"===typeof a?m.splitProps(a):a;return function(a,e){a._renderableProps||(a._renderableProps=[]);a=a._renderableProps;c?a.push.apply(a,m.normalizePropNames(c,e)):a.push(e)}}})},"esri/widgets/support/decorators/propUtils":function(){define(["require",
    "exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.splitProps=function(a){return a.split(",").map(function(a){return a.trim()})};a.normalizePropNames=function(a,c){return a.map(function(a){a=0===a.indexOf(c)?a:c+"."+a;return a})}})},"esri/widgets/support/decorators/vmEvent":function(){define(["require","exports","./propUtils"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.vmEvent=function(a){return function(c){c._delegatedEventNames||(c._delegatedEventNames=
    []);var e=Array.isArray(a)?a:m.splitProps(a);c._delegatedEventNames=c._delegatedEventNames.concat(e)}}})},"esri/widgets/support/jsxFactory":function(){define(["require","exports","maquette-jsx"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.tsx=m.jsx})},"maquette-jsx/dist/maquette-jsx.umd":function(){(function(c,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):(c=c||self,a(c.maquetteCssTransitions=
    {}))})(this,function(c){var a=function(c,l){for(var e=0,g=c.length;e<g;e++){var d=c[e];Array.isArray(d)?a(d,l):null!==d&&void 0!==d&&!1!==d&&(d.hasOwnProperty("vnodeSelector")||(d={vnodeSelector:"",properties:void 0,children:void 0,text:d.toString(),domNode:null}),l.push(d))}},m=function(c,l){for(var e=[],g=2;g<arguments.length;g++)e[g-2]=arguments[g];if(1===e.length&&"string"===typeof e[0])return{vnodeSelector:c,properties:l||void 0,children:void 0,text:e[0],domNode:null};g=[];a(e,g);return{vnodeSelector:c,
    properties:l||void 0,children:g,text:void 0,domNode:null}};c.enableGlobalJsx=function(){window.jsx=m};c.jsx=m;Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/support/widgetUtils":function(){define("require exports ../../core/ArrayPool ../../core/has ../../core/Logger ../../libs/sanitizer/Sanitizer maquette-css-transitions".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});l.getLogger("esri.widgets.support.widgetUtils");a.join=function(){for(var a=
    [],c=0;c<arguments.length;c++)a[c]=arguments[c];return a.join(" ")};a.classes=function(a){for(var c=m.acquire(),b=0;b<arguments.length;b++){var d=arguments[b],e=typeof d;if("string"===e)c.push(d);else if(Array.isArray(d))c.push.apply(c,d);else if("object"===e)for(var g in d)d[g]&&c.push(g)}b=c.join(" ");m.release(c);return b};a.isRTL=function(){return"rtl"===document.dir};a.storeNode=function(a){this[a.getAttribute("data-node-ref")]=a};a.cssTransition=function(a,c){return("enter"===a?g.createEnterCssTransition:
    g.createExitCssTransition)(c)};a.sanitizer=new h})},"esri/libs/sanitizer/Sanitizer":function(){!function(c,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.Sanitizer=a():c.Sanitizer=a()}(this,function(){return function(c){function a(e){if(m[e])return m[e].exports;var l=m[e]={i:e,l:!1,exports:{}};return c[e].call(l.exports,l,l.exports,a),l.l=!0,l.exports}var m={};return a.m=c,a.c=m,a.d=function(c,
    l,h){a.o(c,l)||Object.defineProperty(c,l,{enumerable:!0,get:h})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"});Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(c,l){if((1&l&&(c=a(c)),8&l)||4&l&&"object"==typeof c&&c&&c.__esModule)return c;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:c}),2&l&&"string"!=typeof c)for(var g in c)a.d(e,g,function(a){return c[a]}.bind(null,
    g));return e},a.n=function(c){var e=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(e,"a",e),e},a.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},a.p="",a(a.s=8)}([function(c,a,m){function e(a,b){return(new g(b)).process(a)}var l=m(3),h=m(6),g=m(11),d;for(d in(a=c.exports=e).filterXSS=e,a.FilterXSS=g,l)a[d]=l[d];for(d in h)a[d]=h[d];"undefined"!=typeof self&&"undefined"!=typeof DedicatedWorkerGlobalScope&&self instanceof DedicatedWorkerGlobalScope&&(self.filterXSS=
    c.exports)},function(c,a,m){var e=m(4),l=m(9),h;for(h in(a=c.exports=function(a,c){return(new l(c)).process(a)}).FilterCSS=l,e)a[h]=e[h]},function(c,a){c.exports={indexOf:function(a,c){var e,h;if(Array.prototype.indexOf)return a.indexOf(c);e=0;for(h=a.length;e<h;e++)if(a[e]===c)return e;return-1},forEach:function(a,c,l){var e,g;if(Array.prototype.forEach)return a.forEach(c,l);e=0;for(g=a.length;e<g;e++)c.call(l,a[e],e,a)},trim:function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,
    "")},spaceIndex:function(a){return(a=/\s|\n|\t/.exec(a))?a.index:-1}}},function(c,a,m){function e(a){return a.replace(r,"\x26lt;").replace(t,"\x26gt;")}function l(a){return a.replace(u,"\x26quot;")}function h(a){return a.replace(w,'"')}function g(a){return a.replace(v,function(a,b){return"x"===b[0]||"X"===b[0]?String.fromCharCode(parseInt(b.substr(1),16)):String.fromCharCode(parseInt(b,10))})}function d(a){return a.replace(x,":").replace(z," ")}function n(a){for(var b="",c=0,d=a.length;c<d;c++)b+=
    32>a.charCodeAt(c)?" ":a.charAt(c);return q.trim(b)}function b(a){return a=n(a=d(a=g(a=h(a))))}function p(a){return a=e(a=l(a))}c=m(1).FilterCSS;var k=m(1).getDefaultWhiteList,q=m(2),f=new c,r=/</g,t=/>/g,u=/"/g,w=/&quot;/g,v=/&#([a-zA-Z0-9]*);?/gim,x=/&colon;?/gim,z=/&newline;?/gim,A=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,y=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,B=/u\s*r\s*l\s*\(.*/gi,D=/\x3c!--[\s\S]*?--\x3e/g;a.whiteList={a:["target",
    "href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src",
    "alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")};a.getDefaultWhiteList=
    function(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","loop","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],
    header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],sup:[],strong:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:"autoplay controls loop preload src height width".split(" ")}};
    a.onTag=function(a,b,c){};a.onIgnoreTag=function(a,b,c){};a.onTagAttr=function(a,b,c){};a.onIgnoreTagAttr=function(a,b,c){};a.safeAttrValue=function(a,c,d,e){if(d=b(d),"href"===c||"src"===c){if("#"===(d=q.trim(d)))return"#";if("http://"!==d.substr(0,7)&&"https://"!==d.substr(0,8)&&"mailto:"!==d.substr(0,7)&&"tel:"!==d.substr(0,4)&&"#"!==d[0]&&"/"!==d[0])return""}else if("background"===c){if(A.lastIndex=0,A.test(d))return""}else if("style"===c){if((y.lastIndex=0,y.test(d))||(B.lastIndex=0,B.test(d)&&
    (A.lastIndex=0,A.test(d))))return"";!1!==e&&(d=(e=e||f).process(d))}return d=p(d)};a.escapeHtml=e;a.escapeQuote=l;a.unescapeQuote=h;a.escapeHtmlEntities=g;a.escapeDangerHtml5Entities=d;a.clearNonPrintableCharacter=n;a.friendlyAttrValue=b;a.escapeAttrValue=p;a.onIgnoreTagStripAll=function(){return""};a.StripTagBody=function(a,b){"function"!=typeof b&&(b=function(){});var c=!Array.isArray(a),d=[],e=!1;return{onIgnoreTag:function(f,g,h){return c||-1!==q.indexOf(a,f)?h.isClosing?(d.push([!1!==e?e:h.position,
    h.position+10]),e=!1,"[/removed]"):(e||(e=h.position),"[removed]"):b(f,g,h)},remove:function(a){var b="",c=0;return q.forEach(d,function(d){b+=a.slice(c,d[0]);c=d[1]}),b+=a.slice(c)}}};a.stripCommentTag=function(a){return a.replace(D,"")};a.stripBlankChar=function(a){a=a.split("");return(a=a.filter(function(a){a=a.charCodeAt(0);return 127!==a&&(!(31>=a)||10===a||13===a)})).join("")};a.cssFilter=f;a.getDefaultCSSWhiteList=k},function(c,a){function m(){return{"align-content":!1,"align-items":!1,"align-self":!1,
    "alignment-adjust":!1,"alignment-baseline":!1,all:!1,"anchor-point":!1,animation:!1,"animation-delay":!1,"animation-direction":!1,"animation-duration":!1,"animation-fill-mode":!1,"animation-iteration-count":!1,"animation-name":!1,"animation-play-state":!1,"animation-timing-function":!1,azimuth:!1,"backface-visibility":!1,background:!0,"background-attachment":!0,"background-clip":!0,"background-color":!0,"background-image":!0,"background-origin":!0,"background-position":!0,"background-repeat":!0,"background-size":!0,
    "baseline-shift":!1,binding:!1,bleed:!1,"bookmark-label":!1,"bookmark-level":!1,"bookmark-state":!1,border:!0,"border-bottom":!0,"border-bottom-color":!0,"border-bottom-left-radius":!0,"border-bottom-right-radius":!0,"border-bottom-style":!0,"border-bottom-width":!0,"border-collapse":!0,"border-color":!0,"border-image":!0,"border-image-outset":!0,"border-image-repeat":!0,"border-image-slice":!0,"border-image-source":!0,"border-image-width":!0,"border-left":!0,"border-left-color":!0,"border-left-style":!0,
    "border-left-width":!0,"border-radius":!0,"border-right":!0,"border-right-color":!0,"border-right-style":!0,"border-right-width":!0,"border-spacing":!0,"border-style":!0,"border-top":!0,"border-top-color":!0,"border-top-left-radius":!0,"border-top-right-radius":!0,"border-top-style":!0,"border-top-width":!0,"border-width":!0,bottom:!1,"box-decoration-break":!0,"box-shadow":!0,"box-sizing":!0,"box-snap":!0,"box-suppress":!0,"break-after":!0,"break-before":!0,"break-inside":!0,"caption-side":!1,chains:!1,
    clear:!0,clip:!1,"clip-path":!1,"clip-rule":!1,color:!0,"color-interpolation-filters":!0,"column-count":!1,"column-fill":!1,"column-gap":!1,"column-rule":!1,"column-rule-color":!1,"column-rule-style":!1,"column-rule-width":!1,"column-span":!1,"column-width":!1,columns:!1,contain:!1,content:!1,"counter-increment":!1,"counter-reset":!1,"counter-set":!1,crop:!1,cue:!1,"cue-after":!1,"cue-before":!1,cursor:!1,direction:!1,display:!0,"display-inside":!0,"display-list":!0,"display-outside":!0,"dominant-baseline":!1,
    elevation:!1,"empty-cells":!1,filter:!1,flex:!1,"flex-basis":!1,"flex-direction":!1,"flex-flow":!1,"flex-grow":!1,"flex-shrink":!1,"flex-wrap":!1,float:!1,"float-offset":!1,"flood-color":!1,"flood-opacity":!1,"flow-from":!1,"flow-into":!1,font:!0,"font-family":!0,"font-feature-settings":!0,"font-kerning":!0,"font-language-override":!0,"font-size":!0,"font-size-adjust":!0,"font-stretch":!0,"font-style":!0,"font-synthesis":!0,"font-variant":!0,"font-variant-alternates":!0,"font-variant-caps":!0,"font-variant-east-asian":!0,
    "font-variant-ligatures":!0,"font-variant-numeric":!0,"font-variant-position":!0,"font-weight":!0,grid:!1,"grid-area":!1,"grid-auto-columns":!1,"grid-auto-flow":!1,"grid-auto-rows":!1,"grid-column":!1,"grid-column-end":!1,"grid-column-start":!1,"grid-row":!1,"grid-row-end":!1,"grid-row-start":!1,"grid-template":!1,"grid-template-areas":!1,"grid-template-columns":!1,"grid-template-rows":!1,"hanging-punctuation":!1,height:!0,hyphens:!1,icon:!1,"image-orientation":!1,"image-resolution":!1,"ime-mode":!1,
    "initial-letters":!1,"inline-box-align":!1,"justify-content":!1,"justify-items":!1,"justify-self":!1,left:!1,"letter-spacing":!0,"lighting-color":!0,"line-box-contain":!1,"line-break":!1,"line-grid":!1,"line-height":!1,"line-snap":!1,"line-stacking":!1,"line-stacking-ruby":!1,"line-stacking-shift":!1,"line-stacking-strategy":!1,"list-style":!0,"list-style-image":!0,"list-style-position":!0,"list-style-type":!0,margin:!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"marker-offset":!1,
    "marker-side":!1,marks:!1,mask:!1,"mask-box":!1,"mask-box-outset":!1,"mask-box-repeat":!1,"mask-box-slice":!1,"mask-box-source":!1,"mask-box-width":!1,"mask-clip":!1,"mask-image":!1,"mask-origin":!1,"mask-position":!1,"mask-repeat":!1,"mask-size":!1,"mask-source-type":!1,"mask-type":!1,"max-height":!0,"max-lines":!1,"max-width":!0,"min-height":!0,"min-width":!0,"move-to":!1,"nav-down":!1,"nav-index":!1,"nav-left":!1,"nav-right":!1,"nav-up":!1,"object-fit":!1,"object-position":!1,opacity:!1,order:!1,
    orphans:!1,outline:!1,"outline-color":!1,"outline-offset":!1,"outline-style":!1,"outline-width":!1,overflow:!1,"overflow-wrap":!1,"overflow-x":!1,"overflow-y":!1,padding:!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,page:!1,"page-break-after":!1,"page-break-before":!1,"page-break-inside":!1,"page-policy":!1,pause:!1,"pause-after":!1,"pause-before":!1,perspective:!1,"perspective-origin":!1,pitch:!1,"pitch-range":!1,"play-during":!1,position:!1,"presentation-level":!1,
    quotes:!1,"region-fragment":!1,resize:!1,rest:!1,"rest-after":!1,"rest-before":!1,richness:!1,right:!1,rotation:!1,"rotation-point":!1,"ruby-align":!1,"ruby-merge":!1,"ruby-position":!1,"shape-image-threshold":!1,"shape-outside":!1,"shape-margin":!1,size:!1,speak:!1,"speak-as":!1,"speak-header":!1,"speak-numeral":!1,"speak-punctuation":!1,"speech-rate":!1,stress:!1,"string-set":!1,"tab-size":!1,"table-layout":!1,"text-align":!0,"text-align-last":!0,"text-combine-upright":!0,"text-decoration":!0,"text-decoration-color":!0,
    "text-decoration-line":!0,"text-decoration-skip":!0,"text-decoration-style":!0,"text-emphasis":!0,"text-emphasis-color":!0,"text-emphasis-position":!0,"text-emphasis-style":!0,"text-height":!0,"text-indent":!0,"text-justify":!0,"text-orientation":!0,"text-overflow":!0,"text-shadow":!0,"text-space-collapse":!0,"text-transform":!0,"text-underline-position":!0,"text-wrap":!0,top:!1,transform:!1,"transform-origin":!1,"transform-style":!1,transition:!1,"transition-delay":!1,"transition-duration":!1,"transition-property":!1,
    "transition-timing-function":!1,"unicode-bidi":!1,"vertical-align":!1,visibility:!1,"voice-balance":!1,"voice-duration":!1,"voice-family":!1,"voice-pitch":!1,"voice-range":!1,"voice-rate":!1,"voice-stress":!1,"voice-volume":!1,volume:!1,"white-space":!1,widows:!1,width:!0,"will-change":!1,"word-break":!0,"word-spacing":!0,"word-wrap":!0,"wrap-flow":!1,"wrap-through":!1,"writing-mode":!1,"z-index":!1}}var e=/javascript\s*\:/gim;a.whiteList=m();a.getDefaultWhiteList=m;a.onAttr=function(a,c,e){};a.onIgnoreAttr=
    function(a,c,e){};a.safeAttrValue=function(a,c){return e.test(c)?"":c}},function(c,a){c.exports={indexOf:function(a,c){var e,h;if(Array.prototype.indexOf)return a.indexOf(c);e=0;for(h=a.length;e<h;e++)if(a[e]===c)return e;return-1},forEach:function(a,c,l){var e,g;if(Array.prototype.forEach)return a.forEach(c,l);e=0;for(g=a.length;e<g;e++)c.call(l,a[e],e,a)},trim:function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(a){return String.prototype.trimRight?
    a.trimRight():a.replace(/(\s*$)/g,"")}}},function(c,a,m){function e(a,b){for(;b<a.length;b++){var c=a[b];if(" "!==c)return"\x3d"===c?b:-1}}function l(a,b){for(;0<b;b--){var c=a[b];if(" "!==c)return"\x3d"===c?b:-1}}function h(a){return'"'===a[0]&&'"'===a[a.length-1]||"'"===a[0]&&"'"===a[a.length-1]?a.substr(1,a.length-2):a}var g=m(2),d=/[^a-zA-Z0-9_:\.\-]/gim;a.parseTag=function(a,b,c){for(var d="",e=0,f=!1,h=!1,l=0,n=a.length,m="",p="",l=0;l<n;l++)p=a.charAt(l),!1===f?"\x3c"===p&&(f=l):!1===h?"\x3c"===
    p?(d+=c(a.slice(e,l)),e=f=l):"\x3e"===p?(d+=c(a.slice(e,f)),e=p=a.slice(f,l+1),m=g.spaceIndex(e),e=-1===m?e.slice(1,-1):e.slice(1,m+1),m=("/"===(e=g.trim(e).toLowerCase()).slice(0,1)&&(e=e.slice(1)),"/"===e.slice(-1)&&(e=e.slice(0,-1)),e),d+=b(f,d.length,m,p,"\x3c/"===p.slice(0,2)),e=l+1,f=!1):'"'!==p&&"'"!==p||"\x3d"!==a.charAt(l-1)||(h=p):p===h&&(h=!1);return e<a.length&&(d+=c(a.substr(e))),d};a.parseAttr=function(a,b){function c(a,c){1>(a=(a=g.trim(a)).replace(d,"").toLowerCase()).length||(a=b(a,
    c||""))&&m.push(a)}for(var k=0,m=[],f=!1,n=a.length,t=0;t<n;t++){var u;u=a.charAt(t);if(!1!==f||"\x3d"!==u)if(!1===f||t!==k||'"'!==u&&"'"!==u||"\x3d"!==a.charAt(t-1))/\s|\n|\t/.test(u)&&((a=a.replace(/\s|\n|\t/g," "),!1===f)?-1===(u=e(a,t))?(c(g.trim(a.slice(k,t))),f=!1,k=t+1):t=u-1:-1===(u=l(a,t-1))&&(c(f,h(g.trim(a.slice(k,t)))),f=!1,k=t+1));else{if(-1===(u=a.indexOf(u,t+1)))break;c(f,g.trim(a.slice(k+1,u)));f=!1;k=(t=u)+1}else f=a.slice(k,t),k=t+1}return k<a.length&&(!1===f?c(a.slice(k)):c(f,h(g.trim(a.slice(k))))),
    g.trim(m.join(" "))}},function(c,a){var m,e;a=Object.prototype;var l=Function.prototype.toString,h=a.hasOwnProperty,g=l.call(Object),d=a.toString,n=(m=Object.getPrototypeOf,e=Object,function(a){return m(e(a))});c.exports=function(a){var b;if(!(b=!a||"object"!=typeof a||"[object Object]"!=d.call(a))&&(b=!1,null!=a&&"function"!=typeof a.toString))try{b=!!(a+"")}catch(k){}if(b)return!1;a=n(a);if(null===a)return!0;a=h.call(a,"constructor")&&a.constructor;return"function"==typeof a&&a instanceof a&&l.call(a)==
    g}},function(c,a,m){m.r(a);m.d(a,"Sanitizer",function(){return h});c=m(7);var e=m.n(c);c=m(0);var l=m.n(c),h=function(){function a(a,c){var b,d=this;this.arcgisWhiteList={a:["href","target","style"],img:"src width height border alt style".split(" "),video:"autoplay controls height loop muted poster preload src width".split(" "),audio:"autoplay controls loop muted preload src".split(" "),span:["style"],table:"width height cellpadding cellspacing border style".split(" "),div:["style","align"],font:["size",
    "color","style"],tr:["height","valign","align","style"],td:"height width valign align colspan rowspan nowrap style".split(" "),th:"height width valign align colspan rowspan nowrap style".split(" "),p:["style"],b:[],strong:[],i:[],em:[],u:[],br:[],li:[],ul:[],ol:[],hr:[],tbody:[]};this.allowedProtocols="http https mailto iform tel flow lfmobile arcgis-navigator arcgis-appstudio-player arcgis-survey123 arcgis-collector arcgis-workforce arcgis-explorer arcgis-trek2there mspbi comgooglemaps pdfefile pdfehttp pdfehttps boxapp boxemm awb awbs gropen radarscope".split(" ");
    this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(a,b,c,e){return"a"===a&&"href"===b||("img"===a||"audio"===a||"video"===a)&&"src"===b?d.sanitizeUrl(c):l.a.safeAttrValue(a,b,c,e)}};a&&!c?b=a:a&&c?(b=Object.create(this.arcgisFilterOptions),Object.keys(a).forEach(function(c){"whiteList"===c?b.whiteList=d._extendObjectOfArrays([d.arcgisWhiteList,a.whiteList||{}]):b[c]=a[c]})):(b=Object.create(this.arcgisFilterOptions)).whiteList=this.arcgisWhiteList;this.xssFilterOptions=b;this._xssFilter=
    new l.a.FilterXSS(b)}return a.prototype.sanitize=function(a){switch(typeof a){case "number":return isNaN(a)||!isFinite(a)?null:a;case "boolean":return a;case "string":return this._xssFilter.process(a);case "object":return this._iterateOverObject(a);default:return null}},a.prototype.sanitizeUrl=function(a){var c=this._trim(a.substring(0,a.indexOf(":")));return"/"===a||"#"===a||"#"===a[0]||-1<this.allowedProtocols.indexOf(c.toLowerCase())?l.a.escapeAttrValue(a):""},a.prototype.validate=function(a){var c=
    this.sanitize(a);return{isValid:a===c,sanitized:c}},a.prototype._extendObjectOfArrays=function(a){var c={};return a.forEach(function(a){Object.keys(a).forEach(function(b){Array.isArray(a[b])&&Array.isArray(c[b])?c[b]=c[b].concat(a[b]):c[b]=a[b]})}),c},a.prototype._iterateOverObject=function(a){var c=this;try{var b=!1,d=void 0;if(Array.isArray(a))d=a.reduce(function(a,d){var e=c.validate(d);return e.isValid?a.concat([d]):(b=!0,a.concat([e.sanitized]))},[]);else{if(!e()(a))return null;d=Object.keys(a).reduce(function(d,
    e){var f=a[e],g=c.validate(f);return g.isValid?d[e]=f:(b=!0,d[e]=g.sanitized),d},{})}return b?d:a}catch(k){return null}},a.prototype._trim=function(a){return String.prototype.trim?a.trim():a.replace(/(^\s*)|(\s*$)/g,"")},a}()},function(c,a,m){function e(a){var c=a||{},e={},b;for(b in c)e[b]=c[b];(a=e).whiteList=a.whiteList||l.whiteList;a.onAttr=a.onAttr||l.onAttr;a.onIgnoreAttr=a.onIgnoreAttr||l.onIgnoreAttr;a.safeAttrValue=a.safeAttrValue||l.safeAttrValue;this.options=a}var l=m(4),h=m(10);m(5);e.prototype.process=
    function(a){if(!(a=(a=a||"").toString()))return"";var c=this.options,e=c.whiteList,b=c.onAttr,g=c.onIgnoreAttr,k=c.safeAttrValue;return h(a,function(a,c,d,h,l){var f=e[d],m=!1;if(!0===f?m=f:"function"==typeof f?m=f(h):f instanceof RegExp&&(m=f.test(h)),!0!==m&&(m=!1),h=k(d,h)){var n;a={position:c,sourcePosition:a,source:l,isWhite:m};return m?null==(n=b(d,h,a))?d+":"+h:n:null==(n=g(d,h,a))?void 0:n}})};c.exports=e},function(c,a,m){var e=m(5);c.exports=function(a,c){function g(){if(!h){var d=e.trim(a.slice(b,
    l)),g=d.indexOf(":");if(-1!==g){var m=e.trim(d.slice(0,g)),g=e.trim(d.slice(g+1));m&&(d=c(b,k.length,m,g,d))&&(k+=d+"; ")}}b=l+1}";"!==(a=e.trimRight(a))[a.length-1]&&(a+=";");for(var d=a.length,h=!1,b=0,l=0,k="";l<d;l++){var m=a[l];if("/"===m&&"*"===a[l+1]){m=a.indexOf("*/",l+2);if(-1===m)break;b=(l=m+1)+1;h=!1}else"("===m?h=!0:")"===m?h=!1:";"===m?h||g():"\n"===m&&g()}return e.trim(k)}},function(c,a,m){function e(a){var b=a||{},c={},d;for(d in b)c[d]=b[d];(a=c).stripIgnoreTag&&(a.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),
    a.onIgnoreTag=h.onIgnoreTagStripAll);a.whiteList=a.whiteList||h.whiteList;a.onTag=a.onTag||h.onTag;a.onTagAttr=a.onTagAttr||h.onTagAttr;a.onIgnoreTag=a.onIgnoreTag||h.onIgnoreTag;a.onIgnoreTagAttr=a.onIgnoreTagAttr||h.onIgnoreTagAttr;a.safeAttrValue=a.safeAttrValue||h.safeAttrValue;a.escapeHtml=a.escapeHtml||h.escapeHtml;this.options=a;!1===a.css?this.cssFilter=!1:(a.css=a.css||{},this.cssFilter=new l(a.css))}var l=m(1).FilterCSS,h=m(3);a=m(6);var g=a.parseTag,d=a.parseAttr,n=m(2);e.prototype.process=
    function(a){if(!(a=(a=a||"").toString()))return"";var b=this.options,c=b.whiteList,e=b.onTag,f=b.onIgnoreTag,l=b.onTagAttr,m=b.onIgnoreTagAttr,u=b.safeAttrValue,w=b.escapeHtml,v=this.cssFilter;b.stripBlankChar&&(a=h.stripBlankChar(a));b.allowCommentTag||(a=h.stripCommentTag(a));var x=!1;b.stripIgnoreTagBody&&(x=h.StripTagBody(b.stripIgnoreTagBody,f),f=x.onIgnoreTag);a=g(a,function(a,b,g,h,k){b={sourcePosition:a,position:b,isClosing:k,isWhite:c.hasOwnProperty(g)};if(null!=(a=e(g,h,b)))return a;if(b.isWhite){if(b.isClosing)return"\x3c/"+
    g+"\x3e";a=function(a){var b=n.spaceIndex(a);if(-1===b)return{html:"",closing:"/"===a[a.length-2]};b="/"===(a=n.trim(a.slice(b+1,-1)))[a.length-1];return b&&(a=n.trim(a.slice(0,-1))),{html:a,closing:b}}(h);var p=c[g];b=d(a.html,function(a,b){var c,d=-1!==n.indexOf(p,a);return null==(c=l(g,a,b,d))?d?(b=u(g,a,b,v))?a+'\x3d"'+b+'"':a:null==(c=m(g,a,b,d))?void 0:c:c});h="\x3c"+g;return b&&(h+=" "+b),a.closing&&(h+=" /"),h+="\x3e"}return null==(a=f(g,h,b))?w(h):a},w);return x&&(a=x.remove(a)),a};c.exports=
    e}]).Sanitizer})},"maquette-css-transitions/dist/maquette-css-transitions.umd":function(){(function(c,a){"object"===typeof exports&&"undefined"!==typeof module?a(exports):"function"===typeof define&&define.amd?define(["exports"],a):(c=c||self,a(c.maquetteCssTransitions={}))})(this,function(c){var a,m,e=function(c){if("WebkitTransition"in c.style)a="webkitTransitionEnd",m="webkitAnimationEnd";else if("transition"in c.style)a="transitionend",m="animationend";else throw Error("Your browser is not supported!");
    };c.createEnterCssTransition=function(c,h){void 0===h&&(h=c+"-active");return function(g){a||e(g);var d=!1,l=function(b){d||(d=!0,g.removeEventListener(a,l),g.removeEventListener(m,l),g.classList.remove(c),g.classList.remove(h))};g.classList.add(c);g.addEventListener(a,l);g.addEventListener(m,l);requestAnimationFrame(function(){g.classList.add(h)})}};c.createExitCssTransition=function(c,h){void 0===h&&(h=c+"-active");return function(g,d){a||e(g);var l=!1,b=function(c){l||(l=!0,g.removeEventListener(a,
    b),g.removeEventListener(m,b),d())};g.classList.add(c);g.addEventListener(a,b);g.addEventListener(m,b);requestAnimationFrame(function(){g.classList.add(h)})}};Object.defineProperty(c,"__esModule",{value:!0})})},"esri/widgets/support/shim/SVGElement":function(){define(["require","exports","../../../core/has"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});m.add("esri-svg-classlist","classList"in SVGElement.prototype);var e=function(){function a(a){this._node=a}a.prototype.add=function(a){var c=
    this._node;c.className.baseVal=(c.className.baseVal+" "+a).trim()};a.prototype.contains=function(a){return-1<this._node.className.baseVal.split(" ").indexOf(a)};a.prototype.remove=function(a){for(var c=this._node,d="",e=0,b=c.className.baseVal.split(" ");e<b.length;e++){var h=b[e];h!==a&&(d+=h+" ")}c.className.baseVal=d.trim()};a.prototype.toggle=function(a,c){var d=this.contains(a),e;if(e=d?!0!==c&&"remove":!1!==c&&"add")this[e](a);return void 0!==c?c:!d};return a}();a.DOMTokenListSubset=e;m("esri-svg-classlist")||
    Object.defineProperty(SVGElement.prototype,"classList",{get:function(){return new e(this)}})})},"esri/views/overlay/ViewOverlay":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators ../../libs/maquette/index ../support/WatchUpdatingTracking".split(" "),function(c,a,m,e,l,h,g,d,n){return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b.items=
    new h;b._watchUpdatingTracking=new n.WatchUpdatingTracking;b._callbacks=new Map;b._projector=d.createProjector();b._hiddenProjector=d.createProjector();return b}m(b,a);Object.defineProperty(b.prototype,"needsRender",{get:function(){return 0<this.items.length},enumerable:!0,configurable:!0});b.prototype.initialize=function(){var a=this,b=document.createElement("div");b.className="esri-overlay-surface";this._set("surface",b);this._hiddenSurface=document.createElement("div");this._hiddenSurface.setAttribute("style",
    "visibility: hidden;");b.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(this.items,function(b){b.added.map(function(b){var c=function(){return b.render()};a._callbacks.set(b,c);a._projector.append(a.surface,c)});b.removed.map(function(b){var c=a._projector.detach(a._callbacks.get(b));a.surface.removeChild(c.domNode);a._callbacks.delete(b)})})};b.prototype.addItem=function(a){this.items.add(a)};b.prototype.removeItem=function(a){this.items.remove(a)};b.prototype.destroy=
    function(){this.items.removeAll();this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()};b.prototype.render=function(){this._projector.renderNow()};b.prototype.computeBoundingRect=function(a){var b=this._hiddenSurface,c=this._hiddenProjector,d=null,e=function(){return d=a.render()};c.append(b,e);c.renderNow();var g={left:0,top:0,right:0,bottom:0};if(d&&d.domNode){var h=d.domNode.getBoundingClientRect();g.left=h.left;g.top=h.top;g.right=h.right;g.bottom=h.bottom}for(c.detach(e);b.firstChild;)b.removeChild(b.firstChild);
    return g};b.prototype.overlaps=function(a,b){a=this.computeBoundingRect(a);b=this.computeBoundingRect(b);return Math.max(a.left,b.left)<=Math.min(a.right,b.right)&&Math.max(a.top,b.top)<=Math.min(a.bottom,b.bottom)};Object.defineProperty(b.prototype,"hasVisibleItems",{get:function(){return this.items.some(function(a){return a.visible})},enumerable:!0,configurable:!0});b.prototype.renderCanvas=function(a){if(this.items.some(function(a){return a.visible})){var b=a.getContext("2d");b.save();b.font="10px "+
    getComputedStyle(this.surface).fontFamily;this.items.forEach(function(a){b.save();a.renderCanvas(b);b.restore()});b.restore()}};e([g.property({readOnly:!0})],b.prototype,"surface",void 0);e([g.property({readOnly:!0})],b.prototype,"items",void 0);e([g.property({readOnly:!0,dependsOn:["items.length"]})],b.prototype,"needsRender",null);e([g.property({readOnly:!0})],b.prototype,"_watchUpdatingTracking",void 0);e([g.property({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],b.prototype,"updating",
    void 0);return b=e([g.subclass("esri.views.overlay.ViewOverlay")],b)}(g.declared(l))})},"esri/libs/maquette/index":function(){define("require exports ./dom ./h ./projector ./cache ./mapping".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});a.dom=m.dom;a.h=e.h;a.createProjector=l.createProjector;a.createCache=h.createCache;a.createMapping=g.createMapping})},"esri/libs/maquette/dom":function(){define(["require","exports","./projection"],function(c,a,m){Object.defineProperty(a,
    "__esModule",{value:!0});var e={namespace:void 0,performanceLogger:function(){},eventHandlerInterceptor:void 0,styleApplyer:function(a,c,e){a.style[c]=e}};a.applyDefaultProjectionOptions=function(a){return m.extend(e,a)};a.dom={create:function(c,e){e=a.applyDefaultProjectionOptions(e);m.createDom(c,document.createElement("div"),void 0,e);return m.createProjection(c,e)},append:function(c,e,g){g=a.applyDefaultProjectionOptions(g);m.createDom(e,c,void 0,g);return m.createProjection(e,g)},insertBefore:function(c,
    e,g){g=a.applyDefaultProjectionOptions(g);m.createDom(e,c.parentNode,c,g);return m.createProjection(e,g)},merge:function(c,e,g){g=a.applyDefaultProjectionOptions(g);e.domNode=c;m.initPropertiesAndChildren(c,e,g);return m.createProjection(e,g)},replace:function(c,e,g){g=a.applyDefaultProjectionOptions(g);m.createDom(e,c.parentNode,c,g);c.parentNode.removeChild(c);return m.createProjection(e,g)}}})},"esri/libs/maquette/projection":function(){define(["require","exports","../../widgets/support/widgetUtils"],
    function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});var e=[];a.extend=function(a,b){var c={};Object.keys(a).forEach(function(b){c[b]=a[b]});b&&Object.keys(b).forEach(function(a){c[a]=b[a]});return c};var l=function(a,b){return a.vnodeSelector!==b.vnodeSelector?!1:a.properties&&b.properties?a.properties.key!==b.properties.key?!1:a.properties.bind===b.properties.bind:!a.properties&&!b.properties},h=function(a){if("string"!==typeof a)throw Error("Style values must be strings");},g=function(a,
    b,c,d){var e=a[b];if(""!==e.vnodeSelector){var f=e.properties;if(!(f&&(void 0===f.key?f.bind:f.key)))for(f=0;f<a.length;f++)if(f!==b&&l(a[f],e))throw Error(c.vnodeSelector+" had a "+e.vnodeSelector+" child "+("added"===d?d:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.");}},d=[],n=!1,b=function(a){(a.children||[]).forEach(b);a.properties&&a.properties.afterRemoved&&a.properties.afterRemoved.apply(a.properties.bind||a.properties,[a.domNode])},
    p=function(){n=!1;d.forEach(b);d.length=0},k=function(a){d.push(a);n||(n=!0,"undefined"!==typeof window&&"requestIdleCallback"in window?window.requestIdleCallback(p,{timeout:16}):setTimeout(p,16))},q=function(a){var b=a.domNode;if(a.properties){var c=a.properties.exitAnimation;if(c){b.style.pointerEvents="none";c(b,function(){b.parentNode&&(b.parentNode.removeChild(b),k(a))},a.properties);return}}b.parentNode&&(b.parentNode.removeChild(b),k(a))},f=function(a,b,c){if(b)for(var d=c.eventHandlerInterceptor,
    e=Object.keys(b),f=e.length,g=function(f){f=e[f];var g=b[f];if("className"===f)throw Error('Property "className" is not supported, use "class".');if("class"===f)t(a,g,!0);else if("classes"===f){var k=Object.keys(g),l=k.length;for(f=0;f<l;f++){var n=k[f];g[n]&&a.classList.add(n)}}else if("styles"===f)for(k=Object.keys(g),l=k.length,f=0;f<l;f++){var n=k[f],p=g[n];p&&(h(p),c.styleApplyer(a,n,p))}else"key"!==f&&null!==g&&void 0!==g&&(k=typeof g,"function"===k?0===f.lastIndexOf("on",0)&&(d&&(g=d(f,g,a,
    b)),"oninput"===f&&function(){var a=g;g=function(b){a.apply(this,[b]);b.target["oninput-value"]=b.target.value}}(),a[f]=g):"http://www.w3.org/2000/svg"===c.namespace?"href"===f?a.setAttributeNS("http://www.w3.org/1999/xlink",f,g):a.setAttribute(f,g):"string"===k&&"value"!==f?"innerHTML"===f?a[f]=m.sanitizer.sanitize(g):a.setAttribute(f,g):a[f]=g)},k=0;k<f;k++)g(k)};a.initPropertiesAndChildren=function(b,c,d){var e=c.children;if(e)for(var g=0;g<e.length;g++)a.createDom(e[g],b,void 0,d);c.text&&(b.textContent=
    c.text);f(b,c.properties,d);c.properties&&c.properties.afterCreate&&c.properties.afterCreate.apply(c.properties.bind||c.properties,[b,d,c.vnodeSelector,c.properties,c.children])};a.createDom=function(b,c,d,e){var f,g=0,h=b.vnodeSelector,k=c.ownerDocument;if(""===h)f=b.domNode=k.createTextNode(b.text),void 0!==d?c.insertBefore(f,d):c.appendChild(f);else{for(var l=0;l<=h.length;++l){var m=h.charAt(l);if(l===h.length||"."===m||"#"===m)m=h.charAt(g-1),g=h.slice(g,l),"."===m?f.classList.add(g):"#"===m?
    f.id=g:("svg"===g&&(e=a.extend(e,{namespace:"http://www.w3.org/2000/svg"})),void 0!==e.namespace?f=b.domNode=k.createElementNS(e.namespace,g):(f=b.domNode=b.domNode||k.createElement(g),"input"===g&&b.properties&&void 0!==b.properties.type&&f.setAttribute("type",b.properties.type)),void 0!==d?c.insertBefore(f,d):f.parentNode!==c&&c.appendChild(f)),g=l+1}a.initPropertiesAndChildren(f,b,e)}};var r,t=function(a,b,c){b&&b.split(" ").forEach(function(b){b&&a.classList.toggle(b,c)})};r=function(b,c,d){var f=
    b.domNode;if(b===c)return!1;var k=!1;if(""===c.vnodeSelector){if(c.text!==b.text)return b=f.ownerDocument.createTextNode(c.text),f.parentNode.replaceChild(b,f),c.domNode=b,!0;c.domNode=f}else{0===c.vnodeSelector.lastIndexOf("svg",0)&&(d=a.extend(d,{namespace:"http://www.w3.org/2000/svg"}));b.text!==c.text&&(k=!0,void 0===c.text?f.removeChild(f.firstChild):f.textContent=c.text);c.domNode=f;var n;n=b.children;var p=c.children,u=d;if(n===p)n=!1;else{n=n||e;for(var p=p||e,v=n.length,w=p.length,C=0,F=
    0,I=!1;F<w;){var G=C<v?n[C]:void 0,J=p[F];if(void 0!==G&&l(G,J))I=r(G,J,u)||I,C++;else{b:{var G=n,H=J;if(""!==H.vnodeSelector)for(var N=C+1;N<G.length;N++)if(l(G[N],H)){G=N;break b}G=-1}if(0<=G){for(;C<G;C++)q(n[C]),g(n,C,c,"removed");I=r(n[G],J,u)||I;C=G+1}else a.createDom(J,f,C<v?n[C].domNode:void 0,u),J.properties&&(G=J.properties.enterAnimation)&&G(J.domNode,J.properties),g(p,F,c,"added")}F++}if(v>C)for(;C<v;C++)q(n[C]),g(n,C,c,"removed");n=I}k=n||k;n=b.properties;p=c.properties;u=d;if(p){v=!1;
    w=Object.keys(p);F=w.length;for(I=0;I<F;I++)if(G=w[I],J=p[G],C=n[G],"class"===G)C!==J&&(t(f,C,!1),t(f,J,!0));else if("classes"===G)for(var H=f.classList,N=Object.keys(J),L=N.length,G=0;G<L;G++){var M=N[G],O=!!J[M];O!==!!C[M]&&(v=!0,O?H.add(M):H.remove(M))}else if("styles"===G)for(H=Object.keys(J),N=H.length,G=0;G<N;G++)L=H[G],M=J[L],M!==C[L]&&(v=!0,M?(h(M),u.styleApplyer(f,L,M)):u.styleApplyer(f,L,""));else J||"string"!==typeof C||(J=""),"value"===G?(H=f[G],H!==J&&(f["oninput-value"]?H===f["oninput-value"]:
    J!==C)&&(f[G]=J,f["oninput-value"]=void 0),J!==C&&(v=!0)):J!==C&&(C=typeof J,"function"===C&&u.eventHandlerInterceptor||("http://www.w3.org/2000/svg"===u.namespace?"href"===G?f.setAttributeNS("http://www.w3.org/1999/xlink",G,J):f.setAttribute(G,J):"string"===C?"innerHTML"===G?f[G]=m.sanitizer.sanitize(J):"role"===G&&""===J?f.removeAttribute(G):f.setAttribute(G,J):f[G]!==J&&(f[G]=J),v=!0));n=v}else n=void 0;k=n||k;c.properties&&c.properties.afterUpdate&&c.properties.afterUpdate.apply(c.properties.bind||
    c.properties,[f,d,c.vnodeSelector,c.properties,c.children])}k&&c.properties&&c.properties.updateAnimation&&c.properties.updateAnimation(f,c.properties,b.properties);return!1};a.createProjection=function(a,b){return{getLastRender:function(){return a},update:function(c){if(a.vnodeSelector!==c.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var d=a;a=c;r(d,c,b)},domNode:a.domNode}}})},"esri/libs/maquette/h":function(){define(["require",
    "exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var m=function(a,c,h){for(var e=0,d=c.length;e<d;e++){var l=c[e];Array.isArray(l)?m(a,l,h):null!==l&&void 0!==l&&!1!==l&&("string"===typeof l&&(l={vnodeSelector:"",properties:void 0,children:void 0,text:l.toString(),domNode:null}),h.push(l))}};a.h=function(a,c,h){if(Array.isArray(c))h=c,c=void 0;else if(c&&("string"===typeof c||c.hasOwnProperty("vnodeSelector"))||h&&("string"===typeof h||h.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");
    var e,d;h&&1===h.length&&"string"===typeof h[0]?e=h[0]:h&&(d=[],m(a,h,d),0===d.length&&(d=void 0));return{vnodeSelector:a,properties:c,children:d,text:""===e?void 0:e,domNode:null}}})},"esri/libs/maquette/projector":function(){define(["require","exports","./dom"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});var e;e=Array.prototype.find?function(a,c){return a.find(c)}:function(a,c){return a.filter(c)[0]};var l=function(a,c){var d=a;c.forEach(function(a){d=d&&d.children?e(d.children,
    function(b){return b.domNode===a}):void 0});return d},h=function(a,c,e){var b=function(b){e("domEvent",b);var d=c(),g;g=b.currentTarget;for(var f=d.domNode,h=[];g!==f;)h.push(g),g=g.parentNode;g=h;g.reverse();d=l(d.getLastRender(),g);a.scheduleRender();var m;d&&(m=d.properties["on"+b.type].apply(d.properties.bind||this,arguments));e("domEventProcessed",b);return m};return function(a,c,d,e){return b}};a.createProjector=function(a){var c,e=m.applyDefaultProjectionOptions(a),b=e.performanceLogger,g=
    !0,k,l=!1,f=[],r=[],t=function(a,d,g){var k;e.eventHandlerInterceptor=h(c,function(){return k},b);k=a(d,g(),e);f.push(k);r.push(g)},u=function(){k=void 0;if(g){g=!1;b("renderStart",void 0);for(var a=0;a<f.length;a++){var c=r[a]();b("rendered",void 0);f[a].update(c);b("patched",void 0)}b("renderDone",void 0);g=!0}};return c={renderNow:u,scheduleRender:function(){k||l||(k=requestAnimationFrame(u))},stop:function(){k&&(cancelAnimationFrame(k),k=void 0);l=!0},resume:function(){l=!1;g=!0;c.scheduleRender()},
    append:function(a,b){t(m.dom.append,a,b)},insertBefore:function(a,b){t(m.dom.insertBefore,a,b)},merge:function(a,b){t(m.dom.merge,a,b)},replace:function(a,b){t(m.dom.replace,a,b)},detach:function(a){for(var b=0;b<r.length;b++)if(r[b]===a)return r.splice(b,1),f.splice(b,1)[0];throw Error("renderFunction was not found");}}}})},"esri/libs/maquette/cache":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.createCache=function(){var a,c;return{invalidate:function(){a=
    c=void 0},result:function(e,h){if(a)for(var g=0;g<e.length;g++)a[g]!==e[g]&&(c=void 0);c||(c=h(),a=e);return c}}}})},"esri/libs/maquette/mapping":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.createMapping=function(a,c,l){var e=[],g=[];return{results:g,map:function(d){for(var h=d.map(a),b=g.slice(),m=0,k=0;k<d.length;k++){var q=d[k],f=h[k];if(f===e[m])g[k]=b[m],l(q,b[m],k),m++;else{for(var r=!1,t=1;t<e.length+1;t++){var u=(m+t)%e.length;if(e[u]===
    f){g[k]=b[u];l(d[k],b[u],k);m=u+1;r=!0;break}}r||(g[k]=c(q,k))}}g.length=d.length;e=h}}}})},"esri/widgets/Popup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/tsSupport/generatorHelper ../core/tsSupport/awaiterHelper dojo/i18n!../nls/common dojo/i18n!./Popup/nls/Popup ../intl ../core/events ../core/Handles ../core/Logger ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Spinner ./Widget ./Popup/PopupViewModel ./support/widget ./support/widgetUtils".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z){function A(a,b){return void 0===b?"esri-popup__"+a:"esri-popup__"+a+"-"+b}function y(){return g(this,void 0,void 0,function(){return h(this,function(a){return[2,f.create(function(a){c(["./Feature"],function(b){a(b)})})]})})}var B={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},D=q.getLogger("esri.widgets.Popup");return function(a){function c(b){var c=a.call(this,b)||this;c._blurContainer=!1;c._containerNode=null;c._mainContainerNode=null;
    c._featureMenuNode=null;c._actionsMenuNode=null;c._focusContainer=!1;c._focusDockButton=!1;c._focusFeatureMenuButton=!1;c._focusActionsMenuButton=!1;c._focusFirstFeature=!1;c._focusFirstAction=!1;c._handles=new k;c._pointerOffsetInPx=16;c._spinner=null;c.actions=null;c.alignment="auto";c.autoCloseEnabled=null;c.autoOpenEnabled=null;c.defaultPopupTemplateEnabled=null;c.content=null;c.collapsed=!1;c.collapseEnabled=!0;c.dockEnabled=!1;c.featureCount=null;c.featureMenuOpen=!1;c.features=null;c.featureNavigationEnabled=
    !0;c.goToOverride=null;c.highlightEnabled=null;c.location=null;c.featureWidgets=[];c.label=n.widgetLabel;c.promises=null;c.selectedFeature=null;c.selectedFeatureIndex=null;c.selectedFeatureWidget=null;c.spinnerEnabled=!0;c.title=null;c.updateLocationEnabled=null;c.view=null;c.viewModel=new v;c.visible=null;c._addSelectedFeatureIndexHandle();c.own([r.watch(c,"viewModel.screenLocation",function(){return c._positionContainer()}),r.whenFalse(c,"viewModel.visible",function(){return c.selectedFeatureWidget&&
    c.selectedFeatureWidget.destroyCharts()}),r.watch(c,["viewModel.visible","dockEnabled"],function(){return c._toggleScreenLocationEnabled()}),r.watch(c,"viewModel.screenLocation",function(a,b){!!a!==!!b&&c.reposition()}),r.watch(c,"viewModel.features",function(){return c._updateFeatureWidgets()}),r.watch(c,"viewModel.view.padding viewModel.view.size viewModel.visible viewModel.waitingForResult viewModel.location alignment".split(" "),function(){return c.reposition()}),r.watch(c,"spinnerEnabled",function(a){return c._spinnerEnabledChange(a)}),
    r.watch(c,"viewModel.view.size",function(a,b){return c._updateDockEnabledForViewSize(a,b)}),r.watch(c,"viewModel.view",function(a,b){return c._viewChange(a,b)}),r.watch(c,"viewModel.view.ready",function(a,b){return c._viewReadyChange(a,b)}),r.watch(c,["viewModel.waitingForResult","viewModel.location"],function(){return c._displaySpinner()}),r.watch(c,["featureWidgets","viewModel.selectedFeatureIndex"],function(){return c._updateFeatureWidget()}),r.watch(c,"selectedFeatureWidget.viewModel.title",function(a){return c._setTitleFromFeatureWidget(a)}),
    r.watch(c,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.waitingForContent"],function(){return c._setContentFromFeatureWidget()}),r.whenFalse(c,"collapsed",function(){"xsmall"===c.get("viewModel.view.widthBreakpoint")&&c.visible&&c.collapseEnabled&&c.viewModel.centerAtLocation()}),r.on(c,"viewModel.allActions","change",function(){return c._watchActions()}),r.init(c,"viewModel.allActions",function(){return c._watchActions()})]);return c}m(c,a);c.prototype.destroy=function(){this._destroyFeatureWidgets();
    this._destroySpinner();this._handles&&this._handles.destroy();this._handles=null};Object.defineProperty(c.prototype,"actionsMenuOpen",{get:function(){return this.viewModel.visible?this._get("actionsMenuOpen"):!1},set:function(a){this._set("actionsMenuOpen",!!a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentAlignment",{get:function(){return this._getCurrentAlignment()},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"currentDockPosition",{get:function(){return this._getCurrentDockPosition()},
    enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"dockOptions",{get:function(){return this._get("dockOptions")||B},set:function(a){var b=l({},B),c=this.get("viewModel.view.breakpoints"),d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=l({},b,a);b=l({},b.breakpoint,d);d=a.breakpoint;!0===d?a.breakpoint=b:"object"===typeof d&&(a.breakpoint=l({},b,d));this._set("dockOptions",a);this._setCurrentDockPosition();this.reposition()},enumerable:!0,configurable:!0});c.prototype.blur=function(){this.visible||
    D.warn("Popup cannot be blurred while visible is false");this._blurContainer=!0;this.scheduleRender()};c.prototype.clear=function(){this.viewModel.clear()};c.prototype.close=function(){this.visible=!1};c.prototype.focus=function(){this.visible||D.warn("Popup cannot be focused while visible is false");this._focusContainer=!0;this.scheduleRender()};c.prototype.next=function(){return this.viewModel.next()};c.prototype.open=function(a){this._handles.remove("selected-index");var b={collapsed:a?!!a.collapsed:
    !1,actionsMenuOpen:a?!!a.actionsMenuOpen:!1,featureMenuOpen:a?!!a.featureMenuOpen:!1};"xsmall"===this.get("viewModel.view.widthBreakpoint")&&(b.collapsed=!0);this.set(b);this.viewModel.open(a);this._addSelectedFeatureIndexHandle()};c.prototype.previous=function(){return this.viewModel.previous()};c.prototype.reposition=function(){this.renderNow();this._positionContainer();this._setCurrentAlignment()};c.prototype.triggerAction=function(a){this.viewModel.triggerAction(a)};c.prototype.render=function(){var a=
    this,c,e,f,g,h,k,l,m=this.actionsMenuOpen,p=this.collapsed,q=this.collapseEnabled,r=this.dockEnabled,t=this.featureMenuOpen,u=this.featureNavigationEnabled,v=this.featureWidgets,w=this.visible,y=this.viewModel,B=y.content,D=y.featureCount,E=y.pendingPromisesCount,C=y.selectedFeatureIndex,da=y.title,Y=w&&1<D&&u,ba=Y?2:3,u=this._divideActions(ba),Q=u.inlineActions,S=u.menuActions,u=Y&&t,y=1<S.length&&m,W=Y&&this._getPageText(D,C),fa=this._renderContent(),Z=z.isRTL(),oa=!!(this.get("selectedFeatureWidget")?
    this.get("selectedFeatureWidget.viewModel.waitingForContent")||this.get("selectedFeatureWidget.viewModel.content"):fa),ga=(q=!!(q&&da&&oa))&&!u&&p,ha=this.get("viewModel.view.widthBreakpoint"),K=r?n.undock:n.dock,p=this.currentAlignment,D=this.currentDockPosition,E=E?x.tsx("div",{key:A("loading-container"),role:"presentation",class:"esri-popup__loading-container","aria-label":d.loading,title:d.loading},x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-loading-indicator",
    "esri-rotating")})):null,R=(c={},c["esri-icon-right-triangle-arrow"]=Z,c["esri-popup__pagination-previous-icon--rtl"]=Z,c["esri-icon-left-triangle-arrow"]=!Z,c["esri-popup__pagination-previous-icon"]=!Z,c);c=x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",R)});R=x.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes("esri-popup__button","esri-popup__pagination-previous"),"aria-label":n.previous,title:n.previous},
    c);c=(e={},e["esri-icon-left-triangle-arrow"]=Z,e["esri-popup__pagination-next-icon--rtl"]=Z,e["esri-icon-right-triangle-arrow"]=!Z,e["esri-popup__pagination-next-icon"]=!Z,e);e=x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon",c)});Z=x.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes("esri-popup__button","esri-popup__pagination-next"),"aria-label":n.next,title:n.next},e);c=z.cssTransition("enter","esri-popup--feature-updated");
    e=this.id+"-feature-menu";t=x.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes("esri-popup__button","esri-popup__feature-menu-button"),"aria-haspopup":"true","aria-controls":e,"aria-expanded":t,"aria-label":d.menu,title:d.menu},W);W=Y?[R,E||t,Z]:null;t=this._wouldDockTo();t=(f={},f["esri-icon-minimize"]=r,f["esri-popup__icon--dock-icon"]=
    !r,f["esri-icon-dock-right"]=!r&&("top-right"===t||"bottom-right"===t),f["esri-icon-dock-left"]=!r&&("top-left"===t||"bottom-left"===t),f["esri-icon-maximize"]=!r&&"top-center"===t,f["esri-icon-dock-bottom"]=!r&&"bottom-center"===t,f);f=x.tsx("span",{"aria-hidden":"true",class:this.classes(t,"esri-popup__icon")});f="xsmall"!==ha&&this.get("dockOptions.buttonEnabled")?x.tsx("div",{role:"button","aria-label":K,title:K,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,
    afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes("esri-popup__button","esri-popup__button--dock")},f):null;t=(g={},g["esri-popup__header-container--button"]=q,g);ha=q?"button":"heading";K=q?ga?d.expand:d.collapse:"";g=this.id+"-popup-title";da=da?x.tsx("div",{class:this.classes("esri-popup__header-container",t),key:da,enterAnimation:c,id:g,role:ha,"aria-label":K,title:K,tabIndex:q?0:-1,bind:this,onclick:this._toggleCollapsed,onkeydown:this._toggleCollapsed},
    x.tsx("h2",{class:"esri-popup__header-title",innerHTML:da})):null;t=x.tsx("span",{"aria-hidden":"true",class:this.classes("esri-popup__icon","esri-icon-close")});t=x.tsx("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:"esri-popup__button","aria-label":d.close,title:d.close},t);f=x.tsx("header",{class:"esri-popup__header"},da,x.tsx("div",{class:"esri-popup__header-buttons"},f,t));t=this.id+"-popup-content";B=!oa||q&&ga?null:x.tsx("article",{key:B,enterAnimation:c,
    id:t,class:"esri-popup__content"},fa);oa="bottom-left"===p||"bottom-center"===p||"bottom-right"===p||"top-left"===D||"top-center"===D||"top-right"===D;fa="top-left"===p||"top-center"===p||"top-right"===p||"bottom-left"===D||"bottom-center"===D||"bottom-right"===D;c=m?d.close:d.open;c=S.length?x.tsx("div",{key:A("actions-menu-button"),class:this.classes("esri-popup__button","esri-popup__actions-menu-button"),role:"button",id:this.id+"-actions-menu-button","aria-haspopup":"true","aria-controls":m?this.id+
    "-actions-menu":null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":c,title:c},x.tsx("span",{"aria-hidden":"true",class:"esri-icon-handle-horizontal"})):null;ha=Q.length&&Q.toArray().map(function(b,c){return a._renderAction({action:b,index:c,type:"inline"})});m=S.length&&m?x.tsx("ul",{id:this.id+"-actions-menu",role:"menu","aria-labelledby":this.id+"-actions-menu-button",
    key:A("actions"),class:"esri-popup__actions",bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},S.toArray().map(function(b,c){return a._renderAction({action:b,index:c+ba,type:"menu-item"})})):null;m=ha?x.tsx("div",{key:"inline-actions-container",class:"esri-popup__inline-actions-container"},ha,c,m):null;W=Y?x.tsx("section",{key:A("navigation"),class:this.classes("esri-popup__navigation")},W):null;S=(h={},h["esri-popup__footer--has-pagination"]=
    Y,h["esri-popup__footer--has-actions"]=!!Q.length,h["esri-popup__footer--has-actions-menu"]=!!S.length,h);h=Y||Q.length?x.tsx("div",{key:A("feature-buttons"),class:this.classes("esri-popup__footer",S)},m,W):null;C=this._renderFeatureMenuNode(v,C,e);v=b.substitute(n.selectedFeatures,{total:v.length});Q=x.tsx("section",{key:A("menu"),class:"esri-popup__feature-menu"},x.tsx("h2",{class:"esri-popup__feature-menu-header"},v),x.tsx("nav",{class:"esri-popup__feature-menu-viewport",afterCreate:this._featureMenuViewportNodeUpdated,
    afterUpdate:this._featureMenuViewportNodeUpdated},C));v=r?null:x.tsx("div",{key:A("pointer"),class:"esri-popup__pointer",role:"presentation"},x.tsx("div",{class:this.classes("esri-popup__pointer-direction","esri-popup--shadow")}));C=this.get("selectedFeature.layer.title");Y=this.get("selectedFeature.layer.id");q=(k={},k["esri-popup--shadow"]=r,k["esri-popup--is-collapsible"]=q,k["esri-popup--is-collapsed"]=ga,k);k=(l={},l["esri-popup--aligned-top-center"]=w&&"top-center"===p,l["esri-popup--aligned-bottom-center"]=
    w&&"bottom-center"===p,l["esri-popup--aligned-top-left"]=w&&"top-left"===p,l["esri-popup--aligned-bottom-left"]=w&&"bottom-left"===p,l["esri-popup--aligned-top-right"]=w&&"top-right"===p,l["esri-popup--aligned-bottom-right"]="bottom-right"===p,l["esri-popup--is-docked"]=w&&r,l["esri-popup--shadow"]=w&&!r,l["esri-popup--is-docked-top-left"]=w&&"top-left"===D,l["esri-popup--is-docked-top-center"]=w&&"top-center"===D,l["esri-popup--is-docked-top-right"]=w&&"top-right"===D,l["esri-popup--is-docked-bottom-left"]=
    w&&"bottom-left"===D,l["esri-popup--is-docked-bottom-center"]=w&&"bottom-center"===D,l["esri-popup--is-docked-bottom-right"]=w&&"bottom-right"===D,l["esri-popup--feature-menu-open"]=w&&u,l["esri-popup--actions-menu-open"]=w&&y,l);l=oa?Q:null;r=fa?Q:null;u=oa?h:null;y=fa?h:null;l=x.tsx("div",{class:this.classes("esri-popup__main-container","esri-widget",q),tabIndex:-1,role:"dialog","aria-labelledby":da?g:"","aria-describedby":B?t:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,
    afterUpdate:this._mainContainerNodeUpdated},u,l,f,B,y,r);return x.tsx("div",{key:A("base"),class:this.classes("esri-popup",k),role:"presentation","data-layer-title":C,"data-layer-id":Y,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},w?[l,v]:null)};c.prototype._watchActions=function(){var a=this,b=this.viewModel.allActions;this._handles.remove("actions");b&&b.forEach(function(b){a._handles.add(r.watch(b,"active className disabled id title image visible".split(" "),
    function(){return a.scheduleRender()}),"actions")})};c.prototype._divideActions=function(a){var b=this.viewModel.allActions;return{inlineActions:b.slice(0,a),menuActions:b.slice(a)}};c.prototype._featureMenuOpenChanged=function(a){a?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0};c.prototype._actionsMenuOpenChanged=function(a){a?this._focusFirstAction=!0:this._focusActionsMenuButton=!0};c.prototype._setTitleFromFeatureWidget=function(a){this.selectedFeatureWidget&&(this.viewModel.title=
    a||"")};c.prototype._setContentFromFeatureWidget=function(){var a=this.selectedFeatureWidget;a&&(this.viewModel.content=a)};c.prototype._handleFeatureMenuKeyup=function(a){"Escape"===p.eventKey(a)&&(a.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())};c.prototype._handleActionMenuKeyup=function(a){"Escape"===p.eventKey(a)&&(a.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())};c.prototype._handleFeatureMenuItemKeyup=
    function(a){var b=p.eventKey(a),c=this._featureMenuNode,d=a.currentTarget["data-feature-index"];if(c){var c=c.querySelectorAll("li"),e=c.length;"ArrowUp"===b?(a.stopPropagation(),c[(d-1+e)%e].focus()):"ArrowDown"===b?(a.stopPropagation(),c[(d+1+e)%e].focus()):"Home"===b?(a.stopPropagation(),c[0].focus()):"End"===b&&(a.stopPropagation(),c[c.length-1].focus())}};c.prototype._handleActionMenuItemKeyup=function(a){var b=p.eventKey(a),c=this._actionsMenuNode,d=a.currentTarget["data-action-index"];if(c){var c=
    c.querySelectorAll("li"),e=c.length;"ArrowUp"===b?(a.stopPropagation(),c[(d-1+e)%e].focus()):"ArrowDown"===b?(a.stopPropagation(),c[(d+1+e)%e].focus()):"Home"===b?(a.stopPropagation(),c[0].focus()):"End"===b&&(a.stopPropagation(),c[c.length-1].focus())}};c.prototype._handleMainKeyup=function(a){var b=p.eventKey(a);"ArrowLeft"===b&&(a.stopPropagation(),this.previous());"ArrowRight"===b&&(a.stopPropagation(),this.next())};c.prototype._spinnerEnabledChange=function(a){this._destroySpinner();a&&(a=this.get("viewModel.view"),
    this._createSpinner(a))};c.prototype._displaySpinner=function(){var a=this._spinner;if(a){var b=this.viewModel,c=b.location;b.waitingForResult?a.show({location:c}):a.hide()}};c.prototype._getIconStyles=function(a){return{"background-image":a?"url("+a+")":""}};c.prototype._renderAction=function(a){var c,d,e=a.action,f=a.index;a=a.type;var g=this.get("selectedFeature.attributes"),h=e.title,k=e.className,l=e.image,k=l||k?k:"esri-icon-default-action",h=h&&g?b.substitute(h,g):h,m=k&&g?b.substitute(k,g):
    k,g=l&&g?b.substitute(l,g):l,l=(c={},c["esri-icon-loading-indicator"]=e.active,c["esri-rotating"]=e.active,c["esri-popup__icon"]=!!k,c["esri-popup__action-image"]=!e.active&&!!g,c);m&&(l[m]=!e.active);c=(d={},d["esri-popup__action"]="toggle"!==e.type,d["esri-popup__action-toggle"]="toggle"===e.type,d["esri-popup__action-toggle--on"]="toggle"===e.type&&e.value,d["esri-popup__button--disabled"]=e.disabled,d);d=x.tsx("span",{key:"text",class:"esri-popup__action-text"},h);d=[x.tsx("span",{key:"icon",
    "aria-hidden":"true",class:this.classes("esri-popup__icon",l),styles:this._getIconStyles(g)}),d];f="menu-item"===a?x.tsx("li",{key:e,role:"menuitem",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",c),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-index":f,onclick:this._triggerAction,onkeydown:this._triggerAction},d):x.tsx("div",{key:e,role:"button",tabIndex:0,title:h,"aria-label":h,class:this.classes("esri-popup__button",c),onkeyup:this._handleActionMenuItemKeyup,
    bind:this,"data-action-index":f,onclick:this._triggerAction,onkeydown:this._triggerAction},d);return e.visible?f:null};c.prototype._addSelectedFeatureIndexHandle=function(){var a=this,b=r.watch(this,"viewModel.selectedFeatureIndex",function(b,c){return a._selectedFeatureIndexUpdated(b,c)});this._handles.add(b,"selected-index")};c.prototype._selectedFeatureIndexUpdated=function(a,b){this.featureCount&&a!==b&&-1!==a&&(this.featureMenuOpen=this.actionsMenuOpen=!1)};c.prototype._updateFeatureWidget=function(){var a=
    this.featureWidgets,b=this.selectedFeatureWidget;b&&b.destroyCharts();this._set("selectedFeatureWidget",a[this.viewModel.selectedFeatureIndex]||null)};c.prototype._destroyFeatureWidgets=function(){this.featureWidgets.forEach(function(a){return a.destroy()});this._set("featureWidgets",[])};c.prototype._updateFeatureWidgets=function(){return g(this,void 0,void 0,function(){var a,b,c,d,e,f,g=this;return h(this,function(h){switch(h.label){case 0:return a=this,b=a.features,c=a.featureWidgets,b&&b.length?
    [4,y()]:(this._destroyFeatureWidgets(),[2]);case 1:return d=h.sent(),e=c.slice(0),f=[],b.forEach(function(a,b){if(a){var c=null;e.some(function(b,d){b&&b.graphic===a&&(c=b,e.splice(d,1));return!!c});if(c)f[b]=c;else{var h=new d({defaultPopupTemplateEnabled:g.defaultPopupTemplateEnabled,graphic:a,spatialReference:g.get("view.spatialReference"),map:g.get("view.map")});h.visibleElements=l({},h.visibleElements,{title:!1});f[b]=h}}}),e.forEach(function(a){return a&&a.destroy()}),this._set("featureWidgets",
    f),[2]}})})};c.prototype._isScreenLocationWithinView=function(a,b){return-1<a.x&&-1<a.y&&a.x<=b.width&&a.y<=b.height};c.prototype._isOutsideView=function(a){var b=a.popupHeight,c=a.popupWidth,d=a.screenLocation,e=a.side;a=a.view;if(isNaN(c)||isNaN(b)||!a||!d)return!1;var f=a.padding;return"right"===e&&d.x+c/2>a.width-f.right||"left"===e&&d.x-c/2<f.left||"top"===e&&d.y-b<f.top||"bottom"===e&&d.y+b>a.height-f.bottom?!0:!1};c.prototype._determineCurrentAlignment=function(){var a=this._pointerOffsetInPx,
    b=this._containerNode,c=this._mainContainerNode,d=this.viewModel,e=d.screenLocation,d=d.view;if(!e||!d||!b)return"top-center";if(!this._isScreenLocationWithinView(e,d))return this._get("currentAlignment")||"top-center";var f=c?window.getComputedStyle(c,null):null,c=f?parseInt(f.getPropertyValue("max-height").replace(/[^-\d\.]/g,""),10):0,f=f?parseInt(f.getPropertyValue("height").replace(/[^-\d\.]/g,""),10):0,g=b.getBoundingClientRect(),b=g.width+a,g=Math.max(g.height,c,f)+a,a=this._isOutsideView({popupHeight:g,
    popupWidth:b,screenLocation:e,side:"right",view:d}),c=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:e,side:"left",view:d}),f=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:e,side:"top",view:d}),e=this._isOutsideView({popupHeight:g,popupWidth:b,screenLocation:e,side:"bottom",view:d});return c?f?"bottom-right":"top-right":a?f?"bottom-left":"top-left":f?e?"top-center":"bottom-center":"top-center"};c.prototype._getCurrentAlignment=function(){var a=this.alignment;return this.dockEnabled?
    null:"auto"===a?this._determineCurrentAlignment():"function"===typeof a?a.call(this):a};c.prototype._setCurrentAlignment=function(){this._set("currentAlignment",this._getCurrentAlignment())};c.prototype._setCurrentDockPosition=function(){this._set("currentDockPosition",this._getCurrentDockPosition())};c.prototype._getDockPosition=function(){var a=this.get("dockOptions.position");return"auto"===a?this._determineCurrentDockPosition():"function"===typeof a?a.call(this):a};c.prototype._getCurrentDockPosition=
    function(){return this.dockEnabled?this._getDockPosition():null};c.prototype._wouldDockTo=function(){return this.dockEnabled?null:this._getDockPosition()};c.prototype._renderFeatureMenuItemNode=function(a,b,c){var e,f=b===c,g=(e={},e["esri-popup__feature-menu-item--selected"]=f,e);e=f?x.tsx("span",{key:A("feature-menu-selected-feature-"+c),title:n.selectedFeature,"aria-label":n.selectedFeature,class:"esri-icon-check-mark"}):null;a=x.tsx("span",{innerHTML:a.title||d.untitled});return x.tsx("li",{role:"menuitem",
    tabIndex:-1,key:A("feature-menu-feature-"+c),class:this.classes(g,"esri-popup__feature-menu-item"),bind:this,"data-feature-index":b,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},x.tsx("span",{class:"esri-popup__feature-menu-title"},a,e))};c.prototype._renderFeatureMenuNode=function(a,b,c){var d=this;return 1<a.length?x.tsx("ol",{class:"esri-popup__feature-menu-list",id:c,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,
    onkeyup:this._handleFeatureMenuKeyup,role:"menu"},a.map(function(a,c){return d._renderFeatureMenuItemNode(a,c,b)})):null};c.prototype._determineCurrentDockPosition=function(){var a=this.get("viewModel.view"),b=z.isRTL()?"top-left":"top-right";if(!a)return b;var c=a.padding||{left:0,right:0,top:0,bottom:0},c=a.width-c.left-c.right;return(a=a.get("breakpoints"))&&c<=a.xsmall?"bottom-center":b};c.prototype._renderContent=function(){var a=this.get("viewModel.content");if(!a)return null;if("string"===
    typeof a)return x.tsx("div",{key:a,innerHTML:a});if(x.isWidget(a)&&!a.destroyed)return x.tsx("div",{key:a},a.render());if(a instanceof HTMLElement)return x.tsx("div",{key:a,bind:a,afterCreate:this._attachToNode});if(x.isWidgetBase(a))return x.tsx("div",{key:a,bind:a.domNode,afterCreate:this._attachToNode})};c.prototype._attachToNode=function(a){a.appendChild(this)};c.prototype._positionContainer=function(a){void 0===a&&(a=this._containerNode);a&&(this._containerNode=a);if(a){var b=this.viewModel.screenLocation,
    c=a.getBoundingClientRect().width;if(b=this._calculatePositionStyle(b,c))a.style.top=b.top,a.style.left=b.left,a.style.bottom=b.bottom,a.style.right=b.right}};c.prototype._calculateFullWidth=function(a){var b=this.currentAlignment,c=this._pointerOffsetInPx;return"top-left"===b||"bottom-left"===b||"top-right"===b||"bottom-right"===b?a+c:a};c.prototype._calculateAlignmentPosition=function(a,b,c,d){var e=this.currentAlignment,f=this._pointerOffsetInPx;d/=2;var g=c.height-b;c=c.width-a;var h=this.view.padding;
    if("bottom-center"===e)return{top:b+f-h.top,left:a-d-h.left};if("top-left"===e)return{bottom:g+f-h.bottom,right:c+f-h.right};if("bottom-left"===e)return{top:b+f-h.top,right:c+f-h.right};if("top-right"===e)return{bottom:g+f-h.bottom,left:a+f-h.left};if("bottom-right"===e)return{top:b+f-h.top,left:a+f-h.left};if("top-center"===e)return{bottom:g+f-h.bottom,left:a-d-h.left}};c.prototype._calculatePositionStyle=function(a,b){var c=this.view;if(c){if(this.dockEnabled)return{left:"",top:"",right:"",bottom:""};
    if(a&&b&&(b=this._calculateFullWidth(b),a=this._calculateAlignmentPosition(a.x,a.y,c,b)))return{top:void 0!==a.top?a.top+"px":"auto",left:void 0!==a.left?a.left+"px":"auto",bottom:void 0!==a.bottom?a.bottom+"px":"auto",right:void 0!==a.right?a.right+"px":"auto"}}};c.prototype._viewChange=function(a,b){a&&b&&(this.close(),this.clear())};c.prototype._viewReadyChange=function(a,b){a?(a=this.get("viewModel.view"),this._wireUpView(a)):b&&(this.close(),this.clear())};c.prototype._wireUpView=function(a){this._destroySpinner();
    a&&(this.spinnerEnabled&&this._createSpinner(a),this._setDockEnabledForViewSize(this.dockOptions))};c.prototype._dockingThresholdCrossed=function(a,b,c){var d=a[0];a=a[1];var e=b[0];b=b[1];var f=c.width;c=c.height;return d<=f&&e>f||d>f&&e<=f||a<=c&&b>c||a>c&&b<=c};c.prototype._updateDockEnabledForViewSize=function(a,b){if(a&&b){var c=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},d=c.left+c.right,e=c.top+c.bottom,c=[],f=[];c[0]=a[0]-d;c[1]=a[1]-e;f[0]=b[0]-d;f[1]=b[1]-e;a=this.dockOptions;
    this._dockingThresholdCrossed(c,f,a.breakpoint)&&this._setDockEnabledForViewSize(a);this._setCurrentDockPosition()}};c.prototype._focusDockButtonNode=function(a){this._focusDockButton&&(this._focusDockButton=!1,a.focus())};c.prototype._mainContainerNodeUpdated=function(a){this._mainContainerNode=a;this._focusContainer?(this._focusContainer=!1,a.focus()):this._blurContainer&&(this._blurContainer=!1,a.blur())};c.prototype._featureMenuNodeUpdated=function(a){(this._featureMenuNode=a)&&this._focusFirstFeature&&
    (this._focusFirstFeature=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};c.prototype._actionsMenuNodeUpdated=function(a){(this._actionsMenuNode=a)&&this._focusFirstAction&&(this._focusFirstAction=!1,a=a.querySelectorAll("li"),a.length&&a[0].focus())};c.prototype._focusFeatureMenuButtonNode=function(a){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,a.focus())};c.prototype._focusActionsMenuButtonNode=function(a){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,a.focus())};
    c.prototype._featureMenuViewportNodeUpdated=function(a){a&&(a.scrollTop=0)};c.prototype._toggleScreenLocationEnabled=function(){var a=this.dockEnabled,b=this.viewModel;b&&(b.screenLocationEnabled=this.visible&&!a)};c.prototype._shouldDockAtCurrentViewSize=function(a){a=a.breakpoint;var b=this.get("viewModel.view.ui"),c=b.width,b=b.height;if(isNaN(c)||isNaN(b))return!1;c=a.hasOwnProperty("width")&&c<=a.width;a=a.hasOwnProperty("height")&&b<=a.height;return c||a};c.prototype._setDockEnabledForViewSize=
    function(a){a.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(a))};c.prototype._getPageText=function(a,c){return b.substitute(n.pageText,{index:c+1,total:a})};c.prototype._destroySpinner=function(){var a=this._spinner,b=this.view;a&&(b&&b.ui&&b.ui.remove(this._spinner,"popup-spinner"),a.destroy(),this._spinner=null)};c.prototype._createSpinner=function(a){a&&(this._spinner=new u({view:a}),a.ui.add(this._spinner,{key:"popup-spinner",position:"manual"}))};c.prototype._toggleCollapsed=
    function(){this.collapsed=!this.collapsed};c.prototype._close=function(){this.close();this.view&&this.view.focus()};c.prototype._toggleDockEnabled=function(){this.dockEnabled=!this.dockEnabled;this._focusDockButton=!0;this.scheduleRender()};c.prototype._toggleFeatureMenu=function(){var a=!this.featureMenuOpen;this._featureMenuOpenChanged(a);this.actionsMenuOpen=!1;this.featureMenuOpen=a};c.prototype._toggleActionsMenu=function(){var a=!this.actionsMenuOpen;this._actionsMenuOpenChanged(a);this.featureMenuOpen=
    !1;this.actionsMenuOpen=a};c.prototype._triggerAction=function(a){a=a.currentTarget["data-action-index"];var b=this.viewModel.allActions.getItemAt(a);b&&"toggle"===b.type&&(b.value=!b.value);this.actionsMenuOpen=!1;this.viewModel.triggerAction(a)};c.prototype._selectFeature=function(a){a=a.currentTarget["data-feature-index"];isNaN(a)||(this.viewModel.selectedFeatureIndex=a);this.featureMenuOpen=!1;this._focusFeatureMenuButton=!0;this.scheduleRender()};c.prototype._next=function(){this.next()};c.prototype._previous=
    function(){this.previous()};e([t.aliasOf("viewModel.actions"),x.renderable()],c.prototype,"actions",void 0);e([t.property({dependsOn:["viewModel.visible"]}),x.renderable()],c.prototype,"actionsMenuOpen",null);e([t.property()],c.prototype,"alignment",void 0);e([t.aliasOf("viewModel.autoCloseEnabled")],c.prototype,"autoCloseEnabled",void 0);e([t.aliasOf("viewModel.autoOpenEnabled")],c.prototype,"autoOpenEnabled",void 0);e([t.aliasOf("viewModel.defaultPopupTemplateEnabled")],c.prototype,"defaultPopupTemplateEnabled",
    void 0);e([t.aliasOf("viewModel.content"),x.renderable()],c.prototype,"content",void 0);e([t.property(),x.renderable()],c.prototype,"collapsed",void 0);e([t.property(),x.renderable()],c.prototype,"collapseEnabled",void 0);e([t.property({readOnly:!0,dependsOn:["dockEnabled","alignment"]}),x.renderable()],c.prototype,"currentAlignment",null);e([t.property({readOnly:!0,dependsOn:["viewModel.view.ready","dockEnabled","dockOptions"]}),x.renderable()],c.prototype,"currentDockPosition",null);e([t.property(),
    x.renderable()],c.prototype,"dockOptions",null);e([t.property(),x.renderable()],c.prototype,"dockEnabled",void 0);e([t.aliasOf("viewModel.featureCount"),x.renderable()],c.prototype,"featureCount",void 0);e([t.property(),x.renderable()],c.prototype,"featureMenuOpen",void 0);e([t.aliasOf("viewModel.features"),x.renderable()],c.prototype,"features",void 0);e([t.property(),x.renderable()],c.prototype,"featureNavigationEnabled",void 0);e([t.aliasOf("viewModel.goToOverride")],c.prototype,"goToOverride",
    void 0);e([t.aliasOf("viewModel.highlightEnabled")],c.prototype,"highlightEnabled",void 0);e([t.aliasOf("viewModel.location"),x.renderable()],c.prototype,"location",void 0);e([t.property({readOnly:!0}),x.renderable()],c.prototype,"featureWidgets",void 0);e([t.property()],c.prototype,"label",void 0);e([t.aliasOf("viewModel.promises")],c.prototype,"promises",void 0);e([t.aliasOf("viewModel.selectedFeature"),x.renderable()],c.prototype,"selectedFeature",void 0);e([t.aliasOf("viewModel.selectedFeatureIndex"),
    x.renderable()],c.prototype,"selectedFeatureIndex",void 0);e([t.property({readOnly:!0}),x.renderable()],c.prototype,"selectedFeatureWidget",void 0);e([t.property()],c.prototype,"spinnerEnabled",void 0);e([t.aliasOf("viewModel.title"),x.renderable()],c.prototype,"title",void 0);e([t.aliasOf("viewModel.updateLocationEnabled")],c.prototype,"updateLocationEnabled",void 0);e([t.aliasOf("viewModel.view")],c.prototype,"view",void 0);e([t.property({type:v}),x.renderable("viewModel.view.widthBreakpoint viewModel.allActions viewModel.screenLocation viewModel.screenLocationEnabled viewModel.state viewModel.pendingPromisesCount viewModel.promiseCount viewModel.waitingForResult".split(" ")),
    x.vmEvent(["triggerAction","trigger-action"])],c.prototype,"viewModel",void 0);e([t.aliasOf("viewModel.visible"),x.renderable()],c.prototype,"visible",void 0);e([x.accessibleHandler()],c.prototype,"_toggleCollapsed",null);e([x.accessibleHandler()],c.prototype,"_close",null);e([x.accessibleHandler()],c.prototype,"_toggleDockEnabled",null);e([x.accessibleHandler()],c.prototype,"_toggleFeatureMenu",null);e([x.accessibleHandler()],c.prototype,"_toggleActionsMenu",null);e([x.accessibleHandler()],c.prototype,
    "_triggerAction",null);e([x.accessibleHandler()],c.prototype,"_selectFeature",null);e([x.accessibleHandler()],c.prototype,"_next",null);e([x.accessibleHandler()],c.prototype,"_previous",null);return c=e([t.subclass("esri.widgets.Popup")],c)}(t.declared(w))})},"esri/widgets/Spinner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/promiseUtils ../core/watchUtils ../core/accessorSupport/decorators ./Widget ./Spinner/SpinnerViewModel ./support/widget".split(" "),
    function(c,a,m,e,l,h,g,d,n,b){return function(a){function c(b){b=a.call(this,b)||this;b._animationDelay=500;b._animationPromise=null;b.location=null;b.view=null;b.viewModel=new n;b.visible=!1;return b}m(c,a);c.prototype.postInitialize=function(){var a=this;this.own([h.watch(this,"visible",function(b){return a._visibleChange(b)})])};c.prototype.destroy=function(){this._animationPromise=null};c.prototype.show=function(a){var b=this,c=a.location;a=a.promise;c&&(this.viewModel.location=c);this.visible=
    !0;c=function(){return b.hide()};a&&a.catch(function(){}).then(c)};c.prototype.hide=function(){this.visible=!1};c.prototype.render=function(){var a,c=this.visible,d=!!this.viewModel.screenLocation,c=(a={},a["esri-spinner--start"]=c&&d,a["esri-spinner--finish"]=!c&&d,a);a=this._getPositionStyles();return b.tsx("div",{class:this.classes("esri-spinner",c),styles:a})};c.prototype._visibleChange=function(a){var b=this;if(a)this.viewModel.screenLocationEnabled=!0;else{var c=l.after(this._animationDelay);
    this._animationPromise=c;c.catch(function(){}).then(function(){b._animationPromise===c&&(b.viewModel.screenLocationEnabled=!1,b._animationPromise=null)})}};c.prototype._getPositionStyles=function(){var a=this.viewModel,b=a.screenLocation,a=a.view;if(!a||!b)return{};a=a.padding;return{left:b.x-a.left+"px",top:b.y-a.top+"px"}};e([g.aliasOf("viewModel.location")],c.prototype,"location",void 0);e([g.aliasOf("viewModel.view")],c.prototype,"view",void 0);e([g.property({type:n}),b.renderable(["viewModel.screenLocation",
    "viewModel.screenLocationEnabled"])],c.prototype,"viewModel",void 0);e([g.aliasOf("viewModel.visible")],c.prototype,"visible",void 0);return c=e([g.subclass("esri.widgets.Spinner")],c)}(g.declared(d))})},"esri/widgets/Widget":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/domUtils ../core/Evented ../core/Handles ../core/Logger ../core/watchUtils ../core/accessorSupport/decorators ../libs/maquette/index ./support/widget".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f){var r=b.getLogger("esri.widgets.Widget"),t=0;return function(a){function b(b,c){b=a.call(this,b,c)||this;b._attached=!1;b.destroyed=!1;b.domNode=null;b.iconClass="esri-icon-checkbox-unchecked";b.label=b.declaredClass.split(".").pop();b.visible=!0;b._internalHandles=new n;b.render=b.render.bind(b);return b}e(b,a);b.prototype.normalizeCtorArgs=function(a,b){a=m({},a);b&&(a.container=b);return a};b.prototype.initialize=function(){var a=this;this._internalHandles.add(this._renderableProps.map(function(b){return p.init(a,
    b,function(a,c){var d=this;h.isCollection(c)&&this._internalHandles.remove(this.declaredClass+":"+b+"-collection-change-event-listener");h.isCollection(a)&&(a=a.on("change",function(){return d.scheduleRender()}),this._internalHandles.add(a,this.declaredClass+":"+b+"-collection-change-event-listener"));this.scheduleRender()})}));this._delegatedEventNames.length&&this._internalHandles.add(p.init(this,"viewModel",function(){a._get("viewModel")&&a._internalHandles.remove("delegated-events");a._delegatedEventNames.map(function(b){return a.viewModel.on(b,
    function(c){a.emit(b,c)})})}),"delegated-events");this.postInitialize();this._internalHandles.add(p.whenOnce(this,"container",function(b){return a._attach(b)}))};b.prototype.postInitialize=function(){};b.prototype.destroy=function(){this.destroyed||(this.viewModel&&(this.viewModel.destroy(),this.viewModel=null),this._detach(this.container),this._internalHandles.destroy(),this._emitter.clear(),this._set("destroyed",!0))};b.prototype.startup=function(){r.warn("Widget.startup() is deprecated and no longer needed")};
    Object.defineProperty(b.prototype,"container",{set:function(a){this._get("container")||this._set("container",a)},enumerable:!0,configurable:!0});b.prototype.castContainer=function(a){return g.byId(a)};Object.defineProperty(b.prototype,"id",{get:function(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+t++},set:function(a){a&&this._set("id",a)},enumerable:!0,configurable:!0});b.prototype.render=function(){throw Error("not implemented");};b.prototype.scheduleRender=
    function(){this._projector.scheduleRender()};b.prototype.classes=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return f.classes.apply(this,a)};b.prototype.own=function(a){1<arguments.length&&(a=Array.prototype.slice.call(arguments));this._internalHandles.add(a)};b.prototype.renderNow=function(){this._projector.renderNow()};b.prototype._attach=function(a){a&&(this._projector.merge(a,this.render),this._attached=!0)};b.prototype._detach=function(a){a&&this._attached&&(this._projector.detach(this.render),
    a.parentNode&&a.parentNode.removeChild(a),this._attached=!1)};l([k.shared(q.createProjector())],b.prototype,"_projector",void 0);l([k.shared([])],b.prototype,"_renderableProps",void 0);l([k.shared([])],b.prototype,"_delegatedEventNames",void 0);l([k.property({value:null})],b.prototype,"container",null);l([k.cast("container")],b.prototype,"castContainer",null);l([k.property({readOnly:!0})],b.prototype,"destroyed",void 0);l([k.property({aliasOf:"container"})],b.prototype,"domNode",void 0);l([k.property()],
    b.prototype,"iconClass",void 0);l([k.property({dependsOn:["container"]})],b.prototype,"id",null);l([k.property()],b.prototype,"label",void 0);l([k.property()],b.prototype,"viewModel",void 0);l([k.property()],b.prototype,"visible",void 0);return b=l([k.subclass("esri.widgets.Widget")],b)}(k.declared(d.EventedAccessor))})},"esri/widgets/Spinner/SpinnerViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../support/AnchorElementViewModel".split(" "),
    function(c,a,m,e,l,h){return function(a){function c(c){c=a.call(this,c)||this;c.visible=!1;return c}m(c,a);e([l.property()],c.prototype,"visible",void 0);return c=e([l.subclass("esri.widgets.CompassViewModel")],c)}(l.declared(h))})},"esri/widgets/support/AnchorElementViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Evented ../../core/Handles ../../core/watchUtils ../../core/watchUtils ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n){return function(a){function b(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];var e=a.apply(this,b)||this;e._anchorHandles=new h;e.location=null;e.screenLocation=null;e.screenLocationEnabled=!1;e.view=null;e._anchorHandles.add([d.watch(e,["screenLocationEnabled","location","view.size","view.stationary"],function(){return e._updateScreenPointAndHandle()}),d.watch(e,["view","view.ready"],function(){return e._wireUpView()})]);return e}m(b,a);b.prototype.destroy=
    function(){this.view=null;this._anchorHandles&&this._anchorHandles.destroy();this._viewpointHandle=this._anchorHandles=null};b.prototype._wireUpView=function(){var a=this;this._anchorHandles.remove("view");this._viewpointHandle=null;if(this.get("view.ready")){this._setScreenLocation();var b=this.view,b=g.pausable(b,"3d"===b.type?"camera":"viewpoint",function(){return a._viewpointChange()});this._anchorHandles.add(b,"view");this._viewpointHandle=b;this._toggleWatchingViewpoint()}};b.prototype._viewpointChange=
    function(){this._setScreenLocation();this.emit("view-change")};b.prototype._updateScreenPointAndHandle=function(){this._setScreenLocation();this._toggleWatchingViewpoint()};b.prototype._toggleWatchingViewpoint=function(){var a=this._viewpointHandle,b=this.screenLocationEnabled;a&&(this.location&&b?a.resume():a.pause())};b.prototype._setScreenLocation=function(){var a=this.location,b=this.view,c=this.screenLocationEnabled,d=this.get("view.ready"),a=c&&a&&d?b.toScreen(a):null;this._set("screenLocation",
    a)};e([n.property()],b.prototype,"location",void 0);e([n.property({readOnly:!0})],b.prototype,"screenLocation",void 0);e([n.property()],b.prototype,"screenLocationEnabled",void 0);e([n.property()],b.prototype,"view",void 0);return b=e([n.subclass("esri.widgets.support.AnchorElementViewModel")],b)}(n.declared(l.EventedAccessor))})},"esri/widgets/Popup/PopupViewModel":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../geometry ../../core/Collection ../../core/Error ../../core/Handles ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/webMercatorUtils ../../support/actions/ActionBase ../../support/actions/ActionButton ../../support/actions/ActionToggle ../../views/input/InputManager ../../views/support/layerViewUtils ./actions ../support/AnchorElementViewModel ../support/GoTo".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r,t,u,w,v,x,z,A,y,B,D){var E=n.ofType({key:"type",defaultKeyValue:"button",base:w,typeMap:{button:v,toggle:x}}),C=k.getLogger("esri.widgets.Popup.PopupViewModel");return function(a){function c(b){b=a.call(this,b)||this;b._handles=new p;b._pendingPromises=new Set;b._zoomToLocation=null;b._fetchFeaturesController=null;b.actions=new E([y.zoomToFeature.clone()]);b.defaultPopupTemplateEnabled=!1;b.autoCloseEnabled=!1;b.autoOpenEnabled=!0;b.content=null;b.highlightEnabled=
    !0;b.title=null;b.updateLocationEnabled=!1;b.view=null;b.visible=!1;b.zoomFactor=4;return b}m(c,a);c.prototype.initialize=function(){var a=this;this._handles.add([r.init(this,["autoOpenEnabled","view"],this._autoOpenEnabledChange),this.on("view-change",this._autoClose),r.watch(this,["highlightEnabled","selectedFeature","visible","view"],this._highlightFeature),r.watch(this,"view.animation.state",function(b){a._zoomToLocation||(y.zoomToFeature.disabled="waiting-for-target"===b)}),r.watch(this,"location",
    function(b){var c=a.selectedFeature;a.updateLocationEnabled&&b&&(!c||c.geometry)&&a.centerAtLocation()}),r.watch(this,"selectedFeature",function(b){if(b){var c=a.location,d=a.updateLocationEnabled,e=a.view;!d&&c||!b.geometry?d&&!b.geometry&&a.centerAtLocation().then(function(){a.location=e.center.clone()}):a.location=q.unwrap(a._getPointFromGeometry(b.geometry))}}),this.on("trigger-action",function(b){return y.triggerAction({event:b,view:a.view})})])};c.prototype.destroy=function(){this._cancelFetchingFeatures();
    this._handles.destroy();this._handles=null;this._pendingPromises.clear();this.view=null};Object.defineProperty(c.prototype,"allActions",{get:function(){var a=this._get("allActions")||new E;a.removeAll();var b=this.selectedFeature&&("function"===typeof this.selectedFeature.getEffectivePopupTemplate&&this.selectedFeature.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled)||this.selectedFeature.popupTemplate),c=b&&b.actions;(b=b&&b.overwriteActions?c:c?c.concat(this.actions):this.actions)&&b.filter(Boolean).forEach(function(b){return a.add(b)});
    return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"featureCount",{get:function(){return this.features.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"features",{get:function(){return this._get("features")||[]},set:function(a){a=a||[];this._set("features",a);var b=this.pendingPromisesCount,c=this.selectedFeatureIndex,d=this.promiseCount&&a.length;d&&b&&-1===c?this.selectedFeatureIndex=0:d&&-1!==c||(this.selectedFeatureIndex=a.length?0:-1)},enumerable:!0,
    configurable:!0});Object.defineProperty(c.prototype,"location",{get:function(){return this._get("location")||null},set:function(a){var b=this.get("view.spatialReference.isWebMercator");a&&a.get("spatialReference.isWGS84")&&b&&(a=u.geographicToWebMercator(a));this._set("location",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"pendingPromisesCount",{get:function(){return this._pendingPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"waitingForResult",
    {get:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"promiseCount",{get:function(){return this.promises.length},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"promises",{get:function(){return this._get("promises")||[]},set:function(a){var b=this;this._pendingPromises.clear();this.features=[];Array.isArray(a)&&a.length?(this._set("promises",a),a=a.slice(0),a.forEach(function(a){b._pendingPromises.add(a);
    a.then(function(c){b._pendingPromises.has(a)&&b._updateFeatures(c);b._updatePendingPromises(a)},function(){return b._updatePendingPromises(a)})})):this._set("promises",[]);this.notifyChange("pendingPromisesCount")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"selectedFeature",{get:function(){var a=this.selectedFeatureIndex;return-1===a?null:this.features[a]||null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"selectedFeatureIndex",{get:function(){var a=this._get("selectedFeatureIndex");
    return"number"===typeof a?a:-1},set:function(a){var b=this.featureCount;a=isNaN(a)||-1>a||!b?-1:(a+b)%b;this._set("selectedFeatureIndex",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"state",{get:function(){return this.get("view.ready")?"ready":"disabled"},enumerable:!0,configurable:!0});c.prototype.centerAtLocation=function(){var a=this.view,c=this._getSelectedTarget();return c?this.callGoTo({target:{target:c,scale:a.scale}}):(a=new b("center-at-location:invalid-target-or-view",
    "Cannot center at a location without a target and view.",{target:c,view:a}),C.error(a),f.reject(a))};c.prototype.clear=function(){this.set({promises:[],features:[],content:null,title:null,location:null})};c.prototype.open=function(a){var b=this;a=l({updateLocationEnabled:!1,promises:[],fetchFeatures:!1,visible:!1},a);var c=a.fetchFeatures;delete a.fetchFeatures;c=c?this._fetchFeatures(a.location||this.location):f.resolve();this.set(a);c.then(function(){b._setVisibleWhenContentExists()})};c.prototype.triggerAction=
    function(a){(a=this.allActions.getItemAt(a))&&this.emit("trigger-action",{action:a})};c.prototype.next=function(){this.selectedFeatureIndex+=1;return this};c.prototype.previous=function(){--this.selectedFeatureIndex;return this};c.prototype.zoomToLocation=function(){var a=this,c=this.location,d=this.selectedFeature,e=this.view,g=this.zoomFactor,h=this._getSelectedTarget();if(!h)return c=new b("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:h,view:e}),
    C.error(c),f.reject(c);var e=e.scale/g,k=this.get("selectedFeature.geometry")||c,l=k&&"point"===k.type&&this._isScreenSize(d);y.zoomToFeature.active=!0;y.zoomToFeature.disabled=!0;return this._zoomToLocation=c=this.callGoTo({target:{target:h,scale:l?e:void 0}}).then(function(){l&&(a.location=k);y.zoomToFeature.active=!1;y.zoomToFeature.disabled=!1;a._zoomToLocation=null}).catch(function(){y.zoomToFeature.active=!1;y.zoomToFeature.disabled=!1;a._zoomToLocation=null})};c.prototype._getSelectedTarget=
    function(){var a=this.selectedFeature,b=this.location,c=this.view;if(!c)return null;var c="3d"===c.type,d=this.get("selectedFeature.geometry");return c?a||b:d||b};c.prototype._fetchPopupFeatures=function(a){var c=this.view;this._cancelFetchingFeatures();if(!c||!a)return a=new b("fetch-features:invalid-screenPoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:a,view:c}),C.error(a),f.reject(a);var d=f.createAbortController();this._fetchFeaturesController=d;return c.fetchPopupFeatures(a,
    {defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:d.signal})};c.prototype._autoOpenEnabledChange=function(){var a=this,b=this._handles,c=this.autoOpenEnabled;b.remove("auto-fetch-features");c&&this.view&&(c=this.view.on("click",function(b){"mouse"===b.pointerType&&0!==b.button||a._fetchFeaturesAndOpen(b)},z.ViewEventPriorities.WIDGET),b.add(c,"auto-fetch-features"))};c.prototype._cancelFetchingFeatures=function(){var a=this._fetchFeaturesController;a&&a.abort();this._fetchFeaturesController=
    null};c.prototype._fetchFeatures=function(a){var c=this,d=this.view;if(!a||!d)return a=new b("open:invalid-location-or-view","Cannot fetch content without a location and view.",{location:a,view:d}),C.error(a),f.reject(a);a="function"===typeof d.toScreen?d.toScreen(a):null;return this._fetchPopupFeatures(a).then(function(a){c.promises=a.promises})};c.prototype._fetchFeaturesAndOpen=function(a){var b=a.mapPoint,c=this.view;this._fetchPopupFeatures(a.screenPoint).then(function(a){c.popup.open({location:a.location||
    b,promises:a.promises});return a})};c.prototype._updatePendingPromises=function(a){a&&this._pendingPromises.has(a)&&(this._pendingPromises.delete(a),this.notifyChange("pendingPromisesCount"))};c.prototype._setVisibleWhenContentExists=function(){var a=this,b=this._handles,c=this.promiseCount;b.remove("pendingVisible");c?(c=r.init(this,"pendingPromisesCount",function(c){a.featureCount&&(a.set("visible",!0),b.remove("pendingVisible"));c||b.remove("pendingVisible")}),b.add(c,"pendingVisible")):this.set("visible",
    !0)};c.prototype._autoClose=function(){this.autoCloseEnabled&&(this.visible=!1)};c.prototype._isScreenSize=function(a){var b=this.view;if("3d"!==b.type||!a||"esri.Graphic"!==a.declaredClass)return!0;if((b=b.getViewForGraphic(a))&&"whenGraphicBounds"in b){var c=!1;b.whenGraphicBounds(a,{useViewElevation:!0}).then(function(a){c=!a||!a.boundingBox||a.boundingBox[0]===a.boundingBox[3]&&a.boundingBox[1]===a.boundingBox[4]&&a.boundingBox[2]===a.boundingBox[5]});return c}return!0};c.prototype._getPointFromGeometry=
    function(a){return q.isNone(a)?null:"point"===a.type?a:"extent"===a.type?a.center:"polygon"===a.type?a.centroid:"multipoint"===a.type||"polyline"===a.type?a.extent.center:null};c.prototype._highlightFeature=function(){return g(this,void 0,void 0,function(){var a,b,c,d,e,f,g,k,l,m,n,p;return h(this,function(h){switch(h.label){case 0:return a="highlight",this._handles.remove(a),b=this,c=b.selectedFeature,d=b.highlightEnabled,e=b.view,f=b.visible,c&&e&&d&&f?(g=c.layer)?[4,e.when()]:[2]:[2];case 1:return h.sent(),
    [4,e.whenLayerView(g)];case 2:k=h.sent();if(!k||!A.hasHighlight(k))return[2];l=g.objectIdField;n=(m=c.attributes)&&m[l];p=k.highlight(n||c);this._handles.add(p,a);return[2]}})})};c.prototype._updateFeatures=function(a){var b=this.features;a&&a.length&&(b.length?(a=a.filter(function(a){return-1===b.indexOf(a)}),this.features=b.concat(a)):this.features=a)};e([t.property({type:E})],c.prototype,"actions",void 0);e([t.property({dependsOn:["actions.length","selectedFeature.sourceLayer.popupTemplate.actions.length",
    "selectedFeature.sourceLayer.popupTemplate.overwriteActions","selectedFeature.popupTemplate.actions.length","selectedFeature.popupTemplate.overwriteActions"],readOnly:!0})],c.prototype,"allActions",null);e([t.property({type:Boolean})],c.prototype,"defaultPopupTemplateEnabled",void 0);e([t.property()],c.prototype,"autoCloseEnabled",void 0);e([t.property()],c.prototype,"autoOpenEnabled",void 0);e([t.property()],c.prototype,"content",void 0);e([t.property({readOnly:!0,dependsOn:["features"]})],c.prototype,
    "featureCount",null);e([t.property()],c.prototype,"features",null);e([t.property()],c.prototype,"highlightEnabled",void 0);e([t.property({type:d.Point})],c.prototype,"location",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],c.prototype,"pendingPromisesCount",null);e([t.property({readOnly:!0,dependsOn:["featureCount","pendingPromisesCount"]})],c.prototype,"waitingForResult",null);e([t.property({readOnly:!0,dependsOn:["promises"]})],c.prototype,"promiseCount",null);e([t.property()],c.prototype,
    "promises",null);e([t.property({value:null,readOnly:!0,dependsOn:["features","selectedFeatureIndex","updateLocationEnabled"]})],c.prototype,"selectedFeature",null);e([t.property({value:-1})],c.prototype,"selectedFeatureIndex",null);e([t.property({readOnly:!0,dependsOn:["view.ready"]})],c.prototype,"state",null);e([t.property()],c.prototype,"title",void 0);e([t.property()],c.prototype,"updateLocationEnabled",void 0);e([t.property()],c.prototype,"view",void 0);e([t.property()],c.prototype,"visible",
    void 0);e([t.property()],c.prototype,"zoomFactor",void 0);e([t.property()],c.prototype,"centerAtLocation",null);e([t.property()],c.prototype,"zoomToLocation",null);return c=e([t.subclass("esri.widgets.Popup.PopupViewModel")],c)}(t.declared(D.GoToMixin(B)))})},"esri/views/support/layerViewUtils":function(){define(["require","exports","../../core/maybe"],function(c,a,m){Object.defineProperty(a,"__esModule",{value:!0});a.hasHighlight=function(a){return a&&"function"===typeof a.highlight};a.scaleBoundsPredicate=
    function(a,c,h){return m.isNone(a)||a>h&&(0===c||a<c)};a.extractSafeScaleBounds=function(a){return{minScale:a.minScale||0,maxScale:a.maxScale||0}}})},"esri/widgets/Popup/actions":function(){define("require exports dojo/i18n!../../nls/common dojo/i18n!./nls/Popup ../../core/Error ../../core/promiseUtils ../../support/actions/ActionButton".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,"__esModule",{value:!0});a.zoomToFeature=new g({id:"zoom-to-feature",title:e.zoom,className:"esri-icon-zoom-in-magnifying-glass"});
    a.removeSelectedFeature=new g({id:"remove-selected-feature",title:m.remove,className:"esri-icon-trash"});a.all=[a.zoomToFeature,a.removeSelectedFeature];a.triggerAction=function(c){var d=c.view;c=c.event.action;var b=d&&d.popup;if(!c)return h.reject(new l("trigger-action:missing-arguments","Event has no action"));if(!b)return h.reject(new l("trigger-action:missing-arguments","view.popup is missing"));var e=c.disabled,g=c.id;if(!g)return h.reject(new l("trigger-action:invalid-action","action.id is missing"));
    if(e)return h.reject(new l("trigger-action:invalid-action","Action is disabled"));if(g===a.zoomToFeature.id)return b.viewModel.zoomToLocation();if(g===a.removeSelectedFeature.id){b.close();c=b.selectedFeature;if(!c)return h.reject(new l("trigger-action:"+a.removeSelectedFeature.id,"selectedFeature is required",{selectedFeature:c}));(b=c.sourceLayer)?b.remove(c):d.graphics.remove(c);return h.resolve()}return h.reject(new l("trigger-action:unknown-action","Unable to identify action to perform",{action:c,
    popup:b}))}})},"esri/widgets/support/GoTo":function(){define(["require","exports","../../core/tsSupport/declareExtendsHelper","../../core/tsSupport/decorateHelper","../../core/accessorSupport/decorators"],function(c,a,m,e,l){Object.defineProperty(a,"__esModule",{value:!0});a.GoToMixin=function(a){return function(a){function c(){for(var c=[],b=0;b<arguments.length;b++)c[b]=arguments[b];c=a.apply(this,c)||this;c.goToOverride=null;c.view=null;return c}m(c,a);c.prototype.callGoTo=function(a){var b=this.view;
    return this.goToOverride?this.goToOverride(b,a):b.goTo(a.target,a.options)};e([l.property()],c.prototype,"goToOverride",void 0);e([l.property()],c.prototype,"view",void 0);return c=e([l.subclass("esri.widgets.support.GoTo")],c)}(l.declared(a))}})},"esri/views/interactive/ToolViewManagerManipulatorState":function(){define("require exports ../../core/iteratorUtils ../../core/mathUtils ../../core/maybe ../../core/screenUtils ./interactiveToolUtils".split(" "),function(c,a,m,e,l,h,g){Object.defineProperty(a,
    "__esModule",{value:!0});c=function(){function a(){this._hoveredManipulators=new Map;this._grabbedManipulators=new Map;this._draggedManipulators=new Map;this._stopDrag=!1;this._cursor=this._revertToActiveTool=null}Object.defineProperty(a.prototype,"cursor",{get:function(){return this._cursor},enumerable:!0,configurable:!0});a.prototype.handleInputEvent=function(a,c){var b=function(){return a.stopPropagation()};switch(a.type){case "drag":0<this._grabbedManipulators.size&&(this._stopDrag=!0);this._stopDrag&&
    (b(),"end"===a.action&&(this._stopDrag=!1));break;case "pointer-down":if("mouse"===a.pointerType&&0!==a.button||a.native.shiftKey)break;var g=h.createScreenPointFromEvent(a),f=this._intersect(g,a.pointerType,c.forEachTool);if(l.isNone(f))break;var m=this._findManipulatorByKey(f,c.forEachTool);l.isSome(m)&&m.interactive&&!m.grabbing&&(this._grabbedManipulators.set(a.pointerId,{key:f,start:g}),1===this._grabbedManipulators.size&&(this._revertToActiveTool=c.activeTool,c.setActiveTool(f.tool)),m.grabbing=
    !0,m.events.emit("grab",{action:"start",screenPoint:g}),b());break;case "pointer-up":this._handlePointerEnd(a,c);break;case "pointer-drag":if("mouse"===a.pointerType&&0!==a.button)break;var n=this._grabbedManipulators.get(a.pointerId),m=this._draggedManipulators.get(a.pointerId),f=l.applySome(n||m,function(a){return a.key}),p=this._findManipulatorByKey(f,c.forEachTool);if(l.isNone(p))break;g=h.createScreenPointFromEvent(a);g.x=e.clamp(g.x,0,c.view.width);g.y=e.clamp(g.y,0,c.view.height);n=l.expect(n||
    m).start;g={action:a.action,start:n,screenPoint:g};switch(a.action){case "start":case "update":if("update"===g.action||1===this._grabbedManipulators.size)p.dragging=!0,m||(g.action="start"),p.events.emit("drag",g),this._draggedManipulators.set(a.pointerId,{key:l.expect(f),start:n});break;case "end":m&&p.events.emit("drag",g),p.dragging=!1,this._draggedManipulators.delete(a.pointerId),this._handlePointerEnd(a,c)}b();break;case "immediate-click":g=h.createScreenPointFromEvent(a);f=this._intersect(g,
    a.pointerType,c.forEachTool);m=this._findToolAndManipulatorByKey(f,c.forEachTool,d);a.native.shiftKey||c.forEachTool(function(a){if(a.manipulators){var b=!1;a.manipulators.forEach(function(a){a=a.manipulator;a.selected&&(a.selected=!1,b=!0)});b&&a.manipulatorSelectionChanged&&a.manipulatorSelectionChanged()}});if(!m)break;m=d.manipulator;f=d.tool;if(!m.interactive)break;m.selectable&&(m.selected=!m.selected,f.manipulatorSelectionChanged&&f.manipulatorSelectionChanged());f=a.native.shiftKey;m.events.emit("immediate-click",
    {screenPoint:g,button:a.button,pointerType:a.pointerType,shiftKey:f,stopPropagation:b});break;case "click":g=h.createScreenPointFromEvent(a);f=this._intersect(g,a.pointerType,c.forEachTool);m=this._findManipulatorByKey(f,c.forEachTool);if(l.isNone(m)||!m.interactive)break;f=a.native.shiftKey;m.events.emit(a.type,{screenPoint:g,button:a.button,pointerType:a.pointerType,shiftKey:f});b();break;case "double-click":g=h.createScreenPointFromEvent(a),f=this._intersect(g,a.pointerType,c.forEachTool),m=this._findManipulatorByKey(f,
    c.forEachTool),!l.isNone(m)&&m.interactive&&(f=a.native.shiftKey,m.events.emit("double-click",{screenPoint:g,button:a.button,pointerType:a.pointerType,shiftKey:f,stopPropagation:b}))}this._updateCursor(c.forEachTool)};a.prototype._handlePointerEnd=function(a,c){var b=l.applySome(this._grabbedManipulators.get(a.pointerId),function(a){return a.key}),d=this._findManipulatorByKey(b,c.forEachTool);l.isSome(d)&&!d.dragging&&(b=l.isSome(c.creatingTool)&&c.creatingTool===l.expect(b).tool,1!==this._grabbedManipulators.size||
    0!==this._draggedManipulators.size||b||(c.setActiveTool(this._revertToActiveTool),this._revertToActiveTool=null),d.grabbing&&(d.grabbing=!1,d.events.emit("grab",{action:"end",screenPoint:h.createScreenPointFromEvent(a)})),this._grabbedManipulators.delete(a.pointerId))};a.prototype._cursorFromMap=function(a,c){var b=this,d=null;m.someMap(a,function(a){a=b._findManipulatorByKey(a.key,c);return l.isSome(a)&&a.interactive&&"cursor"in a&&a.cursor?(d=a.cursor,!0):!1});return d};a.prototype._updateCursor=
    function(a){this._cursor=0<this._grabbedManipulators.size?this._cursorFromMap(this._grabbedManipulators,a)||"grabbing":0<this._hoveredManipulators.size?this._cursorFromMap(this._hoveredManipulators,a)||"pointer":null};a.prototype.clearPointers=function(a,c,d,e){var b=this;void 0===d&&(d=!0);var g=function(b){return b.tool===a&&(l.isNone(e)||b.manipulatorId===e)};this._grabbedManipulators.forEach(function(a,d){a=a.key;g(a)&&(b._grabbedManipulators.delete(d),d=b._findManipulatorByKey(a,c),l.isSome(d)&&
    (d.grabbing=!1,d.events.emit("grab",{action:"end",screenPoint:null})))});this._draggedManipulators.forEach(function(a,d){a=a.key;g(a)&&(b._draggedManipulators.delete(d),d=b._findManipulatorByKey(a,c),l.isSome(d)&&(d.dragging=!1))});d&&this._hoveredManipulators.forEach(function(a,d){a=a.key;g(a)&&(b._hoveredManipulators.delete(d),d=b._findManipulatorByKey(a,c),l.isSome(d)&&(d.hovering=!1))});this._updateCursor(c)};a.prototype._intersect=function(a,c,d){var b=null;d(function(d){if(null==d.manipulators||
    !g.areToolManipulatorsEditable(d))return!1;var e=d.manipulators.intersect(a,c);if(l.isNone(e))return!1;b={manipulatorId:e,tool:d};return!0});return b};a.prototype.handleHoverEvent=function(a,c){if(("pointer-up"===a.type||"immediate-click"===a.type||"pointer-move"===a.type)&&"touch"!==a.pointerType){var b=l.applySome(this._hoveredManipulators.get(a.pointerId),function(a){return a.key}),b=this._findManipulatorByKey(b,c),d=this._intersect(h.createScreenPointFromEvent(a),a.pointerType,c),e=this._findManipulatorByKey(d,
    c);l.isSome(e)&&!e.interactive&&(e=null);b!==e&&(l.isSome(b)&&(b.hovering=!1),l.isSome(e)?(e.hovering=!0,this._hoveredManipulators.set(a.pointerId,{key:l.expect(d)})):this._hoveredManipulators.delete(a.pointerId),this._updateCursor(c))}};a.prototype._findManipulatorByKey=function(a,c){return this._findToolAndManipulatorByKey(a,c,d)?d.manipulator:null};a.prototype._findToolAndManipulatorByKey=function(a,c,d){if(l.isNone(a))return null;d.tool=null;d.manipulator=null;c(function(b){if(b!==a.tool||null==
    b.manipulators||!g.areToolManipulatorsEditable(b))return!1;var c=b.manipulators.findById(a.manipulatorId);return l.isSome(c)?(d.manipulator=c,d.tool=b,!0):!1});return null!=d.manipulator};return a}();a.default=c;var d={manipulator:null,tool:null}})},"esri/views/input/Input":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(c,a,m,e,
    l,h,g){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.gamepad=new g;return b}m(c,a);e([h.property({readOnly:!0})],c.prototype,"gamepad",void 0);return c=e([h.subclass("esri.views.input.Input")],c)}(h.declared(l))})},"esri/views/input/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/Collection ../../../core/accessorSupport/decorators ./GamepadInputDevice".split(" "),
    function(c,a,m,e,l,h,g,d){return function(a){function b(){var b=a.call(this)||this;b.devices=new h;b.enabledFocusMode="document";return b}m(b,a);e([g.property({type:h.ofType(d),readOnly:!0})],b.prototype,"devices",void 0);e([g.property({type:["document","view","none"]})],b.prototype,"enabledFocusMode",void 0);return b=e([g.subclass("esri.views.input.gamepad.GamepadSettings")],b)}(g.declared(l))})},"esri/views/input/gamepad/GamepadInputDevice":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h){var g=/^(3dconnexion|space(mouse|navigator|pilot|explorer))/i,d={standard:.15,spacemouse:.025,unknown:0};return function(a){function b(b){var c=a.call(this)||this;c.nativeIndex=null;c._detectedDeviceType="unknown";"standard"===b.mapping?c._detectedDeviceType="standard":g.test(b.id)?c._detectedDeviceType="spacemouse":c._detectedDeviceType="unknown";c.nativeIndex=b.index;return c}m(b,a);Object.defineProperty(b.prototype,"native",{get:function(){return(navigator.getGamepads?navigator.getGamepads():
    [])[this.nativeIndex]},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"deviceType",{get:function(){return this._detectedDeviceType},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"axisThreshold",{get:function(){return d[this.deviceType]},enumerable:!0,configurable:!0});e([h.property({nonNullable:!0,readOnly:!0})],b.prototype,"nativeIndex",void 0);e([h.property({type:String,readOnly:!0})],b.prototype,"deviceType",null);e([h.property({type:Number,readOnly:!0})],
    b.prototype,"axisThreshold",null);return b=e([h.subclass("esri.views.input.gamepad.GamepadInputDevice")],b)}(h.declared(l))})},"esri/views/navigation/Navigation":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ./gamepad/GamepadSettings".split(" "),function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.browserTouchPanEnabled=!0;b.gamepad=new g;b.momentumEnabled=
    !0;b.mouseWheelZoomEnabled=!0;return b}m(c,a);e([h.property({type:Boolean})],c.prototype,"browserTouchPanEnabled",void 0);e([h.property({type:g,nonNullable:!0})],c.prototype,"gamepad",void 0);e([h.property({type:Boolean})],c.prototype,"momentumEnabled",void 0);e([h.property({type:Boolean})],c.prototype,"mouseWheelZoomEnabled",void 0);return c=e([h.subclass("esri.views.navigation.Navigation")],c)}(h.declared(l))})},"esri/views/navigation/gamepad/GamepadSettings":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/accessorSupport/decorators ../../input/gamepad/GamepadInputDevice".split(" "),
    function(c,a,m,e,l,h,g){return function(a){function c(b){b=a.call(this,b)||this;b.enabled=!0;b.device=null;b.mode="pan";b.tiltDirection="forward-down";b.velocityFactor=1;return b}m(c,a);e([h.property({type:Boolean,nonNullable:!0})],c.prototype,"enabled",void 0);e([h.property({type:g})],c.prototype,"device",void 0);e([h.property({type:["pan","zoom"],nonNullable:!0})],c.prototype,"mode",void 0);e([h.property({type:["forward-down","forward-up"],nonNullable:!0})],c.prototype,"tiltDirection",void 0);e([h.property({type:Number,
    nonNullable:!0})],c.prototype,"velocityFactor",void 0);return c=e([h.subclass("esri.views.navigation.gamepad.GamepadSettings")],c)}(h.declared(l))})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/generatorHelper ../../core/tsSupport/awaiterHelper ../../core/Accessor ../../core/arrayUtils ../../core/Handles ../../core/Logger ../../core/promiseUtils ../../core/watchUtils ../../core/accessorSupport/decorators ../../geometry/support/heightModelInfoUtils ../../geometry/support/webMercatorUtils @dojo/framework/shim/Promise".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p,k,q,f,r){function t(a){return a?JSON.stringify(a.toJSON()):"undefined"}function u(a){switch(a){case 0:return"Waiting";case 1:return"Found";case 2:return"Exhausted"}return"Unknown: "+a}var w=b.getLogger("esri.views.support.DefaultsFromMap");return function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;b._handles=new n;b._waitTask=null;b._extentProjectController=null;b._spatialReferenceCandidates=null;b._extentCandidates=null;b.logDebugInformation=!1;b.isSpatialReferenceDone=
    !1;b.isTileInfoDone=!1;b.isHeightModelInfoSearching=!1;b.spatialReference=null;b.extent=null;b.heightModelInfo=null;b.vcsWkid=null;b.latestVcsWkid=null;b.mapCollectionPaths=g.DefaultMapCollectionPaths.slice();b.tileInfo=null;return b}m(b,a);g=b;b.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._running&&(a.reset(),a.start())})};b.prototype.destroy=function(){this._set("view",null);this._handles&&(this._handles.destroy(),this._handles=null);this._cancelLoading()};
    Object.defineProperty(b.prototype,"_running",{get:function(){return!!(this._handles&&0<this._handles.size)},enumerable:!0,configurable:!0});b.prototype.reset=function(){this._handles.removeAll();this._set("isSpatialReferenceDone",!1);this._set("isTileInfoDone",!1);this._set("isHeightModelInfoSearching",!1);this._set("spatialReference",null);this._set("extent",null);this._set("heightModelInfo",null);this._set("vcsWkid",null);this._set("latestVcsWkid",null);this._set("tileInfo",null);this._extentCandidates=
    this._spatialReferenceCandidates=null};b.prototype.start=function(){var a=this;this._handles.removeAll();for(var b=this._updateLayerChange.bind(this),c=0,d=this.mapCollectionPaths;c<d.length;c++)this._handles.add(k.on(this.view,"map."+d[c],"change",b,b,b,!0));this._handles.add(k.when(this,"isSpatialReferenceDone",function(){return a._updateTileInfo()},!0))};b.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};b.prototype._ensureLoadedOwnersFromCollectionName=
    function(a){for(var b=this._ownerNameFromCollectionName(a).split("."),c,d=0;d<b.length;d++){c=this.get(b.slice(0,d+1).join("."));if(!c)break;if(c.load&&!c.isFulfilled())return{collectionName:a,owner:null,loading:c.load()}}return{collectionName:a,owner:c}};b.prototype._cancelLoading=function(){this._waitTask=null;this._extentProjectController&&(this._extentProjectController.abort(),this._extentProjectController=null)};b.prototype._updateWhen=function(a){var b=this,c=!0,d=!1,e=a.catch(function(){}).then(function(){c?
    d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};b.prototype._updateLayerChange=function(){this.isSpatialReferenceDone&&!this.spatialReference&&this._set("isSpatialReferenceDone",!1);this._update()};b.prototype._update=function(){var a=this;this._cancelLoading();if(this.view){if(!this.isSpatialReferenceDone){this._debugLog("Starting search for spatial reference...");var b=this._processMapCollections(function(b){return a._processSpatialReferenceSource(b)});this._debugLog("Search ended with status '"+
    u(b)+"'");if(0!==b){var c=null,b=this._spatialReferenceCandidates;!b||1>b.length?(c=this.defaultSpatialReference,this._debugLog("No spatial reference found, locking to default ("+t(c)+")")):(this.defaultSpatialReference&&1<b.length&&-1<d.findIndex(b,function(b){return b.equals(a.defaultSpatialReference)})&&(b=[this.defaultSpatialReference]),c=b[0],this._debugLog("Locking to "+t(c)));this._set("spatialReference",c);c?this.extent?this._set("isSpatialReferenceDone",!0):(b=this.logDebugInformation,this.logDebugInformation=
    !1,this._processMapCollections(function(b){return a._findExtent(b,c)}),this.logDebugInformation=b,this._projectExtentCandidate().catch().then(function(){return a._set("isSpatialReferenceDone",!0)})):this._set("isSpatialReferenceDone",!0)}}null==this.heightModelInfo&&this.view.isHeightModelInfoRequired&&(this._debugLog("Starting search for height model info..."),b=this._processMapCollections(function(b){return a._processHeightModelInfoSource(b)},function(a){return f.mayHaveHeightModelInfo(a)}),this._debugLog("Search ended with status "+
    u(b)),this._set("isHeightModelInfoSearching",0===b));this._updateTileInfo()}};b.prototype._processMapCollections=function(a,b){var c=this;this._preloadMapCollections(b);var d=2;this._forAllMapCollectionSources(function(a){if(2!==d)return!1;c._debugLog("Processing collection "+a.collectionName+"...");return a.loading&&!c._updateWhen(a.loading)?(c._debugLog("Collection "+a.collectionName+" owner is loading -\x3e wait"),d=0,!1):!0},function(e){return 2!==d?!1:null==b||b(e)?!e.load||e.isFulfilled()||
    c._updateWhen(e.load())?e.load&&!e.isResolved()||!a(e)?!0:(d=1,!1):(c._debugLog("Source "+e.id+" is loading -\x3e wait"),d=0,!1):(c._debugLog("Source "+e.id+" is skipped due to predicate"),!1)});return d};b.prototype._preloadMapCollections=function(a){var b=this,c=10,d=this.logDebugInformation;this.logDebugInformation=!1;this._forAllMapCollectionSources(function(){return!0},function(e){if(0===c||null!=a&&!a(e))return!1;e.load&&!e.isFulfilled()&&(b.logDebugInformation=d,b._debugLog("Pre-loading source "+
    e.id),b.logDebugInformation=!1,e.load(),c--);return!0});this.logDebugInformation=d};b.prototype._forAllMapCollectionSources=function(a,b){for(var c=0,d=this.mapCollectionPaths;c<d.length;c++){var e="map."+d[c],f=this._ensureLoadedOwnersFromCollectionName(e);!1!==a(f)&&(f=f.owner,!f||f.isRejected&&f.isRejected()?this._debugLog("Collection "+e+" owner is invalid or rejected -\x3e skip"):(f=this.view.get(e))?this._forEachSource(f,b):this._debugLog("Collection "+e+" does not exist -\x3e skip"))}};b.prototype._forEachSource=
    function(a,b){var c=0;for(a=a.items;c<a.length;c++){var d=a[c];!1!==b(d)&&"layers"in d&&d.layers&&this._forEachSource(d.layers,b)}};b.prototype._processSpatialReferenceSource=function(a){var b=this._getSupportedSpatialReferences(a);if(0===b.length)return!1;this._spatialReferenceCandidates?(b=d.intersect(b,this._spatialReferenceCandidates,function(a,b){return a.equals(b)}),0<b.length?this._spatialReferenceCandidates=b:this._debugLog("Layer "+a.id+" is ignored because its supported spatial\n          references are not compatible with the previous candidates")):
    this._spatialReferenceCandidates=b;return 1===this._spatialReferenceCandidates.length};b.prototype._findExtent=function(a,b){var c="fullExtents"in a&&a.fullExtents||(a.fullExtent?[a.fullExtent]:[]),e=d.find(c,function(a){return a.spatialReference.equals(b)});if(e)return this._set("extent",e),!0;0<this._getSupportedSpatialReferences(a).length&&(c=c.map(function(b){return{extent:b,layer:a}}),this._extentCandidates=(this._extentCandidates||[]).concat(c));return!1};b.prototype._projectExtentCandidate=
    function(){return h(this,void 0,void 0,function(){var a,b,e,f,g;return l(this,function(h){switch(h.label){case 0:if(!this._extentCandidates||!this._extentCandidates.length)return[2];a=this.spatialReference;b=d.find(this._extentCandidates,function(b){return r.canProject(b.extent.spatialReference,a)});if(!b)return[3,1];this._set("extent",r.project(b.extent,a));return[3,7];case 1:return e=this._extentCandidates[0],this._extentProjectController=p.createAbortController(),[4,new Promise(function(a,b){c(["../../portal/support/geometryServiceUtils"],
    a,b)})];case 2:f=h.sent(),h.label=3;case 3:return h.trys.push([3,5,,6]),[4,f.projectGeometry(e.extent,a,e.layer.portalItem,this._extentProjectController.signal)];case 4:return g=h.sent(),this._set("extent",g),[3,6];case 5:return h.sent(),[3,6];case 6:this._extentProjectController=null,h.label=7;case 7:return[2]}})})};b.prototype._getSupportedSpatialReferences=function(a){var b=this,c="supportedSpatialReferences"in a&&a.supportedSpatialReferences||(a.spatialReference?[a.spatialReference]:[]);if(0===
    c.length)return this._debugLog("Layer "+a.id+" is ignored because it does not have any spatial references"),[];c=c.filter(function(c){return b.view.isSpatialReferenceSupported(c,a,function(a){return b._debugLog(a)})});0===c.length?this._debugLog("Layer "+a.id+" has spatial references but none of them are supported (or layer doesn't require locking)"):this._debugLog("Layer "+a.id+" has spatial references. Resulting candidate set: "+c.map(t).join(", "));return c};b.prototype._processHeightModelInfoSource=
    function(a){var b=f.deriveHeightModelInfoFromLayer(a);return b?(this._set("heightModelInfo",b),this._set("isHeightModelInfoSearching",!1),a.spatialReference&&(this._set("vcsWkid",a.spatialReference.vcsWkid),this._set("latestVcsWkid",a.spatialReference.latestVcsWkid)),!0):!1};b.prototype._updateTileInfo=function(){if(null==this.tileInfo)if(!this.view.isTileInfoRequired())this._set("isTileInfoDone",!0);else if(this.isSpatialReferenceDone){var a=this.get("view.map");if(a){var b=a.basemap,a=a.get("layers.0"),
    c=null;if(b&&"failed"!==b.loadStatus){if(!b.loaded){this._updateWhen(b.load());this._debugLog("updateTileInfo: basemap still loading");return}if((b=b&&b.get("baseLayers.0"))&&"failed"!==b.loadStatus)if(b.loaded)c="tileInfo"in b&&b.tileInfo;else{this._updateWhen(b.load());this._debugLog("updateTileInfo: first basemap layer still loading");return}else if(a&&"failed"!==a.loadStatus)if(a.loaded)c="tileInfo"in a&&a.tileInfo;else{this._updateWhen(a.load());this._debugLog("updateTileInfo: first operational layer still loading");
    return}else return}else if(a&&"failed"!==a.loadStatus)if(a.loaded)c="tileInfo"in a&&a.tileInfo;else{this._updateWhen(a.load());this._debugLog("updateTileInfo: first operational layer still loading");return}c&&!c.spatialReference.equals(this.spatialReference)&&(c=null);this._debugLog("updateTileInfo: setting "+c);this._set("tileInfo",c);this._set("isTileInfoDone",!0)}else this._debugLog("updateTileInfo: no map")}};b.prototype._debugLog=function(a){this.logDebugInformation&&w.info(a)};var g;b.DefaultMapCollectionPaths=
    ["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];e([q.property()],b.prototype,"logDebugInformation",void 0);e([q.property({readOnly:!0})],b.prototype,"isSpatialReferenceDone",void 0);e([q.property({readOnly:!0})],b.prototype,"isTileInfoDone",void 0);e([q.property({readOnly:!0})],b.prototype,"isHeightModelInfoSearching",void 0);e([q.property({constructOnly:!0})],b.prototype,"view",void 0);e([q.property({readOnly:!0})],b.prototype,"spatialReference",void 0);e([q.property({readOnly:!0})],
    b.prototype,"extent",void 0);e([q.property({readOnly:!0})],b.prototype,"heightModelInfo",void 0);e([q.property({readOnly:!0})],b.prototype,"vcsWkid",void 0);e([q.property({readOnly:!0})],b.prototype,"latestVcsWkid",void 0);e([q.property()],b.prototype,"mapCollectionPaths",void 0);e([q.property()],b.prototype,"defaultSpatialReference",void 0);e([q.property({readOnly:!0})],b.prototype,"tileInfo",void 0);return b=g=e([q.subclass("esri.views.support.DefaultsFromMap")],b)}(q.declared(g))})},"esri/geometry/support/heightModelInfoUtils":function(){define("require exports ../../core/compilerUtils ../../core/Error ../HeightModelInfo ../../layers/support/arcgisLayerUrl".split(" "),
    function(c,a,m,e,l,h){function g(a,b,c){if(!d(a)||!d(b))return 4;if(null==a||null==b)return 0;if(!c&&a.heightUnit!==b.heightUnit)return 1;if(a.heightModel!==b.heightModel)return 2;switch(a.heightModel){case "gravity-related-height":return 0;case "ellipsoidal":return a.vertCRS===b.vertCRS?0:3;default:return 4}}function d(a){return null==a||null!=a.heightModel&&null!=a.heightUnit}function n(a){var b=a.url&&h.parse(a.url);return(null!=(a.spatialReference&&a.spatialReference.vcsWkid)||!b||"ImageServer"!==
    b.serverType)&&"heightModelInfo"in a&&a.heightModelInfo?a.heightModelInfo:p(a)?l.deriveUnitFromSR(q,a.spatialReference):null}function b(a){if("unknown"===a.type||!("capabilities"in a))return!1;switch(a.type){case "csv":case "feature":case "geojson":case "stream":return!0;case "imagery":case "map-image":case "tile":case "vector-tile":case null:return!1;default:return m.neverReached(a),!1}}function p(a){return b(a)?!!(a.capabilities&&a.capabilities.data&&a.capabilities.data.supportsZ):k(a)}function k(a){switch(a.type){case "building-scene":case "elevation":case "integrated-mesh":case "point-cloud":case "scene":return!0;
    case "base-dynamic":case "base-elevation":case "base-tile":case "bing-maps":case "csv":case "geojson":case "feature":case "geo-rss":case "graphics":case "group":case "imagery":case "kml":case "map-image":case "map-notes":case "open-street-map":case "stream":case "tile":case "unknown":case "unsupported":case "vector-tile":case "web-tile":case "wms":case "wmts":case null:break;default:m.neverReached(a)}return!1}Object.defineProperty(a,"__esModule",{value:!0});a.validateWebSceneError=function(a,b){if(!a)return null;
    if(!d(a))return new e("webscene:unsupported-height-model-info","The vertical coordinate system of the scene is not supported",{heightModelInfo:a});var c=a.heightUnit;a=l.deriveUnitFromSR(a,b).heightUnit;return c!==a?new e("webscene:incompatible-height-unit","The vertical units of the scene ("+c+") must match the horizontal units of the scene ("+a+")",{verticalUnit:c,horizontalUnit:a}):null};a.rejectLayerError=function(a,b,c){var d=n(a),f=g(d,b,c),h=null;if(d){var k=l.deriveUnitFromSR(d,a.spatialReference).heightUnit;
    c||k===d.heightUnit||(h=new e("layerview:unmatched-height-unit","The vertical units of the layer must match the horizontal units ("+k+")",{horizontalUnit:k}))}if(!("heightModelInfo"in a&&null!=a.heightModelInfo||null!=a.spatialReference)&&p(a)||4===f||h)return new e("layerview:unsupported-height-model-info","The vertical coordinate system of the layer is not supported",{heightModelInfo:d,error:h});h=null;switch(f){case 1:a=d.heightUnit||"unknown";c=b.heightUnit||"unknown";h=new e("layerview:incompatible-height-unit",
    "The vertical units of the layer ("+a+") must match the vertical units of the scene ("+c+")",{layerUnit:a,sceneUnit:c});break;case 2:a=d.heightModel||"unknown";c=b.heightModel||"unknown";h=new e("layerview:incompatible-height-model","The height model of the layer ("+a+") must match the height model of the scene ("+c+")",{layerHeightModel:a,sceneHeightModel:c});break;case 3:a=d.vertCRS||"unknown",c=b.vertCRS||"unknown",h=new e("layerview:incompatible-vertical-datum","The vertical datum of the layer ("+
    a+") must match the vertical datum of the scene ("+c+")",{layerDatum:a,sceneDatum:c})}return h?new e("layerview:incompatible-height-model-info","The vertical coordinate system of the layer is incompatible with the scene",{layerHeightModelInfo:d,sceneHeightModelInfo:b,error:h}):null};a.deriveHeightModelInfoFromLayer=n;a.mayHaveHeightModelInfo=function(a){return null!=a.layers||k(a)||b(a)||"heightModelInfo"in a};var q=new l({heightModel:"gravity-related-height"})})},"esri/views/ViewAnimation":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/has ../core/Promise ../core/promiseUtils ../core/promiseUtils ../core/scheduling ../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){c=function(a){function c(b){b=a.call(this,b)||this;b.state="running";b.target=null;return b}m(c,a);c.prototype.initialize=function(){var a=this;this.addResolvingPromise(d.create(function(b,c){return a._dfd={resolve:b,reject:c}}))};Object.defineProperty(c.prototype,"done",{get:function(){return"finished"===this.state||"stopped"===this.state},enumerable:!0,configurable:!0});c.prototype.stop=function(){var a=this;"stopped"!==this.state&&"finished"!==this.state&&(this._set("state",
    "stopped"),h("esri-native-promise")?this._dfd.reject(new l("ViewAnimation stopped")):b.schedule(function(){return a._dfd.reject(new l("ViewAnimation stopped"))}))};c.prototype.finish=function(){"stopped"!==this.state&&"finished"!==this.state&&(this._set("state","finished"),h("esri-native-promise")?this._dfd.resolve():b.schedule(this._dfd.resolve))};c.prototype.update=function(a,b){b||(b=n.isPromiseLike(a)?"waiting-for-target":"running");this._set("target",a);this._set("state",b)};e([p.property({readOnly:!0,
    dependsOn:["state"]})],c.prototype,"done",null);e([p.property({readOnly:!0,type:String})],c.prototype,"state",void 0);e([p.property()],c.prototype,"target",void 0);return c=e([p.subclass("esri.views.ViewAnimation")],c)}(p.declared(g.EsriPromise));(c||(c={})).State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"};return c})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Evented ../../core/HandleOwner ../../core/Identifiable ../../core/Logger ../../core/Promise ../../core/accessorSupport/decorators".split(" "),
    function(c,a,m,e,l,h,g,d,n,b,p){return function(a){function b(b){b=a.call(this,b)||this;b.layer=null;b.parent=null;return b}m(b,a);b.prototype.initialize=function(){var a=this;this.addResolvingPromise(this.layer);this.when().catch(function(b){if("layerview:create-error"!==b.name){var c=a.layer&&a.layer.id||"no id",d=a.layer&&a.layer.title||"no title";n.getLogger(a.declaredClass).error("#resolve()","Failed to resolve layer view (layer title: '"+d+"', id: '"+c+"')",b);throw b;}})};b.prototype.destroy=
    function(){this.layer=this.parent=null};Object.defineProperty(b.prototype,"fullOpacity",{get:function(){var a=this.get("layer.opacity"),a=null==a?1:a,b=this.get("parent.fullOpacity");return a*(null==b?1:b)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"updating",{get:function(){return!!(this.updatingHandles&&this.updatingHandles.updating||this.isUpdating())},
    enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",a)},enumerable:!0,configurable:!0});b.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};b.prototype.isUpdating=function(){return!1};e([p.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],b.prototype,
    "fullOpacity",null);e([p.property()],b.prototype,"layer",void 0);e([p.property()],b.prototype,"parent",void 0);e([p.property({readOnly:!0,dependsOn:["visible","layer.loaded","parent.suspended"]})],b.prototype,"suspended",null);e([p.property({type:Boolean,dependsOn:["updatingHandles.updating"],readOnly:!0})],b.prototype,"updating",null);e([p.property({dependsOn:["layer.visible"]})],b.prototype,"visible",null);return b=e([p.subclass("esri.views.layers.LayerView")],b)}(p.declared(g.HandleOwnerMixin(d.IdentifiableMixin(b.EsriPromiseMixin(h.EventedMixin(l))))))})},
    "*now":function(c){c(['dojo/i18n!*preload*dojo/nls/dojo*["ar","bs","ca","cs","da","de","el","en-au","en-ca","en-gb","en-us","es","es-mx","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nl","nb","pl","pt","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});require.boot&&require.apply(null,require.boot);